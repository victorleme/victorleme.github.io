var app=function(){"use strict";function t(){}const e=t=>t;function n(t){return t()}function r(){return Object.create(null)}function i(t){t.forEach(n)}function o(t){return"function"==typeof t}function s(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function a(e,...n){if(null==e)return t;const r=e.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}function u(t){let e;return a(t,t=>e=t)(),e}function c(t,e,n){t.$$.on_destroy.push(a(e,n))}function l(t,e,n,r){if(t){const i=h(t,e,n,r);return t[0](i)}}function h(t,e,n,r){return t[1]&&r?function(t,e){for(const n in e)t[n]=e[n];return t}(n.ctx.slice(),t[1](r(e))):n.ctx}function f(t,e,n,r,i,o,s){const a=function(t,e,n,r){if(t[2]&&r){const i=t[2](r(n));if(void 0===e.dirty)return i;if("object"==typeof i){const t=[],n=Math.max(e.dirty.length,i.length);for(let r=0;r<n;r+=1)t[r]=e.dirty[r]|i[r];return t}return e.dirty|i}return e.dirty}(e,r,i,o);if(a){const i=h(e,n,r,s);t.p(i,a)}}function d(t){return null==t?"":t}function p(e){return e&&o(e.destroy)?e.destroy:t}const v="undefined"!=typeof window;let m=v?()=>window.performance.now():()=>Date.now(),y=v?t=>requestAnimationFrame(t):t;const g=new Set;function b(t){g.forEach(e=>{e.c(t)||(g.delete(e),e.f())}),0!==g.size&&y(b)}function _(t){let e;return 0===g.size&&y(b),{promise:new Promise(n=>{g.add(e={c:t,f:n})}),abort(){g.delete(e)}}}function w(t,e){t.appendChild(e)}function E(t,e,n){t.insertBefore(e,n||null)}function I(t){t.parentNode.removeChild(t)}function T(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function k(t){return document.createElement(t)}function S(t){return document.createTextNode(t)}function x(){return S(" ")}function O(){return S("")}function A(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function N(t){return function(e){return e.preventDefault(),t.call(this,e)}}function D(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function R(t,e){e=""+e,t.data!==e&&(t.data=e)}function C(t,e){t.value=null==e?"":e}function U(t,e,n,r){t.style.setProperty(e,n,r?"important":"")}function P(t,e,n){t.classList[n?"add":"remove"](e)}function L(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}const j=new Set;let M,V=0;function F(t,e,n,r,i,o,s,a=0){const u=16.666/r;let c="{\n";for(let t=0;t<=1;t+=u){const r=e+(n-e)*o(t);c+=100*t+`%{${s(r,1-r)}}\n`}const l=c+`100% {${s(n,1-n)}}\n}`,h=`__svelte_${function(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(l)}_${a}`,f=t.ownerDocument;j.add(f);const d=f.__svelte_stylesheet||(f.__svelte_stylesheet=f.head.appendChild(k("style")).sheet),p=f.__svelte_rules||(f.__svelte_rules={});p[h]||(p[h]=!0,d.insertRule(`@keyframes ${h} ${l}`,d.cssRules.length));const v=t.style.animation||"";return t.style.animation=`${v?v+", ":""}${h} ${r}ms linear ${i}ms 1 both`,V+=1,h}function $(t,e){const n=(t.style.animation||"").split(", "),r=n.filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")),i=n.length-r.length;i&&(t.style.animation=r.join(", "),V-=i,V||y(()=>{V||(j.forEach(t=>{const e=t.__svelte_stylesheet;let n=e.cssRules.length;for(;n--;)e.deleteRule(n);t.__svelte_rules={}}),j.clear())}))}function B(t){M=t}function W(){if(!M)throw new Error("Function called outside component initialization");return M}function q(t){W().$$.on_mount.push(t)}function z(){const t=W();return(e,n)=>{const r=t.$$.callbacks[e];if(r){const i=L(e,n);r.slice().forEach(e=>{e.call(t,i)})}}}const H=[],G=[],Y=[],K=[],X=Promise.resolve();let J=!1;function Z(t){Y.push(t)}let Q=!1;const tt=new Set;function et(){if(!Q){Q=!0;do{for(let t=0;t<H.length;t+=1){const e=H[t];B(e),nt(e.$$)}for(H.length=0;G.length;)G.pop()();for(let t=0;t<Y.length;t+=1){const e=Y[t];tt.has(e)||(tt.add(e),e())}Y.length=0}while(H.length);for(;K.length;)K.pop()();J=!1,Q=!1,tt.clear()}}function nt(t){if(null!==t.fragment){t.update(),i(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Z)}}let rt;function it(){return rt||(rt=Promise.resolve(),rt.then(()=>{rt=null})),rt}function ot(t,e,n){t.dispatchEvent(L(`${e?"intro":"outro"}${n}`))}const st=new Set;let at;function ut(){at={r:0,c:[],p:at}}function ct(){at.r||i(at.c),at=at.p}function lt(t,e){t&&t.i&&(st.delete(t),t.i(e))}function ht(t,e,n,r){if(t&&t.o){if(st.has(t))return;st.add(t),at.c.push(()=>{st.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}}const ft={duration:0};function dt(n,r,i){let s,a,u=r(n,i),c=!1,l=0;function h(){s&&$(n,s)}function f(){const{delay:r=0,duration:i=300,easing:o=e,tick:f=t,css:d}=u||ft;d&&(s=F(n,0,1,i,r,o,d,l++)),f(0,1);const p=m()+r,v=p+i;a&&a.abort(),c=!0,Z(()=>ot(n,!0,"start")),a=_(t=>{if(c){if(t>=v)return f(1,0),ot(n,!0,"end"),h(),c=!1;if(t>=p){const e=o((t-p)/i);f(e,1-e)}}return c})}let d=!1;return{start(){d||($(n),o(u)?(u=u(),it().then(f)):f())},invalidate(){d=!1},end(){c&&(h(),c=!1)}}}function pt(n,r,s){let a,u=r(n,s),c=!0;const l=at;function h(){const{delay:r=0,duration:o=300,easing:s=e,tick:h=t,css:f}=u||ft;f&&(a=F(n,1,0,o,r,s,f));const d=m()+r,p=d+o;Z(()=>ot(n,!1,"start")),_(t=>{if(c){if(t>=p)return h(0,1),ot(n,!1,"end"),--l.r||i(l.c),!1;if(t>=d){const e=s((t-d)/o);h(1-e,e)}}return c})}return l.r+=1,o(u)?it().then(()=>{u=u(),h()}):h(),{end(t){t&&u.tick&&u.tick(1,0),c&&(a&&$(n,a),c=!1)}}}function vt(n,r,s,a){let u=r(n,s),c=a?0:1,l=null,h=null,f=null;function d(){f&&$(n,f)}function p(t,e){const n=t.b-c;return e*=Math.abs(n),{a:c,b:t.b,d:n,duration:e,start:t.start,end:t.start+e,group:t.group}}function v(r){const{delay:o=0,duration:s=300,easing:a=e,tick:v=t,css:y}=u||ft,g={start:m()+o,b:r};r||(g.group=at,at.r+=1),l?h=g:(y&&(d(),f=F(n,c,r,s,o,a,y)),r&&v(0,1),l=p(g,s),Z(()=>ot(n,r,"start")),_(t=>{if(h&&t>h.start&&(l=p(h,s),h=null,ot(n,l.b,"start"),y&&(d(),f=F(n,c,l.b,l.duration,0,a,u.css))),l)if(t>=l.end)v(c=l.b,1-c),ot(n,l.b,"end"),h||(l.b?d():--l.group.r||i(l.group.c)),l=null;else if(t>=l.start){const e=t-l.start;c=l.a+l.d*a(e/l.duration),v(c,1-c)}return!(!l&&!h)}))}return{run(t){o(u)?it().then(()=>{u=u(),v(t)}):v(t)},end(){d(),l=h=null}}}function mt(t,e){const n=e.token={};function r(t,r,i,o){if(e.token!==n)return;e.resolved=o;let s=e.ctx;void 0!==i&&(s=s.slice(),s[i]=o);const a=t&&(e.current=t)(s);let u=!1;e.block&&(e.blocks?e.blocks.forEach((t,n)=>{n!==r&&t&&(ut(),ht(t,1,1,()=>{e.blocks[n]=null}),ct())}):e.block.d(1),a.c(),lt(a,1),a.m(e.mount(),e.anchor),u=!0),e.block=a,e.blocks&&(e.blocks[r]=a),u&&et()}if((i=t)&&"object"==typeof i&&"function"==typeof i.then){const n=W();if(t.then(t=>{B(n),r(e.then,1,e.value,t),B(null)},t=>{B(n),r(e.catch,2,e.error,t),B(null)}),e.current!==e.pending)return r(e.pending,0),!0}else{if(e.current!==e.then)return r(e.then,1,e.value,t),!0;e.resolved=t}var i}function yt(t,e){t.d(1),e.delete(t.key)}function gt(t,e){ht(t,1,1,()=>{e.delete(t.key)})}function bt(t,e,n,r,i,o,s,a,u,c,l,h){let f=t.length,d=o.length,p=f;const v={};for(;p--;)v[t[p].key]=p;const m=[],y=new Map,g=new Map;for(p=d;p--;){const t=h(i,o,p),a=n(t);let u=s.get(a);u?r&&u.p(t,e):(u=c(a,t),u.c()),y.set(a,m[p]=u),a in v&&g.set(a,Math.abs(p-v[a]))}const b=new Set,_=new Set;function w(t){lt(t,1),t.m(a,l),s.set(t.key,t),l=t.first,d--}for(;f&&d;){const e=m[d-1],n=t[f-1],r=e.key,i=n.key;e===n?(l=e.first,f--,d--):y.has(i)?!s.has(r)||b.has(r)?w(e):_.has(i)?f--:g.get(r)>g.get(i)?(_.add(r),w(e)):(b.add(i),f--):(u(n,s),f--)}for(;f--;){const e=t[f];y.has(e.key)||u(e,s)}for(;d;)w(m[d-1]);return m}function _t(t){t&&t.c()}function wt(t,e,r){const{fragment:s,on_mount:a,on_destroy:u,after_update:c}=t.$$;s&&s.m(e,r),Z(()=>{const e=a.map(n).filter(o);u?u.push(...e):i(e),t.$$.on_mount=[]}),c.forEach(Z)}function Et(t,e){const n=t.$$;null!==n.fragment&&(i(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function It(t,e){-1===t.$$.dirty[0]&&(H.push(t),J||(J=!0,X.then(et)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Tt(e,n,o,s,a,u,c=[-1]){const l=M;B(e);const h=n.props||{},f=e.$$={fragment:null,ctx:null,props:u,update:t,not_equal:a,bound:r(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(l?l.$$.context:[]),callbacks:r(),dirty:c};let d=!1;if(f.ctx=o?o(e,h,(t,n,...r)=>{const i=r.length?r[0]:n;return f.ctx&&a(f.ctx[t],f.ctx[t]=i)&&(f.bound[t]&&f.bound[t](i),d&&It(e,t)),n}):[],f.update(),d=!0,i(f.before_update),f.fragment=!!s&&s(f.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);f.fragment&&f.fragment.l(t),t.forEach(I)}else f.fragment&&f.fragment.c();n.intro&&lt(e.$$.fragment),wt(e,n.target,n.anchor),et()}B(l)}class kt{$destroy(){Et(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}const St=[];function xt(t,e){return{subscribe:Ot(t,e).subscribe}}function Ot(e,n=t){let r;const i=[];function o(t){if(s(e,t)&&(e=t,r)){const t=!St.length;for(let t=0;t<i.length;t+=1){const n=i[t];n[1](),St.push(n,e)}if(t){for(let t=0;t<St.length;t+=2)St[t][0](St[t+1]);St.length=0}}}return{set:o,update:function(t){o(t(e))},subscribe:function(s,a=t){const u=[s,a];return i.push(u),1===i.length&&(r=n(o)||t),s(e),()=>{const t=i.indexOf(u);-1!==t&&i.splice(t,1),0===i.length&&(r(),r=null)}}}}var At="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Nt(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}function Dt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Rt(t,e){return t(e={exports:{}},e.exports),e.exports}function Ct(t){return t&&t.default||t}const Ut=(0,Ct(Object.freeze({__proto__:null,derived:function(e,n,r){const s=!Array.isArray(e),u=s?[e]:e,c=n.length<2;return xt(r,e=>{let r=!1;const l=[];let h=0,f=t;const d=()=>{if(h)return;f();const r=n(s?l[0]:l,e);c?e(r):f=o(r)?r:t},p=u.map((t,e)=>a(t,t=>{l[e]=t,h&=~(1<<e),r&&d()},()=>{h|=1<<e}));return r=!0,d(),function(){i(p),f()}})},readable:xt,writable:Ot,get:u})).writable)({});var Pt={activeRoute:{subscribe:Ut.subscribe,set:function(t){Ut.set(t)},remove:function(){Ut.set({})}}},Lt=Pt.activeRoute;var jt={UrlParser:(t,e="")=>{const n=new URL(t);function r(){return o(e).reduce((t,e,n)=>(":"===e[0]&&t.push({value:e.slice(1),index:n}),t),[])}function i(){return o(n.pathname)}function o(t){return"/"===t||0===t.trim().length?[t]:("/"===t.slice(-1)&&(t=t.slice(0,-1)),"/"===t[0]&&(t=t.slice(1)),t.split("/"))}return Object.freeze({host:n.host,hostname:n.hostname,namedParams:function(){const t=i();return r().reduce((e,n)=>(e[n.value]=t[n.index],e),{})}(),namedParamsKeys:r().reduce((t,e)=>(t.push(e.value),t),[]),namedParamsValues:function(){const t=i();return r().reduce((e,n)=>(e.push(t[n.index]),e),[])}(),pathNames:i(),port:n.port,pathname:n.pathname,protocol:n.protocol,search:n.search,queryParams:function(){const t={};return n.searchParams.forEach((e,n)=>{t[n]=e}),t}(),queryParamsKeys:function(){const t=[];return n.searchParams.forEach((e,n)=>{t.push(n)}),t}(),queryParamsValues:function(){const t=[];return n.searchParams.forEach(e=>{t.push(e)}),t}()})}};function Mt(t,e){return(e=$t(e)).includes(":")?e.includes(t):e.startsWith(t)}function Vt(t,e,n){let r=!1;if(n)return{exists:e.lang&&e.lang[n]&&e.lang[n].includes(t),language:n};if(r=Mt(t,e.name),!r&&e.lang&&"object"==typeof e.lang)for(const[i,o]of Object.entries(e.lang))Mt(t,o)&&(r=!0,n=i);return{exists:r,language:n}}function Ft(t){return"/"===t||0===t.trim().length?[t]:(t=$t(t,"both")).split("/")}function $t(t,e="lead"){return t.trim().length<1?"":("trail"!==e&&"both"!==e||"/"===t.slice(-1)&&(t=t.slice(0,-1)),"lead"!==e&&"both"!==e||"/"===t[0]&&(t=t.slice(1)),t)}function Bt(t,e=null){return e&&t.lang&&t.lang[e]?t.lang[e]:t.name}var Wt={anyEmptyNestedRoutes:function t(e){let n=!1;return 0===Object.keys(e).length||(e.childRoute&&0===Object.keys(e.childRoute).length?n=!0:e.childRoute&&(n=t(e.childRoute)),n)},compareRoutes:Mt,findLocalisedRoute:Vt,getNamedParams:function(t=""){return 0===t.trim().length?[]:Ft(t).reduce((t,e)=>(":"===e[0]&&t.push(e.slice(1)),t),[])},getPathNames:Ft,nameToPath:function(t=""){let e;return"/"===t||0===t.trim().length?t:(e=(t=$t(t,"lead")).split(":")[0],e=$t(e,"trail"),e.toLowerCase())},pathWithQueryParams:function(t){let e=[];if(t.queryParams)for(let[n,r]of Object.entries(t.queryParams))e.push(`${n}=${r}`);return e.length>0?`${t.path}?${e.join("&")}`:t.path},pathWithoutQueryParams:function(t){return t.path.split("?")[0]},removeExtraPaths:function(t,e){const n=e.split("/");return n.length>1&&n.forEach((function(e,n){e.length>0&&n>0&&t.shift()})),t},removeSlash:$t,routeNameLocalised:Bt,startsWithNamedParam:function(t){return $t(t).startsWith(":")},updateRoutePath:function(t,e,n,r,i=!1){if("/"===t||0===t.trim().length)return{result:t,language:null};let o=t,s=n.name,a=r;if(i&&(a=""),s=$t(s),o=$t(o),n.childRoute)return{result:t,language:a};{let t=Vt(o,n,a);t.exists&&i&&(o=Bt(n,r));let u=s.split(":")[0];return u=$t(u,"trail"),u=u.split("/"),u.shift(),u.forEach(()=>{const s=e[0];if(t=Vt(`${o}/${s}`,n,a),!s||!t.exists)return{result:o,language:t.language};o=i?Bt(n,r):`${o}/${s}`,e.shift()}),{result:o,language:t.language}}}};const{UrlParser:qt}=jt,{pathWithQueryParams:zt,removeSlash:Ht}=Wt;var Gt={RouterCurrent:function(t){const e=t||!1;let n="";return Object.freeze({active:function(){return n},isActive:function(t,e=!1){"/"!==t[0]&&(t="/"+t);let r=qt("http://fake.com"+t).pathname,i=qt("http://fake.com"+n).pathname;return r=Ht(r,"trail"),i=Ht(i,"trail"),e?i.includes(r):i===r},setActive:function(t){n=t.path,function(t){if("undefined"!=typeof window){const r=zt(t);window.history.pushState({page:r},"",r),e&&(n=r,"undefined"!=typeof ga&&(ga("set","page",n),ga("send","pageview")))}var n}(t)}})}};var Yt={RouterGuard:function(t){const e=t;return Object.freeze({valid:function(){return e&&e.guard&&"function"==typeof e.guard},redirect:function(){return!e.guard()},redirectPath:function(){let t="/";return e.redirect&&e.redirect.length>0&&(t=e.redirect),t}})}};const{RouterGuard:Kt}=Yt;var Xt={RouterRedirect:function(t,e){const n=Kt(t.onlyIf);return Object.freeze({path:function(){let r=e;return t.redirectTo&&t.redirectTo.length>0&&(r=t.redirectTo),n.valid()&&n.redirect()&&(r=n.redirectPath()),r}})}};const{UrlParser:Jt}=jt;var Zt={RouterRoute:function({routeInfo:t,path:e,routeNamedParams:n,urlParser:r,namedPath:i,language:o}){function s(){const t=Jt("https://fake.com"+r.pathname,i).namedParams;return{...n,...t}}return Object.freeze({get:function(){return{name:e,component:t.component,layout:t.layout,queryParams:r.queryParams,namedParams:s(),path:e,language:o}},namedParams:s})}};const{updateRoutePath:Qt,getNamedParams:te,nameToPath:ee,removeExtraPaths:ne,routeNameLocalised:re}=Wt;var ie={RouterPath:function({basePath:t,basePathName:e,pathNames:n,convert:r,currentLanguage:i}){let o,s,a=i;function u(){return re(s,a)}function c(){return ee(u())}function l(){return ee(o.result)}return Object.freeze({basePathSameAsLocalised:function(){return l()===c()},updatedPath:function(t){return s=t,o=Qt(e,n,s,a,r),a=r?i:o.language,o},basePathNameWithoutNamedParams:l,localisedPathName:u,localisedRouteWithoutNamedParams:c,namedPath:function(){const e=u();return t?`${t}/${e}`:e},pathNames:n,routeLanguage:function(){return a},routePath:function(){let e=`${t}/${l()}`;"//"===e&&(e="/"),a&&(n=ne(n,c()));const r=te(u());return r&&r.length>0&&r.forEach((function(){n.length>0&&(e+="/"+n.shift())})),e}})}};const{UrlParser:oe}=jt,{RouterRedirect:se}=Xt,{RouterRoute:ae}=Zt,{RouterPath:ue}=ie,{anyEmptyNestedRoutes:ce,pathWithoutQueryParams:le,startsWithNamedParam:he}=Wt;var fe={RouterFinder:function({routes:t,currentUrl:e,routerOptions:n,convert:r}){const i=n.defaultLanguage,o=oe(e);let s="",a={},u=!1;return Object.freeze({findActiveRoute:function(){let e=function t(e,n,r,c,l){let h={},f=r.shift().toLowerCase();const d=ue({basePath:n,basePathName:f,pathNames:r,convert:l,currentLanguage:c});u=!1,e.forEach((function(e){if(d.updatedPath(e),function(t,e){const n=t.basePathSameAsLocalised();n&&(u=!0);return n||!u&&he(e)}(d,e.name)){let n=d.routePath();if(s=se(e,s).path(),h.name!==n&&(h=function({route:t,routePath:e,routeLanguage:n,urlParser:r,namedPath:o}){const s=ae({routeInfo:t,urlParser:r,path:e,routeNamedParams:a,namedPath:o,language:n||i});return a=s.namedParams(),s.get()}({route:e,routePath:n,routeLanguage:d.routeLanguage(),urlParser:o,namedPath:d.namedPath()})),e.nestedRoutes&&e.nestedRoutes.length>0&&d.pathNames.length>0)h.childRoute=t(e.nestedRoutes,n,d.pathNames,d.routeLanguage(),l),h.path=h.childRoute.path,h.language=h.childRoute.language;else if(function(t,e){return t.nestedRoutes&&t.nestedRoutes.length>0&&0===e.length}(e,d.pathNames)){const r=t(e.nestedRoutes,n,["index"],d.routeLanguage(),l);r&&Object.keys(r).length>0&&(h.childRoute=r,h.language=h.childRoute.language)}}})),s&&(h.redirectTo=s);return h}(t,"",o.pathNames,n.lang,r);return e&&Object.keys(e).length&&!ce(e)?e.path=le(e):"undefined"!=typeof window&&(e=function(e){const n=t.find(t=>"404"==t.name),r=e||i||"";return n?{...n,language:r,path:"404"}:{name:"404",component:"",path:"404",redirectTo:"/404.html"}}(n.lang)),e}})}};const{activeRoute:de}=Pt,{RouterCurrent:pe}=Gt,{RouterFinder:ve}=fe,{removeSlash:me}=Wt;let ye,ge=[],be={};function _e(t,e,n={}){function r(){let n=!1;return be.langConvertTo&&(be.lang=be.langConvertTo,n=!0),ve({routes:t,currentUrl:e,routerOptions:be,convert:n}).findActiveRoute()}return be={...n},void 0!==e&&""!==e||(e=document.location.href),ye=pe(be.gaPageviews),e=me(e,"trail"),ge=t,Object.freeze({setActiveRoute:function(){const t=r();return t.redirectTo?(e=t.redirectTo,"undefined"!=typeof window&&("/404.html"===e?ye.setActive({path:"/404.html"}):we(e)),e):(ye.setActive(t),de.set(t),t);var e},findActiveRoute:r})}function we(t,e=null){return t=me(t,"lead"),e&&(be.langConvertTo=e),_e(ge,"http://fake.com/"+t,be).setActiveRoute()}"undefined"!=typeof window&&(window.addEventListener("click",t=>{if(t.target.pathname&&t.target.hostname===window.location.hostname&&"a"===t.target.localName){t.preventDefault();let e=t.target.pathname+t.target.search;t.target.hash&&(e+=t.target.hash),we(t.target.pathname+t.target.search)}}),window.onpopstate=function(t){const e=window.location.pathname+window.location.search;window.location.hash&&(e+=window.location.hash),we(e)});var Ee={SpaRouter:_e,localisedRoute:function(t,e){return t=me(t,"lead"),be.langConvertTo=e,_e(ge,"http://fake.com/"+t,be).findActiveRoute()},navigateTo:we,routeIsActive:function(t,e=!1){return ye.isActive(t,e)}},Ie=Ee.SpaRouter,Te=Ee.localisedRoute,ke=Ee.navigateTo,Se=Ee.routeIsActive;function xe(t){let e,n;return e=new Re({props:{currentRoute:t[0].childRoute,params:t[1]}}),{c(){_t(e.$$.fragment)},m(t,r){wt(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.currentRoute=t[0].childRoute),2&n&&(r.params=t[1]),e.$set(r)},i(t){n||(lt(e.$$.fragment,t),n=!0)},o(t){ht(e.$$.fragment,t),n=!1},d(t){Et(e,t)}}}function Oe(t){let e,n,r;var i=t[0].component;function o(t){return{props:{currentRoute:{...t[0],component:""},params:t[1]}}}return i&&(e=new i(o(t))),{c(){e&&_t(e.$$.fragment),n=O()},m(t,i){e&&wt(e,t,i),E(t,n,i),r=!0},p(t,r){const s={};if(1&r&&(s.currentRoute={...t[0],component:""}),2&r&&(s.params=t[1]),i!==(i=t[0].component)){if(e){ut();const t=e;ht(t.$$.fragment,1,0,()=>{Et(t,1)}),ct()}i?(e=new i(o(t)),_t(e.$$.fragment),lt(e.$$.fragment,1),wt(e,n.parentNode,n)):e=null}else i&&e.$set(s)},i(t){r||(e&&lt(e.$$.fragment,t),r=!0)},o(t){e&&ht(e.$$.fragment,t),r=!1},d(t){t&&I(n),e&&Et(e,t)}}}function Ae(t){let e,n,r;var i=t[0].layout;function o(t){return{props:{currentRoute:{...t[0],layout:""},params:t[1]}}}return i&&(e=new i(o(t))),{c(){e&&_t(e.$$.fragment),n=O()},m(t,i){e&&wt(e,t,i),E(t,n,i),r=!0},p(t,r){const s={};if(1&r&&(s.currentRoute={...t[0],layout:""}),2&r&&(s.params=t[1]),i!==(i=t[0].layout)){if(e){ut();const t=e;ht(t.$$.fragment,1,0,()=>{Et(t,1)}),ct()}i?(e=new i(o(t)),_t(e.$$.fragment),lt(e.$$.fragment,1),wt(e,n.parentNode,n)):e=null}else i&&e.$set(s)},i(t){r||(e&&lt(e.$$.fragment,t),r=!0)},o(t){e&&ht(e.$$.fragment,t),r=!1},d(t){t&&I(n),e&&Et(e,t)}}}function Ne(t){let e,n,r,i;const o=[Ae,Oe,xe],s=[];function a(t,e){return t[0].layout?0:t[0].component?1:t[0].childRoute?2:-1}return~(e=a(t))&&(n=s[e]=o[e](t)),{c(){n&&n.c(),r=O()},m(t,n){~e&&s[e].m(t,n),E(t,r,n),i=!0},p(t,[i]){let u=e;e=a(t),e===u?~e&&s[e].p(t,i):(n&&(ut(),ht(s[u],1,1,()=>{s[u]=null}),ct()),~e?(n=s[e],n||(n=s[e]=o[e](t),n.c()),lt(n,1),n.m(r.parentNode,r)):n=null)},i(t){i||(lt(n),i=!0)},o(t){ht(n),i=!1},d(t){~e&&s[e].d(t),t&&I(r)}}}function De(t,e,n){let{currentRoute:r={}}=e,{params:i={}}=e;return t.$set=t=>{"currentRoute"in t&&n(0,r=t.currentRoute),"params"in t&&n(1,i=t.params)},[r,i]}class Re extends kt{constructor(t){super(),Tt(this,t,De,Ne,s,{currentRoute:0,params:1})}}var Ce=Object.freeze({__proto__:null,default:Re});function Ue(t){let e,n;return e=new Re({props:{currentRoute:t[0]}}),{c(){_t(e.$$.fragment)},m(t,r){wt(e,t,r),n=!0},p(t,[n]){const r={};1&n&&(r.currentRoute=t[0]),e.$set(r)},i(t){n||(lt(e.$$.fragment,t),n=!0)},o(t){ht(e.$$.fragment,t),n=!1},d(t){Et(e,t)}}}function Pe(t,e,n){let r;c(t,Lt,t=>n(0,r=t));let{routes:i=[]}=e,{options:o={}}=e;return q((function(){Ie(i,document.location.href,o).setActiveRoute()})),t.$set=t=>{"routes"in t&&n(1,i=t.routes),"options"in t&&n(2,o=t.options)},[r,i,o]}var Le=Object.freeze({__proto__:null,default:class extends kt{constructor(t){super(),Tt(this,t,Pe,Ue,s,{routes:1,options:2})}}});function je(t){let e,n,r,i;const o=t[6].default,s=l(o,t,t[5],null);return{c(){e=k("a"),s&&s.c(),D(e,"href",t[0]),D(e,"title",t[1]),D(e,"class",t[2]),P(e,"active",Se(t[0]))},m(o,a){E(o,e,a),s&&s.m(e,null),n=!0,r||(i=A(e,"click",t[3]),r=!0)},p(t,[r]){s&&s.p&&32&r&&f(s,o,t,t[5],r,null,null),(!n||1&r)&&D(e,"href",t[0]),(!n||2&r)&&D(e,"title",t[1]),(!n||4&r)&&D(e,"class",t[2]),5&r&&P(e,"active",Se(t[0]))},i(t){n||(lt(s,t),n=!0)},o(t){ht(s,t),n=!1},d(t){t&&I(e),s&&s.d(t),r=!1,i()}}}function Me(t,e,n){let{to:r="/"}=e,{title:i=""}=e,{styles:o=""}=e,{lang:s=null}=e;q((function(){if(s){const t=Te(r,s);t&&n(0,r=t.path)}}));let{$$slots:a={},$$scope:u}=e;return t.$set=t=>{"to"in t&&n(0,r=t.to),"title"in t&&n(1,i=t.title),"styles"in t&&n(2,o=t.styles),"lang"in t&&n(4,s=t.lang),"$$scope"in t&&n(5,u=t.$$scope)},[r,i,o,function(t){t.preventDefault(),t.stopPropagation(),ke(r)},s,u,a]}var Ve=Object.freeze({__proto__:null,default:class extends kt{constructor(t){super(),Tt(this,t,Me,je,s,{to:0,title:1,styles:2,lang:4})}}}),Fe=Ct(Ce),$e=Ct(Le),Be=Ct(Ve);const{SpaRouter:We,navigateTo:qe,localisedRoute:ze,routeIsActive:He}=Ee;var Ge={SpaRouter:We,localisedRoute:ze,navigateTo:qe,routeIsActive:He,Route:Fe,Router:$e,Navigate:Be},Ye=Ge.navigateTo,Ke=Ge.Route,Xe=Ge.Router;function Je(t){const e=t-1;return e*e*e+1}function Ze(t,{delay:e=0,duration:n=400,easing:r=Je,x:i=0,y:o=0,opacity:s=0}){const a=getComputedStyle(t),u=+a.opacity,c="none"===a.transform?"":a.transform,l=u*(1-s);return{delay:e,duration:n,easing:r,css:(t,e)=>`\n\t\t\ttransform: ${c} translate(${(1-t)*i}px, ${(1-t)*o}px);\n\t\t\topacity: ${u-l*e}`}}function Qe(t,{delay:e=0,duration:n=400,easing:r=Je}){const i=getComputedStyle(t),o=+i.opacity,s=parseFloat(i.height),a=parseFloat(i.paddingTop),u=parseFloat(i.paddingBottom),c=parseFloat(i.marginTop),l=parseFloat(i.marginBottom),h=parseFloat(i.borderTopWidth),f=parseFloat(i.borderBottomWidth);return{delay:e,duration:n,easing:r,css:t=>`overflow: hidden;opacity: ${Math.min(20*t,1)*o};height: ${t*s}px;padding-top: ${t*a}px;padding-bottom: ${t*u}px;margin-top: ${t*c}px;margin-bottom: ${t*l}px;border-top-width: ${t*h}px;border-bottom-width: ${t*f}px;`}}var tn=Rt((function(t,e){(function(){var n="Expected a function",r="__lodash_placeholder__",i=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],o="[object Arguments]",s="[object Array]",a="[object Boolean]",u="[object Date]",c="[object Error]",l="[object Function]",h="[object GeneratorFunction]",f="[object Map]",d="[object Number]",p="[object Object]",v="[object RegExp]",m="[object Set]",y="[object String]",g="[object Symbol]",b="[object WeakMap]",_="[object ArrayBuffer]",w="[object DataView]",E="[object Float32Array]",I="[object Float64Array]",T="[object Int8Array]",k="[object Int16Array]",S="[object Int32Array]",x="[object Uint8Array]",O="[object Uint16Array]",A="[object Uint32Array]",N=/\b__p \+= '';/g,D=/\b(__p \+=) '' \+/g,R=/(__e\(.*?\)|\b__t\)) \+\n'';/g,C=/&(?:amp|lt|gt|quot|#39);/g,U=/[&<>"']/g,P=RegExp(C.source),L=RegExp(U.source),j=/<%-([\s\S]+?)%>/g,M=/<%([\s\S]+?)%>/g,V=/<%=([\s\S]+?)%>/g,F=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,$=/^\w*$/,B=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,W=/[\\^$.*+?()[\]{}|]/g,q=RegExp(W.source),z=/^\s+|\s+$/g,H=/^\s+/,G=/\s+$/,Y=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,K=/\{\n\/\* \[wrapped with (.+)\] \*/,X=/,? & /,J=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Z=/\\(\\)?/g,Q=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,tt=/\w*$/,et=/^[-+]0x[0-9a-f]+$/i,nt=/^0b[01]+$/i,rt=/^\[object .+?Constructor\]$/,it=/^0o[0-7]+$/i,ot=/^(?:0|[1-9]\d*)$/,st=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,at=/($^)/,ut=/['\n\r\u2028\u2029\\]/g,ct="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",lt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ht="[\\ud800-\\udfff]",ft="["+lt+"]",dt="["+ct+"]",pt="\\d+",vt="[\\u2700-\\u27bf]",mt="[a-z\\xdf-\\xf6\\xf8-\\xff]",yt="[^\\ud800-\\udfff"+lt+pt+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",gt="\\ud83c[\\udffb-\\udfff]",bt="[^\\ud800-\\udfff]",_t="(?:\\ud83c[\\udde6-\\uddff]){2}",wt="[\\ud800-\\udbff][\\udc00-\\udfff]",Et="[A-Z\\xc0-\\xd6\\xd8-\\xde]",It="(?:"+mt+"|"+yt+")",Tt="(?:"+Et+"|"+yt+")",kt="(?:"+dt+"|"+gt+")"+"?",St="[\\ufe0e\\ufe0f]?"+kt+("(?:\\u200d(?:"+[bt,_t,wt].join("|")+")[\\ufe0e\\ufe0f]?"+kt+")*"),xt="(?:"+[vt,_t,wt].join("|")+")"+St,Ot="(?:"+[bt+dt+"?",dt,_t,wt,ht].join("|")+")",Nt=RegExp("['’]","g"),Dt=RegExp(dt,"g"),Rt=RegExp(gt+"(?="+gt+")|"+Ot+St,"g"),Ct=RegExp([Et+"?"+mt+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[ft,Et,"$"].join("|")+")",Tt+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[ft,Et+It,"$"].join("|")+")",Et+"?"+It+"+(?:['’](?:d|ll|m|re|s|t|ve))?",Et+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",pt,xt].join("|"),"g"),Ut=RegExp("[\\u200d\\ud800-\\udfff"+ct+"\\ufe0e\\ufe0f]"),Pt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Lt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],jt=-1,Mt={};Mt[E]=Mt[I]=Mt[T]=Mt[k]=Mt[S]=Mt[x]=Mt["[object Uint8ClampedArray]"]=Mt[O]=Mt[A]=!0,Mt[o]=Mt[s]=Mt[_]=Mt[a]=Mt[w]=Mt[u]=Mt[c]=Mt[l]=Mt[f]=Mt[d]=Mt[p]=Mt[v]=Mt[m]=Mt[y]=Mt[b]=!1;var Vt={};Vt[o]=Vt[s]=Vt[_]=Vt[w]=Vt[a]=Vt[u]=Vt[E]=Vt[I]=Vt[T]=Vt[k]=Vt[S]=Vt[f]=Vt[d]=Vt[p]=Vt[v]=Vt[m]=Vt[y]=Vt[g]=Vt[x]=Vt["[object Uint8ClampedArray]"]=Vt[O]=Vt[A]=!0,Vt[c]=Vt[l]=Vt[b]=!1;var Ft={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},$t=parseFloat,Bt=parseInt,Wt="object"==typeof At&&At&&At.Object===Object&&At,qt="object"==typeof self&&self&&self.Object===Object&&self,zt=Wt||qt||Function("return this")(),Ht=e&&!e.nodeType&&e,Gt=Ht&&t&&!t.nodeType&&t,Yt=Gt&&Gt.exports===Ht,Kt=Yt&&Wt.process,Xt=function(){try{var t=Gt&&Gt.require&&Gt.require("util").types;return t||Kt&&Kt.binding&&Kt.binding("util")}catch(t){}}(),Jt=Xt&&Xt.isArrayBuffer,Zt=Xt&&Xt.isDate,Qt=Xt&&Xt.isMap,te=Xt&&Xt.isRegExp,ee=Xt&&Xt.isSet,ne=Xt&&Xt.isTypedArray;function re(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function ie(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var s=t[i];e(r,s,n(s),t)}return r}function oe(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function se(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function ae(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function ue(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var s=t[n];e(s,n,t)&&(o[i++]=s)}return o}function ce(t,e){return!!(null==t?0:t.length)&&be(t,e,0)>-1}function le(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function he(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function fe(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function de(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function pe(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function ve(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var me=Ie("length");function ye(t,e,n){var r;return n(t,(function(t,n,i){if(e(t,n,i))return r=n,!1})),r}function ge(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}function be(t,e,n){return e==e?function(t,e,n){var r=n-1,i=t.length;for(;++r<i;)if(t[r]===e)return r;return-1}(t,e,n):ge(t,we,n)}function _e(t,e,n,r){for(var i=n-1,o=t.length;++i<o;)if(r(t[i],e))return i;return-1}function we(t){return t!=t}function Ee(t,e){var n=null==t?0:t.length;return n?Se(t,e)/n:NaN}function Ie(t){return function(e){return null==e?void 0:e[t]}}function Te(t){return function(e){return null==t?void 0:t[e]}}function ke(t,e,n,r,i){return i(t,(function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)})),n}function Se(t,e){for(var n,r=-1,i=t.length;++r<i;){var o=e(t[r]);void 0!==o&&(n=void 0===n?o:n+o)}return n}function xe(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function Oe(t){return function(e){return t(e)}}function Ae(t,e){return he(e,(function(e){return t[e]}))}function Ne(t,e){return t.has(e)}function De(t,e){for(var n=-1,r=t.length;++n<r&&be(e,t[n],0)>-1;);return n}function Re(t,e){for(var n=t.length;n--&&be(e,t[n],0)>-1;);return n}function Ce(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}var Ue=Te({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),Pe=Te({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Le(t){return"\\"+Ft[t]}function je(t){return Ut.test(t)}function Me(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function Ve(t,e){return function(n){return t(e(n))}}function Fe(t,e){for(var n=-1,i=t.length,o=0,s=[];++n<i;){var a=t[n];a!==e&&a!==r||(t[n]=r,s[o++]=n)}return s}function $e(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}function Be(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=[t,t]})),n}function We(t){return je(t)?function(t){var e=Rt.lastIndex=0;for(;Rt.test(t);)++e;return e}(t):me(t)}function qe(t){return je(t)?function(t){return t.match(Rt)||[]}(t):function(t){return t.split("")}(t)}var ze=Te({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var He=function t(e){var ct,lt=(e=null==e?zt:He.defaults(zt.Object(),e,He.pick(zt,Lt))).Array,ht=e.Date,ft=e.Error,dt=e.Function,pt=e.Math,vt=e.Object,mt=e.RegExp,yt=e.String,gt=e.TypeError,bt=lt.prototype,_t=dt.prototype,wt=vt.prototype,Et=e["__core-js_shared__"],It=_t.toString,Tt=wt.hasOwnProperty,kt=0,St=(ct=/[^.]+$/.exec(Et&&Et.keys&&Et.keys.IE_PROTO||""))?"Symbol(src)_1."+ct:"",xt=wt.toString,Ot=It.call(vt),At=zt._,Rt=mt("^"+It.call(Tt).replace(W,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ut=Yt?e.Buffer:void 0,Ft=e.Symbol,Wt=e.Uint8Array,qt=Ut?Ut.allocUnsafe:void 0,Ht=Ve(vt.getPrototypeOf,vt),Gt=vt.create,Kt=wt.propertyIsEnumerable,Xt=bt.splice,me=Ft?Ft.isConcatSpreadable:void 0,Te=Ft?Ft.iterator:void 0,Ge=Ft?Ft.toStringTag:void 0,Ye=function(){try{var t=Qi(vt,"defineProperty");return t({},"",{}),t}catch(t){}}(),Ke=e.clearTimeout!==zt.clearTimeout&&e.clearTimeout,Xe=ht&&ht.now!==zt.Date.now&&ht.now,Je=e.setTimeout!==zt.setTimeout&&e.setTimeout,Ze=pt.ceil,Qe=pt.floor,tn=vt.getOwnPropertySymbols,en=Ut?Ut.isBuffer:void 0,nn=e.isFinite,rn=bt.join,on=Ve(vt.keys,vt),sn=pt.max,an=pt.min,un=ht.now,cn=e.parseInt,ln=pt.random,hn=bt.reverse,fn=Qi(e,"DataView"),dn=Qi(e,"Map"),pn=Qi(e,"Promise"),vn=Qi(e,"Set"),mn=Qi(e,"WeakMap"),yn=Qi(vt,"create"),gn=mn&&new mn,bn={},_n=xo(fn),wn=xo(dn),En=xo(pn),In=xo(vn),Tn=xo(mn),kn=Ft?Ft.prototype:void 0,Sn=kn?kn.valueOf:void 0,xn=kn?kn.toString:void 0;function On(t){if(qs(t)&&!Cs(t)&&!(t instanceof Rn)){if(t instanceof Dn)return t;if(Tt.call(t,"__wrapped__"))return Oo(t)}return new Dn(t)}var An=function(){function t(){}return function(e){if(!Ws(e))return{};if(Gt)return Gt(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();function Nn(){}function Dn(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=void 0}function Rn(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function Cn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Un(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Pn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Ln(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Pn;++e<n;)this.add(t[e])}function jn(t){var e=this.__data__=new Un(t);this.size=e.size}function Mn(t,e){var n=Cs(t),r=!n&&Rs(t),i=!n&&!r&&js(t),o=!n&&!r&&!i&&Zs(t),s=n||r||i||o,a=s?xe(t.length,yt):[],u=a.length;for(var c in t)!e&&!Tt.call(t,c)||s&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||so(c,u))||a.push(c);return a}function Vn(t){var e=t.length;return e?t[Lr(0,e-1)]:void 0}function Fn(t,e){return To(yi(t),Kn(e,0,t.length))}function $n(t){return To(yi(t))}function Bn(t,e,n){(void 0!==n&&!As(t[e],n)||void 0===n&&!(e in t))&&Gn(t,e,n)}function Wn(t,e,n){var r=t[e];Tt.call(t,e)&&As(r,n)&&(void 0!==n||e in t)||Gn(t,e,n)}function qn(t,e){for(var n=t.length;n--;)if(As(t[n][0],e))return n;return-1}function zn(t,e,n,r){return tr(t,(function(t,i,o){e(r,t,n(t),o)})),r}function Hn(t,e){return t&&gi(e,_a(e),t)}function Gn(t,e,n){"__proto__"==e&&Ye?Ye(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function Yn(t,e){for(var n=-1,r=e.length,i=lt(r),o=null==t;++n<r;)i[n]=o?void 0:va(t,e[n]);return i}function Kn(t,e,n){return t==t&&(void 0!==n&&(t=t<=n?t:n),void 0!==e&&(t=t>=e?t:e)),t}function Xn(t,e,n,r,i,s){var c,b=1&e,N=2&e,D=4&e;if(n&&(c=i?n(t,r,i,s):n(t)),void 0!==c)return c;if(!Ws(t))return t;var R=Cs(t);if(R){if(c=function(t){var e=t.length,n=new t.constructor(e);e&&"string"==typeof t[0]&&Tt.call(t,"index")&&(n.index=t.index,n.input=t.input);return n}(t),!b)return yi(t,c)}else{var C=no(t),U=C==l||C==h;if(js(t))return hi(t,b);if(C==p||C==o||U&&!i){if(c=N||U?{}:io(t),!b)return N?function(t,e){return gi(t,eo(t),e)}(t,function(t,e){return t&&gi(e,wa(e),t)}(c,t)):function(t,e){return gi(t,to(t),e)}(t,Hn(c,t))}else{if(!Vt[C])return i?t:{};c=function(t,e,n){var r=t.constructor;switch(e){case _:return fi(t);case a:case u:return new r(+t);case w:return function(t,e){var n=e?fi(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case E:case I:case T:case k:case S:case x:case"[object Uint8ClampedArray]":case O:case A:return di(t,n);case f:return new r;case d:case y:return new r(t);case v:return function(t){var e=new t.constructor(t.source,tt.exec(t));return e.lastIndex=t.lastIndex,e}(t);case m:return new r;case g:return i=t,Sn?vt(Sn.call(i)):{}}var i}(t,C,b)}}s||(s=new jn);var P=s.get(t);if(P)return P;s.set(t,c),Ks(t)?t.forEach((function(r){c.add(Xn(r,e,n,r,t,s))})):zs(t)&&t.forEach((function(r,i){c.set(i,Xn(r,e,n,i,t,s))}));var L=R?void 0:(D?N?Hi:zi:N?wa:_a)(t);return oe(L||t,(function(r,i){L&&(r=t[i=r]),Wn(c,i,Xn(r,e,n,i,t,s))})),c}function Jn(t,e,n){var r=n.length;if(null==t)return!r;for(t=vt(t);r--;){var i=n[r],o=e[i],s=t[i];if(void 0===s&&!(i in t)||!o(s))return!1}return!0}function Zn(t,e,r){if("function"!=typeof t)throw new gt(n);return _o((function(){t.apply(void 0,r)}),e)}function Qn(t,e,n,r){var i=-1,o=ce,s=!0,a=t.length,u=[],c=e.length;if(!a)return u;n&&(e=he(e,Oe(n))),r?(o=le,s=!1):e.length>=200&&(o=Ne,s=!1,e=new Ln(e));t:for(;++i<a;){var l=t[i],h=null==n?l:n(l);if(l=r||0!==l?l:0,s&&h==h){for(var f=c;f--;)if(e[f]===h)continue t;u.push(l)}else o(e,h,r)||u.push(l)}return u}On.templateSettings={escape:j,evaluate:M,interpolate:V,variable:"",imports:{_:On}},On.prototype=Nn.prototype,On.prototype.constructor=On,Dn.prototype=An(Nn.prototype),Dn.prototype.constructor=Dn,Rn.prototype=An(Nn.prototype),Rn.prototype.constructor=Rn,Cn.prototype.clear=function(){this.__data__=yn?yn(null):{},this.size=0},Cn.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Cn.prototype.get=function(t){var e=this.__data__;if(yn){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return Tt.call(e,t)?e[t]:void 0},Cn.prototype.has=function(t){var e=this.__data__;return yn?void 0!==e[t]:Tt.call(e,t)},Cn.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=yn&&void 0===e?"__lodash_hash_undefined__":e,this},Un.prototype.clear=function(){this.__data__=[],this.size=0},Un.prototype.delete=function(t){var e=this.__data__,n=qn(e,t);return!(n<0)&&(n==e.length-1?e.pop():Xt.call(e,n,1),--this.size,!0)},Un.prototype.get=function(t){var e=this.__data__,n=qn(e,t);return n<0?void 0:e[n][1]},Un.prototype.has=function(t){return qn(this.__data__,t)>-1},Un.prototype.set=function(t,e){var n=this.__data__,r=qn(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},Pn.prototype.clear=function(){this.size=0,this.__data__={hash:new Cn,map:new(dn||Un),string:new Cn}},Pn.prototype.delete=function(t){var e=Ji(this,t).delete(t);return this.size-=e?1:0,e},Pn.prototype.get=function(t){return Ji(this,t).get(t)},Pn.prototype.has=function(t){return Ji(this,t).has(t)},Pn.prototype.set=function(t,e){var n=Ji(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},Ln.prototype.add=Ln.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},Ln.prototype.has=function(t){return this.__data__.has(t)},jn.prototype.clear=function(){this.__data__=new Un,this.size=0},jn.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},jn.prototype.get=function(t){return this.__data__.get(t)},jn.prototype.has=function(t){return this.__data__.has(t)},jn.prototype.set=function(t,e){var n=this.__data__;if(n instanceof Un){var r=n.__data__;if(!dn||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Pn(r)}return n.set(t,e),this.size=n.size,this};var tr=wi(ur),er=wi(cr,!0);function nr(t,e){var n=!0;return tr(t,(function(t,r,i){return n=!!e(t,r,i)})),n}function rr(t,e,n){for(var r=-1,i=t.length;++r<i;){var o=t[r],s=e(o);if(null!=s&&(void 0===a?s==s&&!Js(s):n(s,a)))var a=s,u=o}return u}function ir(t,e){var n=[];return tr(t,(function(t,r,i){e(t,r,i)&&n.push(t)})),n}function or(t,e,n,r,i){var o=-1,s=t.length;for(n||(n=oo),i||(i=[]);++o<s;){var a=t[o];e>0&&n(a)?e>1?or(a,e-1,n,r,i):fe(i,a):r||(i[i.length]=a)}return i}var sr=Ei(),ar=Ei(!0);function ur(t,e){return t&&sr(t,e,_a)}function cr(t,e){return t&&ar(t,e,_a)}function lr(t,e){return ue(e,(function(e){return Fs(t[e])}))}function hr(t,e){for(var n=0,r=(e=ai(e,t)).length;null!=t&&n<r;)t=t[So(e[n++])];return n&&n==r?t:void 0}function fr(t,e,n){var r=e(t);return Cs(t)?r:fe(r,n(t))}function dr(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":Ge&&Ge in vt(t)?function(t){var e=Tt.call(t,Ge),n=t[Ge];try{t[Ge]=void 0;var r=!0}catch(t){}var i=xt.call(t);r&&(e?t[Ge]=n:delete t[Ge]);return i}(t):function(t){return xt.call(t)}(t)}function pr(t,e){return t>e}function vr(t,e){return null!=t&&Tt.call(t,e)}function mr(t,e){return null!=t&&e in vt(t)}function yr(t,e,n){for(var r=n?le:ce,i=t[0].length,o=t.length,s=o,a=lt(o),u=1/0,c=[];s--;){var l=t[s];s&&e&&(l=he(l,Oe(e))),u=an(l.length,u),a[s]=!n&&(e||i>=120&&l.length>=120)?new Ln(s&&l):void 0}l=t[0];var h=-1,f=a[0];t:for(;++h<i&&c.length<u;){var d=l[h],p=e?e(d):d;if(d=n||0!==d?d:0,!(f?Ne(f,p):r(c,p,n))){for(s=o;--s;){var v=a[s];if(!(v?Ne(v,p):r(t[s],p,n)))continue t}f&&f.push(p),c.push(d)}}return c}function gr(t,e,n){var r=null==(t=mo(t,e=ai(e,t)))?t:t[So(Vo(e))];return null==r?void 0:re(r,t,n)}function br(t){return qs(t)&&dr(t)==o}function _r(t,e,n,r,i){return t===e||(null==t||null==e||!qs(t)&&!qs(e)?t!=t&&e!=e:function(t,e,n,r,i,l){var h=Cs(t),b=Cs(e),E=h?s:no(t),I=b?s:no(e),T=(E=E==o?p:E)==p,k=(I=I==o?p:I)==p,S=E==I;if(S&&js(t)){if(!js(e))return!1;h=!0,T=!1}if(S&&!T)return l||(l=new jn),h||Zs(t)?Wi(t,e,n,r,i,l):function(t,e,n,r,i,o,s){switch(n){case w:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case _:return!(t.byteLength!=e.byteLength||!o(new Wt(t),new Wt(e)));case a:case u:case d:return As(+t,+e);case c:return t.name==e.name&&t.message==e.message;case v:case y:return t==e+"";case f:var l=Me;case m:var h=1&r;if(l||(l=$e),t.size!=e.size&&!h)return!1;var p=s.get(t);if(p)return p==e;r|=2,s.set(t,e);var b=Wi(l(t),l(e),r,i,o,s);return s.delete(t),b;case g:if(Sn)return Sn.call(t)==Sn.call(e)}return!1}(t,e,E,n,r,i,l);if(!(1&n)){var x=T&&Tt.call(t,"__wrapped__"),O=k&&Tt.call(e,"__wrapped__");if(x||O){var A=x?t.value():t,N=O?e.value():e;return l||(l=new jn),i(A,N,n,r,l)}}if(!S)return!1;return l||(l=new jn),function(t,e,n,r,i,o){var s=1&n,a=zi(t),u=a.length,c=zi(e).length;if(u!=c&&!s)return!1;var l=u;for(;l--;){var h=a[l];if(!(s?h in e:Tt.call(e,h)))return!1}var f=o.get(t),d=o.get(e);if(f&&d)return f==e&&d==t;var p=!0;o.set(t,e),o.set(e,t);var v=s;for(;++l<u;){h=a[l];var m=t[h],y=e[h];if(r)var g=s?r(y,m,h,e,t,o):r(m,y,h,t,e,o);if(!(void 0===g?m===y||i(m,y,n,r,o):g)){p=!1;break}v||(v="constructor"==h)}if(p&&!v){var b=t.constructor,_=e.constructor;b==_||!("constructor"in t)||!("constructor"in e)||"function"==typeof b&&b instanceof b&&"function"==typeof _&&_ instanceof _||(p=!1)}return o.delete(t),o.delete(e),p}(t,e,n,r,i,l)}(t,e,n,r,_r,i))}function wr(t,e,n,r){var i=n.length,o=i,s=!r;if(null==t)return!o;for(t=vt(t);i--;){var a=n[i];if(s&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++i<o;){var u=(a=n[i])[0],c=t[u],l=a[1];if(s&&a[2]){if(void 0===c&&!(u in t))return!1}else{var h=new jn;if(r)var f=r(c,l,u,t,e,h);if(!(void 0===f?_r(l,c,3,r,h):f))return!1}}return!0}function Er(t){return!(!Ws(t)||function(t){return!!St&&St in t}(t))&&(Fs(t)?Rt:rt).test(xo(t))}function Ir(t){return"function"==typeof t?t:null==t?Ha:"object"==typeof t?Cs(t)?Ar(t[0],t[1]):Or(t):eu(t)}function Tr(t){if(!ho(t))return on(t);var e=[];for(var n in vt(t))Tt.call(t,n)&&"constructor"!=n&&e.push(n);return e}function kr(t){if(!Ws(t))return function(t){var e=[];if(null!=t)for(var n in vt(t))e.push(n);return e}(t);var e=ho(t),n=[];for(var r in t)("constructor"!=r||!e&&Tt.call(t,r))&&n.push(r);return n}function Sr(t,e){return t<e}function xr(t,e){var n=-1,r=Ps(t)?lt(t.length):[];return tr(t,(function(t,i,o){r[++n]=e(t,i,o)})),r}function Or(t){var e=Zi(t);return 1==e.length&&e[0][2]?po(e[0][0],e[0][1]):function(n){return n===t||wr(n,t,e)}}function Ar(t,e){return uo(t)&&fo(e)?po(So(t),e):function(n){var r=va(n,t);return void 0===r&&r===e?ma(n,t):_r(e,r,3)}}function Nr(t,e,n,r,i){t!==e&&sr(e,(function(o,s){if(i||(i=new jn),Ws(o))!function(t,e,n,r,i,o,s){var a=go(t,n),u=go(e,n),c=s.get(u);if(c)return void Bn(t,n,c);var l=o?o(a,u,n+"",t,e,s):void 0,h=void 0===l;if(h){var f=Cs(u),d=!f&&js(u),p=!f&&!d&&Zs(u);l=u,f||d||p?Cs(a)?l=a:Ls(a)?l=yi(a):d?(h=!1,l=hi(u,!0)):p?(h=!1,l=di(u,!0)):l=[]:Gs(u)||Rs(u)?(l=a,Rs(a)?l=sa(a):Ws(a)&&!Fs(a)||(l=io(u))):h=!1}h&&(s.set(u,l),i(l,u,r,o,s),s.delete(u));Bn(t,n,l)}(t,e,s,n,Nr,r,i);else{var a=r?r(go(t,s),o,s+"",t,e,i):void 0;void 0===a&&(a=o),Bn(t,s,a)}}),wa)}function Dr(t,e){var n=t.length;if(n)return so(e+=e<0?n:0,n)?t[e]:void 0}function Rr(t,e,n){e=e.length?he(e,(function(t){return Cs(t)?function(e){return hr(e,1===t.length?t[0]:t)}:t})):[Ha];var r=-1;return e=he(e,Oe(Xi())),function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}(xr(t,(function(t,n,i){return{criteria:he(e,(function(e){return e(t)})),index:++r,value:t}})),(function(t,e){return function(t,e,n){var r=-1,i=t.criteria,o=e.criteria,s=i.length,a=n.length;for(;++r<s;){var u=pi(i[r],o[r]);if(u){if(r>=a)return u;var c=n[r];return u*("desc"==c?-1:1)}}return t.index-e.index}(t,e,n)}))}function Cr(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var s=e[r],a=hr(t,s);n(a,s)&&$r(o,ai(s,t),a)}return o}function Ur(t,e,n,r){var i=r?_e:be,o=-1,s=e.length,a=t;for(t===e&&(e=yi(e)),n&&(a=he(t,Oe(n)));++o<s;)for(var u=0,c=e[o],l=n?n(c):c;(u=i(a,l,u,r))>-1;)a!==t&&Xt.call(a,u,1),Xt.call(t,u,1);return t}function Pr(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==o){var o=i;so(i)?Xt.call(t,i,1):Qr(t,i)}}return t}function Lr(t,e){return t+Qe(ln()*(e-t+1))}function jr(t,e){var n="";if(!t||e<1||e>9007199254740991)return n;do{e%2&&(n+=t),(e=Qe(e/2))&&(t+=t)}while(e);return n}function Mr(t,e){return wo(vo(t,e,Ha),t+"")}function Vr(t){return Vn(Aa(t))}function Fr(t,e){var n=Aa(t);return To(n,Kn(e,0,n.length))}function $r(t,e,n,r){if(!Ws(t))return t;for(var i=-1,o=(e=ai(e,t)).length,s=o-1,a=t;null!=a&&++i<o;){var u=So(e[i]),c=n;if("__proto__"===u||"constructor"===u||"prototype"===u)return t;if(i!=s){var l=a[u];void 0===(c=r?r(l,u,a):void 0)&&(c=Ws(l)?l:so(e[i+1])?[]:{})}Wn(a,u,c),a=a[u]}return t}var Br=gn?function(t,e){return gn.set(t,e),t}:Ha,Wr=Ye?function(t,e){return Ye(t,"toString",{configurable:!0,enumerable:!1,value:Wa(e),writable:!0})}:Ha;function qr(t){return To(Aa(t))}function zr(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),(n=n>i?i:n)<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=lt(i);++r<i;)o[r]=t[r+e];return o}function Hr(t,e){var n;return tr(t,(function(t,r,i){return!(n=e(t,r,i))})),!!n}function Gr(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e==e&&i<=2147483647){for(;r<i;){var o=r+i>>>1,s=t[o];null!==s&&!Js(s)&&(n?s<=e:s<e)?r=o+1:i=o}return i}return Yr(t,e,Ha,n)}function Yr(t,e,n,r){var i=0,o=null==t?0:t.length;if(0===o)return 0;for(var s=(e=n(e))!=e,a=null===e,u=Js(e),c=void 0===e;i<o;){var l=Qe((i+o)/2),h=n(t[l]),f=void 0!==h,d=null===h,p=h==h,v=Js(h);if(s)var m=r||p;else m=c?p&&(r||f):a?p&&f&&(r||!d):u?p&&f&&!d&&(r||!v):!d&&!v&&(r?h<=e:h<e);m?i=l+1:o=l}return an(o,4294967294)}function Kr(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var s=t[n],a=e?e(s):s;if(!n||!As(a,u)){var u=a;o[i++]=0===s?0:s}}return o}function Xr(t){return"number"==typeof t?t:Js(t)?NaN:+t}function Jr(t){if("string"==typeof t)return t;if(Cs(t))return he(t,Jr)+"";if(Js(t))return xn?xn.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Zr(t,e,n){var r=-1,i=ce,o=t.length,s=!0,a=[],u=a;if(n)s=!1,i=le;else if(o>=200){var c=e?null:ji(t);if(c)return $e(c);s=!1,i=Ne,u=new Ln}else u=e?[]:a;t:for(;++r<o;){var l=t[r],h=e?e(l):l;if(l=n||0!==l?l:0,s&&h==h){for(var f=u.length;f--;)if(u[f]===h)continue t;e&&u.push(h),a.push(l)}else i(u,h,n)||(u!==a&&u.push(h),a.push(l))}return a}function Qr(t,e){return null==(t=mo(t,e=ai(e,t)))||delete t[So(Vo(e))]}function ti(t,e,n,r){return $r(t,e,n(hr(t,e)),r)}function ei(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?zr(t,r?0:o,r?o+1:i):zr(t,r?o+1:0,r?i:o)}function ni(t,e){var n=t;return n instanceof Rn&&(n=n.value()),de(e,(function(t,e){return e.func.apply(e.thisArg,fe([t],e.args))}),n)}function ri(t,e,n){var r=t.length;if(r<2)return r?Zr(t[0]):[];for(var i=-1,o=lt(r);++i<r;)for(var s=t[i],a=-1;++a<r;)a!=i&&(o[i]=Qn(o[i]||s,t[a],e,n));return Zr(or(o,1),e,n)}function ii(t,e,n){for(var r=-1,i=t.length,o=e.length,s={};++r<i;){var a=r<o?e[r]:void 0;n(s,t[r],a)}return s}function oi(t){return Ls(t)?t:[]}function si(t){return"function"==typeof t?t:Ha}function ai(t,e){return Cs(t)?t:uo(t,e)?[t]:ko(aa(t))}var ui=Mr;function ci(t,e,n){var r=t.length;return n=void 0===n?r:n,!e&&n>=r?t:zr(t,e,n)}var li=Ke||function(t){return zt.clearTimeout(t)};function hi(t,e){if(e)return t.slice();var n=t.length,r=qt?qt(n):new t.constructor(n);return t.copy(r),r}function fi(t){var e=new t.constructor(t.byteLength);return new Wt(e).set(new Wt(t)),e}function di(t,e){var n=e?fi(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function pi(t,e){if(t!==e){var n=void 0!==t,r=null===t,i=t==t,o=Js(t),s=void 0!==e,a=null===e,u=e==e,c=Js(e);if(!a&&!c&&!o&&t>e||o&&s&&u&&!a&&!c||r&&s&&u||!n&&u||!i)return 1;if(!r&&!o&&!c&&t<e||c&&n&&i&&!r&&!o||a&&n&&i||!s&&i||!u)return-1}return 0}function vi(t,e,n,r){for(var i=-1,o=t.length,s=n.length,a=-1,u=e.length,c=sn(o-s,0),l=lt(u+c),h=!r;++a<u;)l[a]=e[a];for(;++i<s;)(h||i<o)&&(l[n[i]]=t[i]);for(;c--;)l[a++]=t[i++];return l}function mi(t,e,n,r){for(var i=-1,o=t.length,s=-1,a=n.length,u=-1,c=e.length,l=sn(o-a,0),h=lt(l+c),f=!r;++i<l;)h[i]=t[i];for(var d=i;++u<c;)h[d+u]=e[u];for(;++s<a;)(f||i<o)&&(h[d+n[s]]=t[i++]);return h}function yi(t,e){var n=-1,r=t.length;for(e||(e=lt(r));++n<r;)e[n]=t[n];return e}function gi(t,e,n,r){var i=!n;n||(n={});for(var o=-1,s=e.length;++o<s;){var a=e[o],u=r?r(n[a],t[a],a,n,t):void 0;void 0===u&&(u=t[a]),i?Gn(n,a,u):Wn(n,a,u)}return n}function bi(t,e){return function(n,r){var i=Cs(n)?ie:zn,o=e?e():{};return i(n,t,Xi(r,2),o)}}function _i(t){return Mr((function(e,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,s=i>2?n[2]:void 0;for(o=t.length>3&&"function"==typeof o?(i--,o):void 0,s&&ao(n[0],n[1],s)&&(o=i<3?void 0:o,i=1),e=vt(e);++r<i;){var a=n[r];a&&t(e,a,r,o)}return e}))}function wi(t,e){return function(n,r){if(null==n)return n;if(!Ps(n))return t(n,r);for(var i=n.length,o=e?i:-1,s=vt(n);(e?o--:++o<i)&&!1!==r(s[o],o,s););return n}}function Ei(t){return function(e,n,r){for(var i=-1,o=vt(e),s=r(e),a=s.length;a--;){var u=s[t?a:++i];if(!1===n(o[u],u,o))break}return e}}function Ii(t){return function(e){var n=je(e=aa(e))?qe(e):void 0,r=n?n[0]:e.charAt(0),i=n?ci(n,1).join(""):e.slice(1);return r[t]()+i}}function Ti(t){return function(e){return de(Fa(Ra(e).replace(Nt,"")),t,"")}}function ki(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=An(t.prototype),r=t.apply(n,e);return Ws(r)?r:n}}function Si(t){return function(e,n,r){var i=vt(e);if(!Ps(e)){var o=Xi(n,3);e=_a(e),n=function(t){return o(i[t],t,i)}}var s=t(e,n,r);return s>-1?i[o?e[s]:s]:void 0}}function xi(t){return qi((function(e){var r=e.length,i=r,o=Dn.prototype.thru;for(t&&e.reverse();i--;){var s=e[i];if("function"!=typeof s)throw new gt(n);if(o&&!a&&"wrapper"==Yi(s))var a=new Dn([],!0)}for(i=a?i:r;++i<r;){var u=Yi(s=e[i]),c="wrapper"==u?Gi(s):void 0;a=c&&co(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?a[Yi(c[0])].apply(a,c[3]):1==s.length&&co(s)?a[u]():a.thru(s)}return function(){var t=arguments,n=t[0];if(a&&1==t.length&&Cs(n))return a.plant(n).value();for(var i=0,o=r?e[i].apply(this,t):n;++i<r;)o=e[i].call(this,o);return o}}))}function Oi(t,e,n,r,i,o,s,a,u,c){var l=128&e,h=1&e,f=2&e,d=24&e,p=512&e,v=f?void 0:ki(t);return function m(){for(var y=arguments.length,g=lt(y),b=y;b--;)g[b]=arguments[b];if(d)var _=Ki(m),w=Ce(g,_);if(r&&(g=vi(g,r,i,d)),o&&(g=mi(g,o,s,d)),y-=w,d&&y<c){var E=Fe(g,_);return Pi(t,e,Oi,m.placeholder,n,g,E,a,u,c-y)}var I=h?n:this,T=f?I[t]:t;return y=g.length,a?g=yo(g,a):p&&y>1&&g.reverse(),l&&u<y&&(g.length=u),this&&this!==zt&&this instanceof m&&(T=v||ki(T)),T.apply(I,g)}}function Ai(t,e){return function(n,r){return function(t,e,n,r){return ur(t,(function(t,i,o){e(r,n(t),i,o)})),r}(n,t,e(r),{})}}function Ni(t,e){return function(n,r){var i;if(void 0===n&&void 0===r)return e;if(void 0!==n&&(i=n),void 0!==r){if(void 0===i)return r;"string"==typeof n||"string"==typeof r?(n=Jr(n),r=Jr(r)):(n=Xr(n),r=Xr(r)),i=t(n,r)}return i}}function Di(t){return qi((function(e){return e=he(e,Oe(Xi())),Mr((function(n){var r=this;return t(e,(function(t){return re(t,r,n)}))}))}))}function Ri(t,e){var n=(e=void 0===e?" ":Jr(e)).length;if(n<2)return n?jr(e,t):e;var r=jr(e,Ze(t/We(e)));return je(e)?ci(qe(r),0,t).join(""):r.slice(0,t)}function Ci(t){return function(e,n,r){return r&&"number"!=typeof r&&ao(e,n,r)&&(n=r=void 0),e=na(e),void 0===n?(n=e,e=0):n=na(n),function(t,e,n,r){for(var i=-1,o=sn(Ze((e-t)/(n||1)),0),s=lt(o);o--;)s[r?o:++i]=t,t+=n;return s}(e,n,r=void 0===r?e<n?1:-1:na(r),t)}}function Ui(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=oa(e),n=oa(n)),t(e,n)}}function Pi(t,e,n,r,i,o,s,a,u,c){var l=8&e;e|=l?32:64,4&(e&=~(l?64:32))||(e&=-4);var h=[t,e,i,l?o:void 0,l?s:void 0,l?void 0:o,l?void 0:s,a,u,c],f=n.apply(void 0,h);return co(t)&&bo(f,h),f.placeholder=r,Eo(f,t,e)}function Li(t){var e=pt[t];return function(t,n){if(t=oa(t),(n=null==n?0:an(ra(n),292))&&nn(t)){var r=(aa(t)+"e").split("e");return+((r=(aa(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}var ji=vn&&1/$e(new vn([,-0]))[1]==1/0?function(t){return new vn(t)}:Ja;function Mi(t){return function(e){var n=no(e);return n==f?Me(e):n==m?Be(e):function(t,e){return he(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function Vi(t,e,i,o,s,a,u,c){var l=2&e;if(!l&&"function"!=typeof t)throw new gt(n);var h=o?o.length:0;if(h||(e&=-97,o=s=void 0),u=void 0===u?u:sn(ra(u),0),c=void 0===c?c:ra(c),h-=s?s.length:0,64&e){var f=o,d=s;o=s=void 0}var p=l?void 0:Gi(t),v=[t,e,i,o,s,f,d,a,u,c];if(p&&function(t,e){var n=t[1],i=e[1],o=n|i,s=o<131,a=128==i&&8==n||128==i&&256==n&&t[7].length<=e[8]||384==i&&e[7].length<=e[8]&&8==n;if(!s&&!a)return t;1&i&&(t[2]=e[2],o|=1&n?0:4);var u=e[3];if(u){var c=t[3];t[3]=c?vi(c,u,e[4]):u,t[4]=c?Fe(t[3],r):e[4]}(u=e[5])&&(c=t[5],t[5]=c?mi(c,u,e[6]):u,t[6]=c?Fe(t[5],r):e[6]);(u=e[7])&&(t[7]=u);128&i&&(t[8]=null==t[8]?e[8]:an(t[8],e[8]));null==t[9]&&(t[9]=e[9]);t[0]=e[0],t[1]=o}(v,p),t=v[0],e=v[1],i=v[2],o=v[3],s=v[4],!(c=v[9]=void 0===v[9]?l?0:t.length:sn(v[9]-h,0))&&24&e&&(e&=-25),e&&1!=e)m=8==e||16==e?function(t,e,n){var r=ki(t);return function i(){for(var o=arguments.length,s=lt(o),a=o,u=Ki(i);a--;)s[a]=arguments[a];var c=o<3&&s[0]!==u&&s[o-1]!==u?[]:Fe(s,u);if((o-=c.length)<n)return Pi(t,e,Oi,i.placeholder,void 0,s,c,void 0,void 0,n-o);var l=this&&this!==zt&&this instanceof i?r:t;return re(l,this,s)}}(t,e,c):32!=e&&33!=e||s.length?Oi.apply(void 0,v):function(t,e,n,r){var i=1&e,o=ki(t);return function e(){for(var s=-1,a=arguments.length,u=-1,c=r.length,l=lt(c+a),h=this&&this!==zt&&this instanceof e?o:t;++u<c;)l[u]=r[u];for(;a--;)l[u++]=arguments[++s];return re(h,i?n:this,l)}}(t,e,i,o);else var m=function(t,e,n){var r=1&e,i=ki(t);return function e(){var o=this&&this!==zt&&this instanceof e?i:t;return o.apply(r?n:this,arguments)}}(t,e,i);return Eo((p?Br:bo)(m,v),t,e)}function Fi(t,e,n,r){return void 0===t||As(t,wt[n])&&!Tt.call(r,n)?e:t}function $i(t,e,n,r,i,o){return Ws(t)&&Ws(e)&&(o.set(e,t),Nr(t,e,void 0,$i,o),o.delete(e)),t}function Bi(t){return Gs(t)?void 0:t}function Wi(t,e,n,r,i,o){var s=1&n,a=t.length,u=e.length;if(a!=u&&!(s&&u>a))return!1;var c=o.get(t),l=o.get(e);if(c&&l)return c==e&&l==t;var h=-1,f=!0,d=2&n?new Ln:void 0;for(o.set(t,e),o.set(e,t);++h<a;){var p=t[h],v=e[h];if(r)var m=s?r(v,p,h,e,t,o):r(p,v,h,t,e,o);if(void 0!==m){if(m)continue;f=!1;break}if(d){if(!ve(e,(function(t,e){if(!Ne(d,e)&&(p===t||i(p,t,n,r,o)))return d.push(e)}))){f=!1;break}}else if(p!==v&&!i(p,v,n,r,o)){f=!1;break}}return o.delete(t),o.delete(e),f}function qi(t){return wo(vo(t,void 0,Uo),t+"")}function zi(t){return fr(t,_a,to)}function Hi(t){return fr(t,wa,eo)}var Gi=gn?function(t){return gn.get(t)}:Ja;function Yi(t){for(var e=t.name+"",n=bn[e],r=Tt.call(bn,e)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function Ki(t){return(Tt.call(On,"placeholder")?On:t).placeholder}function Xi(){var t=On.iteratee||Ga;return t=t===Ga?Ir:t,arguments.length?t(arguments[0],arguments[1]):t}function Ji(t,e){var n,r,i=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof e?"string":"hash"]:i.map}function Zi(t){for(var e=_a(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,fo(i)]}return e}function Qi(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return Er(n)?n:void 0}var to=tn?function(t){return null==t?[]:(t=vt(t),ue(tn(t),(function(e){return Kt.call(t,e)})))}:iu,eo=tn?function(t){for(var e=[];t;)fe(e,to(t)),t=Ht(t);return e}:iu,no=dr;function ro(t,e,n){for(var r=-1,i=(e=ai(e,t)).length,o=!1;++r<i;){var s=So(e[r]);if(!(o=null!=t&&n(t,s)))break;t=t[s]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&Bs(i)&&so(s,i)&&(Cs(t)||Rs(t))}function io(t){return"function"!=typeof t.constructor||ho(t)?{}:An(Ht(t))}function oo(t){return Cs(t)||Rs(t)||!!(me&&t&&t[me])}function so(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&ot.test(t))&&t>-1&&t%1==0&&t<e}function ao(t,e,n){if(!Ws(n))return!1;var r=typeof e;return!!("number"==r?Ps(n)&&so(e,n.length):"string"==r&&e in n)&&As(n[e],t)}function uo(t,e){if(Cs(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!Js(t))||($.test(t)||!F.test(t)||null!=e&&t in vt(e))}function co(t){var e=Yi(t),n=On[e];if("function"!=typeof n||!(e in Rn.prototype))return!1;if(t===n)return!0;var r=Gi(n);return!!r&&t===r[0]}(fn&&no(new fn(new ArrayBuffer(1)))!=w||dn&&no(new dn)!=f||pn&&"[object Promise]"!=no(pn.resolve())||vn&&no(new vn)!=m||mn&&no(new mn)!=b)&&(no=function(t){var e=dr(t),n=e==p?t.constructor:void 0,r=n?xo(n):"";if(r)switch(r){case _n:return w;case wn:return f;case En:return"[object Promise]";case In:return m;case Tn:return b}return e});var lo=Et?Fs:ou;function ho(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||wt)}function fo(t){return t==t&&!Ws(t)}function po(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in vt(n)))}}function vo(t,e,n){return e=sn(void 0===e?t.length-1:e,0),function(){for(var r=arguments,i=-1,o=sn(r.length-e,0),s=lt(o);++i<o;)s[i]=r[e+i];i=-1;for(var a=lt(e+1);++i<e;)a[i]=r[i];return a[e]=n(s),re(t,this,a)}}function mo(t,e){return e.length<2?t:hr(t,zr(e,0,-1))}function yo(t,e){for(var n=t.length,r=an(e.length,n),i=yi(t);r--;){var o=e[r];t[r]=so(o,n)?i[o]:void 0}return t}function go(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var bo=Io(Br),_o=Je||function(t,e){return zt.setTimeout(t,e)},wo=Io(Wr);function Eo(t,e,n){var r=e+"";return wo(t,function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(Y,"{\n/* [wrapped with "+e+"] */\n")}(r,function(t,e){return oe(i,(function(n){var r="_."+n[0];e&n[1]&&!ce(t,r)&&t.push(r)})),t.sort()}(function(t){var e=t.match(K);return e?e[1].split(X):[]}(r),n)))}function Io(t){var e=0,n=0;return function(){var r=un(),i=16-(r-n);if(n=r,i>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function To(t,e){var n=-1,r=t.length,i=r-1;for(e=void 0===e?r:e;++n<e;){var o=Lr(n,i),s=t[o];t[o]=t[n],t[n]=s}return t.length=e,t}var ko=function(t){var e=Is(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(B,(function(t,n,r,i){e.push(r?i.replace(Z,"$1"):n||t)})),e}));function So(t){if("string"==typeof t||Js(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function xo(t){if(null!=t){try{return It.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Oo(t){if(t instanceof Rn)return t.clone();var e=new Dn(t.__wrapped__,t.__chain__);return e.__actions__=yi(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var Ao=Mr((function(t,e){return Ls(t)?Qn(t,or(e,1,Ls,!0)):[]})),No=Mr((function(t,e){var n=Vo(e);return Ls(n)&&(n=void 0),Ls(t)?Qn(t,or(e,1,Ls,!0),Xi(n,2)):[]})),Do=Mr((function(t,e){var n=Vo(e);return Ls(n)&&(n=void 0),Ls(t)?Qn(t,or(e,1,Ls,!0),void 0,n):[]}));function Ro(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:ra(n);return i<0&&(i=sn(r+i,0)),ge(t,Xi(e,3),i)}function Co(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r-1;return void 0!==n&&(i=ra(n),i=n<0?sn(r+i,0):an(i,r-1)),ge(t,Xi(e,3),i,!0)}function Uo(t){return(null==t?0:t.length)?or(t,1):[]}function Po(t){return t&&t.length?t[0]:void 0}var Lo=Mr((function(t){var e=he(t,oi);return e.length&&e[0]===t[0]?yr(e):[]})),jo=Mr((function(t){var e=Vo(t),n=he(t,oi);return e===Vo(n)?e=void 0:n.pop(),n.length&&n[0]===t[0]?yr(n,Xi(e,2)):[]})),Mo=Mr((function(t){var e=Vo(t),n=he(t,oi);return(e="function"==typeof e?e:void 0)&&n.pop(),n.length&&n[0]===t[0]?yr(n,void 0,e):[]}));function Vo(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}var Fo=Mr($o);function $o(t,e){return t&&t.length&&e&&e.length?Ur(t,e):t}var Bo=qi((function(t,e){var n=null==t?0:t.length,r=Yn(t,e);return Pr(t,he(e,(function(t){return so(t,n)?+t:t})).sort(pi)),r}));function Wo(t){return null==t?t:hn.call(t)}var qo=Mr((function(t){return Zr(or(t,1,Ls,!0))})),zo=Mr((function(t){var e=Vo(t);return Ls(e)&&(e=void 0),Zr(or(t,1,Ls,!0),Xi(e,2))})),Ho=Mr((function(t){var e=Vo(t);return e="function"==typeof e?e:void 0,Zr(or(t,1,Ls,!0),void 0,e)}));function Go(t){if(!t||!t.length)return[];var e=0;return t=ue(t,(function(t){if(Ls(t))return e=sn(t.length,e),!0})),xe(e,(function(e){return he(t,Ie(e))}))}function Yo(t,e){if(!t||!t.length)return[];var n=Go(t);return null==e?n:he(n,(function(t){return re(e,void 0,t)}))}var Ko=Mr((function(t,e){return Ls(t)?Qn(t,e):[]})),Xo=Mr((function(t){return ri(ue(t,Ls))})),Jo=Mr((function(t){var e=Vo(t);return Ls(e)&&(e=void 0),ri(ue(t,Ls),Xi(e,2))})),Zo=Mr((function(t){var e=Vo(t);return e="function"==typeof e?e:void 0,ri(ue(t,Ls),void 0,e)})),Qo=Mr(Go);var ts=Mr((function(t){var e=t.length,n=e>1?t[e-1]:void 0;return n="function"==typeof n?(t.pop(),n):void 0,Yo(t,n)}));function es(t){var e=On(t);return e.__chain__=!0,e}function ns(t,e){return e(t)}var rs=qi((function(t){var e=t.length,n=e?t[0]:0,r=this.__wrapped__,i=function(e){return Yn(e,t)};return!(e>1||this.__actions__.length)&&r instanceof Rn&&so(n)?((r=r.slice(n,+n+(e?1:0))).__actions__.push({func:ns,args:[i],thisArg:void 0}),new Dn(r,this.__chain__).thru((function(t){return e&&!t.length&&t.push(void 0),t}))):this.thru(i)}));var is=bi((function(t,e,n){Tt.call(t,n)?++t[n]:Gn(t,n,1)}));var os=Si(Ro),ss=Si(Co);function as(t,e){return(Cs(t)?oe:tr)(t,Xi(e,3))}function us(t,e){return(Cs(t)?se:er)(t,Xi(e,3))}var cs=bi((function(t,e,n){Tt.call(t,n)?t[n].push(e):Gn(t,n,[e])}));var ls=Mr((function(t,e,n){var r=-1,i="function"==typeof e,o=Ps(t)?lt(t.length):[];return tr(t,(function(t){o[++r]=i?re(e,t,n):gr(t,e,n)})),o})),hs=bi((function(t,e,n){Gn(t,n,e)}));function fs(t,e){return(Cs(t)?he:xr)(t,Xi(e,3))}var ds=bi((function(t,e,n){t[n?0:1].push(e)}),(function(){return[[],[]]}));var ps=Mr((function(t,e){if(null==t)return[];var n=e.length;return n>1&&ao(t,e[0],e[1])?e=[]:n>2&&ao(e[0],e[1],e[2])&&(e=[e[0]]),Rr(t,or(e,1),[])})),vs=Xe||function(){return zt.Date.now()};function ms(t,e,n){return e=n?void 0:e,Vi(t,128,void 0,void 0,void 0,void 0,e=t&&null==e?t.length:e)}function ys(t,e){var r;if("function"!=typeof e)throw new gt(n);return t=ra(t),function(){return--t>0&&(r=e.apply(this,arguments)),t<=1&&(e=void 0),r}}var gs=Mr((function(t,e,n){var r=1;if(n.length){var i=Fe(n,Ki(gs));r|=32}return Vi(t,r,e,n,i)})),bs=Mr((function(t,e,n){var r=3;if(n.length){var i=Fe(n,Ki(bs));r|=32}return Vi(e,r,t,n,i)}));function _s(t,e,r){var i,o,s,a,u,c,l=0,h=!1,f=!1,d=!0;if("function"!=typeof t)throw new gt(n);function p(e){var n=i,r=o;return i=o=void 0,l=e,a=t.apply(r,n)}function v(t){return l=t,u=_o(y,e),h?p(t):a}function m(t){var n=t-c;return void 0===c||n>=e||n<0||f&&t-l>=s}function y(){var t=vs();if(m(t))return g(t);u=_o(y,function(t){var n=e-(t-c);return f?an(n,s-(t-l)):n}(t))}function g(t){return u=void 0,d&&i?p(t):(i=o=void 0,a)}function b(){var t=vs(),n=m(t);if(i=arguments,o=this,c=t,n){if(void 0===u)return v(c);if(f)return li(u),u=_o(y,e),p(c)}return void 0===u&&(u=_o(y,e)),a}return e=oa(e)||0,Ws(r)&&(h=!!r.leading,s=(f="maxWait"in r)?sn(oa(r.maxWait)||0,e):s,d="trailing"in r?!!r.trailing:d),b.cancel=function(){void 0!==u&&li(u),l=0,i=c=o=u=void 0},b.flush=function(){return void 0===u?a:g(vs())},b}var ws=Mr((function(t,e){return Zn(t,1,e)})),Es=Mr((function(t,e,n){return Zn(t,oa(e)||0,n)}));function Is(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new gt(n);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var s=t.apply(this,n);return r.cache=o.set(i,s)||o,s};return r.cache=new(Is.Cache||Pn),r}function Ts(t){if("function"!=typeof t)throw new gt(n);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}Is.Cache=Pn;var ks=ui((function(t,e){var n=(e=1==e.length&&Cs(e[0])?he(e[0],Oe(Xi())):he(or(e,1),Oe(Xi()))).length;return Mr((function(r){for(var i=-1,o=an(r.length,n);++i<o;)r[i]=e[i].call(this,r[i]);return re(t,this,r)}))})),Ss=Mr((function(t,e){return Vi(t,32,void 0,e,Fe(e,Ki(Ss)))})),xs=Mr((function(t,e){return Vi(t,64,void 0,e,Fe(e,Ki(xs)))})),Os=qi((function(t,e){return Vi(t,256,void 0,void 0,void 0,e)}));function As(t,e){return t===e||t!=t&&e!=e}var Ns=Ui(pr),Ds=Ui((function(t,e){return t>=e})),Rs=br(function(){return arguments}())?br:function(t){return qs(t)&&Tt.call(t,"callee")&&!Kt.call(t,"callee")},Cs=lt.isArray,Us=Jt?Oe(Jt):function(t){return qs(t)&&dr(t)==_};function Ps(t){return null!=t&&Bs(t.length)&&!Fs(t)}function Ls(t){return qs(t)&&Ps(t)}var js=en||ou,Ms=Zt?Oe(Zt):function(t){return qs(t)&&dr(t)==u};function Vs(t){if(!qs(t))return!1;var e=dr(t);return e==c||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!Gs(t)}function Fs(t){if(!Ws(t))return!1;var e=dr(t);return e==l||e==h||"[object AsyncFunction]"==e||"[object Proxy]"==e}function $s(t){return"number"==typeof t&&t==ra(t)}function Bs(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}function Ws(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function qs(t){return null!=t&&"object"==typeof t}var zs=Qt?Oe(Qt):function(t){return qs(t)&&no(t)==f};function Hs(t){return"number"==typeof t||qs(t)&&dr(t)==d}function Gs(t){if(!qs(t)||dr(t)!=p)return!1;var e=Ht(t);if(null===e)return!0;var n=Tt.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&It.call(n)==Ot}var Ys=te?Oe(te):function(t){return qs(t)&&dr(t)==v};var Ks=ee?Oe(ee):function(t){return qs(t)&&no(t)==m};function Xs(t){return"string"==typeof t||!Cs(t)&&qs(t)&&dr(t)==y}function Js(t){return"symbol"==typeof t||qs(t)&&dr(t)==g}var Zs=ne?Oe(ne):function(t){return qs(t)&&Bs(t.length)&&!!Mt[dr(t)]};var Qs=Ui(Sr),ta=Ui((function(t,e){return t<=e}));function ea(t){if(!t)return[];if(Ps(t))return Xs(t)?qe(t):yi(t);if(Te&&t[Te])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[Te]());var e=no(t);return(e==f?Me:e==m?$e:Aa)(t)}function na(t){return t?(t=oa(t))===1/0||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function ra(t){var e=na(t),n=e%1;return e==e?n?e-n:e:0}function ia(t){return t?Kn(ra(t),0,4294967295):0}function oa(t){if("number"==typeof t)return t;if(Js(t))return NaN;if(Ws(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Ws(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(z,"");var n=nt.test(t);return n||it.test(t)?Bt(t.slice(2),n?2:8):et.test(t)?NaN:+t}function sa(t){return gi(t,wa(t))}function aa(t){return null==t?"":Jr(t)}var ua=_i((function(t,e){if(ho(e)||Ps(e))gi(e,_a(e),t);else for(var n in e)Tt.call(e,n)&&Wn(t,n,e[n])})),ca=_i((function(t,e){gi(e,wa(e),t)})),la=_i((function(t,e,n,r){gi(e,wa(e),t,r)})),ha=_i((function(t,e,n,r){gi(e,_a(e),t,r)})),fa=qi(Yn);var da=Mr((function(t,e){t=vt(t);var n=-1,r=e.length,i=r>2?e[2]:void 0;for(i&&ao(e[0],e[1],i)&&(r=1);++n<r;)for(var o=e[n],s=wa(o),a=-1,u=s.length;++a<u;){var c=s[a],l=t[c];(void 0===l||As(l,wt[c])&&!Tt.call(t,c))&&(t[c]=o[c])}return t})),pa=Mr((function(t){return t.push(void 0,$i),re(Ia,void 0,t)}));function va(t,e,n){var r=null==t?void 0:hr(t,e);return void 0===r?n:r}function ma(t,e){return null!=t&&ro(t,e,mr)}var ya=Ai((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=xt.call(e)),t[e]=n}),Wa(Ha)),ga=Ai((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=xt.call(e)),Tt.call(t,e)?t[e].push(n):t[e]=[n]}),Xi),ba=Mr(gr);function _a(t){return Ps(t)?Mn(t):Tr(t)}function wa(t){return Ps(t)?Mn(t,!0):kr(t)}var Ea=_i((function(t,e,n){Nr(t,e,n)})),Ia=_i((function(t,e,n,r){Nr(t,e,n,r)})),Ta=qi((function(t,e){var n={};if(null==t)return n;var r=!1;e=he(e,(function(e){return e=ai(e,t),r||(r=e.length>1),e})),gi(t,Hi(t),n),r&&(n=Xn(n,7,Bi));for(var i=e.length;i--;)Qr(n,e[i]);return n}));var ka=qi((function(t,e){return null==t?{}:function(t,e){return Cr(t,e,(function(e,n){return ma(t,n)}))}(t,e)}));function Sa(t,e){if(null==t)return{};var n=he(Hi(t),(function(t){return[t]}));return e=Xi(e),Cr(t,n,(function(t,n){return e(t,n[0])}))}var xa=Mi(_a),Oa=Mi(wa);function Aa(t){return null==t?[]:Ae(t,_a(t))}var Na=Ti((function(t,e,n){return e=e.toLowerCase(),t+(n?Da(e):e)}));function Da(t){return Va(aa(t).toLowerCase())}function Ra(t){return(t=aa(t))&&t.replace(st,Ue).replace(Dt,"")}var Ca=Ti((function(t,e,n){return t+(n?"-":"")+e.toLowerCase()})),Ua=Ti((function(t,e,n){return t+(n?" ":"")+e.toLowerCase()})),Pa=Ii("toLowerCase");var La=Ti((function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}));var ja=Ti((function(t,e,n){return t+(n?" ":"")+Va(e)}));var Ma=Ti((function(t,e,n){return t+(n?" ":"")+e.toUpperCase()})),Va=Ii("toUpperCase");function Fa(t,e,n){return t=aa(t),void 0===(e=n?void 0:e)?function(t){return Pt.test(t)}(t)?function(t){return t.match(Ct)||[]}(t):function(t){return t.match(J)||[]}(t):t.match(e)||[]}var $a=Mr((function(t,e){try{return re(t,void 0,e)}catch(t){return Vs(t)?t:new ft(t)}})),Ba=qi((function(t,e){return oe(e,(function(e){e=So(e),Gn(t,e,gs(t[e],t))})),t}));function Wa(t){return function(){return t}}var qa=xi(),za=xi(!0);function Ha(t){return t}function Ga(t){return Ir("function"==typeof t?t:Xn(t,1))}var Ya=Mr((function(t,e){return function(n){return gr(n,t,e)}})),Ka=Mr((function(t,e){return function(n){return gr(t,n,e)}}));function Xa(t,e,n){var r=_a(e),i=lr(e,r);null!=n||Ws(e)&&(i.length||!r.length)||(n=e,e=t,t=this,i=lr(e,_a(e)));var o=!(Ws(n)&&"chain"in n&&!n.chain),s=Fs(t);return oe(i,(function(n){var r=e[n];t[n]=r,s&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__),i=n.__actions__=yi(this.__actions__);return i.push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,fe([this.value()],arguments))})})),t}function Ja(){}var Za=Di(he),Qa=Di(ae),tu=Di(ve);function eu(t){return uo(t)?Ie(So(t)):function(t){return function(e){return hr(e,t)}}(t)}var nu=Ci(),ru=Ci(!0);function iu(){return[]}function ou(){return!1}var su=Ni((function(t,e){return t+e}),0),au=Li("ceil"),uu=Ni((function(t,e){return t/e}),1),cu=Li("floor");var lu,hu=Ni((function(t,e){return t*e}),1),fu=Li("round"),du=Ni((function(t,e){return t-e}),0);return On.after=function(t,e){if("function"!=typeof e)throw new gt(n);return t=ra(t),function(){if(--t<1)return e.apply(this,arguments)}},On.ary=ms,On.assign=ua,On.assignIn=ca,On.assignInWith=la,On.assignWith=ha,On.at=fa,On.before=ys,On.bind=gs,On.bindAll=Ba,On.bindKey=bs,On.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return Cs(t)?t:[t]},On.chain=es,On.chunk=function(t,e,n){e=(n?ao(t,e,n):void 0===e)?1:sn(ra(e),0);var r=null==t?0:t.length;if(!r||e<1)return[];for(var i=0,o=0,s=lt(Ze(r/e));i<r;)s[o++]=zr(t,i,i+=e);return s},On.compact=function(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i},On.concat=function(){var t=arguments.length;if(!t)return[];for(var e=lt(t-1),n=arguments[0],r=t;r--;)e[r-1]=arguments[r];return fe(Cs(n)?yi(n):[n],or(e,1))},On.cond=function(t){var e=null==t?0:t.length,r=Xi();return t=e?he(t,(function(t){if("function"!=typeof t[1])throw new gt(n);return[r(t[0]),t[1]]})):[],Mr((function(n){for(var r=-1;++r<e;){var i=t[r];if(re(i[0],this,n))return re(i[1],this,n)}}))},On.conforms=function(t){return function(t){var e=_a(t);return function(n){return Jn(n,t,e)}}(Xn(t,1))},On.constant=Wa,On.countBy=is,On.create=function(t,e){var n=An(t);return null==e?n:Hn(n,e)},On.curry=function t(e,n,r){var i=Vi(e,8,void 0,void 0,void 0,void 0,void 0,n=r?void 0:n);return i.placeholder=t.placeholder,i},On.curryRight=function t(e,n,r){var i=Vi(e,16,void 0,void 0,void 0,void 0,void 0,n=r?void 0:n);return i.placeholder=t.placeholder,i},On.debounce=_s,On.defaults=da,On.defaultsDeep=pa,On.defer=ws,On.delay=Es,On.difference=Ao,On.differenceBy=No,On.differenceWith=Do,On.drop=function(t,e,n){var r=null==t?0:t.length;return r?zr(t,(e=n||void 0===e?1:ra(e))<0?0:e,r):[]},On.dropRight=function(t,e,n){var r=null==t?0:t.length;return r?zr(t,0,(e=r-(e=n||void 0===e?1:ra(e)))<0?0:e):[]},On.dropRightWhile=function(t,e){return t&&t.length?ei(t,Xi(e,3),!0,!0):[]},On.dropWhile=function(t,e){return t&&t.length?ei(t,Xi(e,3),!0):[]},On.fill=function(t,e,n,r){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&ao(t,e,n)&&(n=0,r=i),function(t,e,n,r){var i=t.length;for((n=ra(n))<0&&(n=-n>i?0:i+n),(r=void 0===r||r>i?i:ra(r))<0&&(r+=i),r=n>r?0:ia(r);n<r;)t[n++]=e;return t}(t,e,n,r)):[]},On.filter=function(t,e){return(Cs(t)?ue:ir)(t,Xi(e,3))},On.flatMap=function(t,e){return or(fs(t,e),1)},On.flatMapDeep=function(t,e){return or(fs(t,e),1/0)},On.flatMapDepth=function(t,e,n){return n=void 0===n?1:ra(n),or(fs(t,e),n)},On.flatten=Uo,On.flattenDeep=function(t){return(null==t?0:t.length)?or(t,1/0):[]},On.flattenDepth=function(t,e){return(null==t?0:t.length)?or(t,e=void 0===e?1:ra(e)):[]},On.flip=function(t){return Vi(t,512)},On.flow=qa,On.flowRight=za,On.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r},On.functions=function(t){return null==t?[]:lr(t,_a(t))},On.functionsIn=function(t){return null==t?[]:lr(t,wa(t))},On.groupBy=cs,On.initial=function(t){return(null==t?0:t.length)?zr(t,0,-1):[]},On.intersection=Lo,On.intersectionBy=jo,On.intersectionWith=Mo,On.invert=ya,On.invertBy=ga,On.invokeMap=ls,On.iteratee=Ga,On.keyBy=hs,On.keys=_a,On.keysIn=wa,On.map=fs,On.mapKeys=function(t,e){var n={};return e=Xi(e,3),ur(t,(function(t,r,i){Gn(n,e(t,r,i),t)})),n},On.mapValues=function(t,e){var n={};return e=Xi(e,3),ur(t,(function(t,r,i){Gn(n,r,e(t,r,i))})),n},On.matches=function(t){return Or(Xn(t,1))},On.matchesProperty=function(t,e){return Ar(t,Xn(e,1))},On.memoize=Is,On.merge=Ea,On.mergeWith=Ia,On.method=Ya,On.methodOf=Ka,On.mixin=Xa,On.negate=Ts,On.nthArg=function(t){return t=ra(t),Mr((function(e){return Dr(e,t)}))},On.omit=Ta,On.omitBy=function(t,e){return Sa(t,Ts(Xi(e)))},On.once=function(t){return ys(2,t)},On.orderBy=function(t,e,n,r){return null==t?[]:(Cs(e)||(e=null==e?[]:[e]),Cs(n=r?void 0:n)||(n=null==n?[]:[n]),Rr(t,e,n))},On.over=Za,On.overArgs=ks,On.overEvery=Qa,On.overSome=tu,On.partial=Ss,On.partialRight=xs,On.partition=ds,On.pick=ka,On.pickBy=Sa,On.property=eu,On.propertyOf=function(t){return function(e){return null==t?void 0:hr(t,e)}},On.pull=Fo,On.pullAll=$o,On.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?Ur(t,e,Xi(n,2)):t},On.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?Ur(t,e,void 0,n):t},On.pullAt=Bo,On.range=nu,On.rangeRight=ru,On.rearg=Os,On.reject=function(t,e){return(Cs(t)?ue:ir)(t,Ts(Xi(e,3)))},On.remove=function(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],o=t.length;for(e=Xi(e,3);++r<o;){var s=t[r];e(s,r,t)&&(n.push(s),i.push(r))}return Pr(t,i),n},On.rest=function(t,e){if("function"!=typeof t)throw new gt(n);return Mr(t,e=void 0===e?e:ra(e))},On.reverse=Wo,On.sampleSize=function(t,e,n){return e=(n?ao(t,e,n):void 0===e)?1:ra(e),(Cs(t)?Fn:Fr)(t,e)},On.set=function(t,e,n){return null==t?t:$r(t,e,n)},On.setWith=function(t,e,n,r){return r="function"==typeof r?r:void 0,null==t?t:$r(t,e,n,r)},On.shuffle=function(t){return(Cs(t)?$n:qr)(t)},On.slice=function(t,e,n){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&ao(t,e,n)?(e=0,n=r):(e=null==e?0:ra(e),n=void 0===n?r:ra(n)),zr(t,e,n)):[]},On.sortBy=ps,On.sortedUniq=function(t){return t&&t.length?Kr(t):[]},On.sortedUniqBy=function(t,e){return t&&t.length?Kr(t,Xi(e,2)):[]},On.split=function(t,e,n){return n&&"number"!=typeof n&&ao(t,e,n)&&(e=n=void 0),(n=void 0===n?4294967295:n>>>0)?(t=aa(t))&&("string"==typeof e||null!=e&&!Ys(e))&&!(e=Jr(e))&&je(t)?ci(qe(t),0,n):t.split(e,n):[]},On.spread=function(t,e){if("function"!=typeof t)throw new gt(n);return e=null==e?0:sn(ra(e),0),Mr((function(n){var r=n[e],i=ci(n,0,e);return r&&fe(i,r),re(t,this,i)}))},On.tail=function(t){var e=null==t?0:t.length;return e?zr(t,1,e):[]},On.take=function(t,e,n){return t&&t.length?zr(t,0,(e=n||void 0===e?1:ra(e))<0?0:e):[]},On.takeRight=function(t,e,n){var r=null==t?0:t.length;return r?zr(t,(e=r-(e=n||void 0===e?1:ra(e)))<0?0:e,r):[]},On.takeRightWhile=function(t,e){return t&&t.length?ei(t,Xi(e,3),!1,!0):[]},On.takeWhile=function(t,e){return t&&t.length?ei(t,Xi(e,3)):[]},On.tap=function(t,e){return e(t),t},On.throttle=function(t,e,r){var i=!0,o=!0;if("function"!=typeof t)throw new gt(n);return Ws(r)&&(i="leading"in r?!!r.leading:i,o="trailing"in r?!!r.trailing:o),_s(t,e,{leading:i,maxWait:e,trailing:o})},On.thru=ns,On.toArray=ea,On.toPairs=xa,On.toPairsIn=Oa,On.toPath=function(t){return Cs(t)?he(t,So):Js(t)?[t]:yi(ko(aa(t)))},On.toPlainObject=sa,On.transform=function(t,e,n){var r=Cs(t),i=r||js(t)||Zs(t);if(e=Xi(e,4),null==n){var o=t&&t.constructor;n=i?r?new o:[]:Ws(t)&&Fs(o)?An(Ht(t)):{}}return(i?oe:ur)(t,(function(t,r,i){return e(n,t,r,i)})),n},On.unary=function(t){return ms(t,1)},On.union=qo,On.unionBy=zo,On.unionWith=Ho,On.uniq=function(t){return t&&t.length?Zr(t):[]},On.uniqBy=function(t,e){return t&&t.length?Zr(t,Xi(e,2)):[]},On.uniqWith=function(t,e){return e="function"==typeof e?e:void 0,t&&t.length?Zr(t,void 0,e):[]},On.unset=function(t,e){return null==t||Qr(t,e)},On.unzip=Go,On.unzipWith=Yo,On.update=function(t,e,n){return null==t?t:ti(t,e,si(n))},On.updateWith=function(t,e,n,r){return r="function"==typeof r?r:void 0,null==t?t:ti(t,e,si(n),r)},On.values=Aa,On.valuesIn=function(t){return null==t?[]:Ae(t,wa(t))},On.without=Ko,On.words=Fa,On.wrap=function(t,e){return Ss(si(e),t)},On.xor=Xo,On.xorBy=Jo,On.xorWith=Zo,On.zip=Qo,On.zipObject=function(t,e){return ii(t||[],e||[],Wn)},On.zipObjectDeep=function(t,e){return ii(t||[],e||[],$r)},On.zipWith=ts,On.entries=xa,On.entriesIn=Oa,On.extend=ca,On.extendWith=la,Xa(On,On),On.add=su,On.attempt=$a,On.camelCase=Na,On.capitalize=Da,On.ceil=au,On.clamp=function(t,e,n){return void 0===n&&(n=e,e=void 0),void 0!==n&&(n=(n=oa(n))==n?n:0),void 0!==e&&(e=(e=oa(e))==e?e:0),Kn(oa(t),e,n)},On.clone=function(t){return Xn(t,4)},On.cloneDeep=function(t){return Xn(t,5)},On.cloneDeepWith=function(t,e){return Xn(t,5,e="function"==typeof e?e:void 0)},On.cloneWith=function(t,e){return Xn(t,4,e="function"==typeof e?e:void 0)},On.conformsTo=function(t,e){return null==e||Jn(t,e,_a(e))},On.deburr=Ra,On.defaultTo=function(t,e){return null==t||t!=t?e:t},On.divide=uu,On.endsWith=function(t,e,n){t=aa(t),e=Jr(e);var r=t.length,i=n=void 0===n?r:Kn(ra(n),0,r);return(n-=e.length)>=0&&t.slice(n,i)==e},On.eq=As,On.escape=function(t){return(t=aa(t))&&L.test(t)?t.replace(U,Pe):t},On.escapeRegExp=function(t){return(t=aa(t))&&q.test(t)?t.replace(W,"\\$&"):t},On.every=function(t,e,n){var r=Cs(t)?ae:nr;return n&&ao(t,e,n)&&(e=void 0),r(t,Xi(e,3))},On.find=os,On.findIndex=Ro,On.findKey=function(t,e){return ye(t,Xi(e,3),ur)},On.findLast=ss,On.findLastIndex=Co,On.findLastKey=function(t,e){return ye(t,Xi(e,3),cr)},On.floor=cu,On.forEach=as,On.forEachRight=us,On.forIn=function(t,e){return null==t?t:sr(t,Xi(e,3),wa)},On.forInRight=function(t,e){return null==t?t:ar(t,Xi(e,3),wa)},On.forOwn=function(t,e){return t&&ur(t,Xi(e,3))},On.forOwnRight=function(t,e){return t&&cr(t,Xi(e,3))},On.get=va,On.gt=Ns,On.gte=Ds,On.has=function(t,e){return null!=t&&ro(t,e,vr)},On.hasIn=ma,On.head=Po,On.identity=Ha,On.includes=function(t,e,n,r){t=Ps(t)?t:Aa(t),n=n&&!r?ra(n):0;var i=t.length;return n<0&&(n=sn(i+n,0)),Xs(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&be(t,e,n)>-1},On.indexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:ra(n);return i<0&&(i=sn(r+i,0)),be(t,e,i)},On.inRange=function(t,e,n){return e=na(e),void 0===n?(n=e,e=0):n=na(n),function(t,e,n){return t>=an(e,n)&&t<sn(e,n)}(t=oa(t),e,n)},On.invoke=ba,On.isArguments=Rs,On.isArray=Cs,On.isArrayBuffer=Us,On.isArrayLike=Ps,On.isArrayLikeObject=Ls,On.isBoolean=function(t){return!0===t||!1===t||qs(t)&&dr(t)==a},On.isBuffer=js,On.isDate=Ms,On.isElement=function(t){return qs(t)&&1===t.nodeType&&!Gs(t)},On.isEmpty=function(t){if(null==t)return!0;if(Ps(t)&&(Cs(t)||"string"==typeof t||"function"==typeof t.splice||js(t)||Zs(t)||Rs(t)))return!t.length;var e=no(t);if(e==f||e==m)return!t.size;if(ho(t))return!Tr(t).length;for(var n in t)if(Tt.call(t,n))return!1;return!0},On.isEqual=function(t,e){return _r(t,e)},On.isEqualWith=function(t,e,n){var r=(n="function"==typeof n?n:void 0)?n(t,e):void 0;return void 0===r?_r(t,e,void 0,n):!!r},On.isError=Vs,On.isFinite=function(t){return"number"==typeof t&&nn(t)},On.isFunction=Fs,On.isInteger=$s,On.isLength=Bs,On.isMap=zs,On.isMatch=function(t,e){return t===e||wr(t,e,Zi(e))},On.isMatchWith=function(t,e,n){return n="function"==typeof n?n:void 0,wr(t,e,Zi(e),n)},On.isNaN=function(t){return Hs(t)&&t!=+t},On.isNative=function(t){if(lo(t))throw new ft("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Er(t)},On.isNil=function(t){return null==t},On.isNull=function(t){return null===t},On.isNumber=Hs,On.isObject=Ws,On.isObjectLike=qs,On.isPlainObject=Gs,On.isRegExp=Ys,On.isSafeInteger=function(t){return $s(t)&&t>=-9007199254740991&&t<=9007199254740991},On.isSet=Ks,On.isString=Xs,On.isSymbol=Js,On.isTypedArray=Zs,On.isUndefined=function(t){return void 0===t},On.isWeakMap=function(t){return qs(t)&&no(t)==b},On.isWeakSet=function(t){return qs(t)&&"[object WeakSet]"==dr(t)},On.join=function(t,e){return null==t?"":rn.call(t,e)},On.kebabCase=Ca,On.last=Vo,On.lastIndexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r;return void 0!==n&&(i=(i=ra(n))<0?sn(r+i,0):an(i,r-1)),e==e?function(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}(t,e,i):ge(t,we,i,!0)},On.lowerCase=Ua,On.lowerFirst=Pa,On.lt=Qs,On.lte=ta,On.max=function(t){return t&&t.length?rr(t,Ha,pr):void 0},On.maxBy=function(t,e){return t&&t.length?rr(t,Xi(e,2),pr):void 0},On.mean=function(t){return Ee(t,Ha)},On.meanBy=function(t,e){return Ee(t,Xi(e,2))},On.min=function(t){return t&&t.length?rr(t,Ha,Sr):void 0},On.minBy=function(t,e){return t&&t.length?rr(t,Xi(e,2),Sr):void 0},On.stubArray=iu,On.stubFalse=ou,On.stubObject=function(){return{}},On.stubString=function(){return""},On.stubTrue=function(){return!0},On.multiply=hu,On.nth=function(t,e){return t&&t.length?Dr(t,ra(e)):void 0},On.noConflict=function(){return zt._===this&&(zt._=At),this},On.noop=Ja,On.now=vs,On.pad=function(t,e,n){t=aa(t);var r=(e=ra(e))?We(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return Ri(Qe(i),n)+t+Ri(Ze(i),n)},On.padEnd=function(t,e,n){t=aa(t);var r=(e=ra(e))?We(t):0;return e&&r<e?t+Ri(e-r,n):t},On.padStart=function(t,e,n){t=aa(t);var r=(e=ra(e))?We(t):0;return e&&r<e?Ri(e-r,n)+t:t},On.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),cn(aa(t).replace(H,""),e||0)},On.random=function(t,e,n){if(n&&"boolean"!=typeof n&&ao(t,e,n)&&(e=n=void 0),void 0===n&&("boolean"==typeof e?(n=e,e=void 0):"boolean"==typeof t&&(n=t,t=void 0)),void 0===t&&void 0===e?(t=0,e=1):(t=na(t),void 0===e?(e=t,t=0):e=na(e)),t>e){var r=t;t=e,e=r}if(n||t%1||e%1){var i=ln();return an(t+i*(e-t+$t("1e-"+((i+"").length-1))),e)}return Lr(t,e)},On.reduce=function(t,e,n){var r=Cs(t)?de:ke,i=arguments.length<3;return r(t,Xi(e,4),n,i,tr)},On.reduceRight=function(t,e,n){var r=Cs(t)?pe:ke,i=arguments.length<3;return r(t,Xi(e,4),n,i,er)},On.repeat=function(t,e,n){return e=(n?ao(t,e,n):void 0===e)?1:ra(e),jr(aa(t),e)},On.replace=function(){var t=arguments,e=aa(t[0]);return t.length<3?e:e.replace(t[1],t[2])},On.result=function(t,e,n){var r=-1,i=(e=ai(e,t)).length;for(i||(i=1,t=void 0);++r<i;){var o=null==t?void 0:t[So(e[r])];void 0===o&&(r=i,o=n),t=Fs(o)?o.call(t):o}return t},On.round=fu,On.runInContext=t,On.sample=function(t){return(Cs(t)?Vn:Vr)(t)},On.size=function(t){if(null==t)return 0;if(Ps(t))return Xs(t)?We(t):t.length;var e=no(t);return e==f||e==m?t.size:Tr(t).length},On.snakeCase=La,On.some=function(t,e,n){var r=Cs(t)?ve:Hr;return n&&ao(t,e,n)&&(e=void 0),r(t,Xi(e,3))},On.sortedIndex=function(t,e){return Gr(t,e)},On.sortedIndexBy=function(t,e,n){return Yr(t,e,Xi(n,2))},On.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var r=Gr(t,e);if(r<n&&As(t[r],e))return r}return-1},On.sortedLastIndex=function(t,e){return Gr(t,e,!0)},On.sortedLastIndexBy=function(t,e,n){return Yr(t,e,Xi(n,2),!0)},On.sortedLastIndexOf=function(t,e){if(null==t?0:t.length){var n=Gr(t,e,!0)-1;if(As(t[n],e))return n}return-1},On.startCase=ja,On.startsWith=function(t,e,n){return t=aa(t),n=null==n?0:Kn(ra(n),0,t.length),e=Jr(e),t.slice(n,n+e.length)==e},On.subtract=du,On.sum=function(t){return t&&t.length?Se(t,Ha):0},On.sumBy=function(t,e){return t&&t.length?Se(t,Xi(e,2)):0},On.template=function(t,e,n){var r=On.templateSettings;n&&ao(t,e,n)&&(e=void 0),t=aa(t),e=la({},e,r,Fi);var i,o,s=la({},e.imports,r.imports,Fi),a=_a(s),u=Ae(s,a),c=0,l=e.interpolate||at,h="__p += '",f=mt((e.escape||at).source+"|"+l.source+"|"+(l===V?Q:at).source+"|"+(e.evaluate||at).source+"|$","g"),d="//# sourceURL="+(Tt.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++jt+"]")+"\n";t.replace(f,(function(e,n,r,s,a,u){return r||(r=s),h+=t.slice(c,u).replace(ut,Le),n&&(i=!0,h+="' +\n__e("+n+") +\n'"),a&&(o=!0,h+="';\n"+a+";\n__p += '"),r&&(h+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=u+e.length,e})),h+="';\n";var p=Tt.call(e,"variable")&&e.variable;p||(h="with (obj) {\n"+h+"\n}\n"),h=(o?h.replace(N,""):h).replace(D,"$1").replace(R,"$1;"),h="function("+(p||"obj")+") {\n"+(p?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var v=$a((function(){return dt(a,d+"return "+h).apply(void 0,u)}));if(v.source=h,Vs(v))throw v;return v},On.times=function(t,e){if((t=ra(t))<1||t>9007199254740991)return[];var n=4294967295,r=an(t,4294967295);t-=4294967295;for(var i=xe(r,e=Xi(e));++n<t;)e(n);return i},On.toFinite=na,On.toInteger=ra,On.toLength=ia,On.toLower=function(t){return aa(t).toLowerCase()},On.toNumber=oa,On.toSafeInteger=function(t){return t?Kn(ra(t),-9007199254740991,9007199254740991):0===t?t:0},On.toString=aa,On.toUpper=function(t){return aa(t).toUpperCase()},On.trim=function(t,e,n){if((t=aa(t))&&(n||void 0===e))return t.replace(z,"");if(!t||!(e=Jr(e)))return t;var r=qe(t),i=qe(e);return ci(r,De(r,i),Re(r,i)+1).join("")},On.trimEnd=function(t,e,n){if((t=aa(t))&&(n||void 0===e))return t.replace(G,"");if(!t||!(e=Jr(e)))return t;var r=qe(t);return ci(r,0,Re(r,qe(e))+1).join("")},On.trimStart=function(t,e,n){if((t=aa(t))&&(n||void 0===e))return t.replace(H,"");if(!t||!(e=Jr(e)))return t;var r=qe(t);return ci(r,De(r,qe(e))).join("")},On.truncate=function(t,e){var n=30,r="...";if(Ws(e)){var i="separator"in e?e.separator:i;n="length"in e?ra(e.length):n,r="omission"in e?Jr(e.omission):r}var o=(t=aa(t)).length;if(je(t)){var s=qe(t);o=s.length}if(n>=o)return t;var a=n-We(r);if(a<1)return r;var u=s?ci(s,0,a).join(""):t.slice(0,a);if(void 0===i)return u+r;if(s&&(a+=u.length-a),Ys(i)){if(t.slice(a).search(i)){var c,l=u;for(i.global||(i=mt(i.source,aa(tt.exec(i))+"g")),i.lastIndex=0;c=i.exec(l);)var h=c.index;u=u.slice(0,void 0===h?a:h)}}else if(t.indexOf(Jr(i),a)!=a){var f=u.lastIndexOf(i);f>-1&&(u=u.slice(0,f))}return u+r},On.unescape=function(t){return(t=aa(t))&&P.test(t)?t.replace(C,ze):t},On.uniqueId=function(t){var e=++kt;return aa(t)+e},On.upperCase=Ma,On.upperFirst=Va,On.each=as,On.eachRight=us,On.first=Po,Xa(On,(lu={},ur(On,(function(t,e){Tt.call(On.prototype,e)||(lu[e]=t)})),lu),{chain:!1}),On.VERSION="4.17.19",oe(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){On[t].placeholder=On})),oe(["drop","take"],(function(t,e){Rn.prototype[t]=function(n){n=void 0===n?1:sn(ra(n),0);var r=this.__filtered__&&!e?new Rn(this):this.clone();return r.__filtered__?r.__takeCount__=an(n,r.__takeCount__):r.__views__.push({size:an(n,4294967295),type:t+(r.__dir__<0?"Right":"")}),r},Rn.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),oe(["filter","map","takeWhile"],(function(t,e){var n=e+1,r=1==n||3==n;Rn.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:Xi(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}})),oe(["head","last"],(function(t,e){var n="take"+(e?"Right":"");Rn.prototype[t]=function(){return this[n](1).value()[0]}})),oe(["initial","tail"],(function(t,e){var n="drop"+(e?"":"Right");Rn.prototype[t]=function(){return this.__filtered__?new Rn(this):this[n](1)}})),Rn.prototype.compact=function(){return this.filter(Ha)},Rn.prototype.find=function(t){return this.filter(t).head()},Rn.prototype.findLast=function(t){return this.reverse().find(t)},Rn.prototype.invokeMap=Mr((function(t,e){return"function"==typeof t?new Rn(this):this.map((function(n){return gr(n,t,e)}))})),Rn.prototype.reject=function(t){return this.filter(Ts(Xi(t)))},Rn.prototype.slice=function(t,e){t=ra(t);var n=this;return n.__filtered__&&(t>0||e<0)?new Rn(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),void 0!==e&&(n=(e=ra(e))<0?n.dropRight(-e):n.take(e-t)),n)},Rn.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Rn.prototype.toArray=function(){return this.take(4294967295)},ur(Rn.prototype,(function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),r=/^(?:head|last)$/.test(e),i=On[r?"take"+("last"==e?"Right":""):e],o=r||/^find/.test(e);i&&(On.prototype[e]=function(){var e=this.__wrapped__,s=r?[1]:arguments,a=e instanceof Rn,u=s[0],c=a||Cs(e),l=function(t){var e=i.apply(On,fe([t],s));return r&&h?e[0]:e};c&&n&&"function"==typeof u&&1!=u.length&&(a=c=!1);var h=this.__chain__,f=!!this.__actions__.length,d=o&&!h,p=a&&!f;if(!o&&c){e=p?e:new Rn(this);var v=t.apply(e,s);return v.__actions__.push({func:ns,args:[l],thisArg:void 0}),new Dn(v,h)}return d&&p?t.apply(this,s):(v=this.thru(l),d?r?v.value()[0]:v.value():v)})})),oe(["pop","push","shift","sort","splice","unshift"],(function(t){var e=bt[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);On.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var i=this.value();return e.apply(Cs(i)?i:[],t)}return this[n]((function(n){return e.apply(Cs(n)?n:[],t)}))}})),ur(Rn.prototype,(function(t,e){var n=On[e];if(n){var r=n.name+"";Tt.call(bn,r)||(bn[r]=[]),bn[r].push({name:e,func:n})}})),bn[Oi(void 0,2).name]=[{name:"wrapper",func:void 0}],Rn.prototype.clone=function(){var t=new Rn(this.__wrapped__);return t.__actions__=yi(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=yi(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=yi(this.__views__),t},Rn.prototype.reverse=function(){if(this.__filtered__){var t=new Rn(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Rn.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=Cs(t),r=e<0,i=n?t.length:0,o=function(t,e,n){var r=-1,i=n.length;for(;++r<i;){var o=n[r],s=o.size;switch(o.type){case"drop":t+=s;break;case"dropRight":e-=s;break;case"take":e=an(e,t+s);break;case"takeRight":t=sn(t,e-s)}}return{start:t,end:e}}(0,i,this.__views__),s=o.start,a=o.end,u=a-s,c=r?a:s-1,l=this.__iteratees__,h=l.length,f=0,d=an(u,this.__takeCount__);if(!n||!r&&i==u&&d==u)return ni(t,this.__actions__);var p=[];t:for(;u--&&f<d;){for(var v=-1,m=t[c+=e];++v<h;){var y=l[v],g=y.iteratee,b=y.type,_=g(m);if(2==b)m=_;else if(!_){if(1==b)continue t;break t}}p[f++]=m}return p},On.prototype.at=rs,On.prototype.chain=function(){return es(this)},On.prototype.commit=function(){return new Dn(this.value(),this.__chain__)},On.prototype.next=function(){void 0===this.__values__&&(this.__values__=ea(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?void 0:this.__values__[this.__index__++]}},On.prototype.plant=function(t){for(var e,n=this;n instanceof Nn;){var r=Oo(n);r.__index__=0,r.__values__=void 0,e?i.__wrapped__=r:e=r;var i=r;n=n.__wrapped__}return i.__wrapped__=t,e},On.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof Rn){var e=t;return this.__actions__.length&&(e=new Rn(this)),(e=e.reverse()).__actions__.push({func:ns,args:[Wo],thisArg:void 0}),new Dn(e,this.__chain__)}return this.thru(Wo)},On.prototype.toJSON=On.prototype.valueOf=On.prototype.value=function(){return ni(this.__wrapped__,this.__actions__)},On.prototype.first=On.prototype.head,Te&&(On.prototype[Te]=function(){return this}),On}();Gt?((Gt.exports=He)._=He,Ht._=He):zt._=He}).call(At)}));const en=Ot(0),nn=Ot("fabric"),rn=Ot("ASLAW"),on=Ot("1"),sn=Ot(null);var an="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),un=new Uint8Array(16);function cn(){if(!an)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return an(un)}for(var ln=[],hn=0;hn<256;++hn)ln.push((hn+256).toString(16).substr(1));function fn(t,e,n){var r=(t=t||{}).random||(t.rng||cn)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e){n=n||0;for(var i=0;i<16;++i)e[n+i]=r[i];return e}return function(t,e){var n=e||0;return(ln[t[n+0]]+ln[t[n+1]]+ln[t[n+2]]+ln[t[n+3]]+"-"+ln[t[n+4]]+ln[t[n+5]]+"-"+ln[t[n+6]]+ln[t[n+7]]+"-"+ln[t[n+8]]+ln[t[n+9]]+"-"+ln[t[n+10]]+ln[t[n+11]]+ln[t[n+12]]+ln[t[n+13]]+ln[t[n+14]]+ln[t[n+15]]).toLowerCase()}(r)}const dn=t=>({node:1&t}),pn=t=>({node:t[0]});function vn(t,e,n){const r=t.slice();return r[6]=e[n],r[8]=n,r}const mn=t=>({node:1&t}),yn=t=>({node:t[0]});function gn(e){let n;return{c(){n=k("div"),D(n,"class","spacer svelte-16xlcqk")},m(t,e){E(t,n,e)},p:t,d(t){t&&I(n)}}}function bn(t){let e;return{c(){e=k("div"),e.innerHTML='<svg focusable="false" viewBox="0 0 24 24"><path d="M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"></path></svg>',D(e,"class","button svelte-16xlcqk"),P(e,"active",t[1])},m(t,n){E(t,e,n)},p(t,n){2&n&&P(e,"active",t[1])},d(t){t&&I(e)}}}function _n(t){let e,n,r,i=t[0].children,o=[];for(let e=0;e<i.length;e+=1)o[e]=En(vn(t,i,e));const s=t=>ht(o[t],1,1,()=>{o[t]=null});return{c(){e=k("div");for(let t=0;t<o.length;t+=1)o[t].c();D(e,"class","children svelte-16xlcqk")},m(t,n){E(t,e,n);for(let t=0;t<o.length;t+=1)o[t].m(e,null);r=!0},p(t,n){if(33&n){let r;for(i=t[0].children,r=0;r<i.length;r+=1){const s=vn(t,i,r);o[r]?(o[r].p(s,n),lt(o[r],1)):(o[r]=En(s),o[r].c(),lt(o[r],1),o[r].m(e,null))}for(ut(),r=i.length;r<o.length;r+=1)s(r);ct()}},i(t){if(!r){for(let t=0;t<i.length;t+=1)lt(o[t]);t&&Z(()=>{n||(n=vt(e,Qe,{},!0)),n.run(1)}),r=!0}},o(t){o=o.filter(Boolean);for(let t=0;t<o.length;t+=1)ht(o[t]);t&&(n||(n=vt(e,Qe,{},!1)),n.run(0)),r=!1},d(t){t&&I(e),T(o,t),t&&n&&n.end()}}}function wn(t){let e,n;const r=t[3].default,i=l(r,t,t[5],pn);return{c(){i&&i.c(),e=x()},m(t,r){i&&i.m(t,r),E(t,e,r),n=!0},p(t,e){i&&i.p&&33&e&&f(i,r,t,t[5],e,dn,pn)},i(t){n||(lt(i,t),n=!0)},o(t){ht(i,t),n=!1},d(t){i&&i.d(t),t&&I(e)}}}function En(t){let e,n;return e=new kn({props:{node:t[6],index:t[8],$$slots:{default:[wn,({node:t})=>({0:t}),({node:t})=>t?1:0]},$$scope:{ctx:t}}}),{c(){_t(e.$$.fragment)},m(t,r){wt(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.node=t[6]),33&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(lt(e.$$.fragment,t),n=!0)},o(t){ht(e.$$.fragment,t),n=!1},d(t){Et(e,t)}}}function In(t){let e,n,r,i,o,s,a;function u(t,e){return t[0].children?bn:gn}let c=u(t),h=c(t);const d=t[3].default,p=l(d,t,t[5],yn);let v=t[0].children&&t[1]&&_n(t);return{c(){e=k("div"),n=k("div"),h.c(),r=x(),p&&p.c(),i=x(),v&&v.c(),D(n,"class","content svelte-16xlcqk"),D(e,"class","node svelte-16xlcqk")},m(u,c){E(u,e,c),w(e,n),h.m(n,null),w(n,r),p&&p.m(n,null),w(e,i),v&&v.m(e,null),o=!0,s||(a=A(n,"click",t[4]),s=!0)},p(t,[i]){c===(c=u(t))&&h?h.p(t,i):(h.d(1),h=c(t),h&&(h.c(),h.m(n,r))),p&&p.p&&33&i&&f(p,d,t,t[5],i,mn,yn),t[0].children&&t[1]?v?(v.p(t,i),3&i&&lt(v,1)):(v=_n(t),v.c(),lt(v,1),v.m(e,null)):v&&(ut(),ht(v,1,1,()=>{v=null}),ct())},i(t){o||(lt(p,t),lt(v),o=!0)},o(t){ht(p,t),ht(v),o=!1},d(t){t&&I(e),h.d(),p&&p.d(t),v&&v.d(),s=!1,a()}}}function Tn(t,e,n){let{node:r}=e,{index:i}=e,o=!0,{$$slots:s={},$$scope:a}=e;return t.$set=t=>{"node"in t&&n(0,r=t.node),"index"in t&&n(2,i=t.index),"$$scope"in t&&n(5,a=t.$$scope)},[r,o,i,s,()=>{n(1,o=!o)},a]}class kn extends kt{constructor(t){super(),Tt(this,t,Tn,In,s,{node:0,index:2})}}const Sn=t=>({node:64&t}),xn=t=>({node:t[6]});function On(t,e,n){const r=t.slice();return r[3]=e[n],r[5]=n,r}function An(t){let e,n;const r=t[1].default,i=l(r,t,t[2],xn),o=i||function(t){let e,n,r=t[6].name+"";return{c(){e=k("div"),n=S(r),D(e,"class","name")},m(t,r){E(t,e,r),w(e,n)},p(t,e){64&e&&r!==(r=t[6].name+"")&&R(n,r)},d(t){t&&I(e)}}}(t);return{c(){o&&o.c(),e=x()},m(t,r){o&&o.m(t,r),E(t,e,r),n=!0},p(t,e){i?i.p&&68&e&&f(i,r,t,t[2],e,Sn,xn):o&&o.p&&64&e&&o.p(t,e)},i(t){n||(lt(o,t),n=!0)},o(t){ht(o,t),n=!1},d(t){o&&o.d(t),t&&I(e)}}}function Nn(t){let e,n;return e=new kn({props:{node:t[3],index:t[5],$$slots:{default:[An,({node:t})=>({6:t}),({node:t})=>t?64:0]},$$scope:{ctx:t}}}),{c(){_t(e.$$.fragment)},m(t,r){wt(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.node=t[3]),68&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(lt(e.$$.fragment,t),n=!0)},o(t){ht(e.$$.fragment,t),n=!1},d(t){Et(e,t)}}}function Dn(t){let e,n,r=t[0],i=[];for(let e=0;e<r.length;e+=1)i[e]=Nn(On(t,r,e));const o=t=>ht(i[t],1,1,()=>{i[t]=null});return{c(){for(let t=0;t<i.length;t+=1)i[t].c();e=O()},m(t,r){for(let e=0;e<i.length;e+=1)i[e].m(t,r);E(t,e,r),n=!0},p(t,[n]){if(69&n){let s;for(r=t[0],s=0;s<r.length;s+=1){const o=On(t,r,s);i[s]?(i[s].p(o,n),lt(i[s],1)):(i[s]=Nn(o),i[s].c(),lt(i[s],1),i[s].m(e.parentNode,e))}for(ut(),s=r.length;s<i.length;s+=1)o(s);ct()}},i(t){if(!n){for(let t=0;t<r.length;t+=1)lt(i[t]);n=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)ht(i[t]);n=!1},d(t){T(i,t),t&&I(e)}}}function Rn(t,e,n){let{tree:r=[]}=e,{$$slots:i={},$$scope:o}=e;return t.$set=t=>{"tree"in t&&n(0,r=t.tree),"$$scope"in t&&n(2,o=t.$$scope)},[r,i,o]}class Cn extends kt{constructor(t){super(),Tt(this,t,Rn,Dn,s,{tree:0})}}var Un=Rt((function(t){t.exports=function(t){return t&&t.__esModule?t:{default:t}}}));Dt(Un);var Pn=Rt((function(t){function e(n){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=e=function(t){return typeof t}:t.exports=e=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(n)}t.exports=e})),Ln=Rt((function(t){function e(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return e=function(){return t},t}t.exports=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==Pn(t)&&"function"!=typeof t)return{default:t};var n=e();if(n&&n.has(t))return n.get(t);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var s=i?Object.getOwnPropertyDescriptor(t,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=t[o]}return r.default=t,n&&n.set(t,r),r}}));Dt(Ln);var jn=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};function Mn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Vn=function(t,e,n){return e&&Mn(t.prototype,e),n&&Mn(t,n),t},Fn=Rt((function(t){function e(n,r){return t.exports=e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},e(n,r)}t.exports=e}));var $n=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Fn(t,e)};var Bn=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t};var Wn=function(t,e){return!e||"object"!==Pn(e)&&"function"!=typeof e?Bn(t):e},qn=Rt((function(t){function e(n){return t.exports=e=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},e(n)}t.exports=e}));var zn=function(t){return-1!==Function.toString.call(t).indexOf("[native code]")};var Hn=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}},Gn=Rt((function(t){function e(n,r,i){return Hn()?t.exports=e=Reflect.construct:t.exports=e=function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&Fn(i,n.prototype),i},e.apply(null,arguments)}t.exports=e})),Yn=Rt((function(t){function e(n){var r="function"==typeof Map?new Map:void 0;return t.exports=e=function(t){if(null===t||!zn(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(t))return r.get(t);r.set(t,e)}function e(){return Gn(t,arguments,qn(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Fn(e,t)},e(n)}t.exports=e})),Kn=Rt((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.newError=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"N/A";return new u(t,e)},e.PROTOCOL_ERROR=e.SESSION_EXPIRED=e.SERVICE_UNAVAILABLE=e.Neo4jError=void 0;var n=Un(jn),r=Un($n),i=Un(Wn),o=Un(qn),s=Un(Yn);function a(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,o.default)(t);if(e){var s=(0,o.default)(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return(0,i.default)(this,n)}}e.SERVICE_UNAVAILABLE="ServiceUnavailable";e.SESSION_EXPIRED="SessionExpired";e.PROTOCOL_ERROR="ProtocolError";var u=function(t){(0,r.default)(i,t);var e=a(i);function i(t){var r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"N/A";return(0,n.default)(this,i),(r=e.call(this,t)).message=t,r.code=o,r.name="Neo4jError",r}return i}((0,s.default)(Error));e.Neo4jError=u}));Dt(Kn);Kn.newError,Kn.PROTOCOL_ERROR,Kn.SESSION_EXPIRED,Kn.SERVICE_UNAVAILABLE,Kn.Neo4jError;var Xn=Rt((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.toString=e.toNumber=e.inSafeRange=e.isInt=e.int=void 0;var n=Un(jn),r=Un(Vn),i=function(){function t(e,r){(0,n.default)(this,t),this.low=0|e,this.high=0|r}return(0,r.default)(t,[{key:"inSafeRange",value:function(){return this.greaterThanOrEqual(t.MIN_SAFE_VALUE)&&this.lessThanOrEqual(t.MAX_SAFE_VALUE)}},{key:"toInt",value:function(){return this.low}},{key:"toNumber",value:function(){return this.high*s+(this.low>>>0)}},{key:"toNumberOrInfinity",value:function(){return this.lessThan(t.MIN_SAFE_VALUE)?Number.NEGATIVE_INFINITY:this.greaterThan(t.MAX_SAFE_VALUE)?Number.POSITIVE_INFINITY:this.toNumber()}},{key:"toString",value:function(e){if((e=e||10)<2||e>36)throw RangeError("radix out of range: "+e);if(this.isZero())return"0";var n;if(this.isNegative()){if(this.equals(t.MIN_VALUE)){var r=t.fromNumber(e),i=this.div(r);return n=i.multiply(r).subtract(this),i.toString(e)+n.toInt().toString(e)}return"-"+this.negate().toString(e)}var o=t.fromNumber(Math.pow(e,6));n=this;for(var s="";;){var a=n.div(o),u=(n.subtract(a.multiply(o)).toInt()>>>0).toString(e);if((n=a).isZero())return u+s;for(;u.length<6;)u="0"+u;s=""+u+s}}},{key:"getHighBits",value:function(){return this.high}},{key:"getLowBits",value:function(){return this.low}},{key:"getNumBitsAbs",value:function(){if(this.isNegative())return this.equals(t.MIN_VALUE)?64:this.negate().getNumBitsAbs();for(var e=0!==this.high?this.high:this.low,n=31;n>0&&0==(e&1<<n);n--);return 0!==this.high?n+33:n+1}},{key:"isZero",value:function(){return 0===this.high&&0===this.low}},{key:"isNegative",value:function(){return this.high<0}},{key:"isPositive",value:function(){return this.high>=0}},{key:"isOdd",value:function(){return 1==(1&this.low)}},{key:"isEven",value:function(){return 0==(1&this.low)}},{key:"equals",value:function(e){return t.isInteger(e)||(e=t.fromValue(e)),this.high===e.high&&this.low===e.low}},{key:"notEquals",value:function(t){return!this.equals(t)}},{key:"lessThan",value:function(t){return this.compare(t)<0}},{key:"lessThanOrEqual",value:function(t){return this.compare(t)<=0}},{key:"greaterThan",value:function(t){return this.compare(t)>0}},{key:"greaterThanOrEqual",value:function(t){return this.compare(t)>=0}},{key:"compare",value:function(e){if(t.isInteger(e)||(e=t.fromValue(e)),this.equals(e))return 0;var n=this.isNegative(),r=e.isNegative();return n&&!r?-1:!n&&r?1:this.subtract(e).isNegative()?-1:1}},{key:"negate",value:function(){return this.equals(t.MIN_VALUE)?t.MIN_VALUE:this.not().add(t.ONE)}},{key:"add",value:function(e){t.isInteger(e)||(e=t.fromValue(e));var n=this.high>>>16,r=65535&this.high,i=this.low>>>16,o=65535&this.low,s=e.high>>>16,a=65535&e.high,u=e.low>>>16,c=0,l=0,h=0,f=0;return h+=(f+=o+(65535&e.low))>>>16,f&=65535,l+=(h+=i+u)>>>16,h&=65535,c+=(l+=r+a)>>>16,l&=65535,c+=n+s,c&=65535,t.fromBits(h<<16|f,c<<16|l)}},{key:"subtract",value:function(e){return t.isInteger(e)||(e=t.fromValue(e)),this.add(e.negate())}},{key:"multiply",value:function(e){if(this.isZero())return t.ZERO;if(t.isInteger(e)||(e=t.fromValue(e)),e.isZero())return t.ZERO;if(this.equals(t.MIN_VALUE))return e.isOdd()?t.MIN_VALUE:t.ZERO;if(e.equals(t.MIN_VALUE))return this.isOdd()?t.MIN_VALUE:t.ZERO;if(this.isNegative())return e.isNegative()?this.negate().multiply(e.negate()):this.negate().multiply(e).negate();if(e.isNegative())return this.multiply(e.negate()).negate();if(this.lessThan(u)&&e.lessThan(u))return t.fromNumber(this.toNumber()*e.toNumber());var n=this.high>>>16,r=65535&this.high,i=this.low>>>16,o=65535&this.low,s=e.high>>>16,a=65535&e.high,c=e.low>>>16,l=65535&e.low,h=0,f=0,d=0,p=0;return d+=(p+=o*l)>>>16,p&=65535,f+=(d+=i*l)>>>16,d&=65535,f+=(d+=o*c)>>>16,d&=65535,h+=(f+=r*l)>>>16,f&=65535,h+=(f+=i*c)>>>16,f&=65535,h+=(f+=o*a)>>>16,f&=65535,h+=n*l+r*c+i*a+o*s,h&=65535,t.fromBits(d<<16|p,h<<16|f)}},{key:"div",value:function(e){if(t.isInteger(e)||(e=t.fromValue(e)),e.isZero())throw(0,Kn.newError)("division by zero");if(this.isZero())return t.ZERO;var n,r,i;if(this.equals(t.MIN_VALUE))return e.equals(t.ONE)||e.equals(t.NEG_ONE)?t.MIN_VALUE:e.equals(t.MIN_VALUE)?t.ONE:(n=this.shiftRight(1).div(e).shiftLeft(1)).equals(t.ZERO)?e.isNegative()?t.ONE:t.NEG_ONE:(r=this.subtract(e.multiply(n)),i=n.add(r.div(e)));if(e.equals(t.MIN_VALUE))return t.ZERO;if(this.isNegative())return e.isNegative()?this.negate().div(e.negate()):this.negate().div(e).negate();if(e.isNegative())return this.div(e.negate()).negate();for(i=t.ZERO,r=this;r.greaterThanOrEqual(e);){n=Math.max(1,Math.floor(r.toNumber()/e.toNumber()));for(var o=Math.ceil(Math.log(n)/Math.LN2),s=o<=48?1:Math.pow(2,o-48),a=t.fromNumber(n),u=a.multiply(e);u.isNegative()||u.greaterThan(r);)n-=s,u=(a=t.fromNumber(n)).multiply(e);a.isZero()&&(a=t.ONE),i=i.add(a),r=r.subtract(u)}return i}},{key:"modulo",value:function(e){return t.isInteger(e)||(e=t.fromValue(e)),this.subtract(this.div(e).multiply(e))}},{key:"not",value:function(){return t.fromBits(~this.low,~this.high)}},{key:"and",value:function(e){return t.isInteger(e)||(e=t.fromValue(e)),t.fromBits(this.low&e.low,this.high&e.high)}},{key:"or",value:function(e){return t.isInteger(e)||(e=t.fromValue(e)),t.fromBits(this.low|e.low,this.high|e.high)}},{key:"xor",value:function(e){return t.isInteger(e)||(e=t.fromValue(e)),t.fromBits(this.low^e.low,this.high^e.high)}},{key:"shiftLeft",value:function(e){return t.isInteger(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?t.fromBits(this.low<<e,this.high<<e|this.low>>>32-e):t.fromBits(0,this.low<<e-32)}},{key:"shiftRight",value:function(e){return t.isInteger(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?t.fromBits(this.low>>>e|this.high<<32-e,this.high>>e):t.fromBits(this.high>>e-32,this.high>=0?0:-1)}}]),t}();i.__isInteger__=!0,Object.defineProperty(i.prototype,"__isInteger__",{value:!0,enumerable:!1,configurable:!1}),i.isInteger=function(t){return!0===(t&&t.__isInteger__)};var o={};i.fromInt=function(t){var e,n;return(t|=0)>=-128&&t<128&&(n=o[t])?n:(e=new i(t,t<0?-1:0,!1),t>=-128&&t<128&&(o[t]=e),e)},i.fromNumber=function(t){return isNaN(t)||!isFinite(t)?i.ZERO:t<=-a?i.MIN_VALUE:t+1>=a?i.MAX_VALUE:t<0?i.fromNumber(-t).negate():new i(t%s|0,t/s|0)},i.fromBits=function(t,e){return new i(t,e)},i.fromString=function(t,e){if(0===t.length)throw(0,Kn.newError)("number format error: empty string");if("NaN"===t||"Infinity"===t||"+Infinity"===t||"-Infinity"===t)return i.ZERO;if((e=e||10)<2||e>36)throw(0,Kn.newError)("radix out of range: "+e);var n;if((n=t.indexOf("-"))>0)throw(0,Kn.newError)('number format error: interior "-" character: '+t);if(0===n)return i.fromString(t.substring(1),e).negate();for(var r=i.fromNumber(Math.pow(e,8)),o=i.ZERO,s=0;s<t.length;s+=8){var a=Math.min(8,t.length-s),u=parseInt(t.substring(s,s+a),e);if(a<8){var c=i.fromNumber(Math.pow(e,a));o=o.multiply(c).add(i.fromNumber(u))}else o=(o=o.multiply(r)).add(i.fromNumber(u))}return o},i.fromValue=function(t){return t instanceof i?t:"number"==typeof t?i.fromNumber(t):"string"==typeof t?i.fromString(t):new i(t.low,t.high)},i.toNumber=function(t){return i.fromValue(t).toNumber()},i.toString=function(t,e){return i.fromValue(t).toString(e)},i.inSafeRange=function(t){return i.fromValue(t).inSafeRange()};var s=4294967296,a=s*s/2,u=i.fromInt(1<<24);i.ZERO=i.fromInt(0),i.ONE=i.fromInt(1),i.NEG_ONE=i.fromInt(-1),i.MAX_VALUE=i.fromBits(-1,2147483647,!1),i.MIN_VALUE=i.fromBits(0,-2147483648,!1),i.MIN_SAFE_VALUE=i.fromBits(1,-2097152),i.MAX_SAFE_VALUE=i.fromBits(-1,2097151);var c=i.fromValue;e.int=c;var l=i.isInteger;e.isInt=l;var h=i.inSafeRange;e.inSafeRange=h;var f=i.toNumber;e.toNumber=f;var d=i.toString;e.toString=d;var p=i;e.default=p}));Dt(Xn);Xn.toNumber,Xn.inSafeRange,Xn.isInt;var Jn=Rt((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.isNode=function(t){return o(t,"__isNode__")},e.isRelationship=function(t){return o(t,"__isRelationship__")},e.isUnboundRelationship=function(t){return o(t,UNBOUNT_RELATIONSHIP_IDENTIFIER_PROPERTY)},e.isPath=function(t){return o(t,"__isPath__")},e.isPathSegment=function(t){return o(t,"__isPathSegment__")},e.PathSegment=e.Path=e.UnboundRelationship=e.Relationship=e.Node=void 0;var n=Un(jn),r=Un(Vn),i={value:!0,enumerable:!1,configurable:!1,writable:!1};function o(t,e){return!0===(t&&t[e])}var s=function(){function t(e,r,i){(0,n.default)(this,t),this.identity=e,this.labels=r,this.properties=i}return(0,r.default)(t,[{key:"toString",value:function(){for(var t="("+this.identity,e=0;e<this.labels.length;e++)t+=":"+this.labels[e];var n=Object.keys(this.properties);if(n.length>0){t+=" {";for(var r=0;r<n.length;r++)r>0&&(t+=","),t+=n[r]+":"+JSON.stringify(this.properties[n[r]]);t+="}"}return t+=")"}}]),t}();e.Node=s,Object.defineProperty(s.prototype,"__isNode__",i);var a=function(){function t(e,r,i,o,s){(0,n.default)(this,t),this.identity=e,this.start=r,this.end=i,this.type=o,this.properties=s}return(0,r.default)(t,[{key:"toString",value:function(){var t="("+this.start+")-[:"+this.type,e=Object.keys(this.properties);if(e.length>0){t+=" {";for(var n=0;n<e.length;n++)n>0&&(t+=","),t+=e[n]+":"+JSON.stringify(this.properties[e[n]]);t+="}"}return t+="]->("+this.end+")"}}]),t}();e.Relationship=a,Object.defineProperty(a.prototype,"__isRelationship__",i);var u=function(){function t(e,r,i){(0,n.default)(this,t),this.identity=e,this.type=r,this.properties=i}return(0,r.default)(t,[{key:"bind",value:function(t,e){return new a(this.identity,t,e,this.type,this.properties)}},{key:"toString",value:function(){var t="-[:"+this.type,e=Object.keys(this.properties);if(e.length>0){t+=" {";for(var n=0;n<e.length;n++)n>0&&(t+=","),t+=e[n]+":"+JSON.stringify(this.properties[e[n]]);t+="}"}return t+="]->"}}]),t}();e.UnboundRelationship=u,Object.defineProperty(u.prototype,"__isUnboundRelationship__",i);var c=function t(e,r,i){(0,n.default)(this,t),this.start=e,this.relationship=r,this.end=i};e.PathSegment=c,Object.defineProperty(c.prototype,"__isPathSegment__",i);var l=function t(e,r,i){(0,n.default)(this,t),this.start=e,this.end=r,this.segments=i,this.length=i.length};e.Path=l,Object.defineProperty(l.prototype,"__isPath__",i)}));Dt(Jn);Jn.isNode,Jn.isRelationship,Jn.isUnboundRelationship,Jn.isPath,Jn.isPathSegment,Jn.PathSegment,Jn.Path,Jn.UnboundRelationship,Jn.Relationship,Jn.Node;var Zn=Rt((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.queryType=void 0;var n=Un(jn),r=Un(Vn),i=function(){function t(e,r,i,u){(0,n.default)(this,t),this.query={text:e,parameters:r},this.queryType=i.type,this.counters=new a(i.stats||{}),this.updateStatistics=this.counters,this.plan=!(!i.plan&&!i.profile)&&new o(i.plan||i.profile),this.profile=!!i.profile&&new s(i.profile),this.notifications=this._buildNotifications(i.notifications),this.server=new c(i.server,u),this.resultConsumedAfter=i.result_consumed_after,this.resultAvailableAfter=i.result_available_after,this.database={name:i.db||null}}return(0,r.default)(t,[{key:"_buildNotifications",value:function(t){return t?t.map((function(t){return new u(t)})):[]}},{key:"hasPlan",value:function(){return this.plan instanceof o}},{key:"hasProfile",value:function(){return this.profile instanceof s}}]),t}(),o=function t(e){(0,n.default)(this,t),this.operatorType=e.operatorType,this.identifiers=e.identifiers,this.arguments=e.args,this.children=e.children?e.children.map((function(e){return new t(e)})):[]},s=function(){function t(e){(0,n.default)(this,t),this.operatorType=e.operatorType,this.identifiers=e.identifiers,this.arguments=e.args,this.dbHits=h("dbHits",e),this.rows=h("rows",e),this.pageCacheMisses=h("pageCacheMisses",e),this.pageCacheHits=h("pageCacheHits",e),this.pageCacheHitRatio=h("pageCacheHitRatio",e),this.time=h("time",e),this.children=e.children?e.children.map((function(e){return new t(e)})):[]}return(0,r.default)(t,[{key:"hasPageCacheStats",value:function(){return this.pageCacheMisses>0||this.pageCacheHits>0||this.pageCacheHitRatio>0}}]),t}(),a=function(){function t(e){var r=this;(0,n.default)(this,t),this._stats={nodesCreated:0,nodesDeleted:0,relationshipsCreated:0,relationshipsDeleted:0,propertiesSet:0,labelsAdded:0,labelsRemoved:0,indexesAdded:0,indexesRemoved:0,constraintsAdded:0,constraintsRemoved:0},this._systemUpdates=0,Object.keys(e).forEach((function(t){var n=t.replace(/(-\w)/g,(function(t){return t[1].toUpperCase()}));n in r._stats?r._stats[n]=l(e[t]):"systemUpdates"===n&&(r._systemUpdates=l(e[t]))})),this._stats=Object.freeze(this._stats)}return(0,r.default)(t,[{key:"containsUpdates",value:function(){var t=this;return Object.keys(this._stats).reduce((function(e,n){return e+t._stats[n]}),0)>0}},{key:"updates",value:function(){return this._stats}},{key:"containsSystemUpdates",value:function(){return this._systemUpdates>0}},{key:"systemUpdates",value:function(){return this._systemUpdates}}]),t}(),u=function(){function t(e){(0,n.default)(this,t),this.code=e.code,this.title=e.title,this.description=e.description,this.severity=e.severity,this.position=t._constructPosition(e.position)}return(0,r.default)(t,null,[{key:"_constructPosition",value:function(t){return t?{offset:l(t.offset),line:l(t.line),column:l(t.column)}:{}}}]),t}(),c=function t(e,r){(0,n.default)(this,t),e&&(this.address=e.address,this.version=e.version),this.protocolVersion=r};function l(t){return(0,Xn.isInt)(t)?t.toInt():t}function h(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(t in e){var r=e[t];return(0,Xn.isInt)(r)?r.toInt():r}return n}e.queryType={READ_ONLY:"r",READ_WRITE:"rw",WRITE_ONLY:"w",SCHEMA_WRITE:"s"};var f=i;e.default=f}));Dt(Zn);Zn.queryType;var Qn=Rt((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.isEmptyObjectOrNull=function(t){if(null===t)return!0;if(!r(t))return!1;for(var e in t)if(t.hasOwnProperty(e))return!1;return!0},e.isObject=r,e.isString=o,e.assertObject=function(t,e){if(!r(t))throw new TypeError(e+" expected to be an object but was: "+JSON.stringify(t));return t},e.assertString=i,e.assertNumber=function(t,e){if("number"!=typeof t)throw new TypeError(e+" expected to be a number but was: "+JSON.stringify(t));return t},e.assertNumberOrInteger=function(t,e){if("number"!=typeof t&&!(0,Xn.isInt)(t))throw new TypeError(e+" expected to be either a number or an Integer object but was: "+JSON.stringify(t));return t},e.assertValidDate=function(t,e){if("[object Date]"!==Object.prototype.toString.call(t))throw new TypeError(e+" expected to be a standard JavaScript Date but was: "+JSON.stringify(t));if(Number.isNaN(t.getTime()))throw new TypeError(e+" expected to be valid JavaScript Date but its time was NaN: "+JSON.stringify(t));return t},e.validateQueryAndParameters=function(t,e){var o=t,s=e||{};"object"===(0,n.default)(t)&&t.text&&(o=t.text,s=t.parameters||{});return function(t){if(i(t,"Cypher query"),0===t.trim().length)throw new TypeError("Cypher query is expected to be a non-empty string.")}(o),function(t){if(!r(t)){var e=t.constructor?" "+t.constructor.name:"";throw new TypeError("Query parameters are expected to either be undefined/null or an object, given:".concat(e," ").concat(t))}}(s),{validatedQuery:o,params:s}},e.ENCRYPTION_OFF=e.ENCRYPTION_ON=void 0;var n=Un(Pn);e.ENCRYPTION_ON="ENCRYPTION_ON";function r(t){return"object"===(0,n.default)(t)&&!Array.isArray(t)&&null!==t}function i(t,e){if(!o(t))throw new TypeError(e+" expected to be string but was: "+JSON.stringify(t));return t}function o(t){return"[object String]"===Object.prototype.toString.call(t)}e.ENCRYPTION_OFF="ENCRYPTION_OFF"}));Dt(Qn);Qn.isEmptyObjectOrNull,Qn.isObject,Qn.isString,Qn.assertObject,Qn.assertString,Qn.assertNumber,Qn.assertNumberOrInteger,Qn.assertValidDate,Qn.validateQueryAndParameters,Qn.ENCRYPTION_OFF,Qn.ENCRYPTION_ON;var tr=Rt((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.BOLT_PROTOCOL_V4_1=e.BOLT_PROTOCOL_V4_0=e.BOLT_PROTOCOL_V3=e.BOLT_PROTOCOL_V2=e.BOLT_PROTOCOL_V1=e.ACCESS_MODE_WRITE=e.ACCESS_MODE_READ=void 0;e.ACCESS_MODE_READ="READ";e.ACCESS_MODE_WRITE="WRITE";e.BOLT_PROTOCOL_V1=1;e.BOLT_PROTOCOL_V2=2;e.BOLT_PROTOCOL_V3=3;e.BOLT_PROTOCOL_V4_0=4;e.BOLT_PROTOCOL_V4_1=4.1}));Dt(tr);tr.BOLT_PROTOCOL_V4_1,tr.BOLT_PROTOCOL_V4_0,tr.BOLT_PROTOCOL_V3,tr.BOLT_PROTOCOL_V2,tr.BOLT_PROTOCOL_V1,tr.ACCESS_MODE_WRITE,tr.ACCESS_MODE_READ;var er=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},nr=Rt((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=Un(er),r=Un(jn),i=Un(Vn),o=Ln(Qn),s=function(){function t(e){(0,r.default)(this,t),this._values=function(t){if(!t)return[];if(o.isString(t))return[t];if(Array.isArray(t)){for(var e=[],n=function t(e){return e.reduce((function(e,n){return Array.isArray(n)?e.concat(t(n)):e.concat(n)}),[])}(t),r=0;r<n.length;r++){var i=n[r];if(null!=i){if(!o.isString(i))throw new TypeError("Bookmark value should be a string, given: '".concat(i,"'"));e.push(i)}}return e}throw new TypeError("Bookmark should either be a string or a string array, given: '".concat(t,"'"))}(e)}return(0,i.default)(t,[{key:"isEmpty",value:function(){return 0===this._values.length}},{key:"values",value:function(){return this._values}},{key:"asBeginTransactionParameters",value:function(){return this.isEmpty()?{}:(0,n.default)({},"bookmarks",this._values)}}],[{key:"empty",value:function(){return a}}]),t}();e.default=s;var a=new s(null)}));Dt(nr);var rr=Rt((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.EMPTY_CONNECTION_HOLDER=e.default=void 0;var n=Un($n),r=Un(Wn),i=Un(qn),o=Un(jn),s=Un(Vn),a=Un(nr);function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=(0,i.default)(t);if(e){var s=(0,i.default)(this).constructor;n=Reflect.construct(o,arguments,s)}else n=o.apply(this,arguments);return(0,r.default)(this,n)}}var c=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.mode,r=void 0===n?tr.ACCESS_MODE_WRITE:n,i=e.database,s=void 0===i?"":i,u=e.bookmark,c=e.connectionProvider;(0,o.default)(this,t),this._mode=r,this._database=s?(0,Qn.assertString)(s,"database"):"",this._bookmark=u||a.default.empty(),this._connectionProvider=c,this._referenceCount=0,this._connectionPromise=Promise.resolve(null)}return(0,s.default)(t,[{key:"mode",value:function(){return this._mode}},{key:"database",value:function(){return this._database}},{key:"initializeConnection",value:function(){return 0!==this._referenceCount?(this._referenceCount++,!1):(this._connectionPromise=this._connectionProvider.acquireConnection({accessMode:this._mode,database:this._database,bookmark:this._bookmark}),this._referenceCount++,!0)}},{key:"getConnection",value:function(){return this._connectionPromise}},{key:"releaseConnection",value:function(){return 0===this._referenceCount?this._connectionPromise:(this._referenceCount--,0===this._referenceCount?this._releaseConnection():this._connectionPromise)}},{key:"close",value:function(){return 0===this._referenceCount?this._connectionPromise:(this._referenceCount=0,this._releaseConnection())}},{key:"_releaseConnection",value:function(){return this._connectionPromise=this._connectionPromise.then((function(t){return t?t.resetAndFlush().catch(l).then((function(){return t._release()})):Promise.resolve()})).catch(l),this._connectionPromise}}]),t}();function l(t){}e.default=c;var h=new(function(t){(0,n.default)(r,t);var e=u(r);function r(){return(0,o.default)(this,r),e.apply(this,arguments)}return(0,s.default)(r,[{key:"initializeConnection",value:function(){return!0}},{key:"getConnection",value:function(){return Promise.reject((0,Kn.newError)("This connection holder does not serve connections"))}},{key:"releaseConnection",value:function(){return Promise.resolve()}},{key:"close",value:function(){return Promise.resolve()}}]),r}(c));e.EMPTY_CONNECTION_HOLDER=h}));Dt(rr);rr.EMPTY_CONNECTION_HOLDER;var ir=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=qn(t)););return t},or=Rt((function(t){function e(n,r,i){return"undefined"!=typeof Reflect&&Reflect.get?t.exports=e=Reflect.get:t.exports=e=function(t,e,n){var r=ir(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}},e(n,r,i||n)}t.exports=e})),sr=Rt((function(t){var e=function(t){var e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",s=r.toStringTag||"@@toStringTag";function a(t,e,n,r){var i=e&&e.prototype instanceof l?e:l,o=Object.create(i.prototype),s=new E(r||[]);return o._invoke=function(t,e,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return T()}for(n.method=i,n.arg=o;;){var s=n.delegate;if(s){var a=b(s,n);if(a){if(a===c)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=u(t,e,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===c)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(t,n,s),o}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=a;var c={};function l(){}function h(){}function f(){}var d={};d[i]=function(){return this};var p=Object.getPrototypeOf,v=p&&p(p(I([])));v&&v!==e&&n.call(v,i)&&(d=v);var m=f.prototype=l.prototype=Object.create(d);function y(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function g(t,e){var r;this._invoke=function(i,o){function s(){return new e((function(r,s){!function r(i,o,s,a){var c=u(t[i],t,o);if("throw"!==c.type){var l=c.arg,h=l.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){r("next",t,s,a)}),(function(t){r("throw",t,s,a)})):e.resolve(h).then((function(t){l.value=t,s(l)}),(function(t){return r("throw",t,s,a)}))}a(c.arg)}(i,o,r,s)}))}return r=r?r.then(s,s):s()}}function b(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,b(t,e),"throw"===e.method))return c;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var r=u(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,c;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,c):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,c)}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function w(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function I(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return h.prototype=m.constructor=f,f.constructor=h,f[s]=h.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,s in t||(t[s]="GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},y(g.prototype),g.prototype[o]=function(){return this},t.AsyncIterator=g,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var s=new g(a(e,n,r,i),o);return t.isGeneratorFunction(n)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},y(m),m[s]="Generator",m[i]=function(){return this},m.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=I,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return s.type="throw",s.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var a=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(a&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,c):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),c},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),w(n),c}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;w(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:I(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},t}(t.exports);try{regeneratorRuntime=e}catch(t){Function("r","regeneratorRuntime = r")(e)}}));var ar=function(t){if(Array.isArray(t))return t};var ur=function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return n}};var cr=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r};var lr=function(t,e){if(t){if("string"==typeof t)return cr(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?cr(t,e):void 0}};var hr=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")};var fr=function(t,e){return ar(t)||ur(t,e)||lr(t,e)||hr()},dr=Rt((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=Un(sr),r=Un(fr),i=Un(jn),o=Un(Vn);function s(t){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=function(t,e){if(!t)return;if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(t,e)}(t))){var e=0,n=function(){};return{s:n,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i,o=!0,s=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return o=t.done,t},e:function(t){s=!0,i=t},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function u(t){var e={};return t.forEach((function(t,n){e[t]=n})),e}var c=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;(0,i.default)(this,t),this.keys=e,this.length=e.length,this._fields=n,this._fieldLookup=r||u(e)}return(0,o.default)(t,[{key:"forEach",value:function(t){var e,n=s(this.entries());try{for(n.s();!(e=n.n()).done;){var i=(0,r.default)(e.value,2),o=i[0];t(i[1],o,this)}}catch(t){n.e(t)}finally{n.f()}}},{key:"map",value:function(t){var e,n=[],i=s(this.entries());try{for(i.s();!(e=i.n()).done;){var o=(0,r.default)(e.value,2),a=o[0],u=o[1];n.push(t(u,a,this))}}catch(t){i.e(t)}finally{i.f()}return n}},{key:"entries",value:n.default.mark((function t(){var e;return n.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=0;case 1:if(!(e<this.keys.length)){t.next=7;break}return t.next=4,[this.keys[e],this._fields[e]];case 4:e++,t.next=1;break;case 7:case"end":return t.stop()}}),t,this)}))},{key:"values",value:n.default.mark((function t(){var e;return n.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=0;case 1:if(!(e<this.keys.length)){t.next=7;break}return t.next=4,this._fields[e];case 4:e++,t.next=1;break;case 7:case"end":return t.stop()}}),t,this)}))},{key:Symbol.iterator,value:n.default.mark((function t(){return n.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(this.values(),"t0",1);case 1:case"end":return t.stop()}}),t,this)}))},{key:"toObject",value:function(){var t,e={},n=s(this.entries());try{for(n.s();!(t=n.n()).done;){var i=(0,r.default)(t.value,2),o=i[0],a=i[1];e[o]=a}}catch(t){n.e(t)}finally{n.f()}return e}},{key:"get",value:function(t){var e;if("number"!=typeof t){if(void 0===(e=this._fieldLookup[t]))throw(0,Kn.newError)("This record has no field with key '"+t+"', available key are: ["+this.keys+"].")}else e=t;if(e>this._fields.length-1||e<0)throw(0,Kn.newError)("This record has no field with index '"+e+"'. Remember that indexes start at `0`, and make sure your query returns records in the shape you meant it to.");return this._fields[e]}},{key:"has",value:function(t){return"number"==typeof t?t>=0&&t<this._fields.length:void 0!==this._fieldLookup[t]}}]),t}();e.default=c}));Dt(dr);var pr=Rt((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.assertDatabaseIsEmpty=function(t,e,n){if(t){var r=(0,Kn.newError)("Driver is connected to the database that does not support multiple databases. Please upgrade to neo4j 4.0.0 or later in order to use this functionality");throw e._handleFatalError(r),n.onError(r),r}},e.assertTxConfigIsEmpty=function(t,e,n){if(t&&!t.isEmpty()){var r=(0,Kn.newError)("Driver is connected to the database that does not support transaction configuration. Please upgrade to neo4j 3.5.0 or later in order to use this functionality");throw e._handleFatalError(r),n.onError(r),r}}}));Dt(pr);pr.assertDatabaseIsEmpty,pr.assertTxConfigIsEmpty;var vr=Rt((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=Un($n),r=Un(Wn),i=Un(qn),o=Un(jn),s=Un(Vn);function a(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=(0,i.default)(t);if(e){var s=(0,i.default)(this).constructor;n=Reflect.construct(o,arguments,s)}else n=o.apply(this,arguments);return(0,r.default)(this,n)}}var u=function(){function t(e){(0,o.default)(this,t),this.position=0,this.length=e}return(0,s.default)(t,[{key:"getUInt8",value:function(t){throw new Error("Not implemented")}},{key:"getInt8",value:function(t){throw new Error("Not implemented")}},{key:"getFloat64",value:function(t){throw new Error("Not implemented")}},{key:"putUInt8",value:function(t,e){throw new Error("Not implemented")}},{key:"putInt8",value:function(t,e){throw new Error("Not implemented")}},{key:"putFloat64",value:function(t,e){throw new Error("Not implemented")}},{key:"getInt16",value:function(t){return this.getInt8(t)<<8|this.getUInt8(t+1)}},{key:"getUInt16",value:function(t){return this.getUInt8(t)<<8|this.getUInt8(t+1)}},{key:"getInt32",value:function(t){return this.getInt8(t)<<24|this.getUInt8(t+1)<<16|this.getUInt8(t+2)<<8|this.getUInt8(t+3)}},{key:"getUInt32",value:function(t){return this.getUInt8(t)<<24|this.getUInt8(t+1)<<16|this.getUInt8(t+2)<<8|this.getUInt8(t+3)}},{key:"getInt64",value:function(t){return this.getInt8(t)<<56|this.getUInt8(t+1)<<48|this.getUInt8(t+2)<<40|this.getUInt8(t+3)<<32|this.getUInt8(t+4)<<24|this.getUInt8(t+5)<<16|this.getUInt8(t+6)<<8|this.getUInt8(t+7)}},{key:"getSlice",value:function(t,e){return new c(t,e,this)}},{key:"putInt16",value:function(t,e){this.putInt8(t,e>>8),this.putUInt8(t+1,255&e)}},{key:"putUInt16",value:function(t,e){this.putUInt8(t,e>>8&255),this.putUInt8(t+1,255&e)}},{key:"putInt32",value:function(t,e){this.putInt8(t,e>>24),this.putUInt8(t+1,e>>16&255),this.putUInt8(t+2,e>>8&255),this.putUInt8(t+3,255&e)}},{key:"putUInt32",value:function(t,e){this.putUInt8(t,e>>24&255),this.putUInt8(t+1,e>>16&255),this.putUInt8(t+2,e>>8&255),this.putUInt8(t+3,255&e)}},{key:"putInt64",value:function(t,e){this.putInt8(t,e>>48),this.putUInt8(t+1,e>>42&255),this.putUInt8(t+2,e>>36&255),this.putUInt8(t+3,e>>30&255),this.putUInt8(t+4,e>>24&255),this.putUInt8(t+5,e>>16&255),this.putUInt8(t+6,e>>8&255),this.putUInt8(t+7,255&e)}},{key:"putBytes",value:function(t,e){for(var n=0,r=e.remaining();n<r;n++)this.putUInt8(t+n,e.readUInt8())}},{key:"readUInt8",value:function(){return this.getUInt8(this._updatePos(1))}},{key:"readInt8",value:function(){return this.getInt8(this._updatePos(1))}},{key:"readUInt16",value:function(){return this.getUInt16(this._updatePos(2))}},{key:"readUInt32",value:function(){return this.getUInt32(this._updatePos(4))}},{key:"readInt16",value:function(){return this.getInt16(this._updatePos(2))}},{key:"readInt32",value:function(){return this.getInt32(this._updatePos(4))}},{key:"readInt64",value:function(){return this.getInt32(this._updatePos(8))}},{key:"readFloat64",value:function(){return this.getFloat64(this._updatePos(8))}},{key:"writeUInt8",value:function(t){this.putUInt8(this._updatePos(1),t)}},{key:"writeInt8",value:function(t){this.putInt8(this._updatePos(1),t)}},{key:"writeInt16",value:function(t){this.putInt16(this._updatePos(2),t)}},{key:"writeInt32",value:function(t){this.putInt32(this._updatePos(4),t)}},{key:"writeUInt32",value:function(t){this.putUInt32(this._updatePos(4),t)}},{key:"writeInt64",value:function(t){this.putInt64(this._updatePos(8),t)}},{key:"writeFloat64",value:function(t){this.putFloat64(this._updatePos(8),t)}},{key:"writeBytes",value:function(t){this.putBytes(this._updatePos(t.remaining()),t)}},{key:"readSlice",value:function(t){return this.getSlice(this._updatePos(t),t)}},{key:"_updatePos",value:function(t){var e=this.position;return this.position+=t,e}},{key:"remaining",value:function(){return this.length-this.position}},{key:"hasRemaining",value:function(){return this.remaining()>0}},{key:"reset",value:function(){this.position=0}},{key:"toString",value:function(){return this.constructor.name+"( position="+this.position+" )\n  "+this.toHex()}},{key:"toHex",value:function(){for(var t="",e=0;e<this.length;e++){var n=this.getUInt8(e).toString(16);1===n.length&&(n="0"+n),t+=n,e!==this.length-1&&(t+=" ")}return t}}]),t}();e.default=u;var c=function(t){(0,n.default)(r,t);var e=a(r);function r(t,n,i){var s;return(0,o.default)(this,r),(s=e.call(this,n))._start=t,s._inner=i,s}return(0,s.default)(r,[{key:"putUInt8",value:function(t,e){this._inner.putUInt8(this._start+t,e)}},{key:"getUInt8",value:function(t){return this._inner.getUInt8(this._start+t)}},{key:"putInt8",value:function(t,e){this._inner.putInt8(this._start+t,e)}},{key:"putFloat64",value:function(t,e){this._inner.putFloat64(this._start+t,e)}},{key:"getInt8",value:function(t){return this._inner.getInt8(this._start+t)}},{key:"getFloat64",value:function(t){return this._inner.getFloat64(this._start+t)}}]),r}(u)}));Dt(vr);var mr=Rt((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=Un(jn),r=Un(Vn),i=Un($n),o=Un(Wn),s=Un(qn);function a(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,s.default)(t);if(e){var i=(0,s.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,o.default)(this,n)}}var u=function(t){(0,i.default)(o,t);var e=a(o);function o(t){var r;(0,n.default)(this,o);var i=t instanceof ArrayBuffer?t:new ArrayBuffer(t);return(r=e.call(this,i.byteLength))._buffer=i,r._view=new DataView(r._buffer),r}return(0,r.default)(o,[{key:"putUInt8",value:function(t,e){this._view.setUint8(t,e)}},{key:"getUInt8",value:function(t){return this._view.getUint8(t)}},{key:"putInt8",value:function(t,e){this._view.setInt8(t,e)}},{key:"getInt8",value:function(t){return this._view.getInt8(t)}},{key:"getFloat64",value:function(t){return this._view.getFloat64(t)}},{key:"putFloat64",value:function(t,e){this._view.setFloat64(t,e)}},{key:"getSlice",value:function(t,e){if(this._buffer.slice)return new o(this._buffer.slice(t,t+e));for(var n=new o(e),r=0;r<e;r++)n.putUInt8(r,this.getUInt8(r+t));return n}},{key:"readView",value:function(t){return new DataView(this._buffer,this._updatePos(t),t)}}]),o}(Un(vr).default);e.default=u}));Dt(mr);var yr=Rt((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=Un(jn),r=Un(Vn),i=Un(mr),o=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(t){return new WebSocket(t)};(0,n.default)(this,t),this._open=!0,this._pending=[],this._error=null,this._handleConnectionError=this._handleConnectionError.bind(this),this._config=e;var c=a(e,r),l=c.scheme,h=c.error;if(h)this._error=h;else{this._ws=s(l,e.address,o),this._ws.binaryType="arraybuffer";var f=this;this._ws.onclose=function(t){t&&!t.wasClean&&f._handleConnectionError()},this._ws.onopen=function(){f._clearConnectionTimeout();var t=f._pending;f._pending=null;for(var e=0;e<t.length;e++)f.write(t[e])},this._ws.onmessage=function(t){if(f.onmessage){var e=new i.default(t.data);f.onmessage(e)}},this._ws.onerror=this._handleConnectionError,this._connectionTimeoutFired=!1,this._connectionTimeoutId=this._setupConnectionTimeout()}}return(0,r.default)(t,[{key:"_handleConnectionError",value:function(){if(this._connectionTimeoutFired)return this._error=(0,Kn.newError)("Failed to establish connection in ".concat(this._config.connectionTimeout,"ms"),this._config.connectionErrorCode),void(this.onerror&&this.onerror(this._error));this._open&&(this._error=(0,Kn.newError)("WebSocket connection failure. Due to security constraints in your web browser, the reason for the failure is not available to this Neo4j Driver. Please use your browsers development console to determine the root cause of the failure. Common reasons include the database being unavailable, using the wrong connection URL or temporary network problems. If you have enabled encryption, ensure your browser is configured to trust the certificate Neo4j is configured to use. WebSocket `readyState` is: "+this._ws.readyState,this._config.connectionErrorCode),this.onerror&&this.onerror(this._error))}},{key:"write",value:function(t){if(null!==this._pending)this._pending.push(t);else{if(!(t instanceof i.default))throw(0,Kn.newError)("Don't know how to send buffer: "+t);try{this._ws.send(t._buffer)}catch(t){if(1===this._ws.readyState)throw t;this._handleConnectionError()}}}},{key:"close",value:function(){var t=this;return new Promise((function(e,n){t._ws&&3!==t._ws.readyState?(t._open=!1,t._clearConnectionTimeout(),t._ws.onclose=function(){return e()},t._ws.close()):e()}))}},{key:"_setupConnectionTimeout",value:function(){var t=this,e=this._config.connectionTimeout;if(e){var n=this._ws;return setTimeout((function(){1!==n.readyState&&(t._connectionTimeoutFired=!0,n.close())}),e)}return null}},{key:"_clearConnectionTimeout",value:function(){var t=this._connectionTimeoutId;(t||0===t)&&(this._connectionTimeoutFired=!1,this._connectionTimeoutId=null,clearTimeout(t))}}]),t}();function s(t,e,n){var r=t+"://"+e.asHostPort();try{return n(r)}catch(r){if(function(t,e){return"SyntaxError"===t.name&&(n=e.asHostPort(),"["===n.charAt(0)&&-1!==n.indexOf("]"));var n}(r,e))return n(function(t,e){var n=e.host().replace(new RegExp(":","g"),"-").replace("%","s")+".ipv6-literal.net";return"".concat(t,"://").concat(n,":").concat(e.port())}(t,e));throw r}}function a(t,e){var n=function(t){return!0===t.encrypted||t.encrypted===Qn.ENCRYPTION_ON}(t),r=function(t){return!1===t.encrypted||t.encrypted===Qn.ENCRYPTION_OFF}(t),i=t.trust,o=function(t){var e="function"==typeof t?t():"";return e&&e.toLowerCase().indexOf("https")>=0}(e);return function(t,e,n){t&&!n?console.warn("Neo4j driver is configured to use secure WebSocket on a HTTP web page. WebSockets might not work in a mixed content environment. Please consider configuring driver to not use encryption."):e&&n&&console.warn("Neo4j driver is configured to use insecure WebSocket on a HTTPS web page. WebSockets might not work in a mixed content environment. Please consider configuring driver to use encryption.")}(n,r,o),r?{scheme:"ws",error:null}:o?{scheme:"wss",error:null}:n?i&&"TRUST_SYSTEM_CA_SIGNED_CERTIFICATES"!==i?{scheme:null,error:(0,Kn.newError)("The browser version of this driver only supports one trust strategy, 'TRUST_SYSTEM_CA_SIGNED_CERTIFICATES'. "+i+' is not supported. Please either use TRUST_SYSTEM_CA_SIGNED_CERTIFICATES or disable encryption by setting `encrypted:"'+Qn.ENCRYPTION_OFF+'"` in the driver configuration.')}:{scheme:"wss",error:null}:{scheme:"ws",error:null}}function u(){return"undefined"!=typeof window&&window.location?window.location.protocol:null}e.default=o}));Dt(yr);var gr=Rt((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=Un(jn),r=Un(Vn),i=function(){function t(){(0,n.default)(this,t)}return(0,r.default)(t,[{key:"resolve",value:function(){throw new Error("Abstract function")}},{key:"_resolveToItself",value:function(t){return Promise.resolve([t])}}]),t}();e.default=i}));Dt(gr);var br=Rt((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=Un(jn),r=Un(Vn),i=Un($n),o=Un(Wn),s=Un(qn);function a(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,s.default)(t);if(e){var i=(0,s.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,o.default)(this,n)}}var u=function(t){(0,i.default)(o,t);var e=a(o);function o(){return(0,n.default)(this,o),e.apply(this,arguments)}return(0,r.default)(o,[{key:"resolve",value:function(t){return this._resolveToItself(t)}}]),o}(Un(gr).default);e.default=u}));function _r(t,e,n){return e<=t&&t<=n}function wr(t){if(void 0===t)return{};if(t===Object(t))return t;throw TypeError("Could not convert argument to dictionary")}Dt(br);function Er(t){this.tokens=[].slice.call(t)}Er.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():-1},prepend:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(t)},push:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.push(e.shift());else this.tokens.push(t)}};function Ir(t,e){if(t)throw TypeError("Decoder error");return e||65533}function Tr(t,e){if(!(this instanceof Tr))return new Tr(t,e);if("utf-8"!==(t=void 0!==t?String(t).toLowerCase():"utf-8"))throw new Error("Encoding not supported. Only utf-8 is supported");e=wr(e),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=Boolean(e.fatal),this._ignoreBOM=Boolean(e.ignoreBOM),Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}function kr(t,e){if(!(this instanceof kr))return new kr(t,e);if("utf-8"!==(t=void 0!==t?String(t).toLowerCase():"utf-8"))throw new Error("Encoding not supported. Only utf-8 is supported");e=wr(e),this._streaming=!1,this._encoder=null,this._options={fatal:Boolean(e.fatal)},Object.defineProperty(this,"encoding",{value:"utf-8"})}function Sr(t){var e=t.fatal,n=0,r=0,i=0,o=128,s=191;this.handler=function(t,a){if(-1===a&&0!==i)return i=0,Ir(e);if(-1===a)return-1;if(0===i){if(_r(a,0,127))return a;if(_r(a,194,223))i=1,n=a-192;else if(_r(a,224,239))224===a&&(o=160),237===a&&(s=159),i=2,n=a-224;else{if(!_r(a,240,244))return Ir(e);240===a&&(o=144),244===a&&(s=143),i=3,n=a-240}return n<<=6*i,null}if(!_r(a,o,s))return n=i=r=0,o=128,s=191,t.prepend(a),Ir(e);if(o=128,s=191,n+=a-128<<6*(i-(r+=1)),r!==i)return null;var u=n;return n=i=r=0,u}}function xr(t){t.fatal;this.handler=function(t,e){if(-1===e)return-1;if(_r(e,0,127))return e;var n,r;_r(e,128,2047)?(n=1,r=192):_r(e,2048,65535)?(n=2,r=224):_r(e,65536,1114111)&&(n=3,r=240);for(var i=[(e>>6*n)+r];n>0;){var o=e>>6*(n-1);i.push(128|63&o),n-=1}return i}}Tr.prototype={decode:function(t,e){var n;n="object"==typeof t&&t instanceof ArrayBuffer?new Uint8Array(t):"object"==typeof t&&"buffer"in t&&t.buffer instanceof ArrayBuffer?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(0),e=wr(e),this._streaming||(this._decoder=new Sr({fatal:this._fatal}),this._BOMseen=!1),this._streaming=Boolean(e.stream);for(var r,i=new Er(n),o=[];!i.endOfStream()&&-1!==(r=this._decoder.handler(i,i.read()));)null!==r&&(Array.isArray(r)?o.push.apply(o,r):o.push(r));if(!this._streaming){do{if(-1===(r=this._decoder.handler(i,i.read())))break;null!==r&&(Array.isArray(r)?o.push.apply(o,r):o.push(r))}while(!i.endOfStream());this._decoder=null}return o.length&&(-1===["utf-8"].indexOf(this.encoding)||this._ignoreBOM||this._BOMseen||(65279===o[0]?(this._BOMseen=!0,o.shift()):this._BOMseen=!0)),function(t){for(var e="",n=0;n<t.length;++n){var r=t[n];r<=65535?e+=String.fromCharCode(r):(r-=65536,e+=String.fromCharCode(55296+(r>>10),56320+(1023&r)))}return e}(o)}},kr.prototype={encode:function(t,e){t=t?String(t):"",e=wr(e),this._streaming||(this._encoder=new xr(this._options)),this._streaming=Boolean(e.stream);for(var n,r=[],i=new Er(function(t){for(var e=String(t),n=e.length,r=0,i=[];r<n;){var o=e.charCodeAt(r);if(o<55296||o>57343)i.push(o);else if(56320<=o&&o<=57343)i.push(65533);else if(55296<=o&&o<=56319)if(r===n-1)i.push(65533);else{var s=t.charCodeAt(r+1);if(56320<=s&&s<=57343){var a=1023&o,u=1023&s;i.push(65536+(a<<10)+u),r+=1}else i.push(65533)}r+=1}return i}(t));!i.endOfStream()&&-1!==(n=this._encoder.handler(i,i.read()));)Array.isArray(n)?r.push.apply(r,n):r.push(n);if(!this._streaming){for(;-1!==(n=this._encoder.handler(i,i.read()));)Array.isArray(n)?r.push.apply(r,n):r.push(n);this._encoder=null}return new Uint8Array(r)}};var Or=Ct(Object.freeze({__proto__:null,TextEncoder:kr,TextDecoder:Tr})),Ar=Rt((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=Un(mr),r=new Or.TextEncoder("utf-8"),i=new Or.TextDecoder("utf-8");var o={encode:function(t){return new n.default(r.encode(t).buffer)},decode:function(t,e){if(t instanceof n.default)return i.decode(t.readView(Math.min(e,t.length-t.position)));for(var r=new n.default(e),o=0;o<e;o++)r.writeUInt8(t.readUInt8());return r.reset(),i.decode(r.readView(e))}};e.default=o}));Dt(Ar);var Nr=Rt((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.utf8=e.HostNameResolver=e.Channel=e.alloc=void 0;var n=Un(mr),r=Un(yr),i=Un(br),o=Un(Ar);e.alloc=function(t){return new n.default(t)};var s=r.default;e.Channel=s;var a=i.default;e.HostNameResolver=a;var u=o.default;e.utf8=u}));Dt(Nr);Nr.utf8,Nr.HostNameResolver,Nr.Channel,Nr.alloc;var Dr=Rt((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=Un(jn),r=Un(Vn),i=Un($n),o=Un(Wn),s=Un(qn);function a(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,s.default)(t);if(e){var i=(0,s.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,o.default)(this,n)}}var u=function(t){(0,i.default)(o,t);var e=a(o);function o(t){var r;(0,n.default)(this,o);for(var i=0,s=0;s<t.length;s++)i+=t[s].length;return(r=e.call(this,i))._buffers=t,r}return(0,r.default)(o,[{key:"getUInt8",value:function(t){for(var e=0;e<this._buffers.length;e++){var n=this._buffers[e];if(!(t>=n.length))return n.getUInt8(t);t-=n.length}}},{key:"getInt8",value:function(t){for(var e=0;e<this._buffers.length;e++){var n=this._buffers[e];if(!(t>=n.length))return n.getInt8(t);t-=n.length}}},{key:"getFloat64",value:function(t){for(var e=(0,Nr.alloc)(8),n=0;n<8;n++)e.putUInt8(n,this.getUInt8(t+n));return e.getFloat64(0)}}]),o}(Un(vr).default);e.default=u}));Dt(Dr);var Rr=Rt((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Dechunker=e.Chunker=void 0;var n=Un(jn),r=Un(Vn),i=Un($n),o=Un(Wn),s=Un(qn),a=Un(vr),u=Un(Dr);function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,s.default)(t);if(e){var i=(0,s.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,o.default)(this,n)}}var l=function(t){(0,i.default)(o,t);var e=c(o);function o(t,r){var i;return(0,n.default)(this,o),(i=e.call(this,0))._bufferSize=r||1400,i._ch=t,i._buffer=(0,Nr.alloc)(i._bufferSize),i._currentChunkStart=0,i._chunkOpen=!1,i}return(0,r.default)(o,[{key:"putUInt8",value:function(t,e){this._ensure(1),this._buffer.writeUInt8(e)}},{key:"putInt8",value:function(t,e){this._ensure(1),this._buffer.writeInt8(e)}},{key:"putFloat64",value:function(t,e){this._ensure(8),this._buffer.writeFloat64(e)}},{key:"putBytes",value:function(t,e){for(;e.remaining()>0;)this._ensure(1),this._buffer.remaining()>e.remaining()?this._buffer.writeBytes(e):this._buffer.writeBytes(e.readSlice(this._buffer.remaining()));return this}},{key:"flush",value:function(){if(this._buffer.position>0){this._closeChunkIfOpen();var t=this._buffer;this._buffer=null,this._ch.write(t.getSlice(0,t.position)),this._buffer=(0,Nr.alloc)(this._bufferSize),this._chunkOpen=!1}return this}},{key:"messageBoundary",value:function(){this._closeChunkIfOpen(),this._buffer.remaining()<2&&this.flush(),this._buffer.writeInt16(0)}},{key:"_ensure",value:function(t){var e=this._chunkOpen?t:t+2;this._buffer.remaining()<e&&this.flush(),this._chunkOpen||(this._currentChunkStart=this._buffer.position,this._buffer.position=this._buffer.position+2,this._chunkOpen=!0)}},{key:"_closeChunkIfOpen",value:function(){if(this._chunkOpen){var t=this._buffer.position-(this._currentChunkStart+2);this._buffer.putUInt16(this._currentChunkStart,t),this._chunkOpen=!1}}}]),o}(a.default);e.Chunker=l;var h=function(){function t(){(0,n.default)(this,t),this._currentMessage=[],this._partialChunkHeader=0,this._state=this.AWAITING_CHUNK}return(0,r.default)(t,[{key:"AWAITING_CHUNK",value:function(t){return t.remaining()>=2?this._onHeader(t.readUInt16()):(this._partialChunkHeader=t.readUInt8()<<8,this.IN_HEADER)}},{key:"IN_HEADER",value:function(t){return this._onHeader(65535&(this._partialChunkHeader|t.readUInt8()))}},{key:"IN_CHUNK",value:function(t){return this._chunkSize<=t.remaining()?(this._currentMessage.push(t.readSlice(this._chunkSize)),this.AWAITING_CHUNK):(this._chunkSize-=t.remaining(),this._currentMessage.push(t.readSlice(t.remaining())),this.IN_CHUNK)}},{key:"CLOSED",value:function(t){}},{key:"_onHeader",value:function(t){if(0===t){var e;switch(this._currentMessage.length){case 0:return this.AWAITING_CHUNK;case 1:e=this._currentMessage[0];break;default:e=new u.default(this._currentMessage)}return this._currentMessage=[],this.onmessage(e),this.AWAITING_CHUNK}return this._chunkSize=t,this.IN_CHUNK}},{key:"write",value:function(t){for(;t.hasRemaining();)this._state=this._state(t)}}]),t}();e.Dechunker=h}));Dt(Rr);Rr.Dechunker,Rr.Chunker;var Cr=Rt((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Structure=e.Unpacker=e.Packer=void 0;var n=Un(Pn),r=Un(jn),i=Un(Vn),o=Ln(Xn),s=function(){function t(e,n){(0,r.default)(this,t),this.signature=e,this.fields=n}return(0,i.default)(t,[{key:"toString",value:function(){for(var t="",e=0;e<this.fields.length;e++)e>0&&(t+=", "),t+=this.fields[e];return"Structure("+this.signature+", ["+t+"])"}}]),t}();e.Structure=s;var a=function(){function t(e){(0,r.default)(this,t),this._ch=e,this._byteArraysSupported=!0}return(0,i.default)(t,[{key:"packable",value:function(t){var e=this;if(null===t)return function(){return e._ch.writeUInt8(192)};if(!0===t)return function(){return e._ch.writeUInt8(195)};if(!1===t)return function(){return e._ch.writeUInt8(194)};if("number"==typeof t)return function(){return e.packFloat(t)};if("string"==typeof t)return function(){return e.packString(t)};if((0,o.isInt)(t))return function(){return e.packInteger(t)};if(t instanceof Int8Array)return function(){return e.packBytes(t)};if(t instanceof Array)return function(){e.packListHeader(t.length);for(var n=0;n<t.length;n++)e.packable(void 0===t[n]?null:t[n])()};if(function(t){if(null==t)return!1;return"function"==typeof t[Symbol.iterator]}(t))return this.packableIterable(t);if(t instanceof Jn.Node)return this._nonPackableValue("It is not allowed to pass nodes in query parameters, given: ".concat(t));if(t instanceof Jn.Relationship)return this._nonPackableValue("It is not allowed to pass relationships in query parameters, given: ".concat(t));if(t instanceof Jn.Path)return this._nonPackableValue("It is not allowed to pass paths in query parameters, given: ".concat(t));if(t instanceof s){for(var r=[],i=0;i<t.fields.length;i++)r[i]=this.packable(t.fields[i]);return function(){return e.packStruct(t.signature,r)}}return"object"===(0,n.default)(t)?function(){for(var n=Object.keys(t),r=0,i=0;i<n.length;i++)void 0!==t[n[i]]&&r++;e.packMapHeader(r);for(var o=0;o<n.length;o++){var s=n[o];void 0!==t[s]&&(e.packString(s),e.packable(t[s])())}}:this._nonPackableValue("Unable to pack the given value: ".concat(t))}},{key:"packableIterable",value:function(t){try{var e=Array.from(t);return this.packable(e)}catch(e){throw(0,Kn.newError)("Cannot pack given iterable, ".concat(e.message,": ").concat(t))}}},{key:"packStruct",value:function(t,e){e=e||[],this.packStructHeader(e.length,t);for(var n=0;n<e.length;n++)e[n]()}},{key:"packInteger",value:function(t){var e=t.high,n=t.low;t.greaterThanOrEqual(-16)&&t.lessThan(128)?this._ch.writeInt8(n):t.greaterThanOrEqual(-128)&&t.lessThan(-16)?(this._ch.writeUInt8(200),this._ch.writeInt8(n)):t.greaterThanOrEqual(-32768)&&t.lessThan(32768)?(this._ch.writeUInt8(201),this._ch.writeInt16(n)):t.greaterThanOrEqual(-2147483648)&&t.lessThan(2147483648)?(this._ch.writeUInt8(202),this._ch.writeInt32(n)):(this._ch.writeUInt8(203),this._ch.writeInt32(e),this._ch.writeInt32(n))}},{key:"packFloat",value:function(t){this._ch.writeUInt8(193),this._ch.writeFloat64(t)}},{key:"packString",value:function(t){var e=Nr.utf8.encode(t),n=e.length;if(n<16)this._ch.writeUInt8(128|n),this._ch.writeBytes(e);else if(n<256)this._ch.writeUInt8(208),this._ch.writeUInt8(n),this._ch.writeBytes(e);else if(n<65536)this._ch.writeUInt8(209),this._ch.writeUInt8(n/256>>0),this._ch.writeUInt8(n%256),this._ch.writeBytes(e);else{if(!(n<4294967296))throw(0,Kn.newError)("UTF-8 strings of size "+n+" are not supported");this._ch.writeUInt8(210),this._ch.writeUInt8((n/16777216>>0)%256),this._ch.writeUInt8((n/65536>>0)%256),this._ch.writeUInt8((n/256>>0)%256),this._ch.writeUInt8(n%256),this._ch.writeBytes(e)}}},{key:"packListHeader",value:function(t){if(t<16)this._ch.writeUInt8(144|t);else if(t<256)this._ch.writeUInt8(212),this._ch.writeUInt8(t);else if(t<65536)this._ch.writeUInt8(213),this._ch.writeUInt8((t/256>>0)%256),this._ch.writeUInt8(t%256);else{if(!(t<4294967296))throw(0,Kn.newError)("Lists of size "+t+" are not supported");this._ch.writeUInt8(214),this._ch.writeUInt8((t/16777216>>0)%256),this._ch.writeUInt8((t/65536>>0)%256),this._ch.writeUInt8((t/256>>0)%256),this._ch.writeUInt8(t%256)}}},{key:"packBytes",value:function(t){if(!this._byteArraysSupported)throw(0,Kn.newError)("Byte arrays are not supported by the database this driver is connected to");this.packBytesHeader(t.length);for(var e=0;e<t.length;e++)this._ch.writeInt8(t[e])}},{key:"packBytesHeader",value:function(t){if(t<256)this._ch.writeUInt8(204),this._ch.writeUInt8(t);else if(t<65536)this._ch.writeUInt8(205),this._ch.writeUInt8((t/256>>0)%256),this._ch.writeUInt8(t%256);else{if(!(t<4294967296))throw(0,Kn.newError)("Byte arrays of size "+t+" are not supported");this._ch.writeUInt8(206),this._ch.writeUInt8((t/16777216>>0)%256),this._ch.writeUInt8((t/65536>>0)%256),this._ch.writeUInt8((t/256>>0)%256),this._ch.writeUInt8(t%256)}}},{key:"packMapHeader",value:function(t){if(t<16)this._ch.writeUInt8(160|t);else if(t<256)this._ch.writeUInt8(216),this._ch.writeUInt8(t);else if(t<65536)this._ch.writeUInt8(217),this._ch.writeUInt8(t/256>>0),this._ch.writeUInt8(t%256);else{if(!(t<4294967296))throw(0,Kn.newError)("Maps of size "+t+" are not supported");this._ch.writeUInt8(218),this._ch.writeUInt8((t/16777216>>0)%256),this._ch.writeUInt8((t/65536>>0)%256),this._ch.writeUInt8((t/256>>0)%256),this._ch.writeUInt8(t%256)}}},{key:"packStructHeader",value:function(t,e){if(t<16)this._ch.writeUInt8(176|t),this._ch.writeUInt8(e);else if(t<256)this._ch.writeUInt8(220),this._ch.writeUInt8(t),this._ch.writeUInt8(e);else{if(!(t<65536))throw(0,Kn.newError)("Structures of size "+t+" are not supported");this._ch.writeUInt8(221),this._ch.writeUInt8(t/256>>0),this._ch.writeUInt8(t%256)}}},{key:"disableByteArrays",value:function(){this._byteArraysSupported=!1}},{key:"_nonPackableValue",value:function(t){return function(){throw(0,Kn.newError)(t,Kn.PROTOCOL_ERROR)}}}]),t}();e.Packer=a;var u=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(0,r.default)(this,t),this._disableLosslessIntegers=e}return(0,i.default)(t,[{key:"unpack",value:function(t){var e=t.readUInt8(),n=240&e,r=15&e;if(192===e)return null;var i=this._unpackBoolean(e);if(null!==i)return i;var s=this._unpackNumberOrInteger(e,t);if(null!==s)return this._disableLosslessIntegers&&(0,o.isInt)(s)?s.toNumberOrInfinity():s;var a=this._unpackString(e,n,r,t);if(null!==a)return a;var u=this._unpackList(e,n,r,t);if(null!==u)return u;var c=this._unpackByteArray(e,t);if(null!==c)return c;var l=this._unpackMap(e,n,r,t);if(null!==l)return l;var h=this._unpackStruct(e,n,r,t);if(null!==h)return h;throw(0,Kn.newError)("Unknown packed value with marker "+e.toString(16))}},{key:"unpackInteger",value:function(t){var e=t.readUInt8(),n=this._unpackInteger(e,t);if(null==n)throw(0,Kn.newError)("Unable to unpack integer value with marker "+e.toString(16));return n}},{key:"_unpackBoolean",value:function(t){return 195===t||194!==t&&null}},{key:"_unpackNumberOrInteger",value:function(t,e){return 193===t?e.readFloat64():this._unpackInteger(t,e)}},{key:"_unpackInteger",value:function(t,e){if(t>=0&&t<128)return(0,o.int)(t);if(t>=240&&t<256)return(0,o.int)(t-256);if(200===t)return(0,o.int)(e.readInt8());if(201===t)return(0,o.int)(e.readInt16());if(202===t){var n=e.readInt32();return(0,o.int)(n)}if(203===t){var r=e.readInt32(),i=e.readInt32();return new o.default(i,r)}return null}},{key:"_unpackString",value:function(t,e,n,r){return 128===e?Nr.utf8.decode(r,n):208===t?Nr.utf8.decode(r,r.readUInt8()):209===t?Nr.utf8.decode(r,r.readUInt16()):210===t?Nr.utf8.decode(r,r.readUInt32()):null}},{key:"_unpackList",value:function(t,e,n,r){return 144===e?this._unpackListWithSize(n,r):212===t?this._unpackListWithSize(r.readUInt8(),r):213===t?this._unpackListWithSize(r.readUInt16(),r):214===t?this._unpackListWithSize(r.readUInt32(),r):null}},{key:"_unpackListWithSize",value:function(t,e){for(var n=[],r=0;r<t;r++)n.push(this.unpack(e));return n}},{key:"_unpackByteArray",value:function(t,e){return 204===t?this._unpackByteArrayWithSize(e.readUInt8(),e):205===t?this._unpackByteArrayWithSize(e.readUInt16(),e):206===t?this._unpackByteArrayWithSize(e.readUInt32(),e):null}},{key:"_unpackByteArrayWithSize",value:function(t,e){for(var n=new Int8Array(t),r=0;r<t;r++)n[r]=e.readInt8();return n}},{key:"_unpackMap",value:function(t,e,n,r){return 160===e?this._unpackMapWithSize(n,r):216===t?this._unpackMapWithSize(r.readUInt8(),r):217===t?this._unpackMapWithSize(r.readUInt16(),r):218===t?this._unpackMapWithSize(r.readUInt32(),r):null}},{key:"_unpackMapWithSize",value:function(t,e){for(var n={},r=0;r<t;r++){n[this.unpack(e)]=this.unpack(e)}return n}},{key:"_unpackStruct",value:function(t,e,n,r){return 176===e?this._unpackStructWithSize(n,r):220===t?this._unpackStructWithSize(r.readUInt8(),r):221===t?this._unpackStructWithSize(r.readUInt16(),r):null}},{key:"_unpackStructWithSize",value:function(t,e){var n=e.readUInt8();return 78===n?this._unpackNode(t,e):82===n?this._unpackRelationship(t,e):114===n?this._unpackUnboundRelationship(t,e):80===n?this._unpackPath(t,e):this._unpackUnknownStruct(n,t,e)}},{key:"_unpackNode",value:function(t,e){return this._verifyStructSize("Node",3,t),new Jn.Node(this.unpack(e),this.unpack(e),this.unpack(e))}},{key:"_unpackRelationship",value:function(t,e){return this._verifyStructSize("Relationship",5,t),new Jn.Relationship(this.unpack(e),this.unpack(e),this.unpack(e),this.unpack(e),this.unpack(e))}},{key:"_unpackUnboundRelationship",value:function(t,e){return this._verifyStructSize("UnboundRelationship",3,t),new Jn.UnboundRelationship(this.unpack(e),this.unpack(e),this.unpack(e))}},{key:"_unpackPath",value:function(t,e){this._verifyStructSize("Path",3,t);for(var n=this.unpack(e),r=this.unpack(e),i=this.unpack(e),o=[],s=n[0],a=0;a<i.length;a+=2){var u=n[i[a+1]],c=i[a],l=void 0;c>0?(l=r[c-1])instanceof Jn.UnboundRelationship&&(r[c-1]=l=l.bind(s.identity,u.identity)):(l=r[-c-1])instanceof Jn.UnboundRelationship&&(r[-c-1]=l=l.bind(u.identity,s.identity)),o.push(new Jn.PathSegment(s,l,u)),s=u}return new Jn.Path(n[0],n[n.length-1],o)}},{key:"_unpackUnknownStruct",value:function(t,e,n){for(var r=new s(t,[]),i=0;i<e;i++)r.fields.push(this.unpack(n));return r}},{key:"_verifyStructSize",value:function(t,e,n){if(e!==n)throw(0,Kn.newError)("Wrong struct size for ".concat(t,", expected ").concat(e," but was ").concat(n),Kn.PROTOCOL_ERROR)}}]),t}();e.Unpacker=u}));Dt(Cr);Cr.Structure,Cr.Unpacker,Cr.Packer;var Ur=Rt((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.ALL=void 0;var n=Un(jn),r=Un(Vn);e.ALL=-1;var i=function(){function t(e,r,i){(0,n.default)(this,t),this.signature=e,this.fields=r,this.toString=i}return(0,r.default)(t,null,[{key:"init",value:function(e,n){return new t(1,[e,n],(function(){return"INIT ".concat(e," {...}")}))}},{key:"run",value:function(e,n){return new t(16,[e,n],(function(){return"RUN ".concat(e," ").concat(JSON.stringify(n))}))}},{key:"pullAll",value:function(){return a}},{key:"reset",value:function(){return u}},{key:"hello",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=Object.assign({user_agent:e},n);return null!=r&&(i.routing=r),new t(1,[i],(function(){return"HELLO {user_agent: '".concat(e,"', ...}")}))}},{key:"begin",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.bookmark,r=e.txConfig,i=e.database,s=e.mode,a=o(n,r,i,s);return new t(17,[a],(function(){return"BEGIN ".concat(JSON.stringify(a))}))}},{key:"commit",value:function(){return c}},{key:"rollback",value:function(){return l}},{key:"runWithMetadata",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=r.bookmark,s=r.txConfig,a=r.database,u=r.mode,c=o(i,s,a,u);return new t(16,[e,n,c],(function(){return"RUN ".concat(e," ").concat(JSON.stringify(n)," ").concat(JSON.stringify(c))}))}},{key:"goodbye",value:function(){return h}},{key:"pull",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.stmtId,r=void 0===n?-1:n,i=e.n,o=void 0===i?-1:i,a=s(r||-1,o||-1);return new t(63,[a],(function(){return"PULL ".concat(JSON.stringify(a))}))}},{key:"discard",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.stmtId,r=void 0===n?-1:n,i=e.n,o=void 0===i?-1:i,a=s(r||-1,o||-1);return new t(47,[a],(function(){return"DISCARD ".concat(JSON.stringify(a))}))}}]),t}();function o(t,e,n,r){var i={};return t.isEmpty()||(i.bookmarks=t.values()),e.timeout&&(i.tx_timeout=e.timeout),e.metadata&&(i.tx_metadata=e.metadata),n&&(i.db=(0,Qn.assertString)(n,"database")),r===tr.ACCESS_MODE_READ&&(i.mode="r"),i}function s(t,e){var n={n:(0,Xn.int)(e)};return-1!==t&&(n.qid=(0,Xn.int)(t)),n}e.default=i;var a=new i(63,[],(function(){return"PULL_ALL"})),u=new i(15,[],(function(){return"RESET"})),c=new i(18,[],(function(){return"COMMIT"})),l=new i(19,[],(function(){return"ROLLBACK"})),h=new i(2,[],(function(){return"GOODBYE"}))}));Dt(Ur);Ur.ALL;var Pr=Rt((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=Un(jn),r=Un(Vn),i=Ln(Qn),o=function(){function t(e){(0,n.default)(this,t),function(t){t&&i.assertObject(t,"Transaction config")}(e),this.timeout=function(t){if(i.isObject(t)&&(t.timeout||0===t.timeout)){i.assertNumberOrInteger(t.timeout,"Transaction timeout");var e=(0,Xn.int)(t.timeout);if(e.isZero())throw(0,Kn.newError)("Transaction timeout should not be zero");if(e.isNegative())throw(0,Kn.newError)("Transaction timeout should not be negative");return e}return null}(e),this.metadata=function(t){if(i.isObject(t)&&t.metadata){var e=t.metadata;if(i.assertObject(e),0!==Object.keys(e).length)return e}return null}(e)}return(0,r.default)(t,[{key:"isEmpty",value:function(){return Object.values(this).every((function(t){return null==t}))}}],[{key:"empty",value:function(){return s}}]),t}();e.default=o;var s=new o({})}));Dt(Pr);var Lr=Rt((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=Un(jn),r=Un(Vn),i=Un(nr),o=(Un(jr),Ln(Cr)),s=Un(Ur),a=Un(Pr),u=function(){function t(e,r,i){(0,n.default)(this,t),this._connection=e,this._packer=this._createPacker(r),this._unpacker=this._createUnpacker(i)}return(0,r.default)(t,[{key:"packer",value:function(){return this._packer}},{key:"unpacker",value:function(){return this._unpacker}},{key:"transformMetadata",value:function(t){return t}},{key:"initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.userAgent,n=t.authToken,r=t.onError,i=t.onComplete,o=new Mr.LoginObserver({connection:this._connection,afterError:r,afterComplete:i});return this._connection.write(s.default.init(e,n),o,!0),o}},{key:"prepareToClose",value:function(){}},{key:"beginTransaction",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.bookmark,n=t.txConfig,r=t.database,i=t.mode,o=t.beforeError,s=t.afterError,a=t.beforeComplete,u=t.afterComplete;return this.run("BEGIN",e?e.asBeginTransactionParameters():{},{bookmark:e,txConfig:n,database:r,mode:i,beforeError:o,afterError:s,beforeComplete:a,afterComplete:u,flush:!1})}},{key:"commitTransaction",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.beforeError,n=t.afterError,r=t.beforeComplete,o=t.afterComplete;return this.run("COMMIT",{},{bookmark:i.default.empty(),txConfig:a.default.empty(),mode:tr.ACCESS_MODE_WRITE,beforeError:e,afterError:n,beforeComplete:r,afterComplete:o})}},{key:"rollbackTransaction",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.beforeError,n=t.afterError,r=t.beforeComplete,o=t.afterComplete;return this.run("ROLLBACK",{},{bookmark:i.default.empty(),txConfig:a.default.empty(),mode:tr.ACCESS_MODE_WRITE,beforeError:e,afterError:n,beforeComplete:r,afterComplete:o})}},{key:"run",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=(n.bookmark,n.txConfig),i=n.database,o=(n.mode,n.beforeKeys),a=n.afterKeys,u=n.beforeError,c=n.afterError,l=n.beforeComplete,h=n.afterComplete,f=n.flush,d=void 0===f||f,p=new Mr.ResultStreamObserver({connection:this._connection,beforeKeys:o,afterKeys:a,beforeError:u,afterError:c,beforeComplete:l,afterComplete:h});return(0,pr.assertTxConfigIsEmpty)(r,this._connection,p),(0,pr.assertDatabaseIsEmpty)(i,this._connection,p),this._connection.write(s.default.run(t,e),p,!1),this._connection.write(s.default.pullAll(),p,d),p}},{key:"reset",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.onError,n=t.onComplete,r=new Mr.ResetObserver({connection:this._connection,onError:e,onComplete:n});return this._connection.write(s.default.reset(),r,!0),r}},{key:"_createPacker",value:function(t){return new o.Packer(t)}},{key:"_createUnpacker",value:function(t){return new o.Unpacker(t)}},{key:"version",get:function(){return tr.BOLT_PROTOCOL_V1}}]),t}();e.default=u}));Dt(Lr);var jr=Rt((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=Un(jn),r=Un(Vn),i=(Un(Lr),function(){function t(e){(0,n.default)(this,t),this._errorHandler=e}return(0,r.default)(t,[{key:"isOpen",value:function(){throw new Error("not implemented")}},{key:"protocol",value:function(){throw new Error("not implemented")}},{key:"connect",value:function(t,e){throw new Error("not implemented")}},{key:"write",value:function(t,e,n){throw new Error("not implemented")}},{key:"resetAndFlush",value:function(){throw new Error("not implemented")}},{key:"close",value:function(){throw new Error("not implemented")}},{key:"handleAndTransformError",value:function(t,e){return this._errorHandler?this._errorHandler.handleAndTransformError(t,e):t}},{key:"id",get:function(){throw new Error("not implemented")}},{key:"databaseId",get:function(){throw new Error("not implemented")},set:function(t){throw new Error("not implemented")}},{key:"address",get:function(){throw new Error("not implemented")}},{key:"version",get:function(){throw new Error("not implemented")},set:function(t){throw new Error("not implemented")}},{key:"server",get:function(){throw new Error("not implemented")}}]),t}());e.default=i}));Dt(jr);var Mr=Rt((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.CompletedObserver=e.FailedObserver=e.ResetObserver=e.LoginObserver=e.ResultStreamObserver=e.StreamObserver=void 0;var n=Un(Bn),r=Un(or),i=Un($n),o=Un(Wn),s=Un(qn),a=Un(jn),u=Un(Vn),c=Un(dr);Un(jr),Un(Xn);function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,s.default)(t);if(e){var i=(0,s.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,o.default)(this,n)}}var h=function(){function t(){(0,a.default)(this,t)}return(0,u.default)(t,[{key:"onNext",value:function(t){}},{key:"onError",value:function(t){}},{key:"onCompleted",value:function(t){}}]),t}();e.StreamObserver=h;var f=function(t){(0,i.default)(n,t);var e=l(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r.connection,o=r.reactive,s=void 0!==o&&o,u=r.moreFunction,c=r.discardFunction,l=r.fetchSize,h=void 0===l?Ur.ALL:l,f=r.beforeError,d=r.afterError,p=r.beforeKeys,v=r.afterKeys,m=r.beforeComplete,g=r.afterComplete;return(0,a.default)(this,n),(t=e.call(this))._connection=i,t._fieldKeys=null,t._fieldLookup=null,t._head=null,t._queuedRecords=[],t._tail=null,t._error=null,t._observers=[],t._meta={},t._beforeError=f,t._afterError=d,t._beforeKeys=p,t._afterKeys=v,t._beforeComplete=m,t._afterComplete=g,t._queryId=null,t._moreFunction=u,t._discardFunction=c,t._discard=!1,t._fetchSize=h,t._setState(s?y.READY:y.READY_STREAMING),t._setupAuoPull(h),t}return(0,u.default)(n,[{key:"onNext",value:function(t){var e=new c.default(this._fieldKeys,t,this._fieldLookup);this._observers.some((function(t){return t.onNext}))?this._observers.forEach((function(t){t.onNext&&t.onNext(e)})):(this._queuedRecords.push(e),this._queuedRecords.length>this._highRecordWatermark&&(this._autoPull=!1))}},{key:"onCompleted",value:function(t){this._state.onSuccess(this,t)}},{key:"onError",value:function(t){this._state.onError(this,t)}},{key:"cancel",value:function(){this._discard=!0}},{key:"prepareToHandleSingleResponse",value:function(){this._head=[],this._fieldKeys=[],this._setState(y.STREAMING)}},{key:"markCompleted",value:function(){this._head=[],this._fieldKeys=[],this._tail={},this._setState(y.SUCCEEDED)}},{key:"subscribe",value:function(t){if(this._error)t.onError(this._error);else{if(this._head&&t.onKeys&&t.onKeys(this._head),this._queuedRecords.length>0&&t.onNext)for(var e=0;e<this._queuedRecords.length;e++)t.onNext(this._queuedRecords[e]),this._queuedRecords.length-e-1<=this._lowRecordWatermark&&(this._autoPull=!0,this._state===y.READY&&this._handleStreaming());this._tail&&t.onCompleted&&t.onCompleted(this._tail),this._observers.push(t),this._state===y.READY&&this._handleStreaming()}}},{key:"_handleHasMore",value:function(t){this._setState(y.READY),this._handleStreaming(),delete t.has_more}},{key:"_handlePullSuccess",value:function(t){var e=this;this._setState(y.SUCCEEDED);var n=Object.assign(this._connection?{server:this._connection.server}:{},this._meta,t),r=null;this._beforeComplete&&(r=this._beforeComplete(n));var i=function(){e._tail=n,e._observers.some((function(t){return t.onCompleted}))&&e._observers.forEach((function(t){t.onCompleted&&t.onCompleted(n)})),e._afterComplete&&e._afterComplete(n)};r?Promise.resolve(r).then((function(){return i()})):i()}},{key:"_handleRunSuccess",value:function(t,e){var n=this;if(null===this._fieldKeys){if(this._fieldKeys=[],this._fieldLookup={},t.fields&&t.fields.length>0){this._fieldKeys=t.fields;for(var r=0;r<t.fields.length;r++)this._fieldLookup[t.fields[r]]=r;delete t.fields}t.qid&&(this._queryId=t.qid,delete t.qid),this._storeMetadataForCompletion(t);var i=null;this._beforeKeys&&(i=this._beforeKeys(this._fieldKeys));var o=function(){n._head=n._fieldKeys,n._observers.some((function(t){return t.onKeys}))&&n._observers.forEach((function(t){t.onKeys&&t.onKeys(n._fieldKeys)})),n._afterKeys&&n._afterKeys(n._fieldKeys),e()};i?Promise.resolve(i).then((function(){return o()})):o()}}},{key:"_handleError",value:function(t){var e=this;this._setState(y.FAILED),this._error=t;var n=null;this._beforeError&&(n=this._beforeError(t));var r=function(){e._observers.some((function(t){return t.onError}))&&e._observers.forEach((function(e){e.onError&&e.onError(t)})),e._afterError&&e._afterError(t)};n?Promise.resolve(n).then((function(){return r()})):r()}},{key:"_handleStreaming",value:function(){this._head&&this._observers.some((function(t){return t.onNext||t.onCompleted}))&&(this._discard?(this._discardFunction(this._connection,this._queryId,this),this._setState(y.STREAMING)):this._autoPull&&(this._moreFunction(this._connection,this._queryId,this._fetchSize,this),this._setState(y.STREAMING)))}},{key:"_storeMetadataForCompletion",value:function(t){for(var e=Object.keys(t),n=e.length,r="";n--;)r=e[n],this._meta[r]=t[r]}},{key:"_setState",value:function(t){this._state=t}},{key:"_setupAuoPull",value:function(t){this._autoPull=!0,t===Ur.ALL?(this._lowRecordWatermark=Number.MAX_VALUE,this._highRecordWatermark=Number.MAX_VALUE):(this._lowRecordWatermark=.3*t,this._highRecordWatermark=.7*t)}}]),n}(h);e.ResultStreamObserver=f;var d=function(t){(0,i.default)(n,t);var e=l(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r.connection,o=r.beforeError,s=r.afterError,u=r.beforeComplete,c=r.afterComplete;return(0,a.default)(this,n),(t=e.call(this))._connection=i,t._beforeError=o,t._afterError=s,t._beforeComplete=u,t._afterComplete=c,t}return(0,u.default)(n,[{key:"onNext",value:function(t){this.onError((0,Kn.newError)("Received RECORD when initializing "+JSON.stringify(t)))}},{key:"onError",value:function(t){this._beforeError&&this._beforeError(t),this._connection._updateCurrentObserver(),this._connection._handleFatalError(t),this._afterError&&this._afterError(t)}},{key:"onCompleted",value:function(t){if(this._beforeComplete&&this._beforeComplete(t),t){var e=t.server;this._connection.version||(this._connection.version=e);var n=t.connection_id;this._connection.databaseId||(this._connection.databaseId=n)}this._afterComplete&&this._afterComplete(t)}}]),n}(h);e.LoginObserver=d;var p=function(t){(0,i.default)(n,t);var e=l(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r.connection,o=r.onError,s=r.onComplete;return(0,a.default)(this,n),(t=e.call(this))._connection=i,t._onError=o,t._onComplete=s,t}return(0,u.default)(n,[{key:"onNext",value:function(t){this.onError((0,Kn.newError)("Received RECORD when resetting: received record is: "+JSON.stringify(t),Kn.PROTOCOL_ERROR))}},{key:"onError",value:function(t){t.code===Kn.PROTOCOL_ERROR&&this._connection._handleProtocolError(t.message),this._onError&&this._onError(t)}},{key:"onCompleted",value:function(t){this._onComplete&&this._onComplete(t)}}]),n}(h);e.ResetObserver=p;var v=function(t){(0,i.default)(n,t);var e=l(n);function n(t){var r,i=t.error,o=t.onError;return(0,a.default)(this,n),(r=e.call(this,{beforeError:o})).onError(i),r}return n}(f);e.FailedObserver=v;var m=function(t){(0,i.default)(o,t);var e=l(o);function o(){var t,i;return(0,a.default)(this,o),i=e.call(this),(0,r.default)((t=(0,n.default)(i),(0,s.default)(o.prototype)),"markCompleted",t).call(t),i}return o}(f);e.CompletedObserver=m;var y={READY_STREAMING:{onSuccess:function(t,e){t._handleRunSuccess(e,(function(){t._setState(y.STREAMING)}))},onError:function(t,e){t._handleError(e)},name:function(){return"READY_STREAMING"}},READY:{onSuccess:function(t,e){t._handleRunSuccess(e,(function(){return t._handleStreaming()}))},onError:function(t,e){t._handleError(e)},name:function(){return"READY"}},STREAMING:{onSuccess:function(t,e){e.has_more?t._handleHasMore(e):t._handlePullSuccess(e)},onError:function(t,e){t._handleError(e)},name:function(){return"STREAMING"}},FAILED:{onError:function(t){},name:function(){return"FAILED"}},SUCCEEDED:{name:function(){return"SUCCEEDED"}}}}));Dt(Mr);Mr.CompletedObserver,Mr.FailedObserver,Mr.ResetObserver,Mr.LoginObserver,Mr.ResultStreamObserver,Mr.StreamObserver;var Vr=Rt((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=Un(jn),r=Un(Vn),i=Un(Zn),o=function(t){console.log("Uncaught error when processing result: "+t)},s=function(t){};var a=function(){function t(e,r,i,o){(0,n.default)(this,t),this._stack=function(){var t=new Error("");if(t.stack)return t.stack.replace(/^Error(\n\r)*/,"");return null}(),this._streamObserverPromise=e,this._p=null,this._query=r,this._parameters=i||{},this._connectionHolder=o||rr.EMPTY_CONNECTION_HOLDER}return(0,r.default)(t,[{key:"keys",value:function(){var t=this;return new Promise((function(e,n){t._streamObserverPromise.then((function(t){return t.subscribe({onKeys:function(t){return e(t)},onError:function(t){return n(t)}})}))}))}},{key:"summary",value:function(){var t=this;return new Promise((function(e,n){t._streamObserverPromise.then((function(t){t.cancel(),t.subscribe({onCompleted:function(t){return e(t)},onError:function(t){return n(t)}})}))}))}},{key:"_getOrCreatePromise",value:function(){var t=this;return this._p||(this._p=new Promise((function(e,n){var r=[],i={onNext:function(t){r.push(t)},onCompleted:function(t){e({records:r,summary:t})},onError:function(t){n(t)}};t.subscribe(i)}))),this._p}},{key:"then",value:function(t,e){return this._getOrCreatePromise().then(t,e)}},{key:"catch",value:function(t){return this._getOrCreatePromise().catch(t)}},{key:"subscribe",value:function(t){var e=this,n=t.onCompleted||s;t.onCompleted=function(r){var o=e._connectionHolder,s=e._query,a=e._parameters;function u(e){o.releaseConnection().then((function(){n.call(t,new i.default(s,a,r,e))}))}o.getConnection().then((function(t){u(t?t.protocol().version:void 0)}),(function(t){u()}))};var r=t.onError||o;t.onError=function(n){e._connectionHolder.releaseConnection().then((function(){!function(t,e){e&&(t.stack=t.toString()+"\n"+e)}(n,e._stack),r.call(t,n)}))},this._streamObserverPromise.then((function(e){return e.subscribe(t)}))}},{key:"_cancel",value:function(){this._streamObserverPromise.then((function(t){return t.cancel()}))}}]),t}();e.default=a}));Dt(Vr);var Fr=Rt((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=Un(jn),r=Un(Vn),i=(Un(nr),function(){function t(){(0,n.default)(this,t)}return(0,r.default)(t,[{key:"acquireConnection",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.accessMode,t.database,t.bookmarks;throw new Error("not implemented")}},{key:"supportsMultiDb",value:function(){throw new Error("not implemented")}},{key:"supportsTransactionConfig",value:function(){throw new Error("not implemented")}},{key:"close",value:function(){throw new Error("not implemented")}}]),t}());e.default=i}));function $r(t,e,n,r,i,o,s){try{var a=t[o](s),u=a.value}catch(t){return void n(t)}a.done?e(u):Promise.resolve(u).then(r,i)}Dt(Fr);var Br=function(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function s(t){$r(o,r,i,s,a,"next",t)}function a(t){$r(o,r,i,s,a,"throw",t)}s(void 0)}))}},Wr=Rt((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=Un(jn),r=[null,void 0,!0,!1,Qn.ENCRYPTION_ON,Qn.ENCRYPTION_OFF],i=[null,void 0,"TRUST_ALL_CERTIFICATES","TRUST_CUSTOM_CA_SIGNED_CERTIFICATES","TRUST_SYSTEM_CA_SIGNED_CERTIFICATES"];e.default=function t(e,o,s){(0,n.default)(this,t),this.address=e,this.encrypted=function(t){var e=t.encrypted;if(-1===r.indexOf(e))throw(0,Kn.newError)("Illegal value of the encrypted setting ".concat(e,". Expected one of ").concat(r));return e}(o),this.trust=function(t){var e=t.trust;if(-1===i.indexOf(e))throw(0,Kn.newError)("Illegal value of the trust setting ".concat(e,". Expected one of ").concat(i));return e}(o),this.trustedCertificates=function(t){return t.trustedCertificates||[]}(o),this.knownHostsPath=function(t){return t.knownHosts||null}(o),this.connectionErrorCode=s||Kn.SERVICE_UNAVAILABLE,this.connectionTimeout=function(t){var e=parseInt(t.connectionTimeout,10);return 0===e||e&&e<0?null:e||3e4}(o)}}));Dt(Wr);var qr=Rt((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.isPoint=function(t){return!0===(t&&t.__isPoint__)},e.Point=void 0;var n=Un(jn),r=Un(Vn),i=function(){function t(e,r,i,o){(0,n.default)(this,t),this.srid=(0,Qn.assertNumberOrInteger)(e,"SRID"),this.x=(0,Qn.assertNumber)(r,"X coordinate"),this.y=(0,Qn.assertNumber)(i,"Y coordinate"),this.z=null==o?o:(0,Qn.assertNumber)(o,"Z coordinate"),Object.freeze(this)}return(0,r.default)(t,[{key:"toString",value:function(){return this.z||0===this.z?"Point{srid=".concat(o(this.srid),", x=").concat(o(this.x),", y=").concat(o(this.y),", z=").concat(o(this.z),"}"):"Point{srid=".concat(o(this.srid),", x=").concat(o(this.x),", y=").concat(o(this.y),"}")}}]),t}();function o(t){return Number.isInteger(t)?t+".0":t.toString()}e.Point=i,Object.defineProperty(i.prototype,"__isPoint__",{value:!0,enumerable:!1,configurable:!1,writable:!1})}));Dt(qr);qr.isPoint,qr.Point;var zr=Rt((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.normalizeSecondsForDuration=function(t,e){return(0,Xn.int)(t).add(m(e,1e9))},e.normalizeNanosecondsForDuration=function(t){return y(t,1e9)},e.localTimeToNanoOfDay=function(t,e,n,r){t=(0,Xn.int)(t),e=(0,Xn.int)(e),n=(0,Xn.int)(n),r=(0,Xn.int)(r);var i=t.multiply(36e11);return(i=(i=i.add(e.multiply(6e10))).add(n.multiply(1e9))).add(r)},e.nanoOfDayToLocalTime=f,e.localDateTimeToEpochSecond=function(t,e,n,r,i,o,s){var a=d(t,e,n),u=function(t,e,n){t=(0,Xn.int)(t),e=(0,Xn.int)(e),n=(0,Xn.int)(n);var r=t.multiply(3600);return(r=r.add(e.multiply(60))).add(n)}(r,i,o);return a.multiply(86400).add(u)},e.epochSecondAndNanoToLocalDateTime=function(t,e){var n=m(t,86400),r=y(t,86400).multiply(1e9).add(e),i=p(n),o=f(r);return new Hr.LocalDateTime(i.year,i.month,i.day,o.hour,o.minute,o.second,o.nanosecond)},e.dateToEpochDay=d,e.epochDayToDate=p,e.durationToIsoString=function(t,e,n,r){var i=b(t),o=b(e),s=function(t,e){var n,r;t=(0,Xn.int)(t),e=(0,Xn.int)(e);var i=t.isNegative(),o=e.greaterThan(0);n=i&&o?t.equals(-1)?"-0":t.add(1).toString():t.toString();o&&(r=g(i?e.negate().add(2e9).modulo(1e9):e.add(1e9).modulo(1e9)));return r?n+r:n}(n,r);return"P".concat(i,"M").concat(o,"DT").concat(s,"S")},e.timeToIsoString=function(t,e,n,r){var i=b(t,2),o=b(e,2),s=b(n,2),a=g(r);return"".concat(i,":").concat(o,":").concat(s).concat(a)},e.timeZoneOffsetToIsoString=function(t){if((t=(0,Xn.int)(t)).equals(0))return"Z";var e=t.isNegative();e&&(t=t.multiply(-1));var n=e?"-":"+",r=b(t.div(3600),2),i=b(t.div(60).modulo(60),2),o=t.modulo(60),s=o.equals(0)?null:b(o,2);return s?"".concat(n).concat(r,":").concat(i,":").concat(s):"".concat(n).concat(r,":").concat(i)},e.dateToIsoString=function(t,e,n){var r=(t=(0,Xn.int)(t)).isNegative();r&&(t=t.multiply(-1));var i=b(t,4);r&&(i="-"+i);var o=b(e,2),s=b(n,2);return"".concat(i,"-").concat(o,"-").concat(s)},e.totalNanoseconds=function(t,e){e=e||0;var n=1e6*t.getMilliseconds();return(0,Xn.isInt)(e)?e.add(n):e+n},e.timeZoneOffsetInSeconds=function(t){var e=t.getTimezoneOffset();if(0===e)return 0;return-1*e*60},e.assertValidYear=function(t){return v(t,o,"Year")},e.assertValidMonth=function(t){return v(t,s,"Month")},e.assertValidDay=function(t){return v(t,a,"Day")},e.assertValidHour=function(t){return v(t,u,"Hour")},e.assertValidMinute=function(t){return v(t,c,"Minute")},e.assertValidSecond=function(t){return v(t,l,"Second")},e.assertValidNanosecond=function(t){return v(t,h,"Nanosecond")};var n=Un(jn),r=Un(Vn),i=function(){function t(e,r){(0,n.default)(this,t),this._minNumber=e,this._maxNumber=r,this._minInteger=(0,Xn.int)(e),this._maxInteger=(0,Xn.int)(r)}return(0,r.default)(t,[{key:"contains",value:function(t){return(0,Xn.isInt)(t)?t.greaterThanOrEqual(this._minInteger)&&t.lessThanOrEqual(this._maxInteger):t>=this._minNumber&&t<=this._maxNumber}},{key:"toString",value:function(){return"[".concat(this._minNumber,", ").concat(this._maxNumber,"]")}}]),t}(),o=new i(-999999999,999999999),s=new i(1,12),a=new i(1,31),u=new i(0,23),c=new i(0,59),l=new i(0,59),h=new i(0,999999999);function f(t){var e=(t=(0,Xn.int)(t)).div(36e11),n=(t=t.subtract(e.multiply(36e11))).div(6e10),r=(t=t.subtract(n.multiply(6e10))).div(1e9),i=t.subtract(r.multiply(1e9));return new Hr.LocalTime(e,n,r,i)}function d(t,e,n){t=(0,Xn.int)(t),e=(0,Xn.int)(e),n=(0,Xn.int)(n);var r=t.multiply(365);return r=(r=(r=t.greaterThanOrEqual(0)?r.add(t.add(3).div(4).subtract(t.add(99).div(100)).add(t.add(399).div(400))):r.subtract(t.div(-4).subtract(t.div(-100)).add(t.div(-400)))).add(e.multiply(367).subtract(362).div(12))).add(n.subtract(1)),e.greaterThan(2)&&(r=r.subtract(1),function(t){return!!(t=(0,Xn.int)(t)).modulo(4).equals(0)&&(!t.modulo(100).equals(0)||!!t.modulo(400).equals(0))}(t)||(r=r.subtract(1))),r.subtract(719528)}function p(t){var e=(t=(0,Xn.int)(t)).add(719528).subtract(60),n=(0,Xn.int)(0);if(e.lessThan(0)){var r=e.add(1).div(146097).subtract(1);n=r.multiply(400),e=e.add(r.multiply(-146097))}var i=e.multiply(400).add(591).div(146097),o=e.subtract(i.multiply(365).add(i.div(4)).subtract(i.div(100)).add(i.div(400)));o.lessThan(0)&&(i=i.subtract(1),o=e.subtract(i.multiply(365).add(i.div(4)).subtract(i.div(100)).add(i.div(400)))),i=i.add(n);var s=o,a=s.multiply(5).add(2).div(153),u=a.add(2).modulo(12).add(1),c=s.subtract(a.multiply(306).add(5).div(10)).add(1);return i=i.add(a.div(10)),new Hr.Date(i,u,c)}function v(t,e,n){if((0,Qn.assertNumberOrInteger)(t,n),!e.contains(t))throw(0,Kn.newError)("".concat(n," is expected to be in range ").concat(e," but was: ").concat(t));return t}function m(t,e){t=(0,Xn.int)(t),e=(0,Xn.int)(e);var n=t.div(e);return t.isPositive()!==e.isPositive()&&n.multiply(e).notEquals(t)&&(n=n.subtract(1)),n}function y(t,e){return t=(0,Xn.int)(t),e=(0,Xn.int)(e),t.subtract(m(t,e).multiply(e))}function g(t){return(t=(0,Xn.int)(t)).equals(0)?"":"."+b(t,9)}function b(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=(t=(0,Xn.int)(t)).isNegative();n&&(t=t.negate());var r=t.toString();if(e)for(;r.length<e;)r="0"+r;return n?"-"+r:r}}));Dt(zr);zr.normalizeSecondsForDuration,zr.normalizeNanosecondsForDuration,zr.localTimeToNanoOfDay,zr.nanoOfDayToLocalTime,zr.localDateTimeToEpochSecond,zr.epochSecondAndNanoToLocalDateTime,zr.dateToEpochDay,zr.epochDayToDate,zr.durationToIsoString,zr.timeToIsoString,zr.timeZoneOffsetToIsoString,zr.dateToIsoString,zr.totalNanoseconds,zr.timeZoneOffsetInSeconds,zr.assertValidYear,zr.assertValidMonth,zr.assertValidDay,zr.assertValidHour,zr.assertValidMinute,zr.assertValidSecond,zr.assertValidNanosecond;var Hr=Rt((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.isDuration=function(t){return d(t,"__isDuration__")},e.isLocalTime=function(t){return d(t,"__isLocalTime__")},e.isTime=function(t){return d(t,"__isTime__")},e.isDate=function(t){return d(t,"__isDate__")},e.isLocalDateTime=function(t){return d(t,"__isLocalDateTime__")},e.isDateTime=function(t){return d(t,"__isDateTime__")},e.DateTime=e.LocalDateTime=e.Date=e.Time=e.LocalTime=e.Duration=void 0;var n=Un(fr),r=Un(jn),i=Un(Vn),o=Ln(zr),s={value:!0,enumerable:!1,configurable:!1,writable:!1},a=function(){function t(e,n,i,s){(0,r.default)(this,t),this.months=(0,Qn.assertNumberOrInteger)(e,"Months"),this.days=(0,Qn.assertNumberOrInteger)(n,"Days"),(0,Qn.assertNumberOrInteger)(i,"Seconds"),(0,Qn.assertNumberOrInteger)(s,"Nanoseconds"),this.seconds=o.normalizeSecondsForDuration(i,s),this.nanoseconds=o.normalizeNanosecondsForDuration(s),Object.freeze(this)}return(0,i.default)(t,[{key:"toString",value:function(){return o.durationToIsoString(this.months,this.days,this.seconds,this.nanoseconds)}}]),t}();e.Duration=a,Object.defineProperty(a.prototype,"__isDuration__",s);var u=function(){function t(e,n,i,s){(0,r.default)(this,t),this.hour=o.assertValidHour(e),this.minute=o.assertValidMinute(n),this.second=o.assertValidSecond(i),this.nanosecond=o.assertValidNanosecond(s),Object.freeze(this)}return(0,i.default)(t,[{key:"toString",value:function(){return o.timeToIsoString(this.hour,this.minute,this.second,this.nanosecond)}}],[{key:"fromStandardDate",value:function(e,n){return v(e,n),new t(e.getHours(),e.getMinutes(),e.getSeconds(),o.totalNanoseconds(e,n))}}]),t}();e.LocalTime=u,Object.defineProperty(u.prototype,"__isLocalTime__",s);var c=function(){function t(e,n,i,s,a){(0,r.default)(this,t),this.hour=o.assertValidHour(e),this.minute=o.assertValidMinute(n),this.second=o.assertValidSecond(i),this.nanosecond=o.assertValidNanosecond(s),this.timeZoneOffsetSeconds=(0,Qn.assertNumberOrInteger)(a,"Time zone offset in seconds"),Object.freeze(this)}return(0,i.default)(t,[{key:"toString",value:function(){return o.timeToIsoString(this.hour,this.minute,this.second,this.nanosecond)+o.timeZoneOffsetToIsoString(this.timeZoneOffsetSeconds)}}],[{key:"fromStandardDate",value:function(e,n){return v(e,n),new t(e.getHours(),e.getMinutes(),e.getSeconds(),o.totalNanoseconds(e,n),o.timeZoneOffsetInSeconds(e))}}]),t}();e.Time=c,Object.defineProperty(c.prototype,"__isTime__",s);var l=function(){function t(e,n,i){(0,r.default)(this,t),this.year=o.assertValidYear(e),this.month=o.assertValidMonth(n),this.day=o.assertValidDay(i),Object.freeze(this)}return(0,i.default)(t,[{key:"toString",value:function(){return o.dateToIsoString(this.year,this.month,this.day)}}],[{key:"fromStandardDate",value:function(e){return v(e,null),new t(e.getFullYear(),e.getMonth()+1,e.getDate())}}]),t}();e.Date=l,Object.defineProperty(l.prototype,"__isDate__",s);var h=function(){function t(e,n,i,s,a,u,c){(0,r.default)(this,t),this.year=o.assertValidYear(e),this.month=o.assertValidMonth(n),this.day=o.assertValidDay(i),this.hour=o.assertValidHour(s),this.minute=o.assertValidMinute(a),this.second=o.assertValidSecond(u),this.nanosecond=o.assertValidNanosecond(c),Object.freeze(this)}return(0,i.default)(t,[{key:"toString",value:function(){return p(this.year,this.month,this.day,this.hour,this.minute,this.second,this.nanosecond)}}],[{key:"fromStandardDate",value:function(e,n){return v(e,n),new t(e.getFullYear(),e.getMonth()+1,e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),o.totalNanoseconds(e,n))}}]),t}();e.LocalDateTime=h,Object.defineProperty(h.prototype,"__isLocalDateTime__",s);var f=function(){function t(e,i,s,a,u,c,l,h,f){(0,r.default)(this,t),this.year=o.assertValidYear(e),this.month=o.assertValidMonth(i),this.day=o.assertValidDay(s),this.hour=o.assertValidHour(a),this.minute=o.assertValidMinute(u),this.second=o.assertValidSecond(c),this.nanosecond=o.assertValidNanosecond(l);var d=function(t,e){var n=t||0===t,r=e&&""!==e;if(n&&!r)return(0,Qn.assertNumberOrInteger)(t,"Time zone offset in seconds"),[t,null];if(!n&&r)return(0,Qn.assertString)(e,"Time zone ID"),[null,e];throw n&&r?(0,Kn.newError)("Unable to create DateTime with both time zone offset and id. Please specify either of them. Given offset: ".concat(t," and id: ").concat(e)):(0,Kn.newError)("Unable to create DateTime without either time zone offset or id. Please specify either of them. Given offset: ".concat(t," and id: ").concat(e))}(h,f),p=(0,n.default)(d,2),v=p[0],m=p[1];this.timeZoneOffsetSeconds=v,this.timeZoneId=m,Object.freeze(this)}return(0,i.default)(t,[{key:"toString",value:function(){return p(this.year,this.month,this.day,this.hour,this.minute,this.second,this.nanosecond)+(this.timeZoneId?"[".concat(this.timeZoneId,"]"):o.timeZoneOffsetToIsoString(this.timeZoneOffsetSeconds))}}],[{key:"fromStandardDate",value:function(e,n){return v(e,n),new t(e.getFullYear(),e.getMonth()+1,e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),o.totalNanoseconds(e,n),o.timeZoneOffsetInSeconds(e),null)}}]),t}();function d(t,e){return!0===(t&&t[e])}function p(t,e,n,r,i,s,a){return o.dateToIsoString(t,e,n)+"T"+o.timeToIsoString(r,i,s,a)}function v(t,e){(0,Qn.assertValidDate)(t,"Standard date"),null!=e&&(0,Qn.assertNumberOrInteger)(e,"Nanosecond")}e.DateTime=f,Object.defineProperty(f.prototype,"__isDateTime__",s)}));Dt(Hr);Hr.isDuration,Hr.isLocalTime,Hr.isTime,Hr.isDate,Hr.isLocalDateTime,Hr.isDateTime,Hr.DateTime,Hr.LocalDateTime,Hr.Date,Hr.Time,Hr.LocalTime,Hr.Duration;var Gr=Rt((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Unpacker=e.Packer=void 0;var n=Un(jn),r=Un(Vn),i=Un(or),o=Un($n),s=Un(Wn),a=Un(qn),u=Ln(Cr);function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,a.default)(t);if(e){var i=(0,a.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}var l=function(t){(0,o.default)(s,t);var e=c(s);function s(){return(0,n.default)(this,s),e.apply(this,arguments)}return(0,r.default)(s,[{key:"disableByteArrays",value:function(){throw new Error("Bolt V2 should always support byte arrays")}},{key:"packable",value:function(t){var e=this;return(0,qr.isPoint)(t)?function(){return r=e,void(null===(n=t).z||void 0===n.z?function(t,e){var n=[e.packable((0,Xn.int)(t.srid)),e.packable(t.x),e.packable(t.y)];e.packStruct(88,n)}(n,r):function(t,e){var n=[e.packable((0,Xn.int)(t.srid)),e.packable(t.x),e.packable(t.y),e.packable(t.z)];e.packStruct(89,n)}(n,r));var n,r}:(0,Hr.isDuration)(t)?function(){return n=t,r=e,i=(0,Xn.int)(n.months),o=(0,Xn.int)(n.days),s=(0,Xn.int)(n.seconds),a=(0,Xn.int)(n.nanoseconds),u=[r.packable(i),r.packable(o),r.packable(s),r.packable(a)],void r.packStruct(69,u);var n,r,i,o,s,a,u}:(0,Hr.isLocalTime)(t)?function(){return n=t,r=e,i=(0,zr.localTimeToNanoOfDay)(n.hour,n.minute,n.second,n.nanosecond),o=[r.packable(i)],void r.packStruct(116,o);var n,r,i,o}:(0,Hr.isTime)(t)?function(){return n=t,r=e,i=(0,zr.localTimeToNanoOfDay)(n.hour,n.minute,n.second,n.nanosecond),o=(0,Xn.int)(n.timeZoneOffsetSeconds),s=[r.packable(i),r.packable(o)],void r.packStruct(84,s);var n,r,i,o,s}:(0,Hr.isDate)(t)?function(){return n=t,r=e,i=(0,zr.dateToEpochDay)(n.year,n.month,n.day),o=[r.packable(i)],void r.packStruct(68,o);var n,r,i,o}:(0,Hr.isLocalDateTime)(t)?function(){return n=t,r=e,i=(0,zr.localDateTimeToEpochSecond)(n.year,n.month,n.day,n.hour,n.minute,n.second,n.nanosecond),o=(0,Xn.int)(n.nanosecond),s=[r.packable(i),r.packable(o)],void r.packStruct(100,s);var n,r,i,o,s}:(0,Hr.isDateTime)(t)?function(){return r=e,void((n=t).timeZoneId?function(t,e){var n=(0,zr.localDateTimeToEpochSecond)(t.year,t.month,t.day,t.hour,t.minute,t.second,t.nanosecond),r=(0,Xn.int)(t.nanosecond),i=t.timeZoneId,o=[e.packable(n),e.packable(r),e.packable(i)];e.packStruct(102,o)}(n,r):function(t,e){var n=(0,zr.localDateTimeToEpochSecond)(t.year,t.month,t.day,t.hour,t.minute,t.second,t.nanosecond),r=(0,Xn.int)(t.nanosecond),i=(0,Xn.int)(t.timeZoneOffsetSeconds),o=[e.packable(n),e.packable(r),e.packable(i)];e.packStruct(70,o)}(n,r));var n,r}:(0,i.default)((0,a.default)(s.prototype),"packable",this).call(this,t)}}]),s}(u.Packer);e.Packer=l;var h=function(t){(0,o.default)(s,t);var e=c(s);function s(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(0,n.default)(this,s),e.call(this,t)}return(0,r.default)(s,[{key:"_unpackUnknownStruct",value:function(t,e,n){return 88===t?function(t,e,n){return t._verifyStructSize("Point2D",3,e),new qr.Point(t.unpack(n),t.unpack(n),t.unpack(n),void 0)}(this,e,n):89===t?function(t,e,n){return t._verifyStructSize("Point3D",4,e),new qr.Point(t.unpack(n),t.unpack(n),t.unpack(n),t.unpack(n))}(this,e,n):69===t?function(t,e,n){t._verifyStructSize("Duration",4,e);var r=t.unpack(n),i=t.unpack(n),o=t.unpack(n),s=t.unpack(n);return new Hr.Duration(r,i,o,s)}(this,e,n):116===t?function(t,e,n,r){t._verifyStructSize("LocalTime",1,e);var i=t.unpackInteger(n);return f((0,zr.nanoOfDayToLocalTime)(i),r)}(this,e,n,this._disableLosslessIntegers):84===t?function(t,e,n,r){t._verifyStructSize("Time",2,e);var i=t.unpackInteger(n),o=t.unpackInteger(n),s=(0,zr.nanoOfDayToLocalTime)(i);return f(new Hr.Time(s.hour,s.minute,s.second,s.nanosecond,o),r)}(this,e,n,this._disableLosslessIntegers):68===t?function(t,e,n,r){t._verifyStructSize("Date",1,e);var i=t.unpackInteger(n);return f((0,zr.epochDayToDate)(i),r)}(this,e,n,this._disableLosslessIntegers):100===t?function(t,e,n,r){t._verifyStructSize("LocalDateTime",2,e);var i=t.unpackInteger(n),o=t.unpackInteger(n);return f((0,zr.epochSecondAndNanoToLocalDateTime)(i,o),r)}(this,e,n,this._disableLosslessIntegers):70===t?function(t,e,n,r){t._verifyStructSize("DateTimeWithZoneOffset",3,e);var i=t.unpackInteger(n),o=t.unpackInteger(n),s=t.unpackInteger(n),a=(0,zr.epochSecondAndNanoToLocalDateTime)(i,o);return f(new Hr.DateTime(a.year,a.month,a.day,a.hour,a.minute,a.second,a.nanosecond,s,null),r)}(this,e,n,this._disableLosslessIntegers):102===t?function(t,e,n,r){t._verifyStructSize("DateTimeWithZoneId",3,e);var i=t.unpackInteger(n),o=t.unpackInteger(n),s=t.unpack(n),a=(0,zr.epochSecondAndNanoToLocalDateTime)(i,o);return f(new Hr.DateTime(a.year,a.month,a.day,a.hour,a.minute,a.second,a.nanosecond,null,s),r)}(this,e,n,this._disableLosslessIntegers):(0,i.default)((0,a.default)(s.prototype),"_unpackUnknownStruct",this).call(this,t,e,n,this._disableLosslessIntegers)}}]),s}(u.Unpacker);function f(t,e){if(!e)return t;var n=Object.create(Object.getPrototypeOf(t));for(var r in t)if(t.hasOwnProperty(r)){var i=t[r];n[r]=(0,Xn.isInt)(i)?i.toNumberOrInfinity():i}return Object.freeze(n),n}e.Unpacker=h}));Dt(Gr);Gr.Unpacker,Gr.Packer;var Yr=Rt((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=Un(jn),r=Un(Vn),i=Un($n),o=Un(Wn),s=Un(qn),a=Un(Lr),u=Ln(Gr);function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,s.default)(t);if(e){var i=(0,s.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,o.default)(this,n)}}var l=function(t){(0,i.default)(o,t);var e=c(o);function o(){return(0,n.default)(this,o),e.apply(this,arguments)}return(0,r.default)(o,[{key:"_createPacker",value:function(t){return new u.Packer(t)}},{key:"_createUnpacker",value:function(t){return new u.Unpacker(t)}},{key:"version",get:function(){return tr.BOLT_PROTOCOL_V2}}]),o}(a.default);e.default=l}));Dt(Yr);var Kr=Rt((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=Un(jn),r=Un(Vn),i=Un($n),o=Un(Wn),s=Un(qn),a=Un(Yr),u=Un(Ur);function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,s.default)(t);if(e){var i=(0,s.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,o.default)(this,n)}}var l=new Mr.StreamObserver,h=function(t){(0,i.default)(o,t);var e=c(o);function o(){return(0,n.default)(this,o),e.apply(this,arguments)}return(0,r.default)(o,[{key:"transformMetadata",value:function(t){return"t_first"in t&&(t.result_available_after=t.t_first,delete t.t_first),"t_last"in t&&(t.result_consumed_after=t.t_last,delete t.t_last),t}},{key:"initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.userAgent,n=t.authToken,r=t.onError,i=t.onComplete,o=new Mr.LoginObserver({connection:this._connection,afterError:r,afterComplete:i});return this._connection.write(u.default.hello(e,n),o,!0),o}},{key:"prepareToClose",value:function(){this._connection.write(u.default.goodbye(),l,!0)}},{key:"beginTransaction",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.bookmark,n=t.txConfig,r=t.database,i=t.mode,o=t.beforeError,s=t.afterError,a=t.beforeComplete,c=t.afterComplete,l=new Mr.ResultStreamObserver({connection:this._connection,beforeError:o,afterError:s,beforeComplete:a,afterComplete:c});return l.prepareToHandleSingleResponse(),(0,pr.assertDatabaseIsEmpty)(r,this._connection,l),this._connection.write(u.default.begin({bookmark:e,txConfig:n,mode:i}),l,!0),l}},{key:"commitTransaction",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.beforeError,n=t.afterError,r=t.beforeComplete,i=t.afterComplete,o=new Mr.ResultStreamObserver({connection:this._connection,beforeError:e,afterError:n,beforeComplete:r,afterComplete:i});return o.prepareToHandleSingleResponse(),this._connection.write(u.default.commit(),o,!0),o}},{key:"rollbackTransaction",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.beforeError,n=t.afterError,r=t.beforeComplete,i=t.afterComplete,o=new Mr.ResultStreamObserver({connection:this._connection,beforeError:e,afterError:n,beforeComplete:r,afterComplete:i});return o.prepareToHandleSingleResponse(),this._connection.write(u.default.rollback(),o,!0),o}},{key:"run",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.bookmark,i=n.txConfig,o=n.database,s=n.mode,a=n.beforeKeys,c=n.afterKeys,l=n.beforeError,h=n.afterError,f=n.beforeComplete,d=n.afterComplete,p=n.flush,v=void 0===p||p,m=new Mr.ResultStreamObserver({connection:this._connection,beforeKeys:a,afterKeys:c,beforeError:l,afterError:h,beforeComplete:f,afterComplete:d});return(0,pr.assertDatabaseIsEmpty)(o,this._connection,m),this._connection.write(u.default.runWithMetadata(t,e,{bookmark:r,txConfig:i,mode:s}),m,!1),this._connection.write(u.default.pullAll(),m,v),m}},{key:"version",get:function(){return tr.BOLT_PROTOCOL_V3}}]),o}(a.default);e.default=h}));Dt(Kr);var Xr=Rt((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=Un(jn),r=Un(Vn),i=Un($n),o=Un(Wn),s=Un(qn),a=Un(Kr),u=Ln(Ur);function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,s.default)(t);if(e){var i=(0,s.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,o.default)(this,n)}}var l=function(t){(0,i.default)(o,t);var e=c(o);function o(){return(0,n.default)(this,o),e.apply(this,arguments)}return(0,r.default)(o,[{key:"beginTransaction",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.bookmark,n=t.txConfig,r=t.database,i=t.mode,o=t.beforeError,s=t.afterError,a=t.beforeComplete,c=t.afterComplete,l=new Mr.ResultStreamObserver({connection:this._connection,beforeError:o,afterError:s,beforeComplete:a,afterComplete:c});return l.prepareToHandleSingleResponse(),this._connection.write(u.default.begin({bookmark:e,txConfig:n,database:r,mode:i}),l,!0),l}},{key:"run",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.bookmark,i=n.txConfig,o=n.database,s=n.mode,a=n.beforeKeys,c=n.afterKeys,l=n.beforeError,h=n.afterError,f=n.beforeComplete,d=n.afterComplete,p=n.flush,v=void 0===p||p,m=n.reactive,y=void 0!==m&&m,g=n.fetchSize,b=void 0===g?u.ALL:g,_=new Mr.ResultStreamObserver({connection:this._connection,reactive:y,fetchSize:b,moreFunction:this._requestMore,discardFunction:this._requestDiscard,beforeKeys:a,afterKeys:c,beforeError:l,afterError:h,beforeComplete:f,afterComplete:d}),w=y;return this._connection.write(u.default.runWithMetadata(t,e,{bookmark:r,txConfig:i,database:o,mode:s}),_,w&&v),y||this._connection.write(u.default.pull({n:b}),_,v),_}},{key:"_requestMore",value:function(t,e,n,r){t.write(u.default.pull({stmtId:e,n:n}),r,!0)}},{key:"_requestDiscard",value:function(t,e,n){t.write(u.default.discard({stmtId:e}),n,!0)}},{key:"_noOp",value:function(){}},{key:"version",get:function(){return tr.BOLT_PROTOCOL_V4_0}}]),o}(a.default);e.default=l}));Dt(Xr);var Jr=Rt((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=Un(jn),r=Un(Vn),i=Un($n),o=Un(Wn),s=Un(qn),a=Un(Xr),u=Ln(Ur);function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,s.default)(t);if(e){var i=(0,s.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,o.default)(this,n)}}var l=function(t){(0,i.default)(o,t);var e=c(o);function o(t,r,i,s){var a;return(0,n.default)(this,o),(a=e.call(this,t,r,i))._serversideRouting=s,a}return(0,r.default)(o,[{key:"initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.userAgent,n=t.authToken,r=t.onError,i=t.onComplete,o=new Mr.LoginObserver({connection:this._connection,afterError:r,afterComplete:i});return this._connection.write(u.default.hello(e,n,this._serversideRouting),o,!0),o}},{key:"version",get:function(){return tr.BOLT_PROTOCOL_V4_1}}]),o}(a.default);e.default=l}));Dt(Jr);var Zr=Rt((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=Un(jn),r=Un(Vn),i=Un(Lr),o=Un(Yr),s=Un(Kr),a=Un(Xr),u=Un(Jr),c=function(){function t(e,r,i,o,s){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;(0,n.default)(this,t),this._connection=e,this._channel=r,this._chunker=i,this._disableLosslessIntegers=o,this._log=s,this._serversideRouting=a}return(0,r.default)(t,[{key:"writeHandshakeRequest",value:function(){var t;this._channel.write(((t=(0,Nr.alloc)(20)).writeInt32(1616949271),t.writeInt32(260),t.writeInt32(4),t.writeInt32(3),t.writeInt32(2),t.reset(),t))}},{key:"createNegotiatedProtocol",value:function(t){var e=[t.readUInt8(),t.readUInt8(),t.readUInt8(),t.readUInt8()];if(72===e[0]&&84===e[1]&&84===e[2]&&80===e[3])throw(0,Kn.newError)("Server responded HTTP. Make sure you are not trying to connect to the http endpoint (HTTP defaults to port 7474 whereas BOLT defaults to port 7687)");var n=Number(e[3]+"."+e[2]);return this._log.isDebugEnabled()&&this._log.debug("".concat(this._connection," negotiated protocol version ").concat(n)),this._createProtocolWithVersion(n)}},{key:"_createProtocolWithVersion",value:function(t){switch(t){case 1:return new i.default(this._connection,this._chunker,this._disableLosslessIntegers);case 2:return new o.default(this._connection,this._chunker,this._disableLosslessIntegers);case 3:return new s.default(this._connection,this._chunker,this._disableLosslessIntegers);case 4:return new a.default(this._connection,this._chunker,this._disableLosslessIntegers);case 4.1:return new u.default(this._connection,this._chunker,this._disableLosslessIntegers,this._serversideRouting);default:throw(0,Kn.newError)("Unknown Bolt protocol version: "+t)}}}]),t}();e.default=c}));Dt(Zr);var Qr=Rt((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=Un(sr),r=Un(Br),i=Un(jn),o=Un(Vn),s=Un(Bn),a=Un($n),u=Un(Wn),c=Un(qn),l=Un(Wr),h=Un(Zr),f=Un(jr);Un(Lr);function d(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,c.default)(t);if(e){var i=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.default)(this,n)}}function p(){}var v={onNext:p,onCompleted:p,onError:p},m=0,y=function(t){(0,a.default)(c,t);var e,u=d(c);function c(t,e,n,r){var o,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;return(0,i.default)(this,c),(o=u.call(this,e))._id=m++,o._address=n,o._server={address:n.asHostPort()},o.creationTimestamp=Date.now(),o._disableLosslessIntegers=a,o._pendingObservers=[],o._currentObserver=void 0,o._ch=t,o._dechunker=new Rr.Dechunker,o._chunker=new Rr.Chunker(t),o._log=r,o._serversideRouting=l,o._dbConnectionId=null,o._protocol=null,o._currentFailure=null,o._isBroken=!1,o._log.isDebugEnabled()&&o._log.debug("".concat((0,s.default)(o)," created towards ").concat(n)),o}return(0,o.default)(c,[{key:"connect",value:function(t,e){var n=this;return this._negotiateProtocol().then((function(){return n._initialize(t,e)}))}},{key:"_negotiateProtocol",value:function(){var t=this,e=new h.default(this,this._ch,this._chunker,this._disableLosslessIntegers,this._log,this._serversideRouting);return new Promise((function(n,r){var i=function(e){t._handleFatalError(e),r(e)};t._ch.onerror=i.bind(t),t._ch._error&&i(t._ch._error),t._ch.onmessage=function(i){try{t._protocol=e.createNegotiatedProtocol(i),t._ch.onerror=t._handleFatalError.bind(t),t._ch.onmessage=function(e){return t._dechunker.write(e)},t._dechunker.onmessage=function(e){t._handleMessage(t._protocol.unpacker().unpack(e))},i.hasRemaining()&&t._dechunker.write(i.readSlice(i.remaining())),n(t)}catch(e){t._handleFatalError(e),r(e)}},e.writeHandshakeRequest()}))}},{key:"_initialize",value:function(t,e){var n=this,r=this;return new Promise((function(i,o){n._protocol.initialize({userAgent:t,authToken:e,onError:function(t){return o(t)},onComplete:function(){return i(r)}})}))}},{key:"protocol",value:function(){return this._protocol}},{key:"write",value:function(t,e,n){var r=this;this._queueObserver(e)&&(this._log.isDebugEnabled()&&this._log.debug("".concat(this," C: ").concat(t)),this._protocol.packer().packStruct(t.signature,t.fields.map((function(t){return r._packable(t)}))),this._chunker.messageBoundary(),n&&this._chunker.flush())}},{key:"_handleFatalError",value:function(t){for(this._isBroken=!0,this._error=this.handleAndTransformError(t,this._address),this._log.isErrorEnabled()&&this._log.error("".concat(this," experienced a fatal error ").concat(JSON.stringify(this._error))),this._currentObserver&&this._currentObserver.onError&&this._currentObserver.onError(this._error);this._pendingObservers.length>0;){var e=this._pendingObservers.shift();e&&e.onError&&e.onError(this._error)}}},{key:"_handleMessage",value:function(t){if(!this._isBroken){var e=t.fields[0];switch(t.signature){case 113:this._log.isDebugEnabled()&&this._log.debug("".concat(this," S: RECORD ").concat(JSON.stringify(t))),this._currentObserver.onNext(e);break;case 112:this._log.isDebugEnabled()&&this._log.debug("".concat(this," S: SUCCESS ").concat(JSON.stringify(t)));try{var n=this._protocol.transformMetadata(e);this._currentObserver.onCompleted(n)}finally{this._updateCurrentObserver()}break;case 127:this._log.isDebugEnabled()&&this._log.debug("".concat(this," S: FAILURE ").concat(JSON.stringify(t)));try{var r=(0,Kn.newError)(e.message,e.code);this._currentFailure=this.handleAndTransformError(r,this._address),this._currentObserver.onError(this._currentFailure)}finally{this._updateCurrentObserver(),this._resetOnFailure()}break;case 126:this._log.isDebugEnabled()&&this._log.debug("".concat(this," S: IGNORED ").concat(JSON.stringify(t)));try{this._currentFailure&&this._currentObserver.onError?this._currentObserver.onError(this._currentFailure):this._currentObserver.onError&&this._currentObserver.onError((0,Kn.newError)("Ignored either because of an error or RESET"))}finally{this._updateCurrentObserver()}break;default:this._handleFatalError((0,Kn.newError)("Unknown Bolt protocol message: "+t))}}}},{key:"resetAndFlush",value:function(){var t=this;return new Promise((function(e,n){t._protocol.reset({onError:function(e){if(t._isBroken)n(e);else{var r=t._handleProtocolError("Received FAILURE as a response for RESET: "+e);n(r)}},onComplete:function(){e()}})}))}},{key:"_resetOnFailure",value:function(){var t=this;this._protocol.reset({onError:function(){t._currentFailure=null},onComplete:function(){t._currentFailure=null}})}},{key:"_queueObserver",value:function(t){return this._isBroken?(t&&t.onError&&t.onError(this._error),!1):((t=t||v).onCompleted=t.onCompleted||p,t.onError=t.onError||p,t.onNext=t.onNext||p,void 0===this._currentObserver?this._currentObserver=t:this._pendingObservers.push(t),!0)}},{key:"_updateCurrentObserver",value:function(){this._currentObserver=this._pendingObservers.shift()}},{key:"isOpen",value:function(){return!this._isBroken&&this._ch._open}},{key:"close",value:(e=(0,r.default)(n.default.mark((function t(){return n.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._log.isDebugEnabled()&&this._log.debug("".concat(this," closing")),this._protocol&&this.isOpen()&&this._protocol.prepareToClose(),t.next=4,this._ch.close();case 4:this._log.isDebugEnabled()&&this._log.debug("".concat(this," closed"));case 5:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"toString",value:function(){return"Connection [".concat(this.id,"][").concat(this.databaseId||"","]")}},{key:"_packable",value:function(t){return this._protocol.packer().packable(t)}},{key:"_handleProtocolError",value:function(t){this._currentFailure=null,this._updateCurrentObserver();var e=(0,Kn.newError)(t,Kn.PROTOCOL_ERROR);return this._handleFatalError(e),e}},{key:"id",get:function(){return this._id}},{key:"databaseId",get:function(){return this._dbConnectionId},set:function(t){this._dbConnectionId=t}},{key:"address",get:function(){return this._address}},{key:"version",get:function(){return this._server.version},set:function(t){this._server.version=t}},{key:"server",get:function(){return this._server}}],[{key:"create",value:function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=new l.default(t,e,n.errorCode());return new c(new Nr.Channel(o),n,t,r,e.disableLosslessIntegers,i)}}]),c}(f.default);e.default=y}));Dt(Qr);var ti=Rt((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_ACQUISITION_TIMEOUT=e.DEFAULT_MAX_SIZE=e.default=void 0;var n=Un(jn),r=Un(Vn);e.DEFAULT_MAX_SIZE=100;e.DEFAULT_ACQUISITION_TIMEOUT=6e4;var i=function(){function t(e,r){(0,n.default)(this,t),this.maxSize=o(e,100),this.acquisitionTimeout=o(r,6e4)}return(0,r.default)(t,null,[{key:"defaultConfig",value:function(){return new t(100,6e4)}},{key:"fromDriverConfig",value:function(e){return new t(s(e.maxConnectionPoolSize)?e.maxConnectionPoolSize:100,s(e.connectionAcquisitionTimeout)?e.connectionAcquisitionTimeout:6e4)}}]),t}();function o(t,e){return 0===t||t?t:e}function s(t){return 0===t||t}e.default=i}));Dt(ti);ti.DEFAULT_ACQUISITION_TIMEOUT,ti.DEFAULT_MAX_SIZE;var ei=Rt((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n,r=Un($n),i=Un(Wn),o=Un(qn),s=Un(jn),a=Un(Vn),u=Un(er);function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,o.default)(t);if(e){var s=(0,o.default)(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return(0,i.default)(this,n)}}var l=(n={},(0,u.default)(n,"error",0),(0,u.default)(n,"warn",1),(0,u.default)(n,"info",2),(0,u.default)(n,"debug",3),n),h=function(){function t(e,n){(0,s.default)(this,t),this._level=e,this._loggerFunction=n}return(0,a.default)(t,[{key:"isErrorEnabled",value:function(){return d(this._level,"error")}},{key:"error",value:function(t){this.isErrorEnabled()&&this._loggerFunction("error",t)}},{key:"isWarnEnabled",value:function(){return d(this._level,"warn")}},{key:"warn",value:function(t){this.isWarnEnabled()&&this._loggerFunction("warn",t)}},{key:"isInfoEnabled",value:function(){return d(this._level,"info")}},{key:"info",value:function(t){this.isInfoEnabled()&&this._loggerFunction("info",t)}},{key:"isDebugEnabled",value:function(){return d(this._level,"debug")}},{key:"debug",value:function(t){this.isDebugEnabled()&&this._loggerFunction("debug",t)}}],[{key:"create",value:function(e){if(e&&e.logging){var n=e.logging;return new t(function(t){if(t&&t.level){var e=t.level,n=l[e];if(!n&&0!==n)throw(0,Kn.newError)("Illegal logging level: ".concat(e,". Supported levels are: ").concat(Object.keys(l)));return e}return"info"}(n),function(t){if(t&&t.logger){var e=t.logger;if(e&&"function"==typeof e)return e}throw(0,Kn.newError)("Illegal logger function: ".concat(t.logger))}(n))}return this.noOp()}},{key:"noOp",value:function(){return f}}]),t}(),f=new(function(t){(0,r.default)(n,t);var e=c(n);function n(){return(0,s.default)(this,n),e.call(this,null,null)}return(0,a.default)(n,[{key:"isErrorEnabled",value:function(){return!1}},{key:"error",value:function(t){}},{key:"isWarnEnabled",value:function(){return!1}},{key:"warn",value:function(t){}},{key:"isInfoEnabled",value:function(){return!1}},{key:"info",value:function(t){}},{key:"isDebugEnabled",value:function(){return!1}},{key:"debug",value:function(t){}}]),n}(h));function d(t,e){return l[t]>=l[e]}var p=h;e.default=p}));Dt(ei);var ni=Rt((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=Un(sr),r=Un(Br),i=Un(jn),o=Un(Vn),s=Un(ti),a=Un(ei),u=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.create,r=void 0===n?function(t,e){return Promise.resolve()}:n,o=e.destroy,u=void 0===o?function(t){return Promise.resolve()}:o,c=e.validate,l=void 0===c?function(t){return!0}:c,h=e.installIdleObserver,f=void 0===h?function(t,e){}:h,d=e.removeIdleObserver,p=void 0===d?function(t){}:d,v=e.config,m=void 0===v?s.default.defaultConfig():v,y=e.log,g=void 0===y?a.default.noOp():y;(0,i.default)(this,t),this._create=r,this._destroy=u,this._validate=l,this._installIdleObserver=f,this._removeIdleObserver=p,this._maxSize=m.maxSize,this._acquisitionTimeout=m.acquisitionTimeout,this._pools={},this._pendingCreates={},this._acquireRequests={},this._activeResourceCounts={},this._release=this._release.bind(this),this._log=g,this._closed=!1}var e,u,f;return(0,o.default)(t,[{key:"acquire",value:function(t){var e=this;return this._acquire(t).then((function(n){var r=t.asKey();if(n)return c(r,e._activeResourceCounts),e._log.isDebugEnabled()&&e._log.debug("".concat(n," acquired from the pool ").concat(r)),n;var i=e._acquireRequests;return i[r]||(i[r]=[]),new Promise((function(n,o){var s,a=setTimeout((function(){var n=i[r];if(n&&(i[r]=n.filter((function(t){return t!==s}))),s.isCompleted());else{var o=e.activeResourceCount(t),a=e.has(t)?e._pools[r].length:0;s.reject((0,Kn.newError)("Connection acquisition timed out in ".concat(e._acquisitionTimeout," ms. Poos status: Active conn count = ").concat(o,", Idle conn count = ").concat(a,".")))}}),e._acquisitionTimeout);s=new h(r,n,o,a,e._log),i[r].push(s)}))}))}},{key:"purge",value:function(t){return this._purgeKey(t.asKey())}},{key:"close",value:function(){var t=this;return this._closed=!0,Promise.all(Object.keys(this._pools).map((function(e){return t._purgeKey(e)})))}},{key:"keepAll",value:function(t){var e=this,n=t.map((function(t){return t.asKey()})),r=Object.keys(this._pools).filter((function(t){return-1===n.indexOf(t)}));return Promise.all(r.map((function(t){return e._purgeKey(t)})))}},{key:"has",value:function(t){return t.asKey()in this._pools}},{key:"activeResourceCount",value:function(t){return this._activeResourceCounts[t.asKey()]||0}},{key:"_acquire",value:(f=(0,r.default)(n.default.mark((function t(e){var r,i,o,s;return n.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this._closed){t.next=2;break}throw(0,Kn.newError)("Pool is closed, it is no more able to serve requests.");case 2:r=e.asKey(),(i=this._pools[r])||(i=[],this._pools[r]=i,this._pendingCreates[r]=0);case 5:if(!i.length){t.next=16;break}if(o=i.pop(),!this._validate(o)){t.next=12;break}return this._removeIdleObserver&&this._removeIdleObserver(o),t.abrupt("return",Promise.resolve(o));case 12:return t.next=14,this._destroy(o);case 14:t.next=5;break;case 16:if(!(this._maxSize>0)){t.next=20;break}if(!(this.activeResourceCount(e)+this._pendingCreates[r]>=this._maxSize)){t.next=20;break}return t.abrupt("return",null);case 20:return this._pendingCreates[r]=this._pendingCreates[r]+1,t.prev=21,t.next=24,this._create(e,this._release);case 24:s=t.sent;case 25:return t.prev=25,this._pendingCreates[r]=this._pendingCreates[r]-1,t.finish(25);case 28:return t.abrupt("return",s);case 29:case"end":return t.stop()}}),t,this,[[21,,25,28]])}))),function(t){return f.apply(this,arguments)})},{key:"_release",value:(u=(0,r.default)(n.default.mark((function t(e,r){var i,o,s=this;return n.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=e.asKey(),!(o=this._pools[i])){t.next=14;break}if(this._validate(r)){t.next=9;break}return this._log.isDebugEnabled()&&this._log.debug("".concat(r," destroyed and can't be released to the pool ").concat(i," because it is not functional")),t.next=7,this._destroy(r);case 7:t.next=12;break;case 9:this._installIdleObserver&&this._installIdleObserver(r,{onError:function(t){s._log.debug("Idle connection ".concat(r," destroyed because of error: ").concat(t));var e=s._pools[i];e&&(s._pools[i]=e.filter((function(t){return t!==r}))),s._destroy(r).catch((function(){}))}}),o.push(r),this._log.isDebugEnabled()&&this._log.debug("".concat(r," released to the pool ").concat(i));case 12:t.next=17;break;case 14:return this._log.isDebugEnabled()&&this._log.debug("".concat(r," destroyed and can't be released to the pool ").concat(i," because pool has been purged")),t.next=17,this._destroy(r);case 17:l(i,this._activeResourceCounts),this._processPendingAcquireRequests(e);case 19:case"end":return t.stop()}}),t,this)}))),function(t,e){return u.apply(this,arguments)})},{key:"_purgeKey",value:(e=(0,r.default)(n.default.mark((function t(e){var r,i;return n.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=this._pools[e]||[];case 1:if(!r.length){t.next=8;break}return i=r.pop(),this._removeIdleObserver&&this._removeIdleObserver(i),t.next=6,this._destroy(i);case 6:t.next=1;break;case 8:delete this._pools[e];case 9:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"_processPendingAcquireRequests",value:function(t){var e=this,n=t.asKey(),r=this._acquireRequests[n];if(r){var i=r.shift();i?this._acquire(t).catch((function(t){return i.reject(t),null})).then((function(r){r&&(i.isCompleted()?e._release(t,r):(c(n,e._activeResourceCounts),i.resolve(r)))})):delete this._acquireRequests[n]}}}]),t}();function c(t,e){var n=e[t]||0;e[t]=n+1}function l(t,e){var n=(e[t]||0)-1;n>0?e[t]=n:delete e[t]}var h=function(){function t(e,n,r,o,s){(0,i.default)(this,t),this._key=e,this._resolve=n,this._reject=r,this._timeoutId=o,this._log=s,this._completed=!1}return(0,o.default)(t,[{key:"isCompleted",value:function(){return this._completed}},{key:"resolve",value:function(t){this._completed||(this._completed=!0,clearTimeout(this._timeoutId),this._log.isDebugEnabled()&&this._log.debug("".concat(t," acquired from the pool ").concat(this._key)),this._resolve(t))}},{key:"reject",value:function(t){this._completed||(this._completed=!0,clearTimeout(this._timeoutId),this._reject(t))}}]),t}(),f=u;e.default=f}));Dt(ni);var ri=Rt((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=Un(jn),r=Un(Vn),i=function(){function t(e,r,i){(0,n.default)(this,t),this._errorCode=e,this._handleUnavailability=r||s,this._handleWriteFailure=i||s}return(0,r.default)(t,[{key:"errorCode",value:function(){return this._errorCode}},{key:"handleAndTransformError",value:function(t,e){return o(t)?this._handleUnavailability(t,e):function(t){if(t)return"Neo.ClientError.Cluster.NotALeader"===t.code||"Neo.ClientError.General.ForbiddenOnReadOnlyDatabase"===t.code;return!1}(t)?this._handleWriteFailure(t,e):t}}]),t}();function o(t){return!!t&&(t.code===Kn.SESSION_EXPIRED||t.code===Kn.SERVICE_UNAVAILABLE||"Neo.TransientError.General.DatabaseUnavailable"===t.code)}function s(t){return t}e.default=i}));Dt(ri);var ii=Rt((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=Un(sr),r=Un(Br),i=Un(jn),o=Un(Vn),s=Un(Bn),a=Un($n),u=Un(Wn),c=Un(qn),l=Un(Qr),h=Un(ni),f=Un(ti),d=Un(ri);function p(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,c.default)(t);if(e){var i=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.default)(this,n)}}var v=function(t){(0,a.default)(c,t);var e,u=p(c);function c(t){var e,n=t.id,r=t.config,o=t.log,a=t.userAgent,d=t.authToken,p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(0,i.default)(this,c),(e=u.call(this))._id=n,e._config=r,e._log=o,e._userAgent=a,e._authToken=d,e._createChannelConnection=p||function(t){return l.default.create(t,e._config,e._createConnectionErrorHandler(),e._log)},e._connectionPool=new h.default({create:e._createConnection.bind((0,s.default)(e)),destroy:e._destroyConnection.bind((0,s.default)(e)),validate:e._validateConnection.bind((0,s.default)(e)),installIdleObserver:c._installIdleObserverOnConnection.bind((0,s.default)(e)),removeIdleObserver:c._removeIdleObserverOnConnection.bind((0,s.default)(e)),config:f.default.fromDriverConfig(r),log:e._log}),e._openConnections={},e}return(0,o.default)(c,[{key:"_createConnectionErrorHandler",value:function(){return new d.default(Kn.SERVICE_UNAVAILABLE)}},{key:"_createConnection",value:function(t,e){var n=this,r=this._createChannelConnection(t);return r._release=function(){return e(t,r)},this._openConnections[r.id]=r,r.connect(this._userAgent,this._authToken).catch((function(t){throw n._destroyConnection(r),t}))}},{key:"_validateConnection",value:function(t){if(!t.isOpen())return!1;var e=this._config.maxConnectionLifetime;return Date.now()-t.creationTimestamp<=e}},{key:"_destroyConnection",value:function(t){return delete this._openConnections[t.id],t.close()}},{key:"close",value:(e=(0,r.default)(n.default.mark((function t(){return n.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._connectionPool.close();case 2:return t.next=4,Promise.all(Object.values(this._openConnections).map((function(t){return t.close()})));case 4:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})}],[{key:"_installIdleObserverOnConnection",value:function(t,e){t._queueObserver(e)}},{key:"_removeIdleObserverOnConnection",value:function(t){t._updateCurrentObserver()}}]),c}(Un(Fr).default);e.default=v}));Dt(ii);var oi=Rt((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=Un(jn),r=Un(Vn),i=Un($n),o=Un(Wn),s=Un(qn);function a(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,s.default)(t);if(e){var i=(0,s.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,o.default)(this,n)}}var u=function(t){(0,i.default)(o,t);var e=a(o);function o(t,r){var i;return(0,n.default)(this,o),i=e.call(this,r),r&&(i._originalErrorHandler=t._errorHandler,t._errorHandler=i._errorHandler),i._delegate=t,i}return(0,r.default)(o,[{key:"isOpen",value:function(){return this._delegate.isOpen()}},{key:"protocol",value:function(){return this._delegate.protocol()}},{key:"connect",value:function(t,e){return this._delegate.connect(t,e)}},{key:"write",value:function(t,e,n){return this._delegate.write(t,e,n)}},{key:"resetAndFlush",value:function(){return this._delegate.resetAndFlush()}},{key:"close",value:function(){return this._delegate.close()}},{key:"_release",value:function(){return this._originalErrorHandler&&(this._delegate._errorHandler=this._originalErrorHandler),this._delegate._release()}},{key:"id",get:function(){return this._delegate.id}},{key:"databaseId",get:function(){return this._delegate.databaseId},set:function(t){this._delegate.databaseId=t}},{key:"server",get:function(){return this._delegate.server}},{key:"address",get:function(){return this._delegate.address}},{key:"version",get:function(){return this._delegate.version},set:function(t){this._delegate.version=t}}]),o}(Un(jr).default);e.default=u}));Dt(oi);var si=Rt((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=Un(sr),r=Un(Br),i=Un(jn),o=Un(Vn),s=Un($n),a=Un(Wn),u=Un(qn),c=Un(ii),l=Un(oi),h=Un(Qr);function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,u.default)(t);if(e){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,a.default)(this,n)}}var d=function(t){(0,s.default)(d,t);var e,a,u,c=f(d);function d(t){var e,n=t.id,r=t.config,o=t.log,s=t.address,a=t.userAgent,u=t.authToken;return(0,i.default)(this,d),(e=c.call(this,{id:n,config:r,log:o,userAgent:a,authToken:u}))._address=s,e}return(0,o.default)(d,[{key:"acquireConnection",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.accessMode,t.database,t.bookmarks;return this._connectionPool.acquire(this._address).then((function(t){return new l.default(t,null)}))}},{key:"_hasProtocolVersion",value:(u=(0,r.default)(n.default.mark((function t(e){var r,i;return n.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=h.default.create(this._address,this._config,this._createConnectionErrorHandler(),this._log),t.prev=1,t.next=4,r._negotiateProtocol();case 4:if(!(i=r.protocol())){t.next=7;break}return t.abrupt("return",e(i.version));case 7:return t.abrupt("return",!1);case 8:return t.prev=8,t.next=11,r.close();case 11:return t.finish(8);case 12:case"end":return t.stop()}}),t,this,[[1,,8,12]])}))),function(t){return u.apply(this,arguments)})},{key:"supportsMultiDb",value:(a=(0,r.default)(n.default.mark((function t(){return n.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._hasProtocolVersion((function(t){return t>=tr.BOLT_PROTOCOL_V4_0}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})},{key:"supportsTransactionConfig",value:(e=(0,r.default)(n.default.mark((function t(){return n.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._hasProtocolVersion((function(t){return t>=tr.BOLT_PROTOCOL_V3}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})}]),d}(c.default);e.default=d}));Dt(si);var ai=Rt((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=Un(jn),r=Un(Vn),i=Un(rr),o=function(){function t(e){(0,n.default)(this,t),this._connectionProvider=e}return(0,r.default)(t,[{key:"verify",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.database,n=void 0===e?"":e;return s(this._connectionProvider,n)}}]),t}();function s(t,e){var n=new i.default({mode:$c.READ,database:e,connectionProvider:t});return n.initializeConnection(),n.getConnection().then((function(t){return n.close().then((function(){return t.server}))})).catch((function(t){return n.close().catch((function(t){})).then((function(){return Promise.reject(t)}))}))}e.default=o}));Dt(ai);var ui=Rt((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=Un(jn),r=Un(Vn),i=Un(Vr),o=Ln(rr),s=Un(nr),a=Un(Pr),u=function(){function t(e){var r=e.connectionHolder,i=e.onClose,o=e.onBookmark,s=e.onConnection,a=e.reactive,u=e.fetchSize;(0,n.default)(this,t),this._connectionHolder=r,this._reactive=a,this._state=c.ACTIVE,this._onClose=i,this._onBookmark=o,this._onConnection=s,this._onError=this._onErrorCallback.bind(this),this._onComplete=this._onCompleteCallback.bind(this),this._fetchSize=u,this._results=[]}return(0,r.default)(t,[{key:"_begin",value:function(t,e){var n=this;this._connectionHolder.getConnection().then((function(r){return n._onConnection(),r.protocol().beginTransaction({bookmark:t,txConfig:e,mode:n._connectionHolder.mode(),database:n._connectionHolder.database(),beforeError:n._onError,afterComplete:n._onComplete})})).catch((function(t){return n._onError(t)}))}},{key:"run",value:function(t,e){var n=(0,Qn.validateQueryAndParameters)(t,e),r=n.validatedQuery,i=n.params,o=this._state.run(r,i,{connectionHolder:this._connectionHolder,onError:this._onError,onComplete:this._onComplete,onConnection:this._onConnection,reactive:this._reactive,fetchSize:this._fetchSize});return this._results.push(o),o}},{key:"commit",value:function(){var t=this._state.commit({connectionHolder:this._connectionHolder,onError:this._onError,onComplete:this._onComplete,onConnection:this._onConnection,pendingResults:this._results});return this._state=t.state,this._onClose(),new Promise((function(e,n){t.result.subscribe({onCompleted:function(){return e()},onError:function(t){return n(t)}})}))}},{key:"rollback",value:function(){var t=this._state.rollback({connectionHolder:this._connectionHolder,onError:this._onError,onComplete:this._onComplete,onConnection:this._onConnection,pendingResults:this._results});return this._state=t.state,this._onClose(),new Promise((function(e,n){t.result.subscribe({onCompleted:function(){return e()},onError:function(t){return n(t)}})}))}},{key:"isOpen",value:function(){return this._state===c.ACTIVE}},{key:"_onErrorCallback",value:function(t){return this._state=c.FAILED,this._onClose(),this._connectionHolder.releaseConnection()}},{key:"_onCompleteCallback",value:function(t){this._onBookmark(new s.default(t.bookmark))}}]),t}(),c={ACTIVE:{commit:function(t){return{result:l(!0,t.connectionHolder,t.onError,t.onComplete,t.onConnection,t.pendingResults),state:c.SUCCEEDED}},rollback:function(t){return{result:l(!1,t.connectionHolder,t.onError,t.onComplete,t.onConnection,t.pendingResults),state:c.ROLLED_BACK}},run:function(t,e,n){var r=n.connectionHolder,i=n.onError,o=n.onComplete,u=n.onConnection,c=n.reactive,l=n.fetchSize;return h(r.getConnection().then((function(n){return u(),n.protocol().run(t,e,{bookmark:s.default.empty(),txConfig:a.default.empty(),beforeError:i,afterComplete:o,reactive:c,fetchSize:l})})).catch((function(t){return new Mr.FailedObserver({error:t,onError:i})})),t,e)}},FAILED:{commit:function(t){t.connectionHolder;var e=t.onError;t.onComplete;return{result:h(new Mr.FailedObserver({error:(0,Kn.newError)("Cannot commit this transaction, because it has been rolled back either because of an error or explicit termination."),onError:e}),"COMMIT",{}),state:c.FAILED}},rollback:function(t){t.connectionHolder,t.onError,t.onComplete;return{result:h(new Mr.CompletedObserver,"ROLLBACK",{}),state:c.FAILED}},run:function(t,e,n){n.connectionHolder;var r=n.onError;n.onComplete;return h(new Mr.FailedObserver({error:(0,Kn.newError)("Cannot run query in this transaction, because it has been rolled back either because of an error or explicit termination."),onError:r}),t,e)}},SUCCEEDED:{commit:function(t){t.connectionHolder;var e=t.onError;t.onComplete;return{result:h(new Mr.FailedObserver({error:(0,Kn.newError)("Cannot commit this transaction, because it has already been committed."),onError:e}),"COMMIT",{}),state:c.SUCCEEDED}},rollback:function(t){t.connectionHolder;var e=t.onError;t.onComplete;return{result:h(new Mr.FailedObserver({error:(0,Kn.newError)("Cannot rollback this transaction, because it has already been committed."),onError:e}),"ROLLBACK",{}),state:c.SUCCEEDED}},run:function(t,e,n){n.connectionHolder;var r=n.onError;n.onComplete;return h(new Mr.FailedObserver({error:(0,Kn.newError)("Cannot run query in this transaction, because it has already been committed."),onError:r}),t,e)}},ROLLED_BACK:{commit:function(t){t.connectionHolder;var e=t.onError;t.onComplete;return{result:h(new Mr.FailedObserver({error:(0,Kn.newError)("Cannot commit this transaction, because it has already been rolled back."),onError:e}),"COMMIT",{}),state:c.ROLLED_BACK}},rollback:function(t){t.connectionHolder,t.onError,t.onComplete;return{result:h(new Mr.FailedObserver({error:(0,Kn.newError)("Cannot rollback this transaction, because it has already been rolled back.")}),"ROLLBACK",{}),state:c.ROLLED_BACK}},run:function(t,e,n){n.connectionHolder;var r=n.onError;n.onComplete;return h(new Mr.FailedObserver({error:(0,Kn.newError)("Cannot run query in this transaction, because it has already been rolled back."),onError:r}),t,e)}}};function l(t,e,n,r,o,s){var a=e.getConnection().then((function(e){return o(),s.forEach((function(t){return t._cancel()})),Promise.all(s).then((function(i){return t?e.protocol().commitTransaction({beforeError:n,afterComplete:r}):e.protocol().rollbackTransaction({beforeError:n,afterComplete:r})}))})).catch((function(t){return new Mr.FailedObserver({error:t,onError:n})}));return new i.default(a,t?"COMMIT":"ROLLBACK",{},e)}function h(t,e,n){return new i.default(Promise.resolve(t),e,n,o.EMPTY_CONNECTION_HOLDER)}var f=u;e.default=f}));Dt(ui);var ci=Rt((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=Un(jn),r=Un(Vn),i=function(){function t(e,r,i,s){(0,n.default)(this,t),this._maxRetryTimeMs=o(e,3e4),this._initialRetryDelayMs=o(r,1e3),this._multiplier=o(i,2),this._jitterFactor=o(s,.2),this._inFlightTimeoutIds=[],this._verifyAfterConstruction()}return(0,r.default)(t,[{key:"execute",value:function(t,e){var n=this;return new Promise((function(r,i){n._executeTransactionInsidePromise(t,e,r,i)})).catch((function(r){var i=Date.now(),o=n._initialRetryDelayMs;return n._retryTransactionPromise(t,e,r,i,o)}))}},{key:"close",value:function(){this._inFlightTimeoutIds.forEach((function(t){return clearTimeout(t)})),this._inFlightTimeoutIds=[]}},{key:"_retryTransactionPromise",value:function(e,n,r,i,o){var s=this;return Date.now()-i>this._maxRetryTimeMs||!t._canRetryOn(r)?Promise.reject(r):new Promise((function(t,r){var i=s._computeDelayWithJitter(o),a=setTimeout((function(){s._inFlightTimeoutIds=s._inFlightTimeoutIds.filter((function(t){return t!==a})),s._executeTransactionInsidePromise(e,n,t,r)}),i);s._inFlightTimeoutIds.push(a)})).catch((function(t){var r=o*s._multiplier;return s._retryTransactionPromise(e,n,t,i,r)}))}},{key:"_executeTransactionInsidePromise",value:function(t,e,n,r){var i,o=this;try{i=t()}catch(t){return void r(t)}this._safeExecuteTransactionWork(i,e).then((function(t){return o._handleTransactionWorkSuccess(t,i,n,r)})).catch((function(t){return o._handleTransactionWorkFailure(t,i,r)}))}},{key:"_safeExecuteTransactionWork",value:function(t,e){try{var n=e(t);return Promise.resolve(n)}catch(t){return Promise.reject(t)}}},{key:"_handleTransactionWorkSuccess",value:function(t,e,n,r){e.isOpen()?e.commit().then((function(){n(t)})).catch((function(t){r(t)})):n(t)}},{key:"_handleTransactionWorkFailure",value:function(t,e,n){e.isOpen()?e.rollback().catch((function(t){})).then((function(){return n(t)})):n(t)}},{key:"_computeDelayWithJitter",value:function(t){var e=t*this._jitterFactor,n=t-e,r=t+e;return Math.random()*(r-n)+n}},{key:"_verifyAfterConstruction",value:function(){if(this._maxRetryTimeMs<0)throw(0,Kn.newError)("Max retry time should be >= 0: "+this._maxRetryTimeMs);if(this._initialRetryDelayMs<0)throw(0,Kn.newError)("Initial retry delay should >= 0: "+this._initialRetryDelayMs);if(this._multiplier<1)throw(0,Kn.newError)("Multiplier should be >= 1.0: "+this._multiplier);if(this._jitterFactor<0||this._jitterFactor>1)throw(0,Kn.newError)("Jitter factor should be in [0.0, 1.0]: "+this._jitterFactor)}}],[{key:"_canRetryOn",value:function(t){return t&&t instanceof Kn.Neo4jError&&t.code&&(t.code===Kn.SERVICE_UNAVAILABLE||t.code===Kn.SESSION_EXPIRED||this._isTransientError(t))}},{key:"_isTransientError",value:function(t){var e=t.code;return e.indexOf("TransientError")>=0&&("Neo.TransientError.Transaction.Terminated"!==e&&"Neo.TransientError.Transaction.LockClientStopped"!==e)}}]),t}();function o(t,e){return t||0===t?t:e}e.default=i}));Dt(ci);var li=Rt((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=Un(sr),r=Un(Br),i=Un(jn),o=Un(Vn),s=Un(Vr),a=Un(ui),u=Un(rr),c=Un($c),l=Un(ci),h=Un(nr),f=Un(Pr);var d=function(){function t(e){var n=e.mode,r=e.connectionProvider,o=e.bookmark,s=e.database,a=e.config,c=e.reactive,h=e.fetchSize;(0,i.default)(this,t),this._mode=n,this._database=s,this._reactive=c,this._fetchSize=h,this._readConnectionHolder=new u.default({mode:tr.ACCESS_MODE_READ,database:s,bookmark:o,connectionProvider:r}),this._writeConnectionHolder=new u.default({mode:tr.ACCESS_MODE_WRITE,database:s,bookmark:o,connectionProvider:r}),this._open=!0,this._hasTx=!1,this._lastBookmark=o,this._transactionExecutor=function(t){var e=t&&t.maxTransactionRetryTime?t.maxTransactionRetryTime:null;return new l.default(e)}(a),this._onComplete=this._onCompleteCallback.bind(this)}var e;return(0,o.default)(t,[{key:"run",value:function(t,e,n){var r=this,i=(0,Qn.validateQueryAndParameters)(t,e),o=i.validatedQuery,s=i.params,a=n?new f.default(n):f.default.empty();return this._run(o,s,(function(t){return r._assertSessionIsOpen(),t.protocol().run(o,s,{bookmark:r._lastBookmark,txConfig:a,mode:r._mode,database:r._database,afterComplete:r._onComplete,reactive:r._reactive,fetchSize:r._fetchSize})}))}},{key:"_run",value:function(t,e,n){var r,i=this._connectionHolderWithMode(this._mode);return r=this._open?!this._hasTx&&i.initializeConnection()?i.getConnection().then((function(t){return n(t)})).catch((function(t){return Promise.resolve(new Mr.FailedObserver({error:t}))})):Promise.resolve(new Mr.FailedObserver({error:(0,Kn.newError)("Queries cannot be run directly on a session with an open transaction; either run from within the transaction or use a different session.")})):Promise.resolve(new Mr.FailedObserver({error:(0,Kn.newError)("Cannot run query in a closed session.")})),new s.default(r,t,e,i)}},{key:"beginTransaction",value:function(t){var e=t,n=f.default.empty();return e&&(n=new f.default(e)),this._beginTransaction(this._mode,n)}},{key:"_beginTransaction",value:function(t,e){if(!this._open)throw(0,Kn.newError)("Cannot begin a transaction on a closed session.");if(this._hasTx)throw(0,Kn.newError)("You cannot begin a transaction on a session with an open transaction; either run from within the transaction or use a different session.");var n=c.default._validateSessionMode(t),r=this._connectionHolderWithMode(n);r.initializeConnection(),this._hasTx=!0;var i=new a.default({connectionHolder:r,onClose:this._transactionClosed.bind(this),onBookmark:this._updateBookmark.bind(this),onConnection:this._assertSessionIsOpen.bind(this),reactive:this._reactive,fetchSize:this._fetchSize});return i._begin(this._lastBookmark,e),i}},{key:"_assertSessionIsOpen",value:function(){if(!this._open)throw(0,Kn.newError)("You cannot run more transactions on a closed session.")}},{key:"_transactionClosed",value:function(){this._hasTx=!1}},{key:"lastBookmark",value:function(){return this._lastBookmark.values()}},{key:"readTransaction",value:function(t,e){var n=new f.default(e);return this._runTransaction(tr.ACCESS_MODE_READ,n,t)}},{key:"writeTransaction",value:function(t,e){var n=new f.default(e);return this._runTransaction(tr.ACCESS_MODE_WRITE,n,t)}},{key:"_runTransaction",value:function(t,e,n){var r=this;return this._transactionExecutor.execute((function(){return r._beginTransaction(t,e)}),n)}},{key:"_updateBookmark",value:function(t){t&&!t.isEmpty()&&(this._lastBookmark=t)}},{key:"close",value:(e=(0,r.default)(n.default.mark((function t(){return n.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this._open){t.next=7;break}return this._open=!1,this._transactionExecutor.close(),t.next=5,this._readConnectionHolder.close();case 5:return t.next=7,this._writeConnectionHolder.close();case 7:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"_connectionHolderWithMode",value:function(t){if(t===tr.ACCESS_MODE_READ)return this._readConnectionHolder;if(t===tr.ACCESS_MODE_WRITE)return this._writeConnectionHolder;throw(0,Kn.newError)("Unknown access mode: "+t)}},{key:"_onCompleteCallback",value:function(t){this._updateBookmark(new h.default(t.bookmark))}}]),t}();e.default=d}));Dt(li);
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */
var hi=function(t,e){return(hi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function fi(t,e){function n(){this.constructor=t}hi(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var di=function(){return(di=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function pi(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function vi(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function mi(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function yi(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function gi(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function bi(t){return this instanceof bi?(this.v=t,this):new bi(t)}var _i=Object.freeze({__proto__:null,__extends:fi,get __assign(){return di},__rest:function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},__decorate:function(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s},__param:function(t,e){return function(n,r){e(n,r,t)}},__metadata:function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},__awaiter:pi,__generator:vi,__createBinding:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]},__exportStar:function(t,e){for(var n in t)"default"===n||e.hasOwnProperty(n)||(e[n]=t[n])},__values:mi,__read:yi,__spread:function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(yi(arguments[e]));return t},__spreadArrays:gi,__await:bi,__asyncGenerator:function(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),o=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(t){i[t]&&(r[t]=function(e){return new Promise((function(n,r){o.push([t,e,n,r])>1||a(t,e)}))})}function a(t,e){try{!function(t){t.value instanceof bi?Promise.resolve(t.value.v).then(u,c):l(o[0][2],t)}(i[t](e))}catch(t){l(o[0][3],t)}}function u(t){a("next",t)}function c(t){a("throw",t)}function l(t,e){t(e),o.shift(),o.length&&a(o[0][0],o[0][1])}},__asyncDelegator:function(t){var e,n;return e={},r("next"),r("throw",(function(t){throw t})),r("return"),e[Symbol.iterator]=function(){return this},e;function r(r,i){e[r]=t[r]?function(e){return(n=!n)?{value:bi(t[r](e)),done:"return"===r}:i?i(e):e}:i}},__asyncValues:function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=mi(t),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(n){e[n]=t[n]&&function(e){return new Promise((function(r,i){(function(t,e,n,r){Promise.resolve(r).then((function(e){t({value:e,done:n})}),e)})(r,i,(e=t[n](e)).done,e.value)}))}}},__makeTemplateObject:function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},__importStar:function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e},__importDefault:function(t){return t&&t.__esModule?t:{default:t}},__classPrivateFieldGet:function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)},__classPrivateFieldSet:function(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}});function wi(t){return"function"==typeof t}var Ei=!1,Ii={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){t&&(new Error).stack;Ei=t},get useDeprecatedSynchronousErrorHandling(){return Ei}};function Ti(t){setTimeout((function(){throw t}),0)}var ki={closed:!0,next:function(t){},error:function(t){if(Ii.useDeprecatedSynchronousErrorHandling)throw t;Ti(t)},complete:function(){}},Si=function(){return Array.isArray||function(t){return t&&"number"==typeof t.length}}();function xi(t){return null!==t&&"object"==typeof t}var Oi=function(){function t(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(t,e){return e+1+") "+t.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t}(),Ai=function(){function t(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}return t.prototype.unsubscribe=function(){var e;if(!this.closed){var n=this._parentOrParents,r=this._unsubscribe,i=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(var o=0;o<n.length;++o){n[o].remove(this)}if(wi(r))try{r.call(this)}catch(t){e=t instanceof Oi?Ni(t.errors):[t]}if(Si(i)){o=-1;for(var s=i.length;++o<s;){var a=i[o];if(xi(a))try{a.unsubscribe()}catch(t){e=e||[],t instanceof Oi?e=e.concat(Ni(t.errors)):e.push(t)}}}if(e)throw new Oi(e)}},t.prototype.add=function(e){var n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){var r=n;(n=new t)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var i=n._parentOrParents;if(null===i)n._parentOrParents=this;else if(i instanceof t){if(i===this)return n;n._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return n;i.push(this)}var o=this._subscriptions;return null===o?this._subscriptions=[n]:o.push(n),n},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}},t.EMPTY=function(t){return t.closed=!0,t}(new t),t}();function Ni(t){return t.reduce((function(t,e){return t.concat(e instanceof Oi?e.errors:e)}),[])}var Di=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),Ri=function(t){function e(n,r,i){var o=t.call(this)||this;switch(o.syncErrorValue=null,o.syncErrorThrown=!1,o.syncErrorThrowable=!1,o.isStopped=!1,arguments.length){case 0:o.destination=ki;break;case 1:if(!n){o.destination=ki;break}if("object"==typeof n){n instanceof e?(o.syncErrorThrowable=n.syncErrorThrowable,o.destination=n,n.add(o)):(o.syncErrorThrowable=!0,o.destination=new Ci(o,n));break}default:o.syncErrorThrowable=!0,o.destination=new Ci(o,n,r,i)}return o}return fi(e,t),e.prototype[Di]=function(){return this},e.create=function(t,n,r){var i=new e(t,n,r);return i.syncErrorThrowable=!1,i},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this},e}(Ai),Ci=function(t){function e(e,n,r,i){var o,s=t.call(this)||this;s._parentSubscriber=e;var a=s;return wi(n)?o=n:n&&(o=n.next,r=n.error,i=n.complete,n!==ki&&(wi((a=Object.create(n)).unsubscribe)&&s.add(a.unsubscribe.bind(a)),a.unsubscribe=s.unsubscribe.bind(s))),s._context=a,s._next=o,s._error=r,s._complete=i,s}return fi(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;Ii.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber,n=Ii.useDeprecatedSynchronousErrorHandling;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):Ti(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;Ti(t)}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var n=function(){return t._complete.call(t._context)};Ii.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){if(this.unsubscribe(),Ii.useDeprecatedSynchronousErrorHandling)throw t;Ti(t)}},e.prototype.__tryOrSetError=function(t,e,n){if(!Ii.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(e){return Ii.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=e,t.syncErrorThrown=!0,!0):(Ti(e),!0)}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(Ri);function Ui(t){for(;t;){var e=t,n=e.closed,r=e.destination,i=e.isStopped;if(n||i)return!1;t=r&&r instanceof Ri?r:null}return!0}var Pi=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}();function Li(t){return t}function ji(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Mi(t)}function Mi(t){return 0===t.length?Li:1===t.length?t[0]:function(e){return t.reduce((function(t,e){return e(t)}),e)}}var Vi=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(t,e,n){var r=this.operator,i=function(t,e,n){if(t){if(t instanceof Ri)return t;if(t[Di])return t[Di]()}return t||e||n?new Ri(t,e,n):new Ri(ki)}(t,e,n);if(r?i.add(r.call(i,this.source)):i.add(this.source||Ii.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),Ii.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){Ii.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),Ui(t)?t.error(e):console.warn(e)}},t.prototype.forEach=function(t,e){var n=this;return new(e=Fi(e))((function(e,r){var i;i=n.subscribe((function(e){try{t(e)}catch(t){r(t),i&&i.unsubscribe()}}),r,e)}))},t.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},t.prototype[Pi]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===t.length?this:Mi(t)(this)},t.prototype.toPromise=function(t){var e=this;return new(t=Fi(t))((function(t,n){var r;e.subscribe((function(t){return r=t}),(function(t){return n(t)}),(function(){return t(r)}))}))},t.create=function(e){return new t(e)},t}();function Fi(t){if(t||(t=Promise),!t)throw new Error("no Promise impl found");return t}var $i=function(){function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t}(),Bi=function(t){function e(e,n){var r=t.call(this)||this;return r.subject=e,r.subscriber=n,r.closed=!1,r}return fi(e,t),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},e}(Ai),Wi=function(t){function e(e){var n=t.call(this,e)||this;return n.destination=e,n}return fi(e,t),e}(Ri),qi=function(t){function e(){var e=t.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return fi(e,t),e.prototype[Di]=function(){return new Wi(this)},e.prototype.lift=function(t){var e=new zi(this,this);return e.operator=t,e},e.prototype.next=function(t){if(this.closed)throw new $i;if(!this.isStopped)for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].next(t)},e.prototype.error=function(t){if(this.closed)throw new $i;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new $i;this.isStopped=!0;for(var t=this.observers,e=t.length,n=t.slice(),r=0;r<e;r++)n[r].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new $i;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){if(this.closed)throw new $i;return this.hasError?(t.error(this.thrownError),Ai.EMPTY):this.isStopped?(t.complete(),Ai.EMPTY):(this.observers.push(t),new Bi(this,t))},e.prototype.asObservable=function(){var t=new Vi;return t.source=this,t},e.create=function(t,e){return new zi(t,e)},e}(Vi),zi=function(t){function e(e,n){var r=t.call(this)||this;return r.destination=e,r.source=n,r}return fi(e,t),e.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},e.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):Ai.EMPTY},e}(qi);function Hi(){return function(t){return t.lift(new Gi(t))}}var Gi=function(){function t(t){this.connectable=t}return t.prototype.call=function(t,e){var n=this.connectable;n._refCount++;var r=new Yi(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i},t}(),Yi=function(t){function e(e,n){var r=t.call(this,e)||this;return r.connectable=n,r}return fi(e,t),e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._refCount;if(e<=0)this.connection=null;else if(t._refCount=e-1,e>1)this.connection=null;else{var n=this.connection,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null},e}(Ri),Ki=function(t){function e(e,n){var r=t.call(this)||this;return r.source=e,r.subjectFactory=n,r._refCount=0,r._isComplete=!1,r}return fi(e,t),e.prototype._subscribe=function(t){return this.getSubject().subscribe(t)},e.prototype.getSubject=function(){var t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject},e.prototype.connect=function(){var t=this._connection;return t||(this._isComplete=!1,(t=this._connection=new Ai).add(this.source.subscribe(new Ji(this.getSubject(),this))),t.closed&&(this._connection=null,t=Ai.EMPTY)),t},e.prototype.refCount=function(){return Hi()(this)},e}(Vi),Xi=function(){var t=Ki.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}}(),Ji=function(t){function e(e,n){var r=t.call(this,e)||this;return r.connectable=n,r}return fi(e,t),e.prototype._error=function(e){this._unsubscribe(),t.prototype._error.call(this,e)},e.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}},e}(Wi);var Zi=function(){function t(t,e,n,r){this.keySelector=t,this.elementSelector=e,this.durationSelector=n,this.subjectSelector=r}return t.prototype.call=function(t,e){return e.subscribe(new Qi(t,this.keySelector,this.elementSelector,this.durationSelector,this.subjectSelector))},t}(),Qi=function(t){function e(e,n,r,i,o){var s=t.call(this,e)||this;return s.keySelector=n,s.elementSelector=r,s.durationSelector=i,s.subjectSelector=o,s.groups=null,s.attemptedToUnsubscribe=!1,s.count=0,s}return fi(e,t),e.prototype._next=function(t){var e;try{e=this.keySelector(t)}catch(t){return void this.error(t)}this._group(t,e)},e.prototype._group=function(t,e){var n=this.groups;n||(n=this.groups=new Map);var r,i=n.get(e);if(this.elementSelector)try{r=this.elementSelector(t)}catch(t){this.error(t)}else r=t;if(!i){i=this.subjectSelector?this.subjectSelector():new qi,n.set(e,i);var o=new eo(e,i,this);if(this.destination.next(o),this.durationSelector){var s=void 0;try{s=this.durationSelector(new eo(e,i))}catch(t){return void this.error(t)}this.add(s.subscribe(new to(e,i,this)))}}i.closed||i.next(r)},e.prototype._error=function(t){var e=this.groups;e&&(e.forEach((function(e,n){e.error(t)})),e.clear()),this.destination.error(t)},e.prototype._complete=function(){var t=this.groups;t&&(t.forEach((function(t,e){t.complete()})),t.clear()),this.destination.complete()},e.prototype.removeGroup=function(t){this.groups.delete(t)},e.prototype.unsubscribe=function(){this.closed||(this.attemptedToUnsubscribe=!0,0===this.count&&t.prototype.unsubscribe.call(this))},e}(Ri),to=function(t){function e(e,n,r){var i=t.call(this,n)||this;return i.key=e,i.group=n,i.parent=r,i}return fi(e,t),e.prototype._next=function(t){this.complete()},e.prototype._unsubscribe=function(){var t=this.parent,e=this.key;this.key=this.parent=null,t&&t.removeGroup(e)},e}(Ri),eo=function(t){function e(e,n,r){var i=t.call(this)||this;return i.key=e,i.groupSubject=n,i.refCountSubscription=r,i}return fi(e,t),e.prototype._subscribe=function(t){var e=new Ai,n=this.refCountSubscription,r=this.groupSubject;return n&&!n.closed&&e.add(new no(n)),e.add(r.subscribe(t)),e},e}(Vi),no=function(t){function e(e){var n=t.call(this)||this;return n.parent=e,e.count++,n}return fi(e,t),e.prototype.unsubscribe=function(){var e=this.parent;e.closed||this.closed||(t.prototype.unsubscribe.call(this),e.count-=1,0===e.count&&e.attemptedToUnsubscribe&&e.unsubscribe())},e}(Ai),ro=function(t){function e(e){var n=t.call(this)||this;return n._value=e,n}return fi(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),e.prototype._subscribe=function(e){var n=t.prototype._subscribe.call(this,e);return n&&!n.closed&&e.next(this._value),n},e.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new $i;return this._value},e.prototype.next=function(e){t.prototype.next.call(this,this._value=e)},e}(qi),io=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r.pending=!1,r}return fi(e,t),e.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this},e.prototype.requestAsyncId=function(t,e,n){return void 0===n&&(n=0),setInterval(t.flush.bind(t,this),n)},e.prototype.recycleAsyncId=function(t,e,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var n=!1,r=void 0;try{this.work(t)}catch(t){n=!0,r=!!t&&t||new Error(t)}if(n)return this.unsubscribe(),r},e.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null},e}(function(t){function e(e,n){return t.call(this)||this}return fi(e,t),e.prototype.schedule=function(t,e){return this},e}(Ai)),oo=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r}return fi(e,t),e.prototype.schedule=function(e,n){return void 0===n&&(n=0),n>0?t.prototype.schedule.call(this,e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)},e.prototype.execute=function(e,n){return n>0||this.closed?t.prototype.execute.call(this,e,n):this._execute(e,n)},e.prototype.requestAsyncId=function(e,n,r){return void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0?t.prototype.requestAsyncId.call(this,e,n,r):e.flush(this)},e}(io),so=function(){function t(e,n){void 0===n&&(n=t.now),this.SchedulerAction=e,this.now=n}return t.prototype.schedule=function(t,e,n){return void 0===e&&(e=0),new this.SchedulerAction(this,t).schedule(n,e)},t.now=function(){return Date.now()},t}(),ao=function(t){function e(n,r){void 0===r&&(r=so.now);var i=t.call(this,n,(function(){return e.delegate&&e.delegate!==i?e.delegate.now():r()}))||this;return i.actions=[],i.active=!1,i.scheduled=void 0,i}return fi(e,t),e.prototype.schedule=function(n,r,i){return void 0===r&&(r=0),e.delegate&&e.delegate!==this?e.delegate.schedule(n,r,i):t.prototype.schedule.call(this,n,r,i)},e.prototype.flush=function(t){var e=this.actions;if(this.active)e.push(t);else{var n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}},e}(so),uo=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return fi(e,t),e}(ao))(oo),co=new Vi((function(t){return t.complete()}));function lo(t){return t?function(t){return new Vi((function(e){return t.schedule((function(){return e.complete()}))}))}(t):co}function ho(t){return t&&"function"==typeof t.schedule}var fo,po=function(t){return function(e){for(var n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}};function vo(t,e){return new Vi((function(n){var r=new Ai,i=0;return r.add(e.schedule((function(){i!==t.length?(n.next(t[i++]),n.closed||r.add(this.schedule())):n.complete()}))),r}))}function mo(t,e){return e?vo(t,e):new Vi(po(t))}function yo(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[t.length-1];return ho(n)?(t.pop(),vo(t,n)):mo(t)}function go(t,e){return new Vi(e?function(n){return e.schedule(bo,0,{error:t,subscriber:n})}:function(e){return e.error(t)})}function bo(t){var e=t.error;t.subscriber.error(e)}fo||(fo={});var _o=function(){function t(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}return t.prototype.observe=function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}},t.prototype.do=function(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}},t.prototype.accept=function(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)},t.prototype.toObservable=function(){switch(this.kind){case"N":return yo(this.value);case"E":return go(this.error);case"C":return lo()}throw new Error("unexpected notification kind value")},t.createNext=function(e){return void 0!==e?new t("N",e):t.undefinedValueNotification},t.createError=function(e){return new t("E",void 0,e)},t.createComplete=function(){return t.completeNotification},t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t}();var wo=function(){function t(t,e){void 0===e&&(e=0),this.scheduler=t,this.delay=e}return t.prototype.call=function(t,e){return e.subscribe(new Eo(t,this.scheduler,this.delay))},t}(),Eo=function(t){function e(e,n,r){void 0===r&&(r=0);var i=t.call(this,e)||this;return i.scheduler=n,i.delay=r,i}return fi(e,t),e.dispatch=function(t){var e=t.notification,n=t.destination;e.observe(n),this.unsubscribe()},e.prototype.scheduleMessage=function(t){this.destination.add(this.scheduler.schedule(e.dispatch,this.delay,new Io(t,this.destination)))},e.prototype._next=function(t){this.scheduleMessage(_o.createNext(t))},e.prototype._error=function(t){this.scheduleMessage(_o.createError(t)),this.unsubscribe()},e.prototype._complete=function(){this.scheduleMessage(_o.createComplete()),this.unsubscribe()},e}(Ri),Io=function(){return function(t,e){this.notification=t,this.destination=e}}(),To=function(t){function e(e,n,r){void 0===e&&(e=Number.POSITIVE_INFINITY),void 0===n&&(n=Number.POSITIVE_INFINITY);var i=t.call(this)||this;return i.scheduler=r,i._events=[],i._infiniteTimeWindow=!1,i._bufferSize=e<1?1:e,i._windowTime=n<1?1:n,n===Number.POSITIVE_INFINITY?(i._infiniteTimeWindow=!0,i.next=i.nextInfiniteTimeWindow):i.next=i.nextTimeWindow,i}return fi(e,t),e.prototype.nextInfiniteTimeWindow=function(e){var n=this._events;n.push(e),n.length>this._bufferSize&&n.shift(),t.prototype.next.call(this,e)},e.prototype.nextTimeWindow=function(e){this._events.push(new ko(this._getNow(),e)),this._trimBufferThenGetEvents(),t.prototype.next.call(this,e)},e.prototype._subscribe=function(t){var e,n=this._infiniteTimeWindow,r=n?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,o=r.length;if(this.closed)throw new $i;if(this.isStopped||this.hasError?e=Ai.EMPTY:(this.observers.push(t),e=new Bi(this,t)),i&&t.add(t=new Eo(t,i)),n)for(var s=0;s<o&&!t.closed;s++)t.next(r[s]);else for(s=0;s<o&&!t.closed;s++)t.next(r[s].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),e},e.prototype._getNow=function(){return(this.scheduler||uo).now()},e.prototype._trimBufferThenGetEvents=function(){for(var t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length,o=0;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r},e}(qi),ko=function(){return function(t,e){this.time=t,this.value=e}}(),So=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.value=null,e.hasNext=!1,e.hasCompleted=!1,e}return fi(e,t),e.prototype._subscribe=function(e){return this.hasError?(e.error(this.thrownError),Ai.EMPTY):this.hasCompleted&&this.hasNext?(e.next(this.value),e.complete(),Ai.EMPTY):t.prototype._subscribe.call(this,e)},e.prototype.next=function(t){this.hasCompleted||(this.value=t,this.hasNext=!0)},e.prototype.error=function(e){this.hasCompleted||t.prototype.error.call(this,e)},e.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&t.prototype.next.call(this,this.value),t.prototype.complete.call(this)},e}(qi),xo=1,Oo=function(){return Promise.resolve()}(),Ao={};function No(t){return t in Ao&&(delete Ao[t],!0)}var Do=function(t){var e=xo++;return Ao[e]=!0,Oo.then((function(){return No(e)&&t()})),e},Ro=function(t){No(t)},Co=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r}return fi(e,t),e.prototype.requestAsyncId=function(e,n,r){return void 0===r&&(r=0),null!==r&&r>0?t.prototype.requestAsyncId.call(this,e,n,r):(e.actions.push(this),e.scheduled||(e.scheduled=Do(e.flush.bind(e,null))))},e.prototype.recycleAsyncId=function(e,n,r){if(void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0)return t.prototype.recycleAsyncId.call(this,e,n,r);0===e.actions.length&&(Ro(n),e.scheduled=void 0)},e}(io),Uo=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return fi(e,t),e.prototype.flush=function(t){this.active=!0,this.scheduled=void 0;var e,n=this.actions,r=-1,i=n.length;t=t||n.shift();do{if(e=t.execute(t.state,t.delay))break}while(++r<i&&(t=n.shift()));if(this.active=!1,e){for(;++r<i&&(t=n.shift());)t.unsubscribe();throw e}},e}(ao))(Co),Po=new ao(io),Lo=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r}return fi(e,t),e.prototype.requestAsyncId=function(e,n,r){return void 0===r&&(r=0),null!==r&&r>0?t.prototype.requestAsyncId.call(this,e,n,r):(e.actions.push(this),e.scheduled||(e.scheduled=requestAnimationFrame((function(){return e.flush(null)}))))},e.prototype.recycleAsyncId=function(e,n,r){if(void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0)return t.prototype.recycleAsyncId.call(this,e,n,r);0===e.actions.length&&(cancelAnimationFrame(n),e.scheduled=void 0)},e}(io),jo=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return fi(e,t),e.prototype.flush=function(t){this.active=!0,this.scheduled=void 0;var e,n=this.actions,r=-1,i=n.length;t=t||n.shift();do{if(e=t.execute(t.state,t.delay))break}while(++r<i&&(t=n.shift()));if(this.active=!1,e){for(;++r<i&&(t=n.shift());)t.unsubscribe();throw e}},e}(ao))(Lo),Mo=function(t){function e(e,n){void 0===e&&(e=Vo),void 0===n&&(n=Number.POSITIVE_INFINITY);var r=t.call(this,e,(function(){return r.frame}))||this;return r.maxFrames=n,r.frame=0,r.index=-1,r}return fi(e,t),e.prototype.flush=function(){for(var t,e,n=this.actions,r=this.maxFrames;(e=n[0])&&e.delay<=r&&(n.shift(),this.frame=e.delay,!(t=e.execute(e.state,e.delay))););if(t){for(;e=n.shift();)e.unsubscribe();throw t}},e.frameTimeFactor=10,e}(ao),Vo=function(t){function e(e,n,r){void 0===r&&(r=e.index+=1);var i=t.call(this,e,n)||this;return i.scheduler=e,i.work=n,i.index=r,i.active=!0,i.index=e.index=r,i}return fi(e,t),e.prototype.schedule=function(n,r){if(void 0===r&&(r=0),!this.id)return t.prototype.schedule.call(this,n,r);this.active=!1;var i=new e(this.scheduler,this.work);return this.add(i),i.schedule(n,r)},e.prototype.requestAsyncId=function(t,n,r){void 0===r&&(r=0),this.delay=t.frame+r;var i=t.actions;return i.push(this),i.sort(e.sortActions),!0},e.prototype.recycleAsyncId=function(t,e,n){},e.prototype._execute=function(e,n){if(!0===this.active)return t.prototype._execute.call(this,e,n)},e.sortActions=function(t,e){return t.delay===e.delay?t.index===e.index?0:t.index>e.index?1:-1:t.delay>e.delay?1:-1},e}(io);function Fo(){}var $o=function(){function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t}(),Bo=function(){function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t}(),Wo=function(){function t(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return t.prototype=Object.create(Error.prototype),t}();function qo(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new zo(t,e))}}var zo=function(){function t(t,e){this.project=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new Ho(t,this.project,this.thisArg))},t}(),Ho=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.project=n,i.count=0,i.thisArg=r||i,i}return fi(e,t),e.prototype._next=function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(Ri);function Go(t){var e=this,n=t.args,r=t.subscriber,i=t.params,o=i.callbackFunc,s=i.context,a=i.scheduler,u=i.subject;if(!u){u=i.subject=new So;try{o.apply(s,n.concat([function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t.length<=1?t[0]:t;e.add(a.schedule(Yo,0,{value:r,subject:u}))}]))}catch(t){u.error(t)}}this.add(u.subscribe(r))}function Yo(t){var e=t.value,n=t.subject;n.next(e),n.complete()}function Ko(t){var e=this,n=t.params,r=t.subscriber,i=t.context,o=n.callbackFunc,s=n.args,a=n.scheduler,u=n.subject;if(!u){u=n.subject=new So;try{o.apply(i,s.concat([function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t.shift();if(r)e.add(a.schedule(Jo,0,{err:r,subject:u}));else{var i=t.length<=1?t[0]:t;e.add(a.schedule(Xo,0,{value:i,subject:u}))}}]))}catch(t){this.add(a.schedule(Jo,0,{err:t,subject:u}))}}this.add(u.subscribe(r))}function Xo(t){var e=t.value,n=t.subject;n.next(e),n.complete()}function Jo(t){var e=t.err;t.subject.error(e)}var Zo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return fi(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.destination.next(e)},e.prototype.notifyError=function(t,e){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.complete()},e}(Ri),Qo=function(t){function e(e,n,r){var i=t.call(this)||this;return i.parent=e,i.outerValue=n,i.outerIndex=r,i.index=0,i}return fi(e,t),e.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},e.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(Ri);function ts(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}var es=ts(),ns=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t};function rs(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}var is=function(t){if(t&&"function"==typeof t[Pi])return n=t,function(t){var e=n[Pi]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(ns(t))return po(t);if(rs(t))return function(t){return function(e){return t.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,Ti),e}}(t);if(t&&"function"==typeof t[es])return e=t,function(t){for(var n=e[es]();;){var r=n.next();if(r.done){t.complete();break}if(t.next(r.value),t.closed)break}return"function"==typeof n.return&&t.add((function(){n.return&&n.return()})),t};var e,n,r=xi(t)?"an invalid object":"'"+t+"'";throw new TypeError("You provided "+r+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};function os(t,e,n,r,i){if(void 0===i&&(i=new Qo(t,n,r)),!i.closed)return e instanceof Vi?e.subscribe(i):is(e)(i)}var ss={};var as=function(){function t(t){this.resultSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new us(t,this.resultSelector))},t}(),us=function(t){function e(e,n){var r=t.call(this,e)||this;return r.resultSelector=n,r.active=0,r.values=[],r.observables=[],r}return fi(e,t),e.prototype._next=function(t){this.values.push(ss),this.observables.push(t)},e.prototype._complete=function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(var n=0;n<e;n++){var r=t[n];this.add(os(this,r,r,n))}}},e.prototype.notifyComplete=function(t){0==(this.active-=1)&&this.destination.complete()},e.prototype.notifyNext=function(t,e,n,r,i){var o=this.values,s=o[n],a=this.toRespond?s===ss?--this.toRespond:this.toRespond:0;o[n]=e,0===a&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))},e.prototype._tryResultSelector=function(t){var e;try{e=this.resultSelector.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(Zo);function cs(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[Pi]}(t))return function(t,e){return new Vi((function(n){var r=new Ai;return r.add(e.schedule((function(){var i=t[Pi]();r.add(i.subscribe({next:function(t){r.add(e.schedule((function(){return n.next(t)})))},error:function(t){r.add(e.schedule((function(){return n.error(t)})))},complete:function(){r.add(e.schedule((function(){return n.complete()})))}}))}))),r}))}(t,e);if(rs(t))return function(t,e){return new Vi((function(n){var r=new Ai;return r.add(e.schedule((function(){return t.then((function(t){r.add(e.schedule((function(){n.next(t),r.add(e.schedule((function(){return n.complete()})))})))}),(function(t){r.add(e.schedule((function(){return n.error(t)})))}))}))),r}))}(t,e);if(ns(t))return vo(t,e);if(function(t){return t&&"function"==typeof t[es]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new Vi((function(n){var r,i=new Ai;return i.add((function(){r&&"function"==typeof r.return&&r.return()})),i.add(e.schedule((function(){r=t[es](),i.add(e.schedule((function(){if(!n.closed){var t,e;try{var i=r.next();t=i.value,e=i.done}catch(t){return void n.error(t)}e?n.complete():(n.next(t),this.schedule())}})))}))),i}))}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}function ls(t,e){return e?cs(t,e):t instanceof Vi?t:new Vi(is(t))}function hs(t,e,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"function"==typeof e?function(r){return r.pipe(hs((function(n,r){return ls(t(n,r)).pipe(qo((function(t,i){return e(n,t,r,i)})))}),n))}:("number"==typeof e&&(n=e),function(e){return e.lift(new fs(t,n))})}var fs=function(){function t(t,e){void 0===e&&(e=Number.POSITIVE_INFINITY),this.project=t,this.concurrent=e}return t.prototype.call=function(t,e){return e.subscribe(new ds(t,this.project,this.concurrent))},t}(),ds=function(t){function e(e,n,r){void 0===r&&(r=Number.POSITIVE_INFINITY);var i=t.call(this,e)||this;return i.project=n,i.concurrent=r,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return fi(e,t),e.prototype._next=function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)},e.prototype._tryNext=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(t){return void this.destination.error(t)}this.active++,this._innerSub(e,t,n)},e.prototype._innerSub=function(t,e,n){var r=new Qo(this,e,n),i=this.destination;i.add(r);var o=os(this,t,void 0,void 0,r);o!==r&&i.add(o)},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},e.prototype.notifyNext=function(t,e,n,r,i){this.destination.next(e)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},e}(Zo);function ps(t){return void 0===t&&(t=Number.POSITIVE_INFINITY),hs(Li,t)}function vs(){return ps(1)}function ms(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return vs()(yo.apply(void 0,t))}function ys(t){return new Vi((function(e){var n;try{n=t()}catch(t){return void e.error(t)}return(n?ls(n):lo()).subscribe(e)}))}function gs(t,e){return new Vi((function(n){var r=t.length;if(0!==r)for(var i=new Array(r),o=0,s=0,a=function(a){var u=ls(t[a]),c=!1;n.add(u.subscribe({next:function(t){c||(c=!0,s++),i[a]=t},error:function(t){return n.error(t)},complete:function(){++o!==r&&c||(s===r&&n.next(e?e.reduce((function(t,e,n){return t[e]=i[n],t}),{}):i),n.complete())}}))},u=0;u<r;u++)a(u);else n.complete()}))}function bs(t){var e=t.subscriber,n=t.condition;if(!e.closed){if(t.needIterate)try{t.state=t.iterate(t.state)}catch(t){return void e.error(t)}else t.needIterate=!0;if(n){var r=void 0;try{r=n(t.state)}catch(t){return void e.error(t)}if(!r)return void e.complete();if(e.closed)return}var i;try{i=t.resultSelector(t.state)}catch(t){return void e.error(t)}if(!e.closed&&(e.next(i),!e.closed))return this.schedule(t)}}function _s(t){return!Si(t)&&t-parseFloat(t)+1>=0}function ws(t){var e=t.subscriber,n=t.counter,r=t.period;e.next(n),this.schedule({subscriber:e,counter:n+1,period:r},r)}function Es(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Number.POSITIVE_INFINITY,r=null,i=t[t.length-1];return ho(i)?(r=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(n=t.pop())):"number"==typeof i&&(n=t.pop()),null===r&&1===t.length&&t[0]instanceof Vi?t[0]:ps(n)(mo(t,r))}var Is=new Vi(Fo);function Ts(t){var e=t.keys,n=t.index,r=t.subscriber,i=t.subscription,o=t.obj;if(!r.closed)if(n<e.length){var s=e[n];r.next([s,o[s]]),i.add(this.schedule({keys:e,index:n+1,subscriber:r,subscription:i,obj:o}))}else r.complete()}function ks(t,e){function n(){return!n.pred.apply(n.thisArg,arguments)}return n.pred=t,n.thisArg=e,n}function Ss(t,e){return function(n){return n.lift(new xs(t,e))}}var xs=function(){function t(t,e){this.predicate=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new Os(t,this.predicate,this.thisArg))},t}(),Os=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.predicate=n,i.thisArg=r,i.count=0,i}return fi(e,t),e.prototype._next=function(t){var e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}e&&this.destination.next(t)},e}(Ri);function As(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(1===t.length){if(!Si(t[0]))return t[0];t=t[0]}return mo(t,void 0).lift(new Ns)}var Ns=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new Ds(t))},t}(),Ds=function(t){function e(e){var n=t.call(this,e)||this;return n.hasFirst=!1,n.observables=[],n.subscriptions=[],n}return fi(e,t),e.prototype._next=function(t){this.observables.push(t)},e.prototype._complete=function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{for(var n=0;n<e&&!this.hasFirst;n++){var r=t[n],i=os(this,r,r,n);this.subscriptions&&this.subscriptions.push(i),this.add(i)}this.observables=null}},e.prototype.notifyNext=function(t,e,n,r,i){if(!this.hasFirst){this.hasFirst=!0;for(var o=0;o<this.subscriptions.length;o++)if(o!==n){var s=this.subscriptions[o];s.unsubscribe(),this.remove(s)}this.subscriptions=null}this.destination.next(e)},e}(Zo);function Rs(t){var e=t.start,n=t.index,r=t.count,i=t.subscriber;n>=r?i.complete():(i.next(e),i.closed||(t.index=n+1,t.start=e+1,this.schedule(t)))}function Cs(t,e,n){void 0===t&&(t=0);var r=-1;return _s(e)?r=Number(e)<1?1:Number(e):ho(e)&&(n=e),ho(n)||(n=Po),new Vi((function(e){var i=_s(t)?t:+t-n.now();return n.schedule(Us,i,{index:0,period:r,subscriber:e})}))}function Us(t){var e=t.index,n=t.period,r=t.subscriber;if(r.next(e),!r.closed){if(-1===n)return r.complete();t.index=e+1,this.schedule(t,n)}}function Ps(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[t.length-1];return"function"==typeof n&&t.pop(),mo(t,void 0).lift(new Ls(n))}var Ls=function(){function t(t){this.resultSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new js(t,this.resultSelector))},t}(),js=function(t){function e(e,n,r){void 0===r&&(r=Object.create(null));var i=t.call(this,e)||this;return i.iterators=[],i.active=0,i.resultSelector="function"==typeof n?n:null,i.values=r,i}return fi(e,t),e.prototype._next=function(t){var e=this.iterators;Si(t)?e.push(new Vs(t)):"function"==typeof t[es]?e.push(new Ms(t[es]())):e.push(new Fs(this.destination,this,t))},e.prototype._complete=function(){var t=this.iterators,e=t.length;if(this.unsubscribe(),0!==e){this.active=e;for(var n=0;n<e;n++){var r=t[n];if(r.stillUnsubscribed)this.destination.add(r.subscribe(r,n));else this.active--}}else this.destination.complete()},e.prototype.notifyInactive=function(){this.active--,0===this.active&&this.destination.complete()},e.prototype.checkIterators=function(){for(var t=this.iterators,e=t.length,n=this.destination,r=0;r<e;r++){if("function"==typeof(s=t[r]).hasValue&&!s.hasValue())return}var i=!1,o=[];for(r=0;r<e;r++){var s,a=(s=t[r]).next();if(s.hasCompleted()&&(i=!0),a.done)return void n.complete();o.push(a.value)}this.resultSelector?this._tryresultSelector(o):n.next(o),i&&n.complete()},e.prototype._tryresultSelector=function(t){var e;try{e=this.resultSelector.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(Ri),Ms=function(){function t(t){this.iterator=t,this.nextResult=t.next()}return t.prototype.hasValue=function(){return!0},t.prototype.next=function(){var t=this.nextResult;return this.nextResult=this.iterator.next(),t},t.prototype.hasCompleted=function(){var t=this.nextResult;return t&&t.done},t}(),Vs=function(){function t(t){this.array=t,this.index=0,this.length=0,this.length=t.length}return t.prototype[es]=function(){return this},t.prototype.next=function(t){var e=this.index++,n=this.array;return e<this.length?{value:n[e],done:!1}:{value:null,done:!0}},t.prototype.hasValue=function(){return this.array.length>this.index},t.prototype.hasCompleted=function(){return this.array.length===this.index},t}(),Fs=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.parent=n,i.observable=r,i.stillUnsubscribed=!0,i.buffer=[],i.isComplete=!1,i}return fi(e,t),e.prototype[es]=function(){return this},e.prototype.next=function(){var t=this.buffer;return 0===t.length&&this.isComplete?{value:null,done:!0}:{value:t.shift(),done:!1}},e.prototype.hasValue=function(){return this.buffer.length>0},e.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},e.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},e.prototype.notifyNext=function(t,e,n,r,i){this.buffer.push(e),this.parent.checkIterators()},e.prototype.subscribe=function(t,e){return os(this,this.observable,this,e)},e}(Zo),$s=Object.freeze({__proto__:null,Observable:Vi,ConnectableObservable:Ki,GroupedObservable:eo,observable:Pi,Subject:qi,BehaviorSubject:ro,ReplaySubject:To,AsyncSubject:So,asapScheduler:Uo,asyncScheduler:Po,queueScheduler:uo,animationFrameScheduler:jo,VirtualTimeScheduler:Mo,VirtualAction:Vo,Scheduler:so,Subscription:Ai,Subscriber:Ri,Notification:_o,get NotificationKind(){return fo},pipe:ji,noop:Fo,identity:Li,isObservable:function(t){return!!t&&(t instanceof Vi||"function"==typeof t.lift&&"function"==typeof t.subscribe)},ArgumentOutOfRangeError:$o,EmptyError:Bo,ObjectUnsubscribedError:$i,UnsubscriptionError:Oi,TimeoutError:Wo,bindCallback:function t(e,n,r){if(n){if(!ho(n))return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return t(e,r).apply(void 0,i).pipe(qo((function(t){return Si(t)?n.apply(void 0,t):n(t)})))};r=n}return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i,o=this,s={context:o,subject:i,callbackFunc:e,scheduler:r};return new Vi((function(n){if(r){var a={args:t,subscriber:n,params:s};return r.schedule(Go,0,a)}if(!i){i=new So;try{e.apply(o,t.concat([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];i.next(t.length<=1?t[0]:t),i.complete()}]))}catch(t){Ui(i)?i.error(t):console.warn(t)}}return i.subscribe(n)}))}},bindNodeCallback:function t(e,n,r){if(n){if(!ho(n))return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return t(e,r).apply(void 0,i).pipe(qo((function(t){return Si(t)?n.apply(void 0,t):n(t)})))};r=n}return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i={subject:void 0,args:t,callbackFunc:e,scheduler:r,context:this};return new Vi((function(n){var o=i.context,s=i.subject;if(r)return r.schedule(Ko,0,{params:i,subscriber:n,context:o});if(!s){s=i.subject=new So;try{e.apply(o,t.concat([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t.shift();n?s.error(n):(s.next(t.length<=1?t[0]:t),s.complete())}]))}catch(t){Ui(s)?s.error(t):console.warn(t)}}return s.subscribe(n)}))}},combineLatest:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=null,r=null;return ho(t[t.length-1])&&(r=t.pop()),"function"==typeof t[t.length-1]&&(n=t.pop()),1===t.length&&Si(t[0])&&(t=t[0]),mo(t,r).lift(new as(n))},concat:ms,defer:ys,empty:lo,forkJoin:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(1===t.length){var n=t[0];if(Si(n))return gs(n,null);if(xi(n)&&Object.getPrototypeOf(n)===Object.prototype){var r=Object.keys(n);return gs(r.map((function(t){return n[t]})),r)}}if("function"==typeof t[t.length-1]){var i=t.pop();return gs(t=1===t.length&&Si(t[0])?t[0]:t,null).pipe(qo((function(t){return i.apply(void 0,t)})))}return gs(t,null)},from:ls,fromEvent:function t(e,n,r,i){return wi(r)&&(i=r,r=void 0),i?t(e,n,r).pipe(qo((function(t){return Si(t)?i.apply(void 0,t):i(t)}))):new Vi((function(t){!function t(e,n,r,i,o){var s;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(e)){var a=e;e.addEventListener(n,r,o),s=function(){return a.removeEventListener(n,r,o)}}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(e)){var u=e;e.on(n,r),s=function(){return u.off(n,r)}}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(e)){var c=e;e.addListener(n,r),s=function(){return c.removeListener(n,r)}}else{if(!e||!e.length)throw new TypeError("Invalid event target");for(var l=0,h=e.length;l<h;l++)t(e[l],n,r,i,o)}i.add(s)}(e,n,(function(e){arguments.length>1?t.next(Array.prototype.slice.call(arguments)):t.next(e)}),t,r)}))},fromEventPattern:function t(e,n,r){return r?t(e,n).pipe(qo((function(t){return Si(t)?r.apply(void 0,t):r(t)}))):new Vi((function(t){var r,i=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.next(1===e.length?e[0]:e)};try{r=e(i)}catch(e){return void t.error(e)}if(wi(n))return function(){return n(i,r)}}))},generate:function(t,e,n,r,i){var o,s;if(1==arguments.length){var a=t;s=a.initialState,e=a.condition,n=a.iterate,o=a.resultSelector||Li,i=a.scheduler}else void 0===r||ho(r)?(s=t,o=Li,i=r):(s=t,o=r);return new Vi((function(t){var r=s;if(i)return i.schedule(bs,0,{subscriber:t,iterate:n,condition:e,resultSelector:o,state:r});for(;;){if(e){var a=void 0;try{a=e(r)}catch(e){return void t.error(e)}if(!a){t.complete();break}}var u=void 0;try{u=o(r)}catch(e){return void t.error(e)}if(t.next(u),t.closed)break;try{r=n(r)}catch(e){return void t.error(e)}}}))},iif:function(t,e,n){return void 0===e&&(e=co),void 0===n&&(n=co),ys((function(){return t()?e:n}))},interval:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=Po),(!_s(t)||t<0)&&(t=0),e&&"function"==typeof e.schedule||(e=Po),new Vi((function(n){return n.add(e.schedule(ws,t,{subscriber:n,counter:0,period:t})),n}))},merge:Es,never:function(){return Is},of:yo,onErrorResumeNext:function t(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(0===e.length)return co;var r=e[0],i=e.slice(1);return 1===e.length&&Si(r)?t.apply(void 0,r):new Vi((function(e){var n=function(){return e.add(t.apply(void 0,i).subscribe(e))};return ls(r).subscribe({next:function(t){e.next(t)},error:n,complete:n})}))},pairs:function(t,e){return new Vi(e?function(n){var r=Object.keys(t),i=new Ai;return i.add(e.schedule(Ts,0,{keys:r,index:0,subscriber:n,subscription:i,obj:t})),i}:function(e){for(var n=Object.keys(t),r=0;r<n.length&&!e.closed;r++){var i=n[r];t.hasOwnProperty(i)&&e.next([i,t[i]])}e.complete()})},partition:function(t,e,n){return[Ss(e,n)(new Vi(is(t))),Ss(ks(e,n))(new Vi(is(t)))]},race:As,range:function(t,e,n){return void 0===t&&(t=0),new Vi((function(r){void 0===e&&(e=t,t=0);var i=0,o=t;if(n)return n.schedule(Rs,0,{index:i,count:e,start:t,subscriber:r});for(;;){if(i++>=e){r.complete();break}if(r.next(o++),r.closed)break}}))},throwError:go,timer:Cs,using:function(t,e){return new Vi((function(n){var r,i;try{r=t()}catch(t){return void n.error(t)}try{i=e(r)}catch(t){return void n.error(t)}var o=(i?ls(i):co).subscribe(n);return function(){o.unsubscribe(),r&&r.unsubscribe()}}))},zip:Ps,scheduled:cs,EMPTY:co,NEVER:Is,config:Ii});function Bs(t){return function(e){return e.lift(new Ws(t))}}var Ws=function(){function t(t){this.durationSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new qs(t,this.durationSelector))},t}(),qs=function(t){function e(e,n){var r=t.call(this,e)||this;return r.durationSelector=n,r.hasValue=!1,r}return fi(e,t),e.prototype._next=function(t){if(this.value=t,this.hasValue=!0,!this.throttled){var e=void 0;try{e=(0,this.durationSelector)(t)}catch(t){return this.destination.error(t)}var n=os(this,e);!n||n.closed?this.clearThrottle():this.add(this.throttled=n)}},e.prototype.clearThrottle=function(){var t=this.value,e=this.hasValue,n=this.throttled;n&&(this.remove(n),this.throttled=null,n.unsubscribe()),e&&(this.value=null,this.hasValue=!1,this.destination.next(t))},e.prototype.notifyNext=function(t,e,n,r){this.clearThrottle()},e.prototype.notifyComplete=function(){this.clearThrottle()},e}(Zo);var zs=function(){function t(t){this.closingNotifier=t}return t.prototype.call=function(t,e){return e.subscribe(new Hs(t,this.closingNotifier))},t}(),Hs=function(t){function e(e,n){var r=t.call(this,e)||this;return r.buffer=[],r.add(os(r,n)),r}return fi(e,t),e.prototype._next=function(t){this.buffer.push(t)},e.prototype.notifyNext=function(t,e,n,r,i){var o=this.buffer;this.buffer=[],this.destination.next(o)},e}(Zo);var Gs=function(){function t(t,e){this.bufferSize=t,this.startBufferEvery=e,this.subscriberClass=e&&t!==e?Ks:Ys}return t.prototype.call=function(t,e){return e.subscribe(new this.subscriberClass(t,this.bufferSize,this.startBufferEvery))},t}(),Ys=function(t){function e(e,n){var r=t.call(this,e)||this;return r.bufferSize=n,r.buffer=[],r}return fi(e,t),e.prototype._next=function(t){var e=this.buffer;e.push(t),e.length==this.bufferSize&&(this.destination.next(e),this.buffer=[])},e.prototype._complete=function(){var e=this.buffer;e.length>0&&this.destination.next(e),t.prototype._complete.call(this)},e}(Ri),Ks=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.bufferSize=n,i.startBufferEvery=r,i.buffers=[],i.count=0,i}return fi(e,t),e.prototype._next=function(t){var e=this.bufferSize,n=this.startBufferEvery,r=this.buffers,i=this.count;this.count++,i%n==0&&r.push([]);for(var o=r.length;o--;){var s=r[o];s.push(t),s.length===e&&(r.splice(o,1),this.destination.next(s))}},e.prototype._complete=function(){for(var e=this.buffers,n=this.destination;e.length>0;){var r=e.shift();r.length>0&&n.next(r)}t.prototype._complete.call(this)},e}(Ri);var Xs=function(){function t(t,e,n,r){this.bufferTimeSpan=t,this.bufferCreationInterval=e,this.maxBufferSize=n,this.scheduler=r}return t.prototype.call=function(t,e){return e.subscribe(new Zs(t,this.bufferTimeSpan,this.bufferCreationInterval,this.maxBufferSize,this.scheduler))},t}(),Js=function(){return function(){this.buffer=[]}}(),Zs=function(t){function e(e,n,r,i,o){var s=t.call(this,e)||this;s.bufferTimeSpan=n,s.bufferCreationInterval=r,s.maxBufferSize=i,s.scheduler=o,s.contexts=[];var a=s.openContext();if(s.timespanOnly=null==r||r<0,s.timespanOnly){var u={subscriber:s,context:a,bufferTimeSpan:n};s.add(a.closeAction=o.schedule(Qs,n,u))}else{var c={subscriber:s,context:a},l={bufferTimeSpan:n,bufferCreationInterval:r,subscriber:s,scheduler:o};s.add(a.closeAction=o.schedule(ea,n,c)),s.add(o.schedule(ta,r,l))}return s}return fi(e,t),e.prototype._next=function(t){for(var e,n=this.contexts,r=n.length,i=0;i<r;i++){var o=n[i],s=o.buffer;s.push(t),s.length==this.maxBufferSize&&(e=o)}e&&this.onBufferFull(e)},e.prototype._error=function(e){this.contexts.length=0,t.prototype._error.call(this,e)},e.prototype._complete=function(){for(var e=this.contexts,n=this.destination;e.length>0;){var r=e.shift();n.next(r.buffer)}t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){this.contexts=null},e.prototype.onBufferFull=function(t){this.closeContext(t);var e=t.closeAction;if(e.unsubscribe(),this.remove(e),!this.closed&&this.timespanOnly){t=this.openContext();var n=this.bufferTimeSpan,r={subscriber:this,context:t,bufferTimeSpan:n};this.add(t.closeAction=this.scheduler.schedule(Qs,n,r))}},e.prototype.openContext=function(){var t=new Js;return this.contexts.push(t),t},e.prototype.closeContext=function(t){this.destination.next(t.buffer);var e=this.contexts;(e?e.indexOf(t):-1)>=0&&e.splice(e.indexOf(t),1)},e}(Ri);function Qs(t){var e=t.subscriber,n=t.context;n&&e.closeContext(n),e.closed||(t.context=e.openContext(),t.context.closeAction=this.schedule(t,t.bufferTimeSpan))}function ta(t){var e=t.bufferCreationInterval,n=t.bufferTimeSpan,r=t.subscriber,i=t.scheduler,o=r.openContext();r.closed||(r.add(o.closeAction=i.schedule(ea,n,{subscriber:r,context:o})),this.schedule(t,e))}function ea(t){var e=t.subscriber,n=t.context;e.closeContext(n)}var na=function(){function t(t,e){this.openings=t,this.closingSelector=e}return t.prototype.call=function(t,e){return e.subscribe(new ra(t,this.openings,this.closingSelector))},t}(),ra=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.openings=n,i.closingSelector=r,i.contexts=[],i.add(os(i,n)),i}return fi(e,t),e.prototype._next=function(t){for(var e=this.contexts,n=e.length,r=0;r<n;r++)e[r].buffer.push(t)},e.prototype._error=function(e){for(var n=this.contexts;n.length>0;){var r=n.shift();r.subscription.unsubscribe(),r.buffer=null,r.subscription=null}this.contexts=null,t.prototype._error.call(this,e)},e.prototype._complete=function(){for(var e=this.contexts;e.length>0;){var n=e.shift();this.destination.next(n.buffer),n.subscription.unsubscribe(),n.buffer=null,n.subscription=null}this.contexts=null,t.prototype._complete.call(this)},e.prototype.notifyNext=function(t,e,n,r,i){t?this.closeBuffer(t):this.openBuffer(e)},e.prototype.notifyComplete=function(t){this.closeBuffer(t.context)},e.prototype.openBuffer=function(t){try{var e=this.closingSelector.call(this,t);e&&this.trySubscribe(e)}catch(t){this._error(t)}},e.prototype.closeBuffer=function(t){var e=this.contexts;if(e&&t){var n=t.buffer,r=t.subscription;this.destination.next(n),e.splice(e.indexOf(t),1),this.remove(r),r.unsubscribe()}},e.prototype.trySubscribe=function(t){var e=this.contexts,n=new Ai,r={buffer:[],subscription:n};e.push(r);var i=os(this,t,r);!i||i.closed?this.closeBuffer(r):(i.context=r,this.add(i),n.add(i))},e}(Zo);var ia=function(){function t(t){this.closingSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new oa(t,this.closingSelector))},t}(),oa=function(t){function e(e,n){var r=t.call(this,e)||this;return r.closingSelector=n,r.subscribing=!1,r.openBuffer(),r}return fi(e,t),e.prototype._next=function(t){this.buffer.push(t)},e.prototype._complete=function(){var e=this.buffer;e&&this.destination.next(e),t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){this.buffer=null,this.subscribing=!1},e.prototype.notifyNext=function(t,e,n,r,i){this.openBuffer()},e.prototype.notifyComplete=function(){this.subscribing?this.complete():this.openBuffer()},e.prototype.openBuffer=function(){var t=this.closingSubscription;t&&(this.remove(t),t.unsubscribe());var e,n=this.buffer;this.buffer&&this.destination.next(n),this.buffer=[];try{e=(0,this.closingSelector)()}catch(t){return this.error(t)}t=new Ai,this.closingSubscription=t,this.add(t),this.subscribing=!0,t.add(os(this,e)),this.subscribing=!1},e}(Zo);var sa=function(){function t(t){this.selector=t}return t.prototype.call=function(t,e){return e.subscribe(new aa(t,this.selector,this.caught))},t}(),aa=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.selector=n,i.caught=r,i}return fi(e,t),e.prototype.error=function(e){if(!this.isStopped){var n=void 0;try{n=this.selector(e,this.caught)}catch(e){return void t.prototype.error.call(this,e)}this._unsubscribeAndRecycle();var r=new Qo(this,void 0,void 0);this.add(r);var i=os(this,n,void 0,void 0,r);i!==r&&this.add(i)}},e}(Zo);function ua(t,e){return hs(t,e,1)}var ca=function(){function t(t,e){this.predicate=t,this.source=e}return t.prototype.call=function(t,e){return e.subscribe(new la(t,this.predicate,this.source))},t}(),la=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.predicate=n,i.source=r,i.count=0,i.index=0,i}return fi(e,t),e.prototype._next=function(t){this.predicate?this._tryPredicate(t):this.count++},e.prototype._tryPredicate=function(t){var e;try{e=this.predicate(t,this.index++,this.source)}catch(t){return void this.destination.error(t)}e&&this.count++},e.prototype._complete=function(){this.destination.next(this.count),this.destination.complete()},e}(Ri);var ha=function(){function t(t){this.durationSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new fa(t,this.durationSelector))},t}(),fa=function(t){function e(e,n){var r=t.call(this,e)||this;return r.durationSelector=n,r.hasValue=!1,r.durationSubscription=null,r}return fi(e,t),e.prototype._next=function(t){try{var e=this.durationSelector.call(this,t);e&&this._tryNext(t,e)}catch(t){this.destination.error(t)}},e.prototype._complete=function(){this.emitValue(),this.destination.complete()},e.prototype._tryNext=function(t,e){var n=this.durationSubscription;this.value=t,this.hasValue=!0,n&&(n.unsubscribe(),this.remove(n)),(n=os(this,e))&&!n.closed&&this.add(this.durationSubscription=n)},e.prototype.notifyNext=function(t,e,n,r,i){this.emitValue()},e.prototype.notifyComplete=function(){this.emitValue()},e.prototype.emitValue=function(){if(this.hasValue){var e=this.value,n=this.durationSubscription;n&&(this.durationSubscription=null,n.unsubscribe(),this.remove(n)),this.value=null,this.hasValue=!1,t.prototype._next.call(this,e)}},e}(Zo);var da=function(){function t(t,e){this.dueTime=t,this.scheduler=e}return t.prototype.call=function(t,e){return e.subscribe(new pa(t,this.dueTime,this.scheduler))},t}(),pa=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.dueTime=n,i.scheduler=r,i.debouncedSubscription=null,i.lastValue=null,i.hasValue=!1,i}return fi(e,t),e.prototype._next=function(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(va,this.dueTime,this))},e.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},e.prototype.debouncedNext=function(){if(this.clearDebounce(),this.hasValue){var t=this.lastValue;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}},e.prototype.clearDebounce=function(){var t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)},e}(Ri);function va(t){t.debouncedNext()}function ma(t){return void 0===t&&(t=null),function(e){return e.lift(new ya(t))}}var ya=function(){function t(t){this.defaultValue=t}return t.prototype.call=function(t,e){return e.subscribe(new ba(t,this.defaultValue))},t}(),ba=function(t){function e(e,n){var r=t.call(this,e)||this;return r.defaultValue=n,r.isEmpty=!0,r}return fi(e,t),e.prototype._next=function(t){this.isEmpty=!1,this.destination.next(t)},e.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},e}(Ri);function _a(t){return t instanceof Date&&!isNaN(+t)}var wa=function(){function t(t,e){this.delay=t,this.scheduler=e}return t.prototype.call=function(t,e){return e.subscribe(new Ea(t,this.delay,this.scheduler))},t}(),Ea=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.delay=n,i.scheduler=r,i.queue=[],i.active=!1,i.errored=!1,i}return fi(e,t),e.dispatch=function(t){for(var e=t.source,n=e.queue,r=t.scheduler,i=t.destination;n.length>0&&n[0].time-r.now()<=0;)n.shift().notification.observe(i);if(n.length>0){var o=Math.max(0,n[0].time-r.now());this.schedule(t,o)}else this.unsubscribe(),e.active=!1},e.prototype._schedule=function(t){this.active=!0,this.destination.add(t.schedule(e.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))},e.prototype.scheduleNotification=function(t){if(!0!==this.errored){var e=this.scheduler,n=new Ia(e.now()+this.delay,t);this.queue.push(n),!1===this.active&&this._schedule(e)}},e.prototype._next=function(t){this.scheduleNotification(_o.createNext(t))},e.prototype._error=function(t){this.errored=!0,this.queue=[],this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.scheduleNotification(_o.createComplete()),this.unsubscribe()},e}(Ri),Ia=function(){return function(t,e){this.time=t,this.notification=e}}();var Ta=function(){function t(t){this.delayDurationSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new ka(t,this.delayDurationSelector))},t}(),ka=function(t){function e(e,n){var r=t.call(this,e)||this;return r.delayDurationSelector=n,r.completed=!1,r.delayNotifierSubscriptions=[],r.index=0,r}return fi(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.destination.next(t),this.removeSubscription(i),this.tryComplete()},e.prototype.notifyError=function(t,e){this._error(t)},e.prototype.notifyComplete=function(t){var e=this.removeSubscription(t);e&&this.destination.next(e),this.tryComplete()},e.prototype._next=function(t){var e=this.index++;try{var n=this.delayDurationSelector(t,e);n&&this.tryDelay(n,t)}catch(t){this.destination.error(t)}},e.prototype._complete=function(){this.completed=!0,this.tryComplete(),this.unsubscribe()},e.prototype.removeSubscription=function(t){t.unsubscribe();var e=this.delayNotifierSubscriptions.indexOf(t);return-1!==e&&this.delayNotifierSubscriptions.splice(e,1),t.outerValue},e.prototype.tryDelay=function(t,e){var n=os(this,t,e);n&&!n.closed&&(this.destination.add(n),this.delayNotifierSubscriptions.push(n))},e.prototype.tryComplete=function(){this.completed&&0===this.delayNotifierSubscriptions.length&&this.destination.complete()},e}(Zo),Sa=function(t){function e(e,n){var r=t.call(this)||this;return r.source=e,r.subscriptionDelay=n,r}return fi(e,t),e.prototype._subscribe=function(t){this.subscriptionDelay.subscribe(new xa(t,this.source))},e}(Vi),xa=function(t){function e(e,n){var r=t.call(this)||this;return r.parent=e,r.source=n,r.sourceSubscribed=!1,r}return fi(e,t),e.prototype._next=function(t){this.subscribeToSource()},e.prototype._error=function(t){this.unsubscribe(),this.parent.error(t)},e.prototype._complete=function(){this.unsubscribe(),this.subscribeToSource()},e.prototype.subscribeToSource=function(){this.sourceSubscribed||(this.sourceSubscribed=!0,this.unsubscribe(),this.source.subscribe(this.parent))},e}(Ri);var Oa=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new Aa(t))},t}(),Aa=function(t){function e(e){return t.call(this,e)||this}return fi(e,t),e.prototype._next=function(t){t.observe(this.destination)},e}(Ri);var Na=function(){function t(t,e){this.keySelector=t,this.flushes=e}return t.prototype.call=function(t,e){return e.subscribe(new Da(t,this.keySelector,this.flushes))},t}(),Da=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.keySelector=n,i.values=new Set,r&&i.add(os(i,r)),i}return fi(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.values.clear()},e.prototype.notifyError=function(t,e){this._error(t)},e.prototype._next=function(t){this.keySelector?this._useKeySelector(t):this._finalizeNext(t,t)},e.prototype._useKeySelector=function(t){var e,n=this.destination;try{e=this.keySelector(t)}catch(t){return void n.error(t)}this._finalizeNext(e,t)},e.prototype._finalizeNext=function(t,e){var n=this.values;n.has(t)||(n.add(t),this.destination.next(e))},e}(Zo);function Ra(t,e){return function(n){return n.lift(new Ca(t,e))}}var Ca=function(){function t(t,e){this.compare=t,this.keySelector=e}return t.prototype.call=function(t,e){return e.subscribe(new Ua(t,this.compare,this.keySelector))},t}(),Ua=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.keySelector=r,i.hasKey=!1,"function"==typeof n&&(i.compare=n),i}return fi(e,t),e.prototype.compare=function(t,e){return t===e},e.prototype._next=function(t){var e;try{var n=this.keySelector;e=n?n(t):t}catch(t){return this.destination.error(t)}var r=!1;if(this.hasKey)try{r=(0,this.compare)(this.key,e)}catch(t){return this.destination.error(t)}else this.hasKey=!0;r||(this.key=e,this.destination.next(t))},e}(Ri);function Pa(t){return void 0===t&&(t=Ma),function(e){return e.lift(new La(t))}}var La=function(){function t(t){this.errorFactory=t}return t.prototype.call=function(t,e){return e.subscribe(new ja(t,this.errorFactory))},t}(),ja=function(t){function e(e,n){var r=t.call(this,e)||this;return r.errorFactory=n,r.hasValue=!1,r}return fi(e,t),e.prototype._next=function(t){this.hasValue=!0,this.destination.next(t)},e.prototype._complete=function(){if(this.hasValue)return this.destination.complete();var t=void 0;try{t=this.errorFactory()}catch(e){t=e}this.destination.error(t)},e}(Ri);function Ma(){return new Bo}function Va(t){return function(e){return 0===t?lo():e.lift(new Fa(t))}}var Fa=function(){function t(t){if(this.total=t,this.total<0)throw new $o}return t.prototype.call=function(t,e){return e.subscribe(new $a(t,this.total))},t}(),$a=function(t){function e(e,n){var r=t.call(this,e)||this;return r.total=n,r.count=0,r}return fi(e,t),e.prototype._next=function(t){var e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))},e}(Ri);var Ba=function(){function t(t,e,n){this.predicate=t,this.thisArg=e,this.source=n}return t.prototype.call=function(t,e){return e.subscribe(new Wa(t,this.predicate,this.thisArg,this.source))},t}(),Wa=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o.predicate=n,o.thisArg=r,o.source=i,o.index=0,o.thisArg=r||o,o}return fi(e,t),e.prototype.notifyComplete=function(t){this.destination.next(t),this.destination.complete()},e.prototype._next=function(t){var e=!1;try{e=this.predicate.call(this.thisArg,t,this.index++,this.source)}catch(t){return void this.destination.error(t)}e||this.notifyComplete(!1)},e.prototype._complete=function(){this.notifyComplete(!0)},e}(Ri);var qa=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new za(t))},t}(),za=function(t){function e(e){var n=t.call(this,e)||this;return n.hasCompleted=!1,n.hasSubscription=!1,n}return fi(e,t),e.prototype._next=function(t){this.hasSubscription||(this.hasSubscription=!0,this.add(os(this,t)))},e.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()},e.prototype.notifyComplete=function(t){this.remove(t),this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},e}(Zo);var Ha=function(){function t(t){this.project=t}return t.prototype.call=function(t,e){return e.subscribe(new Ga(t,this.project))},t}(),Ga=function(t){function e(e,n){var r=t.call(this,e)||this;return r.project=n,r.hasSubscription=!1,r.hasCompleted=!1,r.index=0,r}return fi(e,t),e.prototype._next=function(t){this.hasSubscription||this.tryNext(t)},e.prototype.tryNext=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(t){return void this.destination.error(t)}this.hasSubscription=!0,this._innerSub(e,t,n)},e.prototype._innerSub=function(t,e,n){var r=new Qo(this,e,n),i=this.destination;i.add(r);var o=os(this,t,void 0,void 0,r);o!==r&&i.add(o)},e.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete(),this.unsubscribe()},e.prototype.notifyNext=function(t,e,n,r,i){this.destination.next(e)},e.prototype.notifyError=function(t){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.remove(t),this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},e}(Zo);var Ya=function(){function t(t,e,n){this.project=t,this.concurrent=e,this.scheduler=n}return t.prototype.call=function(t,e){return e.subscribe(new Ka(t,this.project,this.concurrent,this.scheduler))},t}(),Ka=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o.project=n,o.concurrent=r,o.scheduler=i,o.index=0,o.active=0,o.hasCompleted=!1,r<Number.POSITIVE_INFINITY&&(o.buffer=[]),o}return fi(e,t),e.dispatch=function(t){var e=t.subscriber,n=t.result,r=t.value,i=t.index;e.subscribeToProjection(n,r,i)},e.prototype._next=function(t){var n=this.destination;if(n.closed)this._complete();else{var r=this.index++;if(this.active<this.concurrent){n.next(t);try{var i=(0,this.project)(t,r);if(this.scheduler){var o={subscriber:this,result:i,value:t,index:r};this.destination.add(this.scheduler.schedule(e.dispatch,0,o))}else this.subscribeToProjection(i,t,r)}catch(t){n.error(t)}}else this.buffer.push(t)}},e.prototype.subscribeToProjection=function(t,e,n){this.active++,this.destination.add(os(this,t,e,n))},e.prototype._complete=function(){this.hasCompleted=!0,this.hasCompleted&&0===this.active&&this.destination.complete(),this.unsubscribe()},e.prototype.notifyNext=function(t,e,n,r,i){this._next(e)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.destination.remove(t),this.active--,e&&e.length>0&&this._next(e.shift()),this.hasCompleted&&0===this.active&&this.destination.complete()},e}(Zo);var Xa=function(){function t(t){this.callback=t}return t.prototype.call=function(t,e){return e.subscribe(new Ja(t,this.callback))},t}(),Ja=function(t){function e(e,n){var r=t.call(this,e)||this;return r.add(new Ai(n)),r}return fi(e,t),e}(Ri);var Za=function(){function t(t,e,n,r){this.predicate=t,this.source=e,this.yieldIndex=n,this.thisArg=r}return t.prototype.call=function(t,e){return e.subscribe(new Qa(t,this.predicate,this.source,this.yieldIndex,this.thisArg))},t}(),Qa=function(t){function e(e,n,r,i,o){var s=t.call(this,e)||this;return s.predicate=n,s.source=r,s.yieldIndex=i,s.thisArg=o,s.index=0,s}return fi(e,t),e.prototype.notifyComplete=function(t){var e=this.destination;e.next(t),e.complete(),this.unsubscribe()},e.prototype._next=function(t){var e=this.predicate,n=this.thisArg,r=this.index++;try{e.call(n||this,t,r,this.source)&&this.notifyComplete(this.yieldIndex?r:t)}catch(t){this.destination.error(t)}},e.prototype._complete=function(){this.notifyComplete(this.yieldIndex?-1:void 0)},e}(Ri);var tu=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new eu(t))},t}(),eu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return fi(e,t),e.prototype._next=function(t){},e}(Ri);var nu=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new ru(t))},t}(),ru=function(t){function e(e){return t.call(this,e)||this}return fi(e,t),e.prototype.notifyComplete=function(t){var e=this.destination;e.next(t),e.complete()},e.prototype._next=function(t){this.notifyComplete(!1)},e.prototype._complete=function(){this.notifyComplete(!0)},e}(Ri);function iu(t){return function(e){return 0===t?lo():e.lift(new ou(t))}}var ou=function(){function t(t){if(this.total=t,this.total<0)throw new $o}return t.prototype.call=function(t,e){return e.subscribe(new su(t,this.total))},t}(),su=function(t){function e(e,n){var r=t.call(this,e)||this;return r.total=n,r.ring=new Array,r.count=0,r}return fi(e,t),e.prototype._next=function(t){var e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t},e.prototype._complete=function(){var t=this.destination,e=this.count;if(e>0)for(var n=this.count>=this.total?this.total:this.count,r=this.ring,i=0;i<n;i++){var o=e++%n;t.next(r[o])}t.complete()},e}(Ri);var au=function(){function t(t){this.value=t}return t.prototype.call=function(t,e){return e.subscribe(new uu(t,this.value))},t}(),uu=function(t){function e(e,n){var r=t.call(this,e)||this;return r.value=n,r}return fi(e,t),e.prototype._next=function(t){this.destination.next(this.value)},e}(Ri);var cu=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new lu(t))},t}(),lu=function(t){function e(e){return t.call(this,e)||this}return fi(e,t),e.prototype._next=function(t){this.destination.next(_o.createNext(t))},e.prototype._error=function(t){var e=this.destination;e.next(_o.createError(t)),e.complete()},e.prototype._complete=function(){var t=this.destination;t.next(_o.createComplete()),t.complete()},e}(Ri);function hu(t,e){var n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new fu(t,e,n))}}var fu=function(){function t(t,e,n){void 0===n&&(n=!1),this.accumulator=t,this.seed=e,this.hasSeed=n}return t.prototype.call=function(t,e){return e.subscribe(new du(t,this.accumulator,this.seed,this.hasSeed))},t}(),du=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o.accumulator=n,o._seed=r,o.hasSeed=i,o.index=0,o}return fi(e,t),Object.defineProperty(e.prototype,"seed",{get:function(){return this._seed},set:function(t){this.hasSeed=!0,this._seed=t},enumerable:!0,configurable:!0}),e.prototype._next=function(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)},e.prototype._tryNext=function(t){var e,n=this.index++;try{e=this.accumulator(this.seed,t,n)}catch(t){this.destination.error(t)}this.seed=e,this.destination.next(e)},e}(Ri);function pu(t,e){return arguments.length>=2?function(n){return ji(hu(t,e),iu(1),ma(e))(n)}:function(e){return ji(hu((function(e,n,r){return t(e,n,r+1)})),iu(1))(e)}}var vu=function(){function t(t,e,n){this.accumulator=t,this.seed=e,this.concurrent=n}return t.prototype.call=function(t,e){return e.subscribe(new mu(t,this.accumulator,this.seed,this.concurrent))},t}(),mu=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o.accumulator=n,o.acc=r,o.concurrent=i,o.hasValue=!1,o.hasCompleted=!1,o.buffer=[],o.active=0,o.index=0,o}return fi(e,t),e.prototype._next=function(t){if(this.active<this.concurrent){var e=this.index++,n=this.destination,r=void 0;try{r=(0,this.accumulator)(this.acc,t,e)}catch(t){return n.error(t)}this.active++,this._innerSub(r,t,e)}else this.buffer.push(t)},e.prototype._innerSub=function(t,e,n){var r=new Qo(this,e,n),i=this.destination;i.add(r);var o=os(this,t,void 0,void 0,r);o!==r&&i.add(o)},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete()),this.unsubscribe()},e.prototype.notifyNext=function(t,e,n,r,i){var o=this.destination;this.acc=e,this.hasValue=!0,o.next(e)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.destination.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete())},e}(Zo);function yu(t,e){return function(n){var r;if(r="function"==typeof t?t:function(){return t},"function"==typeof e)return n.lift(new gu(r,e));var i=Object.create(n,Xi);return i.source=n,i.subjectFactory=r,i}}var gu=function(){function t(t,e){this.subjectFactory=t,this.selector=e}return t.prototype.call=function(t,e){var n=this.selector,r=this.subjectFactory(),i=n(r).subscribe(t);return i.add(e.subscribe(r)),i},t}();var bu=function(){function t(t){this.nextSources=t}return t.prototype.call=function(t,e){return e.subscribe(new _u(t,this.nextSources))},t}(),_u=function(t){function e(e,n){var r=t.call(this,e)||this;return r.destination=e,r.nextSources=n,r}return fi(e,t),e.prototype.notifyError=function(t,e){this.subscribeToNextSource()},e.prototype.notifyComplete=function(t){this.subscribeToNextSource()},e.prototype._error=function(t){this.subscribeToNextSource(),this.unsubscribe()},e.prototype._complete=function(){this.subscribeToNextSource(),this.unsubscribe()},e.prototype.subscribeToNextSource=function(){var t=this.nextSources.shift();if(t){var e=new Qo(this,void 0,void 0),n=this.destination;n.add(e);var r=os(this,t,void 0,void 0,e);r!==e&&n.add(r)}else this.destination.complete()},e}(Zo);var wu=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new Eu(t))},t}(),Eu=function(t){function e(e){var n=t.call(this,e)||this;return n.hasPrev=!1,n}return fi(e,t),e.prototype._next=function(t){var e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)},e}(Ri);function Iu(t,e){return function(n){for(var r=n,i=0;i<e;i++){var o=r[t[i]];if(void 0===o)return;r=o}return r}}var Tu=function(){function t(t,e){this.count=t,this.source=e}return t.prototype.call=function(t,e){return e.subscribe(new ku(t,this.count,this.source))},t}(),ku=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.count=n,i.source=r,i}return fi(e,t),e.prototype.complete=function(){if(!this.isStopped){var e=this.source,n=this.count;if(0===n)return t.prototype.complete.call(this);n>-1&&(this.count=n-1),e.subscribe(this._unsubscribeAndRecycle())}},e}(Ri);var Su=function(){function t(t){this.notifier=t}return t.prototype.call=function(t,e){return e.subscribe(new xu(t,this.notifier,e))},t}(),xu=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.notifier=n,i.source=r,i.sourceIsBeingSubscribedTo=!0,i}return fi(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.sourceIsBeingSubscribedTo=!0,this.source.subscribe(this)},e.prototype.notifyComplete=function(e){if(!1===this.sourceIsBeingSubscribedTo)return t.prototype.complete.call(this)},e.prototype.complete=function(){if(this.sourceIsBeingSubscribedTo=!1,!this.isStopped){if(this.retries||this.subscribeToRetries(),!this.retriesSubscription||this.retriesSubscription.closed)return t.prototype.complete.call(this);this._unsubscribeAndRecycle(),this.notifications.next()}},e.prototype._unsubscribe=function(){var t=this.notifications,e=this.retriesSubscription;t&&(t.unsubscribe(),this.notifications=null),e&&(e.unsubscribe(),this.retriesSubscription=null),this.retries=null},e.prototype._unsubscribeAndRecycle=function(){var e=this._unsubscribe;return this._unsubscribe=null,t.prototype._unsubscribeAndRecycle.call(this),this._unsubscribe=e,this},e.prototype.subscribeToRetries=function(){var e;this.notifications=new qi;try{e=(0,this.notifier)(this.notifications)}catch(e){return t.prototype.complete.call(this)}this.retries=e,this.retriesSubscription=os(this,e)},e}(Zo);var Ou=function(){function t(t,e){this.count=t,this.source=e}return t.prototype.call=function(t,e){return e.subscribe(new Au(t,this.count,this.source))},t}(),Au=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.count=n,i.source=r,i}return fi(e,t),e.prototype.error=function(e){if(!this.isStopped){var n=this.source,r=this.count;if(0===r)return t.prototype.error.call(this,e);r>-1&&(this.count=r-1),n.subscribe(this._unsubscribeAndRecycle())}},e}(Ri);var Nu=function(){function t(t,e){this.notifier=t,this.source=e}return t.prototype.call=function(t,e){return e.subscribe(new Du(t,this.notifier,this.source))},t}(),Du=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.notifier=n,i.source=r,i}return fi(e,t),e.prototype.error=function(e){if(!this.isStopped){var n=this.errors,r=this.retries,i=this.retriesSubscription;if(r)this.errors=null,this.retriesSubscription=null;else{n=new qi;try{r=(0,this.notifier)(n)}catch(e){return t.prototype.error.call(this,e)}i=os(this,r)}this._unsubscribeAndRecycle(),this.errors=n,this.retries=r,this.retriesSubscription=i,n.next(e)}},e.prototype._unsubscribe=function(){var t=this.errors,e=this.retriesSubscription;t&&(t.unsubscribe(),this.errors=null),e&&(e.unsubscribe(),this.retriesSubscription=null),this.retries=null},e.prototype.notifyNext=function(t,e,n,r,i){var o=this._unsubscribe;this._unsubscribe=null,this._unsubscribeAndRecycle(),this._unsubscribe=o,this.source.subscribe(this)},e}(Zo);var Ru=function(){function t(t){this.notifier=t}return t.prototype.call=function(t,e){var n=new Cu(t),r=e.subscribe(n);return r.add(os(n,this.notifier)),r},t}(),Cu=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.hasValue=!1,e}return fi(e,t),e.prototype._next=function(t){this.value=t,this.hasValue=!0},e.prototype.notifyNext=function(t,e,n,r,i){this.emitValue()},e.prototype.notifyComplete=function(){this.emitValue()},e.prototype.emitValue=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.value))},e}(Zo);var Uu=function(){function t(t,e){this.period=t,this.scheduler=e}return t.prototype.call=function(t,e){return e.subscribe(new Pu(t,this.period,this.scheduler))},t}(),Pu=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.period=n,i.scheduler=r,i.hasValue=!1,i.add(r.schedule(Lu,n,{subscriber:i,period:n})),i}return fi(e,t),e.prototype._next=function(t){this.lastValue=t,this.hasValue=!0},e.prototype.notifyNext=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.lastValue))},e}(Ri);function Lu(t){var e=t.subscriber,n=t.period;e.notifyNext(),this.schedule(t,n)}var ju=function(){function t(t,e){this.compareTo=t,this.comparator=e}return t.prototype.call=function(t,e){return e.subscribe(new Mu(t,this.compareTo,this.comparator))},t}(),Mu=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.compareTo=n,i.comparator=r,i._a=[],i._b=[],i._oneComplete=!1,i.destination.add(n.subscribe(new Vu(e,i))),i}return fi(e,t),e.prototype._next=function(t){this._oneComplete&&0===this._b.length?this.emit(!1):(this._a.push(t),this.checkValues())},e.prototype._complete=function(){this._oneComplete?this.emit(0===this._a.length&&0===this._b.length):this._oneComplete=!0,this.unsubscribe()},e.prototype.checkValues=function(){for(var t=this._a,e=this._b,n=this.comparator;t.length>0&&e.length>0;){var r=t.shift(),i=e.shift(),o=!1;try{o=n?n(r,i):r===i}catch(t){this.destination.error(t)}o||this.emit(!1)}},e.prototype.emit=function(t){var e=this.destination;e.next(t),e.complete()},e.prototype.nextB=function(t){this._oneComplete&&0===this._a.length?this.emit(!1):(this._b.push(t),this.checkValues())},e.prototype.completeB=function(){this._oneComplete?this.emit(0===this._a.length&&0===this._b.length):this._oneComplete=!0},e}(Ri),Vu=function(t){function e(e,n){var r=t.call(this,e)||this;return r.parent=n,r}return fi(e,t),e.prototype._next=function(t){this.parent.nextB(t)},e.prototype._error=function(t){this.parent.error(t),this.unsubscribe()},e.prototype._complete=function(){this.parent.completeB(),this.unsubscribe()},e}(Ri);function Fu(){return new qi}var $u=function(){function t(t,e){this.predicate=t,this.source=e}return t.prototype.call=function(t,e){return e.subscribe(new Bu(t,this.predicate,this.source))},t}(),Bu=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.predicate=n,i.source=r,i.seenValue=!1,i.index=0,i}return fi(e,t),e.prototype.applySingleValue=function(t){this.seenValue?this.destination.error("Sequence contains more than one element"):(this.seenValue=!0,this.singleValue=t)},e.prototype._next=function(t){var e=this.index++;this.predicate?this.tryNext(t,e):this.applySingleValue(t)},e.prototype.tryNext=function(t,e){try{this.predicate(t,e,this.source)&&this.applySingleValue(t)}catch(t){this.destination.error(t)}},e.prototype._complete=function(){var t=this.destination;this.index>0?(t.next(this.seenValue?this.singleValue:void 0),t.complete()):t.error(new Bo)},e}(Ri);var Wu=function(){function t(t){this.total=t}return t.prototype.call=function(t,e){return e.subscribe(new qu(t,this.total))},t}(),qu=function(t){function e(e,n){var r=t.call(this,e)||this;return r.total=n,r.count=0,r}return fi(e,t),e.prototype._next=function(t){++this.count>this.total&&this.destination.next(t)},e}(Ri);var zu=function(){function t(t){if(this._skipCount=t,this._skipCount<0)throw new $o}return t.prototype.call=function(t,e){return 0===this._skipCount?e.subscribe(new Ri(t)):e.subscribe(new Hu(t,this._skipCount))},t}(),Hu=function(t){function e(e,n){var r=t.call(this,e)||this;return r._skipCount=n,r._count=0,r._ring=new Array(n),r}return fi(e,t),e.prototype._next=function(t){var e=this._skipCount,n=this._count++;if(n<e)this._ring[n]=t;else{var r=n%e,i=this._ring,o=i[r];i[r]=t,this.destination.next(o)}},e}(Ri);var Gu=function(){function t(t){this.notifier=t}return t.prototype.call=function(t,e){return e.subscribe(new Yu(t,this.notifier))},t}(),Yu=function(t){function e(e,n){var r=t.call(this,e)||this;r.hasValue=!1;var i=new Qo(r,void 0,void 0);r.add(i),r.innerSubscription=i;var o=os(r,n,void 0,void 0,i);return o!==i&&(r.add(o),r.innerSubscription=o),r}return fi(e,t),e.prototype._next=function(e){this.hasValue&&t.prototype._next.call(this,e)},e.prototype.notifyNext=function(t,e,n,r,i){this.hasValue=!0,this.innerSubscription&&this.innerSubscription.unsubscribe()},e.prototype.notifyComplete=function(){},e}(Zo);var Ku=function(){function t(t){this.predicate=t}return t.prototype.call=function(t,e){return e.subscribe(new Xu(t,this.predicate))},t}(),Xu=function(t){function e(e,n){var r=t.call(this,e)||this;return r.predicate=n,r.skipping=!0,r.index=0,r}return fi(e,t),e.prototype._next=function(t){var e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)},e.prototype.tryCallPredicate=function(t){try{var e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(t){this.destination.error(t)}},e}(Ri);var Ju=function(t){function e(e,n,r){void 0===n&&(n=0),void 0===r&&(r=Uo);var i=t.call(this)||this;return i.source=e,i.delayTime=n,i.scheduler=r,(!_s(n)||n<0)&&(i.delayTime=0),r&&"function"==typeof r.schedule||(i.scheduler=Uo),i}return fi(e,t),e.create=function(t,n,r){return void 0===n&&(n=0),void 0===r&&(r=Uo),new e(t,n,r)},e.dispatch=function(t){var e=t.source,n=t.subscriber;return this.add(e.subscribe(n))},e.prototype._subscribe=function(t){var n=this.delayTime,r=this.source;return this.scheduler.schedule(e.dispatch,n,{source:r,subscriber:t})},e}(Vi);var Zu=function(){function t(t,e){this.scheduler=t,this.delay=e}return t.prototype.call=function(t,e){return new Ju(e,this.delay,this.scheduler).subscribe(t)},t}();function Qu(t,e){return"function"==typeof e?function(n){return n.pipe(Qu((function(n,r){return ls(t(n,r)).pipe(qo((function(t,i){return e(n,t,r,i)})))})))}:function(e){return e.lift(new tc(t))}}var tc=function(){function t(t){this.project=t}return t.prototype.call=function(t,e){return e.subscribe(new ec(t,this.project))},t}(),ec=function(t){function e(e,n){var r=t.call(this,e)||this;return r.project=n,r.index=0,r}return fi(e,t),e.prototype._next=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(t){return void this.destination.error(t)}this._innerSub(e,t,n)},e.prototype._innerSub=function(t,e,n){var r=this.innerSubscription;r&&r.unsubscribe();var i=new Qo(this,e,n),o=this.destination;o.add(i),this.innerSubscription=os(this,t,void 0,void 0,i),this.innerSubscription!==i&&o.add(this.innerSubscription)},e.prototype._complete=function(){var e=this.innerSubscription;e&&!e.closed||t.prototype._complete.call(this),this.unsubscribe()},e.prototype._unsubscribe=function(){this.innerSubscription=null},e.prototype.notifyComplete=function(e){this.destination.remove(e),this.innerSubscription=null,this.isStopped&&t.prototype._complete.call(this)},e.prototype.notifyNext=function(t,e,n,r,i){this.destination.next(e)},e}(Zo);var nc=function(){function t(t){this.notifier=t}return t.prototype.call=function(t,e){var n=new rc(t),r=os(n,this.notifier);return r&&!n.seenValue?(n.add(r),e.subscribe(n)):n},t}(),rc=function(t){function e(e){var n=t.call(this,e)||this;return n.seenValue=!1,n}return fi(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.seenValue=!0,this.complete()},e.prototype.notifyComplete=function(){},e}(Zo);var ic=function(){function t(t,e){this.predicate=t,this.inclusive=e}return t.prototype.call=function(t,e){return e.subscribe(new oc(t,this.predicate,this.inclusive))},t}(),oc=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.predicate=n,i.inclusive=r,i.index=0,i}return fi(e,t),e.prototype._next=function(t){var e,n=this.destination;try{e=this.predicate(t,this.index++)}catch(t){return void n.error(t)}this.nextOrComplete(t,e)},e.prototype.nextOrComplete=function(t,e){var n=this.destination;Boolean(e)?n.next(t):(this.inclusive&&n.next(t),n.complete())},e}(Ri);var sc=function(){function t(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}return t.prototype.call=function(t,e){return e.subscribe(new ac(t,this.nextOrObserver,this.error,this.complete))},t}(),ac=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o._tapNext=Fo,o._tapError=Fo,o._tapComplete=Fo,o._tapError=r||Fo,o._tapComplete=i||Fo,wi(n)?(o._context=o,o._tapNext=n):n&&(o._context=n,o._tapNext=n.next||Fo,o._tapError=n.error||Fo,o._tapComplete=n.complete||Fo),o}return fi(e,t),e.prototype._next=function(t){try{this._tapNext.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.next(t)},e.prototype._error=function(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)},e.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()},e}(Ri),uc={leading:!0,trailing:!1};var cc=function(){function t(t,e,n){this.durationSelector=t,this.leading=e,this.trailing=n}return t.prototype.call=function(t,e){return e.subscribe(new lc(t,this.durationSelector,this.leading,this.trailing))},t}(),lc=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o.destination=e,o.durationSelector=n,o._leading=r,o._trailing=i,o._hasValue=!1,o}return fi(e,t),e.prototype._next=function(t){this._hasValue=!0,this._sendValue=t,this._throttled||(this._leading?this.send():this.throttle(t))},e.prototype.send=function(){var t=this._hasValue,e=this._sendValue;t&&(this.destination.next(e),this.throttle(e)),this._hasValue=!1,this._sendValue=null},e.prototype.throttle=function(t){var e=this.tryDurationSelector(t);e&&this.add(this._throttled=os(this,e))},e.prototype.tryDurationSelector=function(t){try{return this.durationSelector(t)}catch(t){return this.destination.error(t),null}},e.prototype.throttlingDone=function(){var t=this._throttled,e=this._trailing;t&&t.unsubscribe(),this._throttled=null,e&&this.send()},e.prototype.notifyNext=function(t,e,n,r,i){this.throttlingDone()},e.prototype.notifyComplete=function(){this.throttlingDone()},e}(Zo);var hc=function(){function t(t,e,n,r){this.duration=t,this.scheduler=e,this.leading=n,this.trailing=r}return t.prototype.call=function(t,e){return e.subscribe(new fc(t,this.duration,this.scheduler,this.leading,this.trailing))},t}(),fc=function(t){function e(e,n,r,i,o){var s=t.call(this,e)||this;return s.duration=n,s.scheduler=r,s.leading=i,s.trailing=o,s._hasTrailingValue=!1,s._trailingValue=null,s}return fi(e,t),e.prototype._next=function(t){this.throttled?this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(dc,this.duration,{subscriber:this})),this.leading?this.destination.next(t):this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0))},e.prototype._complete=function(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()},e.prototype.clearThrottle=function(){var t=this.throttled;t&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),t.unsubscribe(),this.remove(t),this.throttled=null)},e}(Ri);function dc(t){t.subscriber.clearThrottle()}var pc=function(){return function(t,e){this.value=t,this.interval=e}}();function vc(t,e,n){return void 0===n&&(n=Po),function(r){var i=_a(t),o=i?+t-n.now():Math.abs(t);return r.lift(new mc(o,i,e,n))}}var mc=function(){function t(t,e,n,r){this.waitFor=t,this.absoluteTimeout=e,this.withObservable=n,this.scheduler=r}return t.prototype.call=function(t,e){return e.subscribe(new yc(t,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},t}(),yc=function(t){function e(e,n,r,i,o){var s=t.call(this,e)||this;return s.absoluteTimeout=n,s.waitFor=r,s.withObservable=i,s.scheduler=o,s.action=null,s.scheduleTimeout(),s}return fi(e,t),e.dispatchTimeout=function(t){var e=t.withObservable;t._unsubscribeAndRecycle(),t.add(os(t,e))},e.prototype.scheduleTimeout=function(){var t=this.action;t?this.action=t.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(e.dispatchTimeout,this.waitFor,this))},e.prototype._next=function(e){this.absoluteTimeout||this.scheduleTimeout(),t.prototype._next.call(this,e)},e.prototype._unsubscribe=function(){this.action=null,this.scheduler=null,this.withObservable=null},e}(Zo);var gc=function(){return function(t,e){this.value=t,this.timestamp=e}}();function bc(t,e,n){return 0===n?[e]:(t.push(e),t)}var _c=function(){function t(t){this.windowBoundaries=t}return t.prototype.call=function(t,e){var n=new wc(t),r=e.subscribe(n);return r.closed||n.add(os(n,this.windowBoundaries)),r},t}(),wc=function(t){function e(e){var n=t.call(this,e)||this;return n.window=new qi,e.next(n.window),n}return fi(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.openWindow()},e.prototype.notifyError=function(t,e){this._error(t)},e.prototype.notifyComplete=function(t){this._complete()},e.prototype._next=function(t){this.window.next(t)},e.prototype._error=function(t){this.window.error(t),this.destination.error(t)},e.prototype._complete=function(){this.window.complete(),this.destination.complete()},e.prototype._unsubscribe=function(){this.window=null},e.prototype.openWindow=function(){var t=this.window;t&&t.complete();var e=this.destination,n=this.window=new qi;e.next(n)},e}(Zo);var Ec=function(){function t(t,e){this.windowSize=t,this.startWindowEvery=e}return t.prototype.call=function(t,e){return e.subscribe(new Ic(t,this.windowSize,this.startWindowEvery))},t}(),Ic=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.destination=e,i.windowSize=n,i.startWindowEvery=r,i.windows=[new qi],i.count=0,e.next(i.windows[0]),i}return fi(e,t),e.prototype._next=function(t){for(var e=this.startWindowEvery>0?this.startWindowEvery:this.windowSize,n=this.destination,r=this.windowSize,i=this.windows,o=i.length,s=0;s<o&&!this.closed;s++)i[s].next(t);var a=this.count-r+1;if(a>=0&&a%e==0&&!this.closed&&i.shift().complete(),++this.count%e==0&&!this.closed){var u=new qi;i.push(u),n.next(u)}},e.prototype._error=function(t){var e=this.windows;if(e)for(;e.length>0&&!this.closed;)e.shift().error(t);this.destination.error(t)},e.prototype._complete=function(){var t=this.windows;if(t)for(;t.length>0&&!this.closed;)t.shift().complete();this.destination.complete()},e.prototype._unsubscribe=function(){this.count=0,this.windows=null},e}(Ri);var Tc=function(){function t(t,e,n,r){this.windowTimeSpan=t,this.windowCreationInterval=e,this.maxWindowSize=n,this.scheduler=r}return t.prototype.call=function(t,e){return e.subscribe(new Sc(t,this.windowTimeSpan,this.windowCreationInterval,this.maxWindowSize,this.scheduler))},t}(),kc=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._numberOfNextedValues=0,e}return fi(e,t),e.prototype.next=function(e){this._numberOfNextedValues++,t.prototype.next.call(this,e)},Object.defineProperty(e.prototype,"numberOfNextedValues",{get:function(){return this._numberOfNextedValues},enumerable:!0,configurable:!0}),e}(qi),Sc=function(t){function e(e,n,r,i,o){var s=t.call(this,e)||this;s.destination=e,s.windowTimeSpan=n,s.windowCreationInterval=r,s.maxWindowSize=i,s.scheduler=o,s.windows=[];var a=s.openWindow();if(null!==r&&r>=0){var u={subscriber:s,window:a,context:null},c={windowTimeSpan:n,windowCreationInterval:r,subscriber:s,scheduler:o};s.add(o.schedule(Ac,n,u)),s.add(o.schedule(Oc,r,c))}else{var l={subscriber:s,window:a,windowTimeSpan:n};s.add(o.schedule(xc,n,l))}return s}return fi(e,t),e.prototype._next=function(t){for(var e=this.windows,n=e.length,r=0;r<n;r++){var i=e[r];i.closed||(i.next(t),i.numberOfNextedValues>=this.maxWindowSize&&this.closeWindow(i))}},e.prototype._error=function(t){for(var e=this.windows;e.length>0;)e.shift().error(t);this.destination.error(t)},e.prototype._complete=function(){for(var t=this.windows;t.length>0;){var e=t.shift();e.closed||e.complete()}this.destination.complete()},e.prototype.openWindow=function(){var t=new kc;return this.windows.push(t),this.destination.next(t),t},e.prototype.closeWindow=function(t){t.complete();var e=this.windows;e.splice(e.indexOf(t),1)},e}(Ri);function xc(t){var e=t.subscriber,n=t.windowTimeSpan,r=t.window;r&&e.closeWindow(r),t.window=e.openWindow(),this.schedule(t,n)}function Oc(t){var e=t.windowTimeSpan,n=t.subscriber,r=t.scheduler,i=t.windowCreationInterval,o=n.openWindow(),s={action:this,subscription:null},a={subscriber:n,window:o,context:s};s.subscription=r.schedule(Ac,e,a),this.add(s.subscription),this.schedule(t,i)}function Ac(t){var e=t.subscriber,n=t.window,r=t.context;r&&r.action&&r.subscription&&r.action.remove(r.subscription),e.closeWindow(n)}var Nc=function(){function t(t,e){this.openings=t,this.closingSelector=e}return t.prototype.call=function(t,e){return e.subscribe(new Dc(t,this.openings,this.closingSelector))},t}(),Dc=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.openings=n,i.closingSelector=r,i.contexts=[],i.add(i.openSubscription=os(i,n,n)),i}return fi(e,t),e.prototype._next=function(t){var e=this.contexts;if(e)for(var n=e.length,r=0;r<n;r++)e[r].window.next(t)},e.prototype._error=function(e){var n=this.contexts;if(this.contexts=null,n)for(var r=n.length,i=-1;++i<r;){var o=n[i];o.window.error(e),o.subscription.unsubscribe()}t.prototype._error.call(this,e)},e.prototype._complete=function(){var e=this.contexts;if(this.contexts=null,e)for(var n=e.length,r=-1;++r<n;){var i=e[r];i.window.complete(),i.subscription.unsubscribe()}t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var t=this.contexts;if(this.contexts=null,t)for(var e=t.length,n=-1;++n<e;){var r=t[n];r.window.unsubscribe(),r.subscription.unsubscribe()}},e.prototype.notifyNext=function(t,e,n,r,i){if(t===this.openings){var o=void 0;try{o=(0,this.closingSelector)(e)}catch(t){return this.error(t)}var s=new qi,a=new Ai,u={window:s,subscription:a};this.contexts.push(u);var c=os(this,o,u);c.closed?this.closeWindow(this.contexts.length-1):(c.context=u,a.add(c)),this.destination.next(s)}else this.closeWindow(this.contexts.indexOf(t))},e.prototype.notifyError=function(t){this.error(t)},e.prototype.notifyComplete=function(t){t!==this.openSubscription&&this.closeWindow(this.contexts.indexOf(t.context))},e.prototype.closeWindow=function(t){if(-1!==t){var e=this.contexts,n=e[t],r=n.window,i=n.subscription;e.splice(t,1),r.complete(),i.unsubscribe()}},e}(Zo);var Rc=function(){function t(t){this.closingSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new Cc(t,this.closingSelector))},t}(),Cc=function(t){function e(e,n){var r=t.call(this,e)||this;return r.destination=e,r.closingSelector=n,r.openWindow(),r}return fi(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.openWindow(i)},e.prototype.notifyError=function(t,e){this._error(t)},e.prototype.notifyComplete=function(t){this.openWindow(t)},e.prototype._next=function(t){this.window.next(t)},e.prototype._error=function(t){this.window.error(t),this.destination.error(t),this.unsubscribeClosingNotification()},e.prototype._complete=function(){this.window.complete(),this.destination.complete(),this.unsubscribeClosingNotification()},e.prototype.unsubscribeClosingNotification=function(){this.closingNotification&&this.closingNotification.unsubscribe()},e.prototype.openWindow=function(t){void 0===t&&(t=null),t&&(this.remove(t),t.unsubscribe());var e=this.window;e&&e.complete();var n,r=this.window=new qi;this.destination.next(r);try{n=(0,this.closingSelector)()}catch(t){return this.destination.error(t),void this.window.error(t)}this.add(this.closingNotification=os(this,n))},e}(Zo);var Uc=function(){function t(t,e){this.observables=t,this.project=e}return t.prototype.call=function(t,e){return e.subscribe(new Pc(t,this.observables,this.project))},t}(),Pc=function(t){function e(e,n,r){var i=t.call(this,e)||this;i.observables=n,i.project=r,i.toRespond=[];var o=n.length;i.values=new Array(o);for(var s=0;s<o;s++)i.toRespond.push(s);for(s=0;s<o;s++){var a=n[s];i.add(os(i,a,a,s))}return i}return fi(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.values[n]=e;var o=this.toRespond;if(o.length>0){var s=o.indexOf(n);-1!==s&&o.splice(s,1)}},e.prototype.notifyComplete=function(){},e.prototype._next=function(t){if(0===this.toRespond.length){var e=[t].concat(this.values);this.project?this._tryProject(e):this.destination.next(e)}},e.prototype._tryProject=function(t){var e;try{e=this.project.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(Zo);var Lc=Object.freeze({__proto__:null,audit:Bs,auditTime:function(t,e){return void 0===e&&(e=Po),Bs((function(){return Cs(t,e)}))},buffer:function(t){return function(e){return e.lift(new zs(t))}},bufferCount:function(t,e){return void 0===e&&(e=null),function(n){return n.lift(new Gs(t,e))}},bufferTime:function(t){var e=arguments.length,n=Po;ho(arguments[arguments.length-1])&&(n=arguments[arguments.length-1],e--);var r=null;e>=2&&(r=arguments[1]);var i=Number.POSITIVE_INFINITY;return e>=3&&(i=arguments[2]),function(e){return e.lift(new Xs(t,r,i,n))}},bufferToggle:function(t,e){return function(n){return n.lift(new na(t,e))}},bufferWhen:function(t){return function(e){return e.lift(new ia(t))}},catchError:function(t){return function(e){var n=new sa(t),r=e.lift(n);return n.caught=r}},combineAll:function(t){return function(e){return e.lift(new as(t))}},combineLatest:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=null;return"function"==typeof t[t.length-1]&&(n=t.pop()),1===t.length&&Si(t[0])&&(t=t[0].slice()),function(e){return e.lift.call(ls([e].concat(t)),new as(n))}},concat:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){return e.lift.call(ms.apply(void 0,[e].concat(t)))}},concatAll:vs,concatMap:ua,concatMapTo:function(t,e){return ua((function(){return t}),e)},count:function(t){return function(e){return e.lift(new ca(t,e))}},debounce:function(t){return function(e){return e.lift(new ha(t))}},debounceTime:function(t,e){return void 0===e&&(e=Po),function(n){return n.lift(new da(t,e))}},defaultIfEmpty:ma,delay:function(t,e){void 0===e&&(e=Po);var n=_a(t)?+t-e.now():Math.abs(t);return function(t){return t.lift(new wa(n,e))}},delayWhen:function(t,e){return e?function(n){return new Sa(n,e).lift(new Ta(t))}:function(e){return e.lift(new Ta(t))}},dematerialize:function(){return function(t){return t.lift(new Oa)}},distinct:function(t,e){return function(n){return n.lift(new Na(t,e))}},distinctUntilChanged:Ra,distinctUntilKeyChanged:function(t,e){return Ra((function(n,r){return e?e(n[t],r[t]):n[t]===r[t]}))},elementAt:function(t,e){if(t<0)throw new $o;var n=arguments.length>=2;return function(r){return r.pipe(Ss((function(e,n){return n===t})),Va(1),n?ma(e):Pa((function(){return new $o})))}},endWith:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){return ms(e,yo.apply(void 0,t))}},every:function(t,e){return function(n){return n.lift(new Ba(t,e,n))}},exhaust:function(){return function(t){return t.lift(new qa)}},exhaustMap:function t(e,n){return n?function(r){return r.pipe(t((function(t,r){return ls(e(t,r)).pipe(qo((function(e,i){return n(t,e,r,i)})))})))}:function(t){return t.lift(new Ha(e))}},expand:function(t,e,n){return void 0===e&&(e=Number.POSITIVE_INFINITY),void 0===n&&(n=void 0),e=(e||0)<1?Number.POSITIVE_INFINITY:e,function(r){return r.lift(new Ya(t,e,n))}},filter:Ss,finalize:function(t){return function(e){return e.lift(new Xa(t))}},find:function(t,e){if("function"!=typeof t)throw new TypeError("predicate is not a function");return function(n){return n.lift(new Za(t,n,!1,e))}},findIndex:function(t,e){return function(n){return n.lift(new Za(t,n,!0,e))}},first:function(t,e){var n=arguments.length>=2;return function(r){return r.pipe(t?Ss((function(e,n){return t(e,n,r)})):Li,Va(1),n?ma(e):Pa((function(){return new Bo})))}},groupBy:function(t,e,n,r){return function(i){return i.lift(new Zi(t,e,n,r))}},ignoreElements:function(){return function(t){return t.lift(new tu)}},isEmpty:function(){return function(t){return t.lift(new nu)}},last:function(t,e){var n=arguments.length>=2;return function(r){return r.pipe(t?Ss((function(e,n){return t(e,n,r)})):Li,iu(1),n?ma(e):Pa((function(){return new Bo})))}},map:qo,mapTo:function(t){return function(e){return e.lift(new au(t))}},materialize:function(){return function(t){return t.lift(new cu)}},max:function(t){return pu("function"==typeof t?function(e,n){return t(e,n)>0?e:n}:function(t,e){return t>e?t:e})},merge:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){return e.lift.call(Es.apply(void 0,[e].concat(t)))}},mergeAll:ps,mergeMap:hs,flatMap:hs,mergeMapTo:function(t,e,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"function"==typeof e?hs((function(){return t}),e,n):("number"==typeof e&&(n=e),hs((function(){return t}),n))},mergeScan:function(t,e,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),function(r){return r.lift(new vu(t,e,n))}},min:function(t){return pu("function"==typeof t?function(e,n){return t(e,n)<0?e:n}:function(t,e){return t<e?t:e})},multicast:yu,observeOn:function(t,e){return void 0===e&&(e=0),function(n){return n.lift(new wo(t,e))}},onErrorResumeNext:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 1===t.length&&Si(t[0])&&(t=t[0]),function(e){return e.lift(new bu(t))}},pairwise:function(){return function(t){return t.lift(new wu)}},partition:function(t,e){return function(n){return[Ss(t,e)(n),Ss(ks(t,e))(n)]}},pluck:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t.length;if(0===n)throw new Error("list of properties cannot be empty.");return function(e){return qo(Iu(t,n))(e)}},publish:function(t){return t?yu((function(){return new qi}),t):yu(new qi)},publishBehavior:function(t){return function(e){return yu(new ro(t))(e)}},publishLast:function(){return function(t){return yu(new So)(t)}},publishReplay:function(t,e,n,r){n&&"function"!=typeof n&&(r=n);var i="function"==typeof n?n:void 0,o=new To(t,e,r);return function(t){return yu((function(){return o}),i)(t)}},race:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){return 1===t.length&&Si(t[0])&&(t=t[0]),e.lift.call(As.apply(void 0,[e].concat(t)))}},reduce:pu,repeat:function(t){return void 0===t&&(t=-1),function(e){return 0===t?lo():t<0?e.lift(new Tu(-1,e)):e.lift(new Tu(t-1,e))}},repeatWhen:function(t){return function(e){return e.lift(new Su(t))}},retry:function(t){return void 0===t&&(t=-1),function(e){return e.lift(new Ou(t,e))}},retryWhen:function(t){return function(e){return e.lift(new Nu(t,e))}},refCount:Hi,sample:function(t){return function(e){return e.lift(new Ru(t))}},sampleTime:function(t,e){return void 0===e&&(e=Po),function(n){return n.lift(new Uu(t,e))}},scan:hu,sequenceEqual:function(t,e){return function(n){return n.lift(new ju(t,e))}},share:function(){return function(t){return Hi()(yu(Fu)(t))}},shareReplay:function(t,e,n){var r;return r=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:n},function(t){return t.lift(function(t){var e,n,r=t.bufferSize,i=void 0===r?Number.POSITIVE_INFINITY:r,o=t.windowTime,s=void 0===o?Number.POSITIVE_INFINITY:o,a=t.refCount,u=t.scheduler,c=0,l=!1,h=!1;return function(t){c++,e&&!l||(l=!1,e=new To(i,s,u),n=t.subscribe({next:function(t){e.next(t)},error:function(t){l=!0,e.error(t)},complete:function(){h=!0,n=void 0,e.complete()}}));var r=e.subscribe(this);this.add((function(){c--,r.unsubscribe(),n&&!h&&a&&0===c&&(n.unsubscribe(),n=void 0,e=void 0)}))}}(r))}},single:function(t){return function(e){return e.lift(new $u(t,e))}},skip:function(t){return function(e){return e.lift(new Wu(t))}},skipLast:function(t){return function(e){return e.lift(new zu(t))}},skipUntil:function(t){return function(e){return e.lift(new Gu(t))}},skipWhile:function(t){return function(e){return e.lift(new Ku(t))}},startWith:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[t.length-1];return ho(n)?(t.pop(),function(e){return ms(t,e,n)}):function(e){return ms(t,e)}},subscribeOn:function(t,e){return void 0===e&&(e=0),function(n){return n.lift(new Zu(t,e))}},switchAll:function(){return Qu(Li)},switchMap:Qu,switchMapTo:function(t,e){return e?Qu((function(){return t}),e):Qu((function(){return t}))},take:Va,takeLast:iu,takeUntil:function(t){return function(e){return e.lift(new nc(t))}},takeWhile:function(t,e){return void 0===e&&(e=!1),function(n){return n.lift(new ic(t,e))}},tap:function(t,e,n){return function(r){return r.lift(new sc(t,e,n))}},throttle:function(t,e){return void 0===e&&(e=uc),function(n){return n.lift(new cc(t,e.leading,e.trailing))}},throttleTime:function(t,e,n){return void 0===e&&(e=Po),void 0===n&&(n=uc),function(r){return r.lift(new hc(t,e,n.leading,n.trailing))}},throwIfEmpty:Pa,timeInterval:function(t){return void 0===t&&(t=Po),function(e){return ys((function(){return e.pipe(hu((function(e,n){var r=e.current;return{value:n,current:t.now(),last:r}}),{current:t.now(),value:void 0,last:void 0}),qo((function(t){var e=t.current,n=t.last,r=t.value;return new pc(r,e-n)})))}))}},timeout:function(t,e){return void 0===e&&(e=Po),vc(t,go(new Wo),e)},timeoutWith:vc,timestamp:function(t){return void 0===t&&(t=Po),qo((function(e){return new gc(e,t.now())}))},toArray:function(){return pu(bc,[])},window:function(t){return function(e){return e.lift(new _c(t))}},windowCount:function(t,e){return void 0===e&&(e=0),function(n){return n.lift(new Ec(t,e))}},windowTime:function(t){var e=Po,n=null,r=Number.POSITIVE_INFINITY;return ho(arguments[3])&&(e=arguments[3]),ho(arguments[2])?e=arguments[2]:_s(arguments[2])&&(r=arguments[2]),ho(arguments[1])?e=arguments[1]:_s(arguments[1])&&(n=arguments[1]),function(i){return i.lift(new Tc(t,n,r,e))}},windowToggle:function(t,e){return function(n){return n.lift(new Nc(t,e))}},windowWhen:function(t){return function(e){return e.lift(new Rc(t))}},withLatestFrom:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){var n;"function"==typeof t[t.length-1]&&(n=t.pop());var r=t;return e.lift(new Uc(r,n))}},zip:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){return e.lift.call(Ps.apply(void 0,[e].concat(t)))}},zipAll:function(t){return function(e){return e.lift(new Ls(t))}}}),jc=Rt((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=Un(jn),r=Un(Vn),i=(Un(Zn),Un(dr),0),o=1,s=2,a=function(){function t(e){(0,n.default)(this,t);var r=e.pipe((0,Lc.publishReplay)(1),(0,Lc.refCount)());this._result=r,this._keys=r.pipe((0,Lc.flatMap)((function(t){return(0,$s.from)(t.keys())})),(0,Lc.publishReplay)(1),(0,Lc.refCount)()),this._records=new $s.Subject,this._summary=new $s.ReplaySubject,this._state=i}return(0,r.default)(t,[{key:"keys",value:function(){return this._keys}},{key:"records",value:function(){var t=this;return this._result.pipe((0,Lc.flatMap)((function(e){return new $s.Observable((function(n){return t._startStreaming({result:e,recordsObserver:n})}))})))}},{key:"consume",value:function(){var t=this;return this._result.pipe((0,Lc.flatMap)((function(e){return new $s.Observable((function(n){return t._startStreaming({result:e,summaryObserver:n})}))})))}},{key:"_startStreaming",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.result,r=e.recordsObserver,i=void 0===r?null:r,a=e.summaryObserver,u=void 0===a?null:a,c=[];return u&&c.push(this._summary.subscribe(u)),this._state<o?(this._state=o,i&&c.push(this._records.subscribe(i)),c.push({unsubscribe:function(){n._cancel&&n._cancel()}}),0===this._records.observers.length&&n._cancel(),n.subscribe({onNext:function(e){t._records.next(e)},onCompleted:function(e){t._records.complete(),t._summary.next(e),t._summary.complete(),t._state=s},onError:function(e){t._records.error(e),t._summary.error(e),t._state=s}})):i&&i.error((0,Kn.newError)("Streaming has already started/consumed with a previous records or summary subscription.")),function(){c.forEach((function(t){return t.unsubscribe()}))}}}]),t}();e.default=a}));Dt(jc);var Mc=Rt((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=Un(jn),r=Un(Vn),i=Un(jc),o=(Un(ui),function(){function t(e){(0,n.default)(this,t),this._txc=e}return(0,r.default)(t,[{key:"run",value:function(t,e){var n=this;return new i.default(new $s.Observable((function(r){try{r.next(n._txc.run(t,e)),r.complete()}catch(t){r.error(t)}return function(){}})))}},{key:"commit",value:function(){var t=this;return new $s.Observable((function(e){t._txc.commit().then((function(){e.complete()})).catch((function(t){return e.error(t)}))}))}},{key:"rollback",value:function(){var t=this;return new $s.Observable((function(e){t._txc.rollback().then((function(){e.complete()})).catch((function(t){return e.error(t)}))}))}}]),t}());e.default=o}));Dt(Mc);var Vc=Rt((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=Un(jn),r=Un(Vn),i=(Un(ei),function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.maxRetryTimeout,i=void 0===r?3e4:r,s=e.initialDelay,a=void 0===s?1e3:s,u=e.delayMultiplier,c=void 0===u?2:u,l=e.delayJitter,h=void 0===l?.2:l,f=e.logger,d=void 0===f?null:f;(0,n.default)(this,t),this._maxRetryTimeout=o(i,3e4),this._initialDelay=o(a,1e3),this._delayMultiplier=o(c,2),this._delayJitter=o(h,.2),this._logger=d}return(0,r.default)(t,[{key:"retry",value:function(e){var n=this;return e.pipe((0,Lc.retryWhen)((function(e){var r=[],i=Date.now(),o=1,s=n._initialDelay;return e.pipe((0,Lc.flatMap)((function(e){if(!t._canRetryOn(e))return(0,$s.throwError)(e);if(r.push(e),o>=2&&Date.now()-i>=n._maxRetryTimeout){var a=(0,Kn.newError)("Failed after retried for ".concat(o," times in ").concat(n._maxRetryTimeout," ms. Make sure that your database is online and retry again."),Kn.SERVICE_UNAVAILABLE);return a.seenErrors=r,(0,$s.throwError)(a)}var u=n._computeNextDelay(s);return s*=n._delayMultiplier,o++,n._logger&&n._logger.warn("Transaction failed and will be retried in ".concat(u)),(0,$s.of)(1).pipe((0,Lc.delay)(u))})))})))}},{key:"_computeNextDelay",value:function(t){var e=t*this._delayJitter;return t-e+2*e*Math.random()}}],[{key:"_canRetryOn",value:function(t){return t&&t.code&&(t.code===Kn.SERVICE_UNAVAILABLE||t.code===Kn.SESSION_EXPIRED||this._isTransientError(t))}},{key:"_isTransientError",value:function(t){var e=t.code;return e.indexOf("TransientError")>=0&&("Neo.TransientError.Transaction.Terminated"!==e&&"Neo.TransientError.Transaction.LockClientStopped"!==e)}}]),t}());function o(t,e){return t||0===t?t:e}e.default=i}));Dt(Vc);var Fc=Rt((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=Un(jn),r=Un(Vn),i=Un(jc),o=(Un(li),Un(Mc)),s=Un(Pr),a=Un(Vc),u=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.session,i=e.config;(0,n.default)(this,t),this._session=r,this._retryLogic=c(i)}return(0,r.default)(t,[{key:"run",value:function(t,e,n){var r=this;return new i.default(new $s.Observable((function(i){try{i.next(r._session.run(t,e,n)),i.complete()}catch(t){i.error(t)}return function(){}})))}},{key:"beginTransaction",value:function(t){return this._beginTransaction(this._session._mode,t)}},{key:"readTransaction",value:function(t,e){return this._runTransaction(tr.ACCESS_MODE_READ,t,e)}},{key:"writeTransaction",value:function(t,e){return this._runTransaction(tr.ACCESS_MODE_WRITE,t,e)}},{key:"close",value:function(){var t=this;return new $s.Observable((function(e){t._session.close().then((function(){e.complete()})).catch((function(t){return e.error(t)}))}))}},{key:"lastBookmark",value:function(){return this._session.lastBookmark()}},{key:"_beginTransaction",value:function(t,e){var n=this,r=s.default.empty();return e&&(r=new s.default(e)),new $s.Observable((function(e){try{e.next(new o.default(n._session._beginTransaction(t,r))),e.complete()}catch(t){e.error(t)}return function(){}}))}},{key:"_runTransaction",value:function(t,e,n){s.default.empty();return n&&new s.default(n),this._retryLogic.retry(this._beginTransaction(t,n).pipe((0,Lc.flatMap)((function(t){return(0,$s.defer)((function(){try{return e(t)}catch(t){return(0,$s.throwError)(t)}})).pipe((0,Lc.catchError)((function(e){return t.rollback().pipe((0,Lc.concat)((0,$s.throwError)(e)))})),(0,Lc.concat)(t.commit()))}))))}}]),t}();function c(t){var e=t&&t.maxTransactionRetryTime?t.maxTransactionRetryTime:null;return new a.default({maxRetryTimeout:e})}e.default=u}));Dt(Fc);var $c=Rt((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.WRITE=e.READ=e.Driver=void 0;var n=Un(jn),r=Un(Vn),i=(Un(Fr),Un(nr)),o=Un(si),s=Un(ai),a=Un(ei),u=Un(li),c=Un(Fc),l=tr.ACCESS_MODE_READ;e.READ=l;var h=tr.ACCESS_MODE_WRITE;e.WRITE=h;var f=0,d=function(){function t(e,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(0,n.default)(this,t),p(o),this._id=f++,this._address=e,this._userAgent=r,this._authToken=i,this._config=o,this._log=a.default.create(o),this._connectionProvider=null,this._afterConstruction()}return(0,r.default)(t,[{key:"verifyConnectivity",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.database,n=void 0===e?"":e,r=this._getOrCreateConnectionProvider(),i=new s.default(r);return i.verify({database:n})}},{key:"supportsMultiDb",value:function(){return this._getOrCreateConnectionProvider().supportsMultiDb()}},{key:"supportsTransactionConfig",value:function(){return this._getOrCreateConnectionProvider().supportsTransactionConfig()}},{key:"_supportsRouting",value:function(){return!1}},{key:"_isEncrypted",value:function(){return this._config.encrypted===Qn.ENCRYPTION_ON}},{key:"_getTrust",value:function(){return this._config.trust}},{key:"session",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.defaultAccessMode,n=void 0===e?h:e,r=t.bookmarks,i=t.database,o=void 0===i?"":i,s=t.fetchSize;return this._newSession({defaultAccessMode:n,bookmarkOrBookmarks:r,database:o,reactive:!1,fetchSize:m(s,this._config.fetchSize)})}},{key:"rxSession",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.defaultAccessMode,n=void 0===e?h:e,r=t.bookmarks,i=t.database,o=void 0===i?"":i,s=t.fetchSize;return new c.default({session:this._newSession({defaultAccessMode:n,bookmarks:r,database:o,reactive:!0,fetchSize:m(s,this._config.fetchSize)}),config:this._config})}},{key:"close",value:function(){return this._log.info("Driver ".concat(this._id," closing")),this._connectionProvider?this._connectionProvider.close():Promise.resolve()}},{key:"_afterConstruction",value:function(){this._log.info("Direct driver ".concat(this._id," created for server address ").concat(this._address))}},{key:"_createConnectionProvider",value:function(t,e,n){return new o.default({id:this._id,config:this._config,log:this._log,address:t,userAgent:e,authToken:n})}},{key:"_newSession",value:function(e){var n=e.defaultAccessMode,r=e.bookmarkOrBookmarks,o=e.database,s=e.reactive,a=e.fetchSize,c=t._validateSessionMode(n),l=this._getOrCreateConnectionProvider(),h=r?new i.default(r):i.default.empty();return new u.default({mode:c,database:o,connectionProvider:l,bookmark:h,config:this._config,reactive:s,fetchSize:a})}},{key:"_getOrCreateConnectionProvider",value:function(){return this._connectionProvider||(this._connectionProvider=this._createConnectionProvider(this._address,this._userAgent,this._authToken)),this._connectionProvider}}],[{key:"_validateSessionMode",value:function(t){var e=t||h;if(e!==tr.ACCESS_MODE_READ&&e!==tr.ACCESS_MODE_WRITE)throw(0,Kn.newError)("Illegal session mode "+e);return e}}]),t}();function p(t){t.maxConnectionLifetime=v(t.maxConnectionLifetime,36e5),t.maxConnectionPoolSize=v(t.maxConnectionPoolSize,ti.DEFAULT_MAX_SIZE),t.connectionAcquisitionTimeout=v(t.connectionAcquisitionTimeout,ti.DEFAULT_ACQUISITION_TIMEOUT),t.fetchSize=m(t.fetchSize,1e3)}function v(t,e){var n=parseInt(t,10);return n>0||0===n?n:n<0?Number.MAX_SAFE_INTEGER:e}function m(t,e){var n=parseInt(t,10);if(n>0||n===Ur.ALL)return n;if(0===n||n<0)throw new Error("The fetch size can only be a positive value or -1 for ALL. However fetchSize = "+n);return e}e.Driver=d;var y=d;e.default=y}));Dt($c);$c.WRITE,$c.READ,$c.Driver;var Bc=function(t){if(Array.isArray(t))return cr(t)};var Wc=function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)};var qc=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")};var zc=function(t){return Bc(t)||Wc(t)||lr(t)||qc()},Hc=Rt((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=Un(zc),r=Un(jn),i=Un(Vn),o=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.database,i=e.routers,o=e.readers,s=e.writers,a=e.expirationTime;(0,r.default)(this,t),this.database=n,this.databaseName=n||"default database",this.routers=i||[],this.readers=o||[],this.writers=s||[],this.expirationTime=a||(0,Xn.int)(0)}return(0,i.default)(t,[{key:"forget",value:function(t){this.readers=s(this.readers,t),this.writers=s(this.writers,t)}},{key:"forgetRouter",value:function(t){this.routers=s(this.routers,t)}},{key:"forgetWriter",value:function(t){this.writers=s(this.writers,t)}},{key:"isStaleFor",value:function(t){return this.expirationTime.lessThan(Date.now())||this.routers.length<1||t===$c.READ&&0===this.readers.length||t===$c.WRITE&&0===this.writers.length}},{key:"isExpiredFor",value:function(t){return this.expirationTime.add(t).lessThan(Date.now())}},{key:"allServers",value:function(){return[].concat((0,n.default)(this.routers),(0,n.default)(this.readers),(0,n.default)(this.writers))}},{key:"toString",value:function(){return"RoutingTable["+"database=".concat(this.databaseName,", ")+"expirationTime=".concat(this.expirationTime,", ")+"currentTime=".concat(Date.now(),", ")+"routers=[".concat(this.routers,"], ")+"readers=[".concat(this.readers,"], ")+"writers=[".concat(this.writers,"]]")}}]),t}();function s(t,e){return t.filter((function(t){return t.asKey()!==e.asKey()}))}e.default=o}));Dt(Hc);var Gc=Rt((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.VERSION_IN_DEV=e.VERSION_4_0_0=e.VERSION_3_5_0=e.VERSION_3_4_0=e.VERSION_3_2_0=e.ServerVersion=void 0;var n=Un(jn),r=Un(Vn),i=new RegExp("^(Neo4j/)?(\\d+)\\.(\\d+)(?:\\.)?(\\d*)(\\.|-|\\+)?([0-9A-Za-z-.]*)?$"),o=function(){function t(e,r,i,o){(0,n.default)(this,t),this.major=e,this.minor=r,this.patch=i,this._originalVersionString=o}return(0,r.default)(t,[{key:"compareTo",value:function(t){var e=a(this.major,t.major);return 0===e&&0===(e=a(this.minor,t.minor))&&(e=a(this.patch,t.patch)),e}},{key:"toString",value:function(){return this._originalVersionString?this._originalVersionString:"".concat(this.major,".").concat(this.minor,".").concat(this.patch)}}],[{key:"fromDriver",value:function(e){var n=e.session();return n.run("RETURN 1").then((function(e){return n.close().then((function(){return t.fromString(e.summary.server.version)}))}))}},{key:"fromString",value:function(e){if(!e)return new t(3,0,0);if((0,Qn.assertString)(e,"Neo4j version string"),e.toLowerCase()==="Neo4j/dev".toLowerCase())return d;var n=e.match(i);if(!n)throw new Error("Unparsable Neo4j version: ".concat(e));return new t(s(n[2]),s(n[3]),s(n[4]||0),e)}}]),t}();function s(t,e){var n=parseInt(t,10);if(!n&&0!==n)throw new Error("Unparsable number ".concat(e,": '").concat(t,"'"));return n}function a(t,e){return t<e?-1:t===e?0:1}e.ServerVersion=o;var u=o.fromString("Neo4j/3.2.0");e.VERSION_3_2_0=u;var c=o.fromString("Neo4j/3.4.0");e.VERSION_3_4_0=c;var l=o.fromString("Neo4j/3.5.0");e.VERSION_3_5_0=l;var h=o.fromString("Neo4j/4.0.0");e.VERSION_4_0_0=h;var f=Number.MAX_SAFE_INTEGER,d=new o(f,f,f,"Neo4j/dev");e.VERSION_IN_DEV=d}));Dt(Gc);Gc.VERSION_IN_DEV,Gc.VERSION_4_0_0,Gc.VERSION_3_5_0,Gc.VERSION_3_4_0,Gc.VERSION_3_2_0,Gc.ServerVersion;var Yc=Rt((function(t,e){
/** @license URI.js v4.2.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */
!function(t){function e(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];if(e.length>1){e[0]=e[0].slice(0,-1);for(var r=e.length-1,i=1;i<r;++i)e[i]=e[i].slice(1,-1);return e[r]=e[r].slice(1),e.join("")}return e[0]}function n(t){return"(?:"+t+")"}function r(t){return void 0===t?"undefined":null===t?"null":Object.prototype.toString.call(t).split(" ").pop().split("]").shift().toLowerCase()}function i(t){return t.toUpperCase()}function o(t){var r=e("[0-9]","[A-Fa-f]"),i=n(n("%[EFef]"+r+"%"+r+r+"%"+r+r)+"|"+n("%[89A-Fa-f]"+r+"%"+r+r)+"|"+n("%"+r+r)),o="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",s=e("[\\:\\/\\?\\#\\[\\]\\@]",o),a=t?"[\\uE000-\\uF8FF]":"[]",u=e("[A-Za-z]","[0-9]","[\\-\\.\\_\\~]",t?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]"),c=(n("[A-Za-z]"+e("[A-Za-z]","[0-9]","[\\+\\-\\.]")+"*"),n(n(i+"|"+e(u,o,"[\\:]"))+"*"),n(n("25[0-5]")+"|"+n("2[0-4][0-9]")+"|"+n("1[0-9][0-9]")+"|"+n("0?[1-9][0-9]")+"|0?0?[0-9]")),l=n(c+"\\."+c+"\\."+c+"\\."+c),h=n(r+"{1,4}"),f=n(n(h+"\\:"+h)+"|"+l),d=n(n(h+"\\:")+"{6}"+f),p=n("\\:\\:"+n(h+"\\:")+"{5}"+f),v=n(n(h)+"?\\:\\:"+n(h+"\\:")+"{4}"+f),m=n(n(n(h+"\\:")+"{0,1}"+h)+"?\\:\\:"+n(h+"\\:")+"{3}"+f),y=n(n(n(h+"\\:")+"{0,2}"+h)+"?\\:\\:"+n(h+"\\:")+"{2}"+f),g=n(n(n(h+"\\:")+"{0,3}"+h)+"?\\:\\:"+h+"\\:"+f),b=n(n(n(h+"\\:")+"{0,4}"+h)+"?\\:\\:"+f),_=n(n(n(h+"\\:")+"{0,5}"+h)+"?\\:\\:"+h),w=n(n(n(h+"\\:")+"{0,6}"+h)+"?\\:\\:"),E=n([d,p,v,m,y,g,b,_,w].join("|")),I=n(n(u+"|"+i)+"+"),T=(n("[vV]"+r+"+\\."+e(u,o,"[\\:]")+"+"),n(n(i+"|"+e(u,o))+"*"),n(i+"|"+e(u,o,"[\\:\\@]")));return n(n(i+"|"+e(u,o,"[\\@]"))+"+"),n(n(T+"|"+e("[\\/\\?]",a))+"*"),{NOT_SCHEME:new RegExp(e("[^]","[A-Za-z]","[0-9]","[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(e("[^\\%\\:]",u,o),"g"),NOT_HOST:new RegExp(e("[^\\%\\[\\]\\:]",u,o),"g"),NOT_PATH:new RegExp(e("[^\\%\\/\\:\\@]",u,o),"g"),NOT_PATH_NOSCHEME:new RegExp(e("[^\\%\\/\\@]",u,o),"g"),NOT_QUERY:new RegExp(e("[^\\%]",u,o,"[\\:\\@\\/\\?]",a),"g"),NOT_FRAGMENT:new RegExp(e("[^\\%]",u,o,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(e("[^]",u,o),"g"),UNRESERVED:new RegExp(u,"g"),OTHER_CHARS:new RegExp(e("[^\\%]",u,s),"g"),PCT_ENCODED:new RegExp(i,"g"),IPV4ADDRESS:new RegExp("^("+l+")$"),IPV6ADDRESS:new RegExp("^\\[?("+E+")"+n(n("\\%25|\\%(?!"+r+"{2})")+"("+I+")")+"?\\]?$")}}var s=o(!1),a=o(!0),u=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},c=2147483647,l=/^xn--/,h=/[^\0-\x7E]/,f=/[\x2E\u3002\uFF0E\uFF61]/g,d={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},p=Math.floor,v=String.fromCharCode;function m(t){throw new RangeError(d[t])}function y(t,e){var n=t.split("@"),r="";n.length>1&&(r=n[0]+"@",t=n[1]);var i=function(t,e){for(var n=[],r=t.length;r--;)n[r]=e(t[r]);return n}((t=t.replace(f,".")).split("."),e).join(".");return r+i}function g(t){for(var e=[],n=0,r=t.length;n<r;){var i=t.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var o=t.charCodeAt(n++);56320==(64512&o)?e.push(((1023&i)<<10)+(1023&o)+65536):(e.push(i),n--)}else e.push(i)}return e}var b=function(t,e){return t+22+75*(t<26)-((0!=e)<<5)},_=function(t,e,n){var r=0;for(t=n?p(t/700):t>>1,t+=p(t/e);t>455;r+=36)t=p(t/35);return p(r+36*t/(t+38))},w=function(t){var e,n=[],r=t.length,i=0,o=128,s=72,a=t.lastIndexOf("-");a<0&&(a=0);for(var u=0;u<a;++u)t.charCodeAt(u)>=128&&m("not-basic"),n.push(t.charCodeAt(u));for(var l=a>0?a+1:0;l<r;){for(var h=i,f=1,d=36;;d+=36){l>=r&&m("invalid-input");var v=(e=t.charCodeAt(l++))-48<10?e-22:e-65<26?e-65:e-97<26?e-97:36;(v>=36||v>p((c-i)/f))&&m("overflow"),i+=v*f;var y=d<=s?1:d>=s+26?26:d-s;if(v<y)break;var g=36-y;f>p(c/g)&&m("overflow"),f*=g}var b=n.length+1;s=_(i-h,b,0==h),p(i/b)>c-o&&m("overflow"),o+=p(i/b),i%=b,n.splice(i++,0,o)}return String.fromCodePoint.apply(String,n)},E=function(t){var e=[],n=(t=g(t)).length,r=128,i=0,o=72,s=!0,a=!1,u=void 0;try{for(var l,h=t[Symbol.iterator]();!(s=(l=h.next()).done);s=!0){var f=l.value;f<128&&e.push(v(f))}}catch(t){a=!0,u=t}finally{try{!s&&h.return&&h.return()}finally{if(a)throw u}}var d=e.length,y=d;for(d&&e.push("-");y<n;){var w=c,E=!0,I=!1,T=void 0;try{for(var k,S=t[Symbol.iterator]();!(E=(k=S.next()).done);E=!0){var x=k.value;x>=r&&x<w&&(w=x)}}catch(t){I=!0,T=t}finally{try{!E&&S.return&&S.return()}finally{if(I)throw T}}var O=y+1;w-r>p((c-i)/O)&&m("overflow"),i+=(w-r)*O,r=w;var A=!0,N=!1,D=void 0;try{for(var R,C=t[Symbol.iterator]();!(A=(R=C.next()).done);A=!0){var U=R.value;if(U<r&&++i>c&&m("overflow"),U==r){for(var P=i,L=36;;L+=36){var j=L<=o?1:L>=o+26?26:L-o;if(P<j)break;var M=P-j,V=36-j;e.push(v(b(j+M%V,0))),P=p(M/V)}e.push(v(b(P,0))),o=_(i,O,y==d),i=0,++y}}}catch(t){N=!0,D=t}finally{try{!A&&C.return&&C.return()}finally{if(N)throw D}}++i,++r}return e.join("")},I=function(t){return y(t,(function(t){return h.test(t)?"xn--"+E(t):t}))},T=function(t){return y(t,(function(t){return l.test(t)?w(t.slice(4).toLowerCase()):t}))},k={};function S(t){var e=t.charCodeAt(0);return e<16?"%0"+e.toString(16).toUpperCase():e<128?"%"+e.toString(16).toUpperCase():e<2048?"%"+(e>>6|192).toString(16).toUpperCase()+"%"+(63&e|128).toString(16).toUpperCase():"%"+(e>>12|224).toString(16).toUpperCase()+"%"+(e>>6&63|128).toString(16).toUpperCase()+"%"+(63&e|128).toString(16).toUpperCase()}function x(t){for(var e="",n=0,r=t.length;n<r;){var i=parseInt(t.substr(n+1,2),16);if(i<128)e+=String.fromCharCode(i),n+=3;else if(i>=194&&i<224){if(r-n>=6){var o=parseInt(t.substr(n+4,2),16);e+=String.fromCharCode((31&i)<<6|63&o)}else e+=t.substr(n,6);n+=6}else if(i>=224){if(r-n>=9){var s=parseInt(t.substr(n+4,2),16),a=parseInt(t.substr(n+7,2),16);e+=String.fromCharCode((15&i)<<12|(63&s)<<6|63&a)}else e+=t.substr(n,9);n+=9}else e+=t.substr(n,3),n+=3}return e}function O(t,e){function n(t){var n=x(t);return n.match(e.UNRESERVED)?n:t}return t.scheme&&(t.scheme=String(t.scheme).replace(e.PCT_ENCODED,n).toLowerCase().replace(e.NOT_SCHEME,"")),void 0!==t.userinfo&&(t.userinfo=String(t.userinfo).replace(e.PCT_ENCODED,n).replace(e.NOT_USERINFO,S).replace(e.PCT_ENCODED,i)),void 0!==t.host&&(t.host=String(t.host).replace(e.PCT_ENCODED,n).toLowerCase().replace(e.NOT_HOST,S).replace(e.PCT_ENCODED,i)),void 0!==t.path&&(t.path=String(t.path).replace(e.PCT_ENCODED,n).replace(t.scheme?e.NOT_PATH:e.NOT_PATH_NOSCHEME,S).replace(e.PCT_ENCODED,i)),void 0!==t.query&&(t.query=String(t.query).replace(e.PCT_ENCODED,n).replace(e.NOT_QUERY,S).replace(e.PCT_ENCODED,i)),void 0!==t.fragment&&(t.fragment=String(t.fragment).replace(e.PCT_ENCODED,n).replace(e.NOT_FRAGMENT,S).replace(e.PCT_ENCODED,i)),t}function A(t){return t.replace(/^0*(.*)/,"$1")||"0"}function N(t,e){var n=t.match(e.IPV4ADDRESS)||[],r=u(n,2)[1];return r?r.split(".").map(A).join("."):t}function D(t,e){var n=t.match(e.IPV6ADDRESS)||[],r=u(n,3),i=r[1],o=r[2];if(i){for(var s=i.toLowerCase().split("::").reverse(),a=u(s,2),c=a[0],l=a[1],h=l?l.split(":").map(A):[],f=c.split(":").map(A),d=e.IPV4ADDRESS.test(f[f.length-1]),p=d?7:8,v=f.length-p,m=Array(p),y=0;y<p;++y)m[y]=h[y]||f[v+y]||"";d&&(m[p-1]=N(m[p-1],e));var g=m.reduce((function(t,e,n){if(!e||"0"===e){var r=t[t.length-1];r&&r.index+r.length===n?r.length++:t.push({index:n,length:1})}return t}),[]).sort((function(t,e){return e.length-t.length}))[0],b=void 0;if(g&&g.length>1){var _=m.slice(0,g.index),w=m.slice(g.index+g.length);b=_.join(":")+"::"+w.join(":")}else b=m.join(":");return o&&(b+="%"+o),b}return t}var R=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,C=void 0==="".match(/(){0}/)[1];function U(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={},r=!1!==e.iri?a:s;"suffix"===e.reference&&(t=(e.scheme?e.scheme+":":"")+"//"+t);var i=t.match(R);if(i){C?(n.scheme=i[1],n.userinfo=i[3],n.host=i[4],n.port=parseInt(i[5],10),n.path=i[6]||"",n.query=i[7],n.fragment=i[8],isNaN(n.port)&&(n.port=i[5])):(n.scheme=i[1]||void 0,n.userinfo=-1!==t.indexOf("@")?i[3]:void 0,n.host=-1!==t.indexOf("//")?i[4]:void 0,n.port=parseInt(i[5],10),n.path=i[6]||"",n.query=-1!==t.indexOf("?")?i[7]:void 0,n.fragment=-1!==t.indexOf("#")?i[8]:void 0,isNaN(n.port)&&(n.port=t.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?i[4]:void 0)),n.host&&(n.host=D(N(n.host,r),r)),void 0!==n.scheme||void 0!==n.userinfo||void 0!==n.host||void 0!==n.port||n.path||void 0!==n.query?void 0===n.scheme?n.reference="relative":void 0===n.fragment?n.reference="absolute":n.reference="uri":n.reference="same-document",e.reference&&"suffix"!==e.reference&&e.reference!==n.reference&&(n.error=n.error||"URI is not a "+e.reference+" reference.");var o=k[(e.scheme||n.scheme||"").toLowerCase()];if(e.unicodeSupport||o&&o.unicodeSupport)O(n,r);else{if(n.host&&(e.domainHost||o&&o.domainHost))try{n.host=I(n.host.replace(r.PCT_ENCODED,x).toLowerCase())}catch(t){n.error=n.error||"Host's domain name can not be converted to ASCII via punycode: "+t}O(n,s)}o&&o.parse&&o.parse(n,e)}else n.error=n.error||"URI can not be parsed.";return n}function P(t,e){var n=!1!==e.iri?a:s,r=[];return void 0!==t.userinfo&&(r.push(t.userinfo),r.push("@")),void 0!==t.host&&r.push(D(N(String(t.host),n),n).replace(n.IPV6ADDRESS,(function(t,e,n){return"["+e+(n?"%25"+n:"")+"]"}))),"number"==typeof t.port&&(r.push(":"),r.push(t.port.toString(10))),r.length?r.join(""):void 0}var L=/^\.\.?\//,j=/^\/\.(\/|$)/,M=/^\/\.\.(\/|$)/,V=/^\/?(?:.|\n)*?(?=\/|$)/;function F(t){for(var e=[];t.length;)if(t.match(L))t=t.replace(L,"");else if(t.match(j))t=t.replace(j,"/");else if(t.match(M))t=t.replace(M,"/"),e.pop();else if("."===t||".."===t)t="";else{var n=t.match(V);if(!n)throw new Error("Unexpected dot segment condition");var r=n[0];t=t.slice(r.length),e.push(r)}return e.join("")}function $(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.iri?a:s,r=[],i=k[(e.scheme||t.scheme||"").toLowerCase()];if(i&&i.serialize&&i.serialize(t,e),t.host)if(n.IPV6ADDRESS.test(t.host));else if(e.domainHost||i&&i.domainHost)try{t.host=e.iri?T(t.host):I(t.host.replace(n.PCT_ENCODED,x).toLowerCase())}catch(n){t.error=t.error||"Host's domain name can not be converted to "+(e.iri?"Unicode":"ASCII")+" via punycode: "+n}O(t,n),"suffix"!==e.reference&&t.scheme&&(r.push(t.scheme),r.push(":"));var o=P(t,e);if(void 0!==o&&("suffix"!==e.reference&&r.push("//"),r.push(o),t.path&&"/"!==t.path.charAt(0)&&r.push("/")),void 0!==t.path){var u=t.path;e.absolutePath||i&&i.absolutePath||(u=F(u)),void 0===o&&(u=u.replace(/^\/\//,"/%2F")),r.push(u)}return void 0!==t.query&&(r.push("?"),r.push(t.query)),void 0!==t.fragment&&(r.push("#"),r.push(t.fragment)),r.join("")}function B(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments[3],i={};return r||(t=U($(t,n),n),e=U($(e,n),n)),!(n=n||{}).tolerant&&e.scheme?(i.scheme=e.scheme,i.userinfo=e.userinfo,i.host=e.host,i.port=e.port,i.path=F(e.path||""),i.query=e.query):(void 0!==e.userinfo||void 0!==e.host||void 0!==e.port?(i.userinfo=e.userinfo,i.host=e.host,i.port=e.port,i.path=F(e.path||""),i.query=e.query):(e.path?("/"===e.path.charAt(0)?i.path=F(e.path):(void 0===t.userinfo&&void 0===t.host&&void 0===t.port||t.path?t.path?i.path=t.path.slice(0,t.path.lastIndexOf("/")+1)+e.path:i.path=e.path:i.path="/"+e.path,i.path=F(i.path)),i.query=e.query):(i.path=t.path,void 0!==e.query?i.query=e.query:i.query=t.query),i.userinfo=t.userinfo,i.host=t.host,i.port=t.port),i.scheme=t.scheme),i.fragment=e.fragment,i}function W(t,e){return t&&t.toString().replace(e&&e.iri?a.PCT_ENCODED:s.PCT_ENCODED,x)}var q={scheme:"http",domainHost:!0,parse:function(t,e){return t.host||(t.error=t.error||"HTTP URIs must have a host."),t},serialize:function(t,e){return t.port!==("https"!==String(t.scheme).toLowerCase()?80:443)&&""!==t.port||(t.port=void 0),t.path||(t.path="/"),t}},z={scheme:"https",domainHost:q.domainHost,parse:q.parse,serialize:q.serialize},H={},G="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",Y="[0-9A-Fa-f]",K=n(n("%[EFef]"+Y+"%"+Y+Y+"%"+Y+Y)+"|"+n("%[89A-Fa-f]"+Y+"%"+Y+Y)+"|"+n("%"+Y+Y)),X=e("[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",'[\\"\\\\]'),J=new RegExp(G,"g"),Z=new RegExp(K,"g"),Q=new RegExp(e("[^]","[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]","[\\.]",'[\\"]',X),"g"),tt=new RegExp(e("[^]",G,"[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]"),"g"),et=tt;function nt(t){var e=x(t);return e.match(J)?e:t}var rt={scheme:"mailto",parse:function(t,e){var n=t,r=n.to=n.path?n.path.split(","):[];if(n.path=void 0,n.query){for(var i=!1,o={},s=n.query.split("&"),a=0,u=s.length;a<u;++a){var c=s[a].split("=");switch(c[0]){case"to":for(var l=c[1].split(","),h=0,f=l.length;h<f;++h)r.push(l[h]);break;case"subject":n.subject=W(c[1],e);break;case"body":n.body=W(c[1],e);break;default:i=!0,o[W(c[0],e)]=W(c[1],e)}}i&&(n.headers=o)}n.query=void 0;for(var d=0,p=r.length;d<p;++d){var v=r[d].split("@");if(v[0]=W(v[0]),e.unicodeSupport)v[1]=W(v[1],e).toLowerCase();else try{v[1]=I(W(v[1],e).toLowerCase())}catch(t){n.error=n.error||"Email address's domain name can not be converted to ASCII via punycode: "+t}r[d]=v.join("@")}return n},serialize:function(t,e){var n,r=t,o=null!=(n=t.to)?n instanceof Array?n:"number"!=typeof n.length||n.split||n.setInterval||n.call?[n]:Array.prototype.slice.call(n):[];if(o){for(var s=0,a=o.length;s<a;++s){var u=String(o[s]),c=u.lastIndexOf("@"),l=u.slice(0,c).replace(Z,nt).replace(Z,i).replace(Q,S),h=u.slice(c+1);try{h=e.iri?T(h):I(W(h,e).toLowerCase())}catch(t){r.error=r.error||"Email address's domain name can not be converted to "+(e.iri?"Unicode":"ASCII")+" via punycode: "+t}o[s]=l+"@"+h}r.path=o.join(",")}var f=t.headers=t.headers||{};t.subject&&(f.subject=t.subject),t.body&&(f.body=t.body);var d=[];for(var p in f)f[p]!==H[p]&&d.push(p.replace(Z,nt).replace(Z,i).replace(tt,S)+"="+f[p].replace(Z,nt).replace(Z,i).replace(et,S));return d.length&&(r.query=d.join("&")),r}},it=/^([^\:]+)\:(.*)/,ot={scheme:"urn",parse:function(t,e){var n=t.path&&t.path.match(it),r=t;if(n){var i=e.scheme||r.scheme||"urn",o=n[1].toLowerCase(),s=n[2],a=i+":"+(e.nid||o),u=k[a];r.nid=o,r.nss=s,r.path=void 0,u&&(r=u.parse(r,e))}else r.error=r.error||"URN can not be parsed.";return r},serialize:function(t,e){var n=e.scheme||t.scheme||"urn",r=t.nid,i=n+":"+(e.nid||r),o=k[i];o&&(t=o.serialize(t,e));var s=t,a=t.nss;return s.path=(r||e.nid)+":"+a,s}},st=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,at={scheme:"urn:uuid",parse:function(t,e){var n=t;return n.uuid=n.nss,n.nss=void 0,e.tolerant||n.uuid&&n.uuid.match(st)||(n.error=n.error||"UUID is not valid."),n},serialize:function(t,e){var n=t;return n.nss=(t.uuid||"").toLowerCase(),n}};k[q.scheme]=q,k[z.scheme]=z,k[rt.scheme]=rt,k[ot.scheme]=ot,k[at.scheme]=at,t.SCHEMES=k,t.pctEncChar=S,t.pctDecChars=x,t.parse=U,t.removeDotSegments=F,t.serialize=$,t.resolveComponents=B,t.resolve=function(t,e,n){var r=function(t,e){var n=t;if(e)for(var r in e)n[r]=e[r];return n}({scheme:"null"},n);return $(B(U(t,r),U(e,r),r,!0),r)},t.normalize=function(t,e){return"string"==typeof t?t=$(U(t,e),e):"object"===r(t)&&(t=U($(t,e),e)),t},t.equal=function(t,e,n){return"string"==typeof t?t=$(U(t,n),n):"object"===r(t)&&(t=$(t,n)),"string"==typeof e?e=$(U(e,n),n):"object"===r(e)&&(e=$(e,n)),t===e},t.escapeComponent=function(t,e){return t&&t.toString().replace(e&&e.iri?a.ESCAPE:s.ESCAPE,S)},t.unescapeComponent=W,Object.defineProperty(t,"__esModule",{value:!0})}(e)}));Dt(Yc);var Kc=Rt((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=Un(jn),r=function t(e,r,i,o,s){(0,n.default)(this,t),this.scheme=e,this.host=r,this.port=i,this.hostAndPort=o,this.query=s};function i(t,e,n){if(!(t=(t||"").trim()))throw new Error("Illegal empty ".concat(e," in URL query '").concat(n,"'"));return t}function o(t){var e="["===t.charAt(0),n="]"===t.charAt(t.length-1);if(e||n){if(e&&n)return t;throw new Error("Illegal IPv6 address ".concat(t))}return"[".concat(t,"]")}function s(t){return"http"===t?7474:"https"===t?7473:7687}var a={parseDatabaseUrl:function(t){(0,Qn.assertString)(t,"URL");var e=function(t){if(-1===(t=t.trim()).indexOf("://"))return{schemeMissing:!0,url:"none://".concat(t)};return{schemeMissing:!1,url:t}}(t),n=(0,Yc.parse)(e.url),a=e.schemeMissing?null:function(t){if(t)return":"===(t=t.trim()).charAt(t.length-1)&&(t=t.substring(0,t.length-1)),t;return null}(n.scheme),u=function(t,e){if(!t)throw new Error("Unable to extract host from ".concat(e));return t.trim()}(n.host),c=function(t){if(!t)throw new Error("Illegal host ".concat(t));return t.indexOf(":")>=0?o(t):t}(u),l=function(t,e){var n=parseInt(t,10);return 0===n||n?n:s(e)}(n.port,a),h="".concat(c,":").concat(l),f=function(t,e){var n=function(t){(t=(t||"").trim())&&"?"===t.charAt(0)&&(t=t.substring(1,t.length));return t}(t),r={};n&&n.split("&").forEach((function(t){var n=t.split("=");if(2!==n.length)throw new Error("Invalid parameters: '".concat(n,"' in URL '").concat(e,"'."));var o=i(n[0],"key",e),s=i(n[1],"value",e);if(r[o])throw new Error("Duplicated query parameters with key '".concat(o,"' in URL '").concat(e,"'"));r[o]=s}));return r}(n.query,t);return new r(a,u,l,h,f)},defaultPortForScheme:s,formatIPv4Address:function(t,e){return"".concat(t,":").concat(e)},formatIPv6Address:function(t,e){var n=o(t);return"".concat(n,":").concat(e)}};e.default=a}));Dt(Kc);var Xc=Rt((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=Un(jn),r=Un(Vn),i=Un(Kc),o=function(){function t(e,r,i,o){(0,n.default)(this,t),this._host=(0,Qn.assertString)(e,"host"),this._resolved=r?(0,Qn.assertString)(r,"resolved"):null,this._port=(0,Qn.assertNumber)(i,"port"),this._hostPort=o,this._stringValue=r?"".concat(o,"(").concat(r,")"):"".concat(o)}return(0,r.default)(t,[{key:"host",value:function(){return this._host}},{key:"resolvedHost",value:function(){return this._resolved?this._resolved:this._host}},{key:"port",value:function(){return this._port}},{key:"resolveWith",value:function(e){return new t(this._host,e,this._port,this._hostPort)}},{key:"asHostPort",value:function(){return this._hostPort}},{key:"asKey",value:function(){return this._hostPort}},{key:"toString",value:function(){return this._stringValue}}],[{key:"fromUrl",value:function(e){var n=i.default.parseDatabaseUrl(e);return new t(n.host,null,n.port,n.hostAndPort)}}]),t}();e.default=o}));Dt(Xc);var Jc=Rt((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=Un(sr),r=Un(Br),i=Un(jn),o=Un(Vn),s=Ln(Xn),a=(Un(nr),Un(li),Un(Pr)),u=Un(Xc),c="CALL dbms.cluster.routing.getRoutingTable($".concat("context",")"),l="CALL dbms.routing.getRoutingTable($".concat("context",", $").concat("database",")"),h=function(){function t(e,n){(0,i.default)(this,t),this._routingContext=e,this._initialAddress=n}var e;return(0,o.default)(t,[{key:"callRoutingProcedure",value:(e=(0,r.default)(n.default.mark((function t(e,r,i){var o;return n.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this._callAvailableRoutingProcedure(e,r);case 3:return o=t.sent,t.next=6,e.close();case 6:return t.abrupt("return",o.records);case 9:if(t.prev=9,t.t0=t.catch(0),"Neo.ClientError.Database.DatabaseNotFound"!==t.t0.code){t.next=15;break}throw t.t0;case 15:if("Neo.ClientError.Procedure.ProcedureNotFound"!==t.t0.code){t.next=19;break}throw(0,Kn.newError)("Server at ".concat(i.asHostPort()," can't perform routing. Make sure you are connecting to a causal cluster"),Kn.SERVICE_UNAVAILABLE);case 19:return t.abrupt("return",null);case 20:case"end":return t.stop()}}),t,this,[[0,9]])}))),function(t,n,r){return e.apply(this,arguments)})},{key:"parseTtl",value:function(t,e){try{var n=(0,s.int)(Date.now()),r=(0,s.int)(t.get("ttl")).multiply(1e3).add(n);return r.lessThan(n)?s.default.MAX_VALUE:r}catch(n){throw(0,Kn.newError)("Unable to parse TTL entry from router ".concat(e," from record:\n").concat(JSON.stringify(t),"\nError message: ").concat(n.message),Kn.PROTOCOL_ERROR)}}},{key:"parseServers",value:function(t,e){try{var n=t.get("servers"),r=[],i=[],o=[];return n.forEach((function(t){var e=t.role,n=t.addresses;if("ROUTE"===e)r=f(n).map((function(t){return u.default.fromUrl(t)}));else if("WRITE"===e)o=f(n).map((function(t){return u.default.fromUrl(t)}));else{if("READ"!==e)throw(0,Kn.newError)('Unknown server role "'+e+'"',Kn.PROTOCOL_ERROR);i=f(n).map((function(t){return u.default.fromUrl(t)}))}})),{routers:r,readers:i,writers:o}}catch(n){throw(0,Kn.newError)("Unable to parse servers entry from router ".concat(e," from record:\n").concat(JSON.stringify(t),"\nError message: ").concat(n.message),Kn.PROTOCOL_ERROR)}}},{key:"_callAvailableRoutingProcedure",value:function(t,e){var n=this;return t._run(null,null,(function(r){var i,o;return r.protocol().version>=4?(i=l,(o={context:n._routingContext||{},database:e||null}).context.address=n._initialAddress):(i=c,o={context:n._routingContext}),r.protocol().run(i,o,{bookmark:t._lastBookmark,txConfig:a.default.empty(),mode:t._mode,database:t._database,afterComplete:t._onComplete})}))}}]),t}();function f(t){if(!Array.isArray(t))throw new TypeError("Array expected but got: "+t);return Array.from(t)}e.default=h}));Dt(Jc);var Zc=Rt((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=Un(sr),r=Un(Br),i=Un(jn),o=Un(Vn),s=Un(Hc),a=(Un(Jc),function(){function t(e){(0,i.default)(this,t),this._routingUtil=e}var e;return(0,o.default)(t,[{key:"lookupRoutingTableOnRouter",value:(e=(0,r.default)(n.default.mark((function e(r,i,o){var a,u,c,l,h,f,d;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._routingUtil.callRoutingProcedure(r,i,o);case 2:if(null!==(a=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:if(1===a.length){e.next=7;break}throw(0,Kn.newError)('Illegal response from router "'+o+'". Received '+a.length+" records but expected only one.\n"+JSON.stringify(a),Kn.PROTOCOL_ERROR);case 7:return u=a[0],c=this._routingUtil.parseTtl(u,o),l=this._routingUtil.parseServers(u,o),h=l.routers,f=l.readers,d=l.writers,t._assertNonEmpty(h,"routers",o),t._assertNonEmpty(f,"readers",o),e.abrupt("return",new s.default({database:i,routers:h,readers:f,writers:d,expirationTime:c}));case 13:case"end":return e.stop()}}),e,this)}))),function(t,n,r){return e.apply(this,arguments)})}],[{key:"_assertNonEmpty",value:function(t,e,n){if(0===t.length)throw(0,Kn.newError)("Received no "+e+" from router "+n,Kn.PROTOCOL_ERROR)}}]),t}());e.default=a}));Dt(Zc);var Qc=Rt((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=Un(jn),r=Un(Vn),i=Un($n),o=Un(Wn),s=Un(qn);function a(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,s.default)(t);if(e){var i=(0,s.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,o.default)(this,n)}}var u=function(t){(0,i.default)(o,t);var e=a(o);function o(t){var r;return(0,n.default)(this,o),(r=e.call(this))._connection=t,r}return(0,r.default)(o,[{key:"acquireConnection",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=(t.accessMode,t.database,t.bookmarks,this._connection);return this._connection=null,Promise.resolve(e)}}]),o}(Un(Fr).default);e.default=u}));Dt(Qc);var tl=Rt((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=Un(jn),r=Un(Vn),i=function(){function t(e){(0,n.default)(this,t),this._offset=e||0}return(0,r.default)(t,[{key:"next",value:function(t){if(0===t)return-1;var e=this._offset;return this._offset+=1,this._offset===Number.MAX_SAFE_INTEGER&&(this._offset=0),e%t}}]),t}();e.default=i}));Dt(tl);var el=Rt((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=Un(jn),r=Un(Vn),i=function(){function t(){(0,n.default)(this,t)}return(0,r.default)(t,[{key:"selectReader",value:function(t){throw new Error("Abstract function")}},{key:"selectWriter",value:function(t){throw new Error("Abstract function")}}]),t}();e.default=i}));Dt(el);var nl=Rt((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=Un(jn),r=Un(Vn),i=Un($n),o=Un(Wn),s=Un(qn),a=Un(tl);function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,s.default)(t);if(e){var i=(0,s.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,o.default)(this,n)}}var c=function(t){(0,i.default)(o,t);var e=u(o);function o(t){var r;return(0,n.default)(this,o),(r=e.call(this))._readersIndex=new a.default,r._writersIndex=new a.default,r._connectionPool=t,r}return(0,r.default)(o,[{key:"selectReader",value:function(t){return this._select(t,this._readersIndex)}},{key:"selectWriter",value:function(t){return this._select(t,this._writersIndex)}},{key:"_select",value:function(t,e){var n=t.length;if(0===n)return null;var r=e.next(n),i=r,o=null,s=Number.MAX_SAFE_INTEGER;do{var a=t[i],u=this._connectionPool.activeResourceCount(a);u<s&&(o=a,s=u),i===n-1?i=0:i++}while(i!==r);return o}}]),o}(Un(el).default);e.default=c}));Dt(nl);var rl=Rt((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=Un(sr),r=Un(Br),i=Un(jn),o=Un(Vn),s=Un($n),a=Un(Wn),u=Un(qn),c=Un(li),l=Un(Hc),h=Un(Zc),f=Un(Jc),d=Un(Qc),p=Un(ii),v=Un(ri),m=Un(oi),y=Un(nl),g=Un(nr),b=Un(Qr);function _(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,u.default)(t);if(e){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,a.default)(this,n)}}var w=(0,Xn.int)(3e4),E=function(t){(0,s.default)(D,t);var e,a,u,p,E,I,T,k,S,x,O,A,N=_(D);function D(t){var e,n=t.id,r=t.address,o=t.routingContext,s=t.hostNameResolver,a=t.config,u=t.log,c=t.userAgent,l=t.authToken,d=t.routingTablePurgeDelay;return(0,i.default)(this,D),(e=N.call(this,{id:n,config:a,log:u,userAgent:c,authToken:l},(function(t){return b.default.create(t,e._config,e._createConnectionErrorHandler(),e._log,o||{})})))._seedRouter=r,e._routingTables={},e._rediscovery=new h.default(new f.default(o,r.toString())),e._loadBalancingStrategy=new y.default(e._connectionPool),e._hostNameResolver=s,e._dnsResolver=new Nr.HostNameResolver,e._log=u,e._useSeedRouter=!0,e._routingTablePurgeDelay=d?(0,Xn.int)(d):w,e}return(0,o.default)(D,[{key:"_createConnectionErrorHandler",value:function(){return new v.default(Kn.SESSION_EXPIRED)}},{key:"_handleUnavailability",value:function(t,e,n){return this._log.warn("Routing driver ".concat(this._id," will forget ").concat(e," for database '").concat(n,"' because of an error ").concat(t.code," '").concat(t.message,"'")),this.forget(e,n||""),t}},{key:"_handleWriteFailure",value:function(t,e,n){return this._log.warn("Routing driver ".concat(this._id," will forget writer ").concat(e," for database '").concat(n,"' because of an error ").concat(t.code," '").concat(t.message,"'")),this.forgetWriter(e,n||""),(0,Kn.newError)("No longer possible to write to server at "+e,Kn.SESSION_EXPIRED)}},{key:"acquireConnection",value:(A=(0,r.default)(n.default.mark((function t(){var e,r,i,o,s,a,u,c,l,h=this,f=arguments;return n.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=f.length>0&&void 0!==f[0]?f[0]:{},r=e.accessMode,i=e.database,o=e.bookmark,u=new v.default(Kn.SESSION_EXPIRED,(function(t,e){return h._handleUnavailability(t,e,i)}),(function(t,e){return h._handleWriteFailure(t,e,i)})),t.next=4,this._freshRoutingTable({accessMode:r,database:i||"",bookmark:o});case 4:if(c=t.sent,r!==$c.READ){t.next=10;break}a=this._loadBalancingStrategy.selectReader(c.readers),s="read",t.next=16;break;case 10:if(r!==$c.WRITE){t.next=15;break}a=this._loadBalancingStrategy.selectWriter(c.writers),s="write",t.next=16;break;case 15:throw(0,Kn.newError)("Illegal mode "+r);case 16:if(a){t.next=18;break}throw(0,Kn.newError)("Failed to obtain connection towards ".concat(s," server. Known routing table is: ").concat(c),Kn.SESSION_EXPIRED);case 18:return t.prev=18,t.next=21,this._acquireConnectionToServer(a,s,c);case 21:return l=t.sent,t.abrupt("return",new m.default(l,u));case 25:throw t.prev=25,t.t0=t.catch(18),u.handleAndTransformError(t.t0,a);case 29:case"end":return t.stop()}}),t,this,[[18,25]])}))),function(){return A.apply(this,arguments)})},{key:"_hasProtocolVersion",value:(O=(0,r.default)(n.default.mark((function t(e){var r,i,o,s,a;return n.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._resolveSeedRouter(this._seedRouter);case 2:r=t.sent,o=0;case 4:if(!(o<r.length)){t.next=25;break}return s=b.default.create(r[o],this._config,this._createConnectionErrorHandler(),this._log),t.prev=6,t.next=9,s._negotiateProtocol();case 9:if(!(a=s.protocol())){t.next=12;break}return t.abrupt("return",e(a.version));case 12:return t.abrupt("return",!1);case 15:t.prev=15,t.t0=t.catch(6),i=t.t0;case 18:return t.prev=18,t.next=21,s.close();case 21:return t.finish(18);case 22:o++,t.next=4;break;case 25:if(!i){t.next=27;break}throw i;case 27:return t.abrupt("return",!1);case 28:case"end":return t.stop()}}),t,this,[[6,15,18,22]])}))),function(t){return O.apply(this,arguments)})},{key:"supportsMultiDb",value:(x=(0,r.default)(n.default.mark((function t(){return n.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._hasProtocolVersion((function(t){return t>=tr.BOLT_PROTOCOL_V4_0}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)}))),function(){return x.apply(this,arguments)})},{key:"supportsTransactionConfig",value:(S=(0,r.default)(n.default.mark((function t(){return n.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._hasProtocolVersion((function(t){return t>=tr.BOLT_PROTOCOL_V3}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)}))),function(){return S.apply(this,arguments)})},{key:"forget",value:function(t,e){e||""===e?this._routingTables[e].forget(t):Object.values(this._routingTables).forEach((function(e){return e.forget(t)})),this._connectionPool.purge(t).catch((function(){}))}},{key:"forgetWriter",value:function(t,e){e||""===e?this._routingTables[e].forgetWriter(t):Object.values(this._routingTables).forEach((function(e){return e.forgetWriter(t)}))}},{key:"_acquireConnectionToServer",value:function(t,e,n){return this._connectionPool.acquire(t)}},{key:"_freshRoutingTable",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.accessMode,n=t.database,r=t.bookmark,i=this._routingTables[n]||new l.default({database:n});return i.isStaleFor(e)?(this._log.info('Routing table is stale for database: "'.concat(n,'" and access mode: "').concat(e,'": ').concat(i)),this._refreshRoutingTable(i,r)):i}},{key:"_refreshRoutingTable",value:function(t,e){var n=t.routers;return this._useSeedRouter?this._fetchRoutingTableFromSeedRouterFallbackToKnownRouters(n,t,e):this._fetchRoutingTableFromKnownRoutersFallbackToSeedRouter(n,t,e)}},{key:"_fetchRoutingTableFromSeedRouterFallbackToKnownRouters",value:(k=(0,r.default)(n.default.mark((function t(e,r,i){var o,s;return n.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=[],t.next=3,this._fetchRoutingTableUsingSeedRouter(o,this._seedRouter,r,i);case 3:if(!(s=t.sent)){t.next=8;break}this._useSeedRouter=!1,t.next=11;break;case 8:return t.next=10,this._fetchRoutingTableUsingKnownRouters(e,r,i);case 10:s=t.sent;case 11:return t.next=13,this._applyRoutingTableIfPossible(r,s);case 13:return t.abrupt("return",t.sent);case 14:case"end":return t.stop()}}),t,this)}))),function(t,e,n){return k.apply(this,arguments)})},{key:"_fetchRoutingTableFromKnownRoutersFallbackToSeedRouter",value:(T=(0,r.default)(n.default.mark((function t(e,r,i){var o;return n.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._fetchRoutingTableUsingKnownRouters(e,r,i);case 2:if(o=t.sent){t.next=7;break}return t.next=6,this._fetchRoutingTableUsingSeedRouter(e,this._seedRouter,r,i);case 6:o=t.sent;case 7:return t.next=9,this._applyRoutingTableIfPossible(r,o);case 9:return t.abrupt("return",t.sent);case 10:case"end":return t.stop()}}),t,this)}))),function(t,e,n){return T.apply(this,arguments)})},{key:"_fetchRoutingTableUsingKnownRouters",value:(I=(0,r.default)(n.default.mark((function t(e,r,i){var o,s;return n.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._fetchRoutingTable(e,r,i);case 2:if(!(o=t.sent)){t.next=5;break}return t.abrupt("return",o);case 5:return s=e.length-1,D._forgetRouter(r,e,s),t.abrupt("return",null);case 8:case"end":return t.stop()}}),t,this)}))),function(t,e,n){return I.apply(this,arguments)})},{key:"_fetchRoutingTableUsingSeedRouter",value:(E=(0,r.default)(n.default.mark((function t(e,r,i,o){var s,a;return n.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._resolveSeedRouter(r);case 2:return s=t.sent,a=s.filter((function(t){return e.indexOf(t)<0})),t.next=6,this._fetchRoutingTable(a,i,o);case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t,this)}))),function(t,e,n,r){return E.apply(this,arguments)})},{key:"_resolveSeedRouter",value:(p=(0,r.default)(n.default.mark((function t(e){var r,i,o=this;return n.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._hostNameResolver.resolve(e);case 2:return r=t.sent,t.next=5,Promise.all(r.map((function(t){return o._dnsResolver.resolve(t)})));case 5:return i=t.sent,t.abrupt("return",[].concat.apply([],i));case 7:case"end":return t.stop()}}),t,this)}))),function(t){return p.apply(this,arguments)})},{key:"_fetchRoutingTable",value:function(t,e,i){var o=this;return t.reduce(function(){var s=(0,r.default)(n.default.mark((function r(s,a,u){var c,l,h;return n.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,s;case 2:if(!(c=n.sent)){n.next=7;break}return n.abrupt("return",c);case 7:l=u-1,D._forgetRouter(e,t,l);case 9:return n.next=11,o._createSessionForRediscovery(a,i);case 11:if(!(h=n.sent)){n.next=27;break}return n.prev=13,n.next=16,o._rediscovery.lookupRoutingTableOnRouter(h,e.database,a);case 16:return n.abrupt("return",n.sent);case 19:if(n.prev=19,n.t0=n.catch(13),!n.t0||"Neo.ClientError.Database.DatabaseNotFound"!==n.t0.code){n.next=23;break}throw n.t0;case 23:return o._log.warn("unable to fetch routing table because of an error ".concat(n.t0)),n.abrupt("return",null);case 25:n.next=28;break;case 27:return n.abrupt("return",null);case 28:case"end":return n.stop()}}),r,null,[[13,19]])})));return function(t,e,n){return s.apply(this,arguments)}}(),Promise.resolve(null))}},{key:"_createSessionForRediscovery",value:(u=(0,r.default)(n.default.mark((function t(e,r){var i,o;return n.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this._connectionPool.acquire(e);case 3:if(i=t.sent,o=new d.default(i),!(i.protocol().version<4)){t.next=8;break}return t.abrupt("return",new c.default({mode:$c.WRITE,bookmark:g.default.empty(),connectionProvider:o}));case 8:return t.abrupt("return",new c.default({mode:$c.READ,database:"system",bookmark:r,connectionProvider:o}));case 11:if(t.prev=11,t.t0=t.catch(0),!t.t0||"Neo.ClientError.Security.Unauthorized"!==t.t0.code){t.next=15;break}throw t.t0;case 15:return t.abrupt("return",null);case 16:case"end":return t.stop()}}),t,this,[[0,11]])}))),function(t,e){return u.apply(this,arguments)})},{key:"_applyRoutingTableIfPossible",value:(a=(0,r.default)(n.default.mark((function t(e,r){return n.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r){t.next=2;break}throw(0,Kn.newError)("Could not perform discovery. No routing servers available. Known routing table: ".concat(e),Kn.SERVICE_UNAVAILABLE);case 2:return 0===r.writers.length&&(this._useSeedRouter=!0),t.next=5,this._updateRoutingTable(r);case 5:return t.abrupt("return",r);case 6:case"end":return t.stop()}}),t,this)}))),function(t,e){return a.apply(this,arguments)})},{key:"_updateRoutingTable",value:(e=(0,r.default)(n.default.mark((function t(e){var r=this;return n.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._connectionPool.keepAll(e.allServers());case 2:Object.values(this._routingTables).forEach((function(t){t.isExpiredFor(r._routingTablePurgeDelay)&&delete r._routingTables[t.database]})),this._routingTables[e.database]=e,this._log.info("Updated routing table ".concat(e));case 5:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})}],[{key:"_forgetRouter",value:function(t,e,n){var r=e[n];t&&r&&t.forgetRouter(r)}}]),D}(p.default);e.default=E}));Dt(rl);var il=Rt((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=Un(jn),r=Un(Vn),i=Un(Xc);function o(t){return Promise.resolve([t])}var s=function(){function t(e){(0,n.default)(this,t),this._resolverFunction=e||o}return(0,r.default)(t,[{key:"resolve",value:function(t){var e=this;return new Promise((function(n){return n(e._resolverFunction(t.asHostPort()))})).then((function(t){if(!Array.isArray(t))throw new TypeError("Configured resolver function should either return an array of addresses or a Promise resolved with an array of addresses."+"Each address is '<host>:<port>'. Got: ".concat(t));return t.map((function(t){return i.default.fromUrl(t)}))}))}}]),t}();e.default=s}));Dt(il);var ol=Rt((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=Un(jn),r=Un(Vn),i=Un($n),o=Un(Wn),s=Un(qn),a=Un(rl),u=(Un(nl),Un(ri),Un(il));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,s.default)(t);if(e){var i=(0,s.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,o.default)(this,n)}}function l(t){return new u.default(t.resolver)}function h(t){var e=t.resolver;if(e&&"function"!=typeof e)throw new TypeError("Configured resolver should be a function. Got: ".concat(e));return t}var f=function(t){(0,i.default)(o,t);var e=c(o);function o(t,r,i){var s,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return(0,n.default)(this,o),(s=e.call(this,t,i,a,h(u)))._routingContext=r,s}return(0,r.default)(o,[{key:"_afterConstruction",value:function(){this._log.info("Routing driver ".concat(this._id," created for server address ").concat(this._address))}},{key:"_createConnectionProvider",value:function(t,e,n){return new a.default({id:this._id,address:t,routingContext:this._routingContext,hostNameResolver:l(this._config),config:this._config,log:this._log,userAgent:e,authToken:n})}},{key:"_supportsRouting",value:function(){return!0}}]),o}($c.Driver);e.default=f}));Dt(ol);var sl=Rt((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default="0.0.0-dev"}));Dt(sl);var al=Rt((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.driver=l,Object.defineProperty(e,"int",{enumerable:!0,get:function(){return n.int}}),Object.defineProperty(e,"isInt",{enumerable:!0,get:function(){return n.isInt}}),Object.defineProperty(e,"Neo4jError",{enumerable:!0,get:function(){return Kn.Neo4jError}}),Object.defineProperty(e,"isPoint",{enumerable:!0,get:function(){return qr.isPoint}}),Object.defineProperty(e,"isDate",{enumerable:!0,get:function(){return Hr.isDate}}),Object.defineProperty(e,"isDateTime",{enumerable:!0,get:function(){return Hr.isDateTime}}),Object.defineProperty(e,"isDuration",{enumerable:!0,get:function(){return Hr.isDuration}}),Object.defineProperty(e,"isLocalDateTime",{enumerable:!0,get:function(){return Hr.isLocalDateTime}}),Object.defineProperty(e,"isLocalTime",{enumerable:!0,get:function(){return Hr.isLocalTime}}),Object.defineProperty(e,"isTime",{enumerable:!0,get:function(){return Hr.isTime}}),e.default=e.temporal=e.spatial=e.error=e.session=e.types=e.logging=e.auth=e.integer=void 0;var n=Ln(Xn),r=Un(Vr),i=Un(Zn),o=Un(dr),s=Un(ol),a=Un(sl),u=Un(Kc),c=Un(Xc);function l(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,Qn.assertString)(t,"Bolt URL");var r,i=u.default.parseDatabaseUrl(t),o=!1,a=!1;switch(i.scheme){case"bolt":break;case"bolt+s":a=!0,r="TRUST_SYSTEM_CA_SIGNED_CERTIFICATES";break;case"bolt+ssc":a=!0,r="TRUST_ALL_CERTIFICATES";break;case"neo4j":o=!0;break;case"neo4j+s":a=!0,r="TRUST_SYSTEM_CA_SIGNED_CERTIFICATES",o=!0;break;case"neo4j+ssc":a=!0,r="TRUST_ALL_CERTIFICATES",o=!0;break;default:throw new Error("Unknown scheme: ".concat(i.scheme))}if(a){if("encrypted"in n||"trust"in n)throw new Error("Encryption/trust can only be configured either through URL or config, not both");n.encrypted=Qn.ENCRYPTION_ON,n.trust=r}if((e=e||{}).scheme=e.scheme||"none",n.userAgent=n.userAgent||f,o)return new s.default(c.default.fromUrl(i.hostAndPort),i.query,n.userAgent,e,n);if(!(0,Qn.isEmptyObjectOrNull)(i.query))throw new Error("Parameters are not supported with none routed scheme. Given URL: '".concat(t,"'"));return new $c.Driver(c.default.fromUrl(i.hostAndPort),n.userAgent,e,n)}var h={basic:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return n?{scheme:"basic",principal:t,credentials:e,realm:n}:{scheme:"basic",principal:t,credentials:e}},kerberos:function(t){return{scheme:"kerberos",principal:"",credentials:t}},custom:function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;return i?{scheme:r,principal:t,credentials:e,realm:n,parameters:i}:{scheme:r,principal:t,credentials:e,realm:n}}};e.auth=h;var f="neo4j-javascript/"+a.default,d={console:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){return{level:t,logger:function(t,e){return console.log("".concat(At.Date.now()," ").concat(t.toUpperCase()," ").concat(e))}}}))};e.logging=d;var p={Node:Jn.Node,Relationship:Jn.Relationship,UnboundRelationship:Jn.UnboundRelationship,PathSegment:Jn.PathSegment,Path:Jn.Path,Result:r.default,ResultSummary:i.default,Record:o.default,Point:qr.Point,Date:Hr.Date,DateTime:Hr.DateTime,Duration:Hr.Duration,LocalDateTime:Hr.LocalDateTime,LocalTime:Hr.LocalTime,Time:Hr.Time,Integer:n.default};e.types=p;var v={READ:$c.READ,WRITE:$c.WRITE};e.session=v;var m={SERVICE_UNAVAILABLE:Kn.SERVICE_UNAVAILABLE,SESSION_EXPIRED:Kn.SESSION_EXPIRED,PROTOCOL_ERROR:Kn.PROTOCOL_ERROR};e.error=m;var y={toNumber:n.toNumber,toString:n.toString,inSafeRange:n.inSafeRange};e.integer=y;var g={isPoint:qr.isPoint};e.spatial=g;var b={isDuration:Hr.isDuration,isLocalTime:Hr.isLocalTime,isTime:Hr.isTime,isDate:Hr.isDate,isLocalDateTime:Hr.isLocalDateTime,isDateTime:Hr.isDateTime};e.temporal=b;var _={driver:l,int:n.int,isInt:n.isInt,isPoint:qr.isPoint,isDuration:Hr.isDuration,isLocalTime:Hr.isLocalTime,isTime:Hr.isTime,isDate:Hr.isDate,isLocalDateTime:Hr.isLocalDateTime,isDateTime:Hr.isDateTime,integer:y,Neo4jError:Kn.Neo4jError,auth:h,logging:d,types:p,session:v,error:m,spatial:g,temporal:b};e.default=_})),ul=Dt(al);al.driver,al.temporal,al.spatial,al.error,al.session,al.types,al.logging,al.auth,al.integer;const cl=ul.driver("bolt://35.202.136.28:7687",ul.auth.basic("neo4j","test"),{disableLosslessIntegers:!0}),ll=()=>{let t="";nn.subscribe(e=>t=e);let e="";rn.subscribe(t=>e=t);let n="";on.subscribe(t=>n=t);const r=cl.session({database:t});return r.run(` USE ${t}.${e}\n      MATCH (a:Account)<-[jour:JOURNAL]-(v:Value)\n      WHERE NOT EXISTS(jour.until)\n      OPTIONAL MATCH (v)-[tags:TAGS]->(t:Tag)\n      OPTIONAL MATCH (v)-[valueR]->(p:Persona)\n      OPTIONAL MATCH (v)<-[:COMES_FROM]-(n:Natural)\n      WITH collect(DISTINCT {title:'Persona',value:p.name,portion:valueR.portion/v.amount,total:v.amount}) as persona,properties(jour) as journal,apoc.map.mergeList(collect(apoc.map.setKey({},t.tagGroup,t.tagName))) as tags,collect(DISTINCT{title:t.tagGroup,value:t.tagName, portion:tags.portion/v.amount,total:v.amount,order:t.order}) as tags2, {\`balanço\`:a.\`balanço\`, grupo:a.grupo, rubrica:a.rubrica, order:a.order, naturalUUIDs:collect(DISTINCT n.uuid)} as accdount,{dataCompetencia:v.\`Data de competência\`, dataVencimento:v.\`Data de competência\`} as datas,a\n      with apoc.map.mergeList([journal,datas,accdount,{},{tags:tags2+persona}]) as journal,a\n      WITH CASE\n      WHEN a.nature = journal.nature THEN 1\n      WHEN a.nature <> journal.nature THEN -1\n      END as sinal,journal\n    with sum(journal.portion*sinal) as amount, journal,split(journal.dataCompetencia,"-")[0] as year,split(journal.dataCompetencia,"-")[1] as  month\n    WITH journal,amount,year,month\n    CALL apoc.mongodb.find('mongodb://mcbenner:mcbenner15@104.198.131.90:27017', 'realFlow', 'details', {uuid:journal.naturalUUIDs[0]},{_id:0},{},  false, 0,0,false, true) yield value\n    RETURN value as \`journal.natural\`,journal.order,journal.uuid,journal.balanço,journal.grupo,journal.rubrica,journal.tags,SUM(amount) as amount,year,month`,{userID:n,clientDB:e,fabricDB:t}).then(t=>{r.close();return t.records.map(t=>t.toObject())}).catch(t=>(r.close(),console.log(t),[]))},hl=[{name:"Ativo",order:1},{name:"data",order:0},{name:"Passivo",order:2},{name:"Despesas",order:1},{name:"Não Operacionais",order:1},{name:null,order:null},{name:null,order:null},{name:"Típicas de Escritório",order:1},{name:"Serviços",order:2},{name:"Impostos Retidos",order:2},{name:"Custo",order:2},{name:"Operacionais",order:3},{name:"Projeto DUO",order:1},{name:"Projeto UNO",order:2},{name:"Bens móveis de difícil realização",order:0},{name:"Provisão",order:10},{name:"Quitação",order:20},{name:"Orçado",order:30},{name:"Gastos com aluguel, condomínio, IPTU e estacionamento",order:40},{name:"Gastos com energia elétrica, água e esgoto",order:50},{name:"Gastos com decoração, móveis, equipamentos etc.",order:60},{name:"Gastos com diarista, serviços diversos e manutenção",order:70},{name:"Gastos com material de higiene, de limpeza, café, água potável etc.",order:80},{name:"Gastos com telefone, internet e tecnologia",order:90},{name:"Gastos com correios, cartórios, material de expediente etc.",order:100},{name:"Gastos com divulgação e anúncios",order:110},{name:"Gastos desenvolvimento de peças e estratégias de mercado",order:120},{name:"Gastos com visitas promocionais a clientes",order:130},{name:"Gastos com cursos e congressos",order:140},{name:"Gastos com livros e materiais online",order:150},{name:"Gastos com contabilidade, consultorias e controladoria",order:160},{name:"Negócios com participações societárias",order:170},{name:"Comissões",order:180},{name:"Dividendos",order:190},{name:"Empréstimos",order:200},{name:"Reavaliações e ajustes ao valor presente",order:210},{name:"Impostos da empresa (IR, CSLL, PIS e Cofins, INSS etc.)",order:220},{name:"Tributos retidos de terceiros",order:230},{name:"Reembolso de despesas",order:240},{name:"Receitas",order:250},{name:"Planejamento patrimonial",order:260},{name:"Planejamento imobiliário",order:270},{name:"Consultivo, dívida, societário",order:280},{name:"Carteira de processos",order:290},{name:"Êxito societário",order:300},{name:"Êxito acordo",order:310},{name:"Honorários acordo",order:320},{name:"Honorários contrato",order:330},{name:"Honorários negociação",order:340},{name:"Societário - Acordo de sócios",order:350},{name:"Societário - Revisão",order:360},{name:"Parceria",order:370},{name:"Frigorífico - Cessão de Créditos",order:380},{name:"Frigorífico - Processos Judiciais",order:390},{name:"Giovana Tavanaro",order:400},{name:"Rocha",order:410},{name:"Caixa",order:100},{name:"JRRBank",order:200},{name:"Contas a receber",order:300},{name:"Créditos a recuperar",order:400},{name:"Estoques",order:500},{name:"Desenvolvimentos",order:600},{name:"Almoxarifado",order:700},{name:"Participações",order:800},{name:"Infraestrutura",order:900},{name:"Aperfeiçoamento profissional",order:1e3},{name:"Marketing",order:1100},{name:"Contas a pagar",order:1200},{name:"Contas com sócios",order:1300},{name:"Capital Social",order:1400},{name:"Reservas",order:1500},{name:"Ajustes",order:1600},{name:"Movimentos patrimoniais",order:1700},{name:"Resultado",order:1800}];const fl=function(){const{subscribe:t,set:e,update:n}=Ot({data:[]});return{subscribe:t,setData:t=>n(e=>({...e,data:[...t]})),reset:()=>e({data:[]})}}();Rt((function(t,e){t.exports=function(){var e,n;function r(){return e.apply(null,arguments)}function i(t){return t instanceof Array||"[object Array]"===Object.prototype.toString.call(t)}function o(t){return null!=t&&"[object Object]"===Object.prototype.toString.call(t)}function s(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function a(t){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(t).length;var e;for(e in t)if(s(t,e))return!1;return!0}function u(t){return void 0===t}function c(t){return"number"==typeof t||"[object Number]"===Object.prototype.toString.call(t)}function l(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)}function h(t,e){var n,r=[];for(n=0;n<t.length;++n)r.push(e(t[n],n));return r}function f(t,e){for(var n in e)s(e,n)&&(t[n]=e[n]);return s(e,"toString")&&(t.toString=e.toString),s(e,"valueOf")&&(t.valueOf=e.valueOf),t}function d(t,e,n,r){return ke(t,e,n,r,!0).utc()}function p(t){return null==t._pf&&(t._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}),t._pf}function v(t){if(null==t._isValid){var e=p(t),r=n.call(e.parsedDateParts,(function(t){return null!=t})),i=!isNaN(t._d.getTime())&&e.overflow<0&&!e.empty&&!e.invalidEra&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&r);if(t._strict&&(i=i&&0===e.charsLeftOver&&0===e.unusedTokens.length&&void 0===e.bigHour),null!=Object.isFrozen&&Object.isFrozen(t))return i;t._isValid=i}return t._isValid}function m(t){var e=d(NaN);return null!=t?f(p(e),t):p(e).userInvalidated=!0,e}n=Array.prototype.some?Array.prototype.some:function(t){var e,n=Object(this),r=n.length>>>0;for(e=0;e<r;e++)if(e in n&&t.call(this,n[e],e,n))return!0;return!1};var y=r.momentProperties=[],g=!1;function b(t,e){var n,r,i;if(u(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),u(e._i)||(t._i=e._i),u(e._f)||(t._f=e._f),u(e._l)||(t._l=e._l),u(e._strict)||(t._strict=e._strict),u(e._tzm)||(t._tzm=e._tzm),u(e._isUTC)||(t._isUTC=e._isUTC),u(e._offset)||(t._offset=e._offset),u(e._pf)||(t._pf=p(e)),u(e._locale)||(t._locale=e._locale),y.length>0)for(n=0;n<y.length;n++)u(i=e[r=y[n]])||(t[r]=i);return t}function _(t){b(this,t),this._d=new Date(null!=t._d?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===g&&(g=!0,r.updateOffset(this),g=!1)}function w(t){return t instanceof _||null!=t&&null!=t._isAMomentObject}function E(t){!1===r.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function I(t,e){var n=!0;return f((function(){if(null!=r.deprecationHandler&&r.deprecationHandler(null,t),n){var i,o,a,u=[];for(o=0;o<arguments.length;o++){if(i="","object"==typeof arguments[o]){for(a in i+="\n["+o+"] ",arguments[0])s(arguments[0],a)&&(i+=a+": "+arguments[0][a]+", ");i=i.slice(0,-2)}else i=arguments[o];u.push(i)}E(t+"\nArguments: "+Array.prototype.slice.call(u).join("")+"\n"+(new Error).stack),n=!1}return e.apply(this,arguments)}),e)}var T,k={};function S(t,e){null!=r.deprecationHandler&&r.deprecationHandler(t,e),k[t]||(E(e),k[t]=!0)}function x(t){return"undefined"!=typeof Function&&t instanceof Function||"[object Function]"===Object.prototype.toString.call(t)}function O(t,e){var n,r=f({},t);for(n in e)s(e,n)&&(o(t[n])&&o(e[n])?(r[n]={},f(r[n],t[n]),f(r[n],e[n])):null!=e[n]?r[n]=e[n]:delete r[n]);for(n in t)s(t,n)&&!s(e,n)&&o(t[n])&&(r[n]=f({},r[n]));return r}function A(t){null!=t&&this.set(t)}function N(t,e,n){var r=""+Math.abs(t),i=e-r.length;return(t>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+r}r.suppressDeprecationWarnings=!1,r.deprecationHandler=null,T=Object.keys?Object.keys:function(t){var e,n=[];for(e in t)s(t,e)&&n.push(e);return n};var D=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,R=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,C={},U={};function P(t,e,n,r){var i=r;"string"==typeof r&&(i=function(){return this[r]()}),t&&(U[t]=i),e&&(U[e[0]]=function(){return N(i.apply(this,arguments),e[1],e[2])}),n&&(U[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),t)})}function L(t,e){return t.isValid()?(e=j(e,t.localeData()),C[e]=C[e]||function(t){var e,n,r,i=t.match(D);for(e=0,n=i.length;e<n;e++)U[i[e]]?i[e]=U[i[e]]:i[e]=(r=i[e]).match(/\[[\s\S]/)?r.replace(/^\[|\]$/g,""):r.replace(/\\/g,"");return function(e){var r,o="";for(r=0;r<n;r++)o+=x(i[r])?i[r].call(e,t):i[r];return o}}(e),C[e](t)):t.localeData().invalidDate()}function j(t,e){var n=5;function r(t){return e.longDateFormat(t)||t}for(R.lastIndex=0;n>=0&&R.test(t);)t=t.replace(R,r),R.lastIndex=0,n-=1;return t}var M={};function V(t,e){var n=t.toLowerCase();M[n]=M[n+"s"]=M[e]=t}function F(t){return"string"==typeof t?M[t]||M[t.toLowerCase()]:void 0}function $(t){var e,n,r={};for(n in t)s(t,n)&&(e=F(n))&&(r[e]=t[n]);return r}var B={};function W(t,e){B[t]=e}function q(t){return t%4==0&&t%100!=0||t%400==0}function z(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function H(t){var e=+t,n=0;return 0!==e&&isFinite(e)&&(n=z(e)),n}function G(t,e){return function(n){return null!=n?(K(this,t,n),r.updateOffset(this,e),this):Y(this,t)}}function Y(t,e){return t.isValid()?t._d["get"+(t._isUTC?"UTC":"")+e]():NaN}function K(t,e,n){t.isValid()&&!isNaN(n)&&("FullYear"===e&&q(t.year())&&1===t.month()&&29===t.date()?(n=H(n),t._d["set"+(t._isUTC?"UTC":"")+e](n,t.month(),wt(n,t.month()))):t._d["set"+(t._isUTC?"UTC":"")+e](n))}var X,J=/\d/,Z=/\d\d/,Q=/\d{3}/,tt=/\d{4}/,et=/[+-]?\d{6}/,nt=/\d\d?/,rt=/\d\d\d\d?/,it=/\d\d\d\d\d\d?/,ot=/\d{1,3}/,st=/\d{1,4}/,at=/[+-]?\d{1,6}/,ut=/\d+/,ct=/[+-]?\d+/,lt=/Z|[+-]\d\d:?\d\d/gi,ht=/Z|[+-]\d\d(?::?\d\d)?/gi,ft=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;function dt(t,e,n){X[t]=x(e)?e:function(t,r){return t&&n?n:e}}function pt(t,e){return s(X,t)?X[t](e._strict,e._locale):new RegExp(vt(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(function(t,e,n,r,i){return e||n||r||i}))))}function vt(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}X={};var mt,yt={};function gt(t,e){var n,r=e;for("string"==typeof t&&(t=[t]),c(e)&&(r=function(t,n){n[e]=H(t)}),n=0;n<t.length;n++)yt[t[n]]=r}function bt(t,e){gt(t,(function(t,n,r,i){r._w=r._w||{},e(t,r._w,r,i)}))}function _t(t,e,n){null!=e&&s(yt,t)&&yt[t](e,n._a,n,t)}function wt(t,e){if(isNaN(t)||isNaN(e))return NaN;var n=function(t,e){return(t%e+e)%e}(e,12);return t+=(e-n)/12,1===n?q(t)?29:28:31-n%7%2}mt=Array.prototype.indexOf?Array.prototype.indexOf:function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1},P("M",["MM",2],"Mo",(function(){return this.month()+1})),P("MMM",0,0,(function(t){return this.localeData().monthsShort(this,t)})),P("MMMM",0,0,(function(t){return this.localeData().months(this,t)})),V("month","M"),W("month",8),dt("M",nt),dt("MM",nt,Z),dt("MMM",(function(t,e){return e.monthsShortRegex(t)})),dt("MMMM",(function(t,e){return e.monthsRegex(t)})),gt(["M","MM"],(function(t,e){e[1]=H(t)-1})),gt(["MMM","MMMM"],(function(t,e,n,r){var i=n._locale.monthsParse(t,r,n._strict);null!=i?e[1]=i:p(n).invalidMonth=t}));var Et="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),It="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Tt=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,kt=ft,St=ft;function xt(t,e,n){var r,i,o,s=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)o=d([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(o,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(o,"").toLocaleLowerCase();return n?"MMM"===e?-1!==(i=mt.call(this._shortMonthsParse,s))?i:null:-1!==(i=mt.call(this._longMonthsParse,s))?i:null:"MMM"===e?-1!==(i=mt.call(this._shortMonthsParse,s))||-1!==(i=mt.call(this._longMonthsParse,s))?i:null:-1!==(i=mt.call(this._longMonthsParse,s))||-1!==(i=mt.call(this._shortMonthsParse,s))?i:null}function Ot(t,e){var n;if(!t.isValid())return t;if("string"==typeof e)if(/^\d+$/.test(e))e=H(e);else if(!c(e=t.localeData().monthsParse(e)))return t;return n=Math.min(t.date(),wt(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,n),t}function At(t){return null!=t?(Ot(this,t),r.updateOffset(this,!0),this):Y(this,"Month")}function Dt(){function t(t,e){return e.length-t.length}var e,n,r=[],i=[],o=[];for(e=0;e<12;e++)n=d([2e3,e]),r.push(this.monthsShort(n,"")),i.push(this.months(n,"")),o.push(this.months(n,"")),o.push(this.monthsShort(n,""));for(r.sort(t),i.sort(t),o.sort(t),e=0;e<12;e++)r[e]=vt(r[e]),i[e]=vt(i[e]);for(e=0;e<24;e++)o[e]=vt(o[e]);this._monthsRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+r.join("|")+")","i")}function Rt(t){return q(t)?366:365}P("Y",0,0,(function(){var t=this.year();return t<=9999?N(t,4):"+"+t})),P(0,["YY",2],0,(function(){return this.year()%100})),P(0,["YYYY",4],0,"year"),P(0,["YYYYY",5],0,"year"),P(0,["YYYYYY",6,!0],0,"year"),V("year","y"),W("year",1),dt("Y",ct),dt("YY",nt,Z),dt("YYYY",st,tt),dt("YYYYY",at,et),dt("YYYYYY",at,et),gt(["YYYYY","YYYYYY"],0),gt("YYYY",(function(t,e){e[0]=2===t.length?r.parseTwoDigitYear(t):H(t)})),gt("YY",(function(t,e){e[0]=r.parseTwoDigitYear(t)})),gt("Y",(function(t,e){e[0]=parseInt(t,10)})),r.parseTwoDigitYear=function(t){return H(t)+(H(t)>68?1900:2e3)};var Ct=G("FullYear",!0);function Ut(t,e,n,r,i,o,s){var a;return t<100&&t>=0?(a=new Date(t+400,e,n,r,i,o,s),isFinite(a.getFullYear())&&a.setFullYear(t)):a=new Date(t,e,n,r,i,o,s),a}function Pt(t){var e,n;return t<100&&t>=0?((n=Array.prototype.slice.call(arguments))[0]=t+400,e=new Date(Date.UTC.apply(null,n)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t)):e=new Date(Date.UTC.apply(null,arguments)),e}function Lt(t,e,n){var r=7+e-n;return-(7+Pt(t,0,r).getUTCDay()-e)%7+r-1}function jt(t,e,n,r,i){var o,s,a=1+7*(e-1)+(7+n-r)%7+Lt(t,r,i);return a<=0?s=Rt(o=t-1)+a:a>Rt(t)?(o=t+1,s=a-Rt(t)):(o=t,s=a),{year:o,dayOfYear:s}}function Mt(t,e,n){var r,i,o=Lt(t.year(),e,n),s=Math.floor((t.dayOfYear()-o-1)/7)+1;return s<1?r=s+Vt(i=t.year()-1,e,n):s>Vt(t.year(),e,n)?(r=s-Vt(t.year(),e,n),i=t.year()+1):(i=t.year(),r=s),{week:r,year:i}}function Vt(t,e,n){var r=Lt(t,e,n),i=Lt(t+1,e,n);return(Rt(t)-r+i)/7}function Ft(t,e){return t.slice(e,7).concat(t.slice(0,e))}P("w",["ww",2],"wo","week"),P("W",["WW",2],"Wo","isoWeek"),V("week","w"),V("isoWeek","W"),W("week",5),W("isoWeek",5),dt("w",nt),dt("ww",nt,Z),dt("W",nt),dt("WW",nt,Z),bt(["w","ww","W","WW"],(function(t,e,n,r){e[r.substr(0,1)]=H(t)})),P("d",0,"do","day"),P("dd",0,0,(function(t){return this.localeData().weekdaysMin(this,t)})),P("ddd",0,0,(function(t){return this.localeData().weekdaysShort(this,t)})),P("dddd",0,0,(function(t){return this.localeData().weekdays(this,t)})),P("e",0,0,"weekday"),P("E",0,0,"isoWeekday"),V("day","d"),V("weekday","e"),V("isoWeekday","E"),W("day",11),W("weekday",11),W("isoWeekday",11),dt("d",nt),dt("e",nt),dt("E",nt),dt("dd",(function(t,e){return e.weekdaysMinRegex(t)})),dt("ddd",(function(t,e){return e.weekdaysShortRegex(t)})),dt("dddd",(function(t,e){return e.weekdaysRegex(t)})),bt(["dd","ddd","dddd"],(function(t,e,n,r){var i=n._locale.weekdaysParse(t,r,n._strict);null!=i?e.d=i:p(n).invalidWeekday=t})),bt(["d","e","E"],(function(t,e,n,r){e[r]=H(t)}));var $t="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Bt="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Wt="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),qt=ft,zt=ft,Ht=ft;function Gt(t,e,n){var r,i,o,s=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)o=d([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(o,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(o,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(o,"").toLocaleLowerCase();return n?"dddd"===e?-1!==(i=mt.call(this._weekdaysParse,s))?i:null:"ddd"===e?-1!==(i=mt.call(this._shortWeekdaysParse,s))?i:null:-1!==(i=mt.call(this._minWeekdaysParse,s))?i:null:"dddd"===e?-1!==(i=mt.call(this._weekdaysParse,s))||-1!==(i=mt.call(this._shortWeekdaysParse,s))||-1!==(i=mt.call(this._minWeekdaysParse,s))?i:null:"ddd"===e?-1!==(i=mt.call(this._shortWeekdaysParse,s))||-1!==(i=mt.call(this._weekdaysParse,s))||-1!==(i=mt.call(this._minWeekdaysParse,s))?i:null:-1!==(i=mt.call(this._minWeekdaysParse,s))||-1!==(i=mt.call(this._weekdaysParse,s))||-1!==(i=mt.call(this._shortWeekdaysParse,s))?i:null}function Yt(){function t(t,e){return e.length-t.length}var e,n,r,i,o,s=[],a=[],u=[],c=[];for(e=0;e<7;e++)n=d([2e3,1]).day(e),r=vt(this.weekdaysMin(n,"")),i=vt(this.weekdaysShort(n,"")),o=vt(this.weekdays(n,"")),s.push(r),a.push(i),u.push(o),c.push(r),c.push(i),c.push(o);s.sort(t),a.sort(t),u.sort(t),c.sort(t),this._weekdaysRegex=new RegExp("^("+c.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+s.join("|")+")","i")}function Kt(){return this.hours()%12||12}function Xt(t,e){P(t,0,0,(function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)}))}function Jt(t,e){return e._meridiemParse}P("H",["HH",2],0,"hour"),P("h",["hh",2],0,Kt),P("k",["kk",2],0,(function(){return this.hours()||24})),P("hmm",0,0,(function(){return""+Kt.apply(this)+N(this.minutes(),2)})),P("hmmss",0,0,(function(){return""+Kt.apply(this)+N(this.minutes(),2)+N(this.seconds(),2)})),P("Hmm",0,0,(function(){return""+this.hours()+N(this.minutes(),2)})),P("Hmmss",0,0,(function(){return""+this.hours()+N(this.minutes(),2)+N(this.seconds(),2)})),Xt("a",!0),Xt("A",!1),V("hour","h"),W("hour",13),dt("a",Jt),dt("A",Jt),dt("H",nt),dt("h",nt),dt("k",nt),dt("HH",nt,Z),dt("hh",nt,Z),dt("kk",nt,Z),dt("hmm",rt),dt("hmmss",it),dt("Hmm",rt),dt("Hmmss",it),gt(["H","HH"],3),gt(["k","kk"],(function(t,e,n){var r=H(t);e[3]=24===r?0:r})),gt(["a","A"],(function(t,e,n){n._isPm=n._locale.isPM(t),n._meridiem=t})),gt(["h","hh"],(function(t,e,n){e[3]=H(t),p(n).bigHour=!0})),gt("hmm",(function(t,e,n){var r=t.length-2;e[3]=H(t.substr(0,r)),e[4]=H(t.substr(r)),p(n).bigHour=!0})),gt("hmmss",(function(t,e,n){var r=t.length-4,i=t.length-2;e[3]=H(t.substr(0,r)),e[4]=H(t.substr(r,2)),e[5]=H(t.substr(i)),p(n).bigHour=!0})),gt("Hmm",(function(t,e,n){var r=t.length-2;e[3]=H(t.substr(0,r)),e[4]=H(t.substr(r))})),gt("Hmmss",(function(t,e,n){var r=t.length-4,i=t.length-2;e[3]=H(t.substr(0,r)),e[4]=H(t.substr(r,2)),e[5]=H(t.substr(i))}));var Zt,Qt=G("Hours",!0),te={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:Et,monthsShort:It,week:{dow:0,doy:6},weekdays:$t,weekdaysMin:Wt,weekdaysShort:Bt,meridiemParse:/[ap]\.?m?\.?/i},ee={},ne={};function re(t,e){var n,r=Math.min(t.length,e.length);for(n=0;n<r;n+=1)if(t[n]!==e[n])return n;return r}function ie(t){return t?t.toLowerCase().replace("_","-"):t}function oe(e){var n=null;if(void 0===ee[e]&&t&&t.exports)try{n=Zt._abbr,Nt(),se(n)}catch(t){ee[e]=null}return ee[e]}function se(t,e){var n;return t&&((n=u(e)?ue(t):ae(t,e))?Zt=n:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+t+" not found. Did you forget to load it?")),Zt._abbr}function ae(t,e){if(null!==e){var n,r=te;if(e.abbr=t,null!=ee[t])S("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),r=ee[t]._config;else if(null!=e.parentLocale)if(null!=ee[e.parentLocale])r=ee[e.parentLocale]._config;else{if(null==(n=oe(e.parentLocale)))return ne[e.parentLocale]||(ne[e.parentLocale]=[]),ne[e.parentLocale].push({name:t,config:e}),null;r=n._config}return ee[t]=new A(O(r,e)),ne[t]&&ne[t].forEach((function(t){ae(t.name,t.config)})),se(t),ee[t]}return delete ee[t],null}function ue(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return Zt;if(!i(t)){if(e=oe(t))return e;t=[t]}return function(t){for(var e,n,r,i,o=0;o<t.length;){for(e=(i=ie(t[o]).split("-")).length,n=(n=ie(t[o+1]))?n.split("-"):null;e>0;){if(r=oe(i.slice(0,e).join("-")))return r;if(n&&n.length>=e&&re(i,n)>=e-1)break;e--}o++}return Zt}(t)}function ce(t){var e,n=t._a;return n&&-2===p(t).overflow&&(e=n[1]<0||n[1]>11?1:n[2]<1||n[2]>wt(n[0],n[1])?2:n[3]<0||n[3]>24||24===n[3]&&(0!==n[4]||0!==n[5]||0!==n[6])?3:n[4]<0||n[4]>59?4:n[5]<0||n[5]>59?5:n[6]<0||n[6]>999?6:-1,p(t)._overflowDayOfYear&&(e<0||e>2)&&(e=2),p(t)._overflowWeeks&&-1===e&&(e=7),p(t)._overflowWeekday&&-1===e&&(e=8),p(t).overflow=e),t}var le=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,he=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,fe=/Z|[+-]\d\d(?::?\d\d)?/,de=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],pe=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],ve=/^\/?Date\((-?\d+)/i,me=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,ye={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function ge(t){var e,n,r,i,o,s,a=t._i,u=le.exec(a)||he.exec(a);if(u){for(p(t).iso=!0,e=0,n=de.length;e<n;e++)if(de[e][1].exec(u[1])){i=de[e][0],r=!1!==de[e][2];break}if(null==i)return void(t._isValid=!1);if(u[3]){for(e=0,n=pe.length;e<n;e++)if(pe[e][1].exec(u[3])){o=(u[2]||" ")+pe[e][0];break}if(null==o)return void(t._isValid=!1)}if(!r&&null!=o)return void(t._isValid=!1);if(u[4]){if(!fe.exec(u[4]))return void(t._isValid=!1);s="Z"}t._f=i+(o||"")+(s||""),Ie(t)}else t._isValid=!1}function be(t){var e=parseInt(t,10);return e<=49?2e3+e:e<=999?1900+e:e}function _e(t){var e,n=me.exec(t._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));if(n){if(e=function(t,e,n,r,i,o){var s=[be(t),It.indexOf(e),parseInt(n,10),parseInt(r,10),parseInt(i,10)];return o&&s.push(parseInt(o,10)),s}(n[4],n[3],n[2],n[5],n[6],n[7]),!function(t,e,n){return!t||Bt.indexOf(t)===new Date(e[0],e[1],e[2]).getDay()||(p(n).weekdayMismatch=!0,n._isValid=!1,!1)}(n[1],e,t))return;t._a=e,t._tzm=function(t,e,n){if(t)return ye[t];if(e)return 0;var r=parseInt(n,10),i=r%100;return(r-i)/100*60+i}(n[8],n[9],n[10]),t._d=Pt.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),p(t).rfc2822=!0}else t._isValid=!1}function we(t,e,n){return null!=t?t:null!=e?e:n}function Ee(t){var e,n,i,o,s,a=[];if(!t._d){for(i=function(t){var e=new Date(r.now());return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}(t),t._w&&null==t._a[2]&&null==t._a[1]&&function(t){var e,n,r,i,o,s,a,u,c;null!=(e=t._w).GG||null!=e.W||null!=e.E?(o=1,s=4,n=we(e.GG,t._a[0],Mt(Se(),1,4).year),r=we(e.W,1),((i=we(e.E,1))<1||i>7)&&(u=!0)):(o=t._locale._week.dow,s=t._locale._week.doy,c=Mt(Se(),o,s),n=we(e.gg,t._a[0],c.year),r=we(e.w,c.week),null!=e.d?((i=e.d)<0||i>6)&&(u=!0):null!=e.e?(i=e.e+o,(e.e<0||e.e>6)&&(u=!0)):i=o),r<1||r>Vt(n,o,s)?p(t)._overflowWeeks=!0:null!=u?p(t)._overflowWeekday=!0:(a=jt(n,r,i,o,s),t._a[0]=a.year,t._dayOfYear=a.dayOfYear)}(t),null!=t._dayOfYear&&(s=we(t._a[0],i[0]),(t._dayOfYear>Rt(s)||0===t._dayOfYear)&&(p(t)._overflowDayOfYear=!0),n=Pt(s,0,t._dayOfYear),t._a[1]=n.getUTCMonth(),t._a[2]=n.getUTCDate()),e=0;e<3&&null==t._a[e];++e)t._a[e]=a[e]=i[e];for(;e<7;e++)t._a[e]=a[e]=null==t._a[e]?2===e?1:0:t._a[e];24===t._a[3]&&0===t._a[4]&&0===t._a[5]&&0===t._a[6]&&(t._nextDay=!0,t._a[3]=0),t._d=(t._useUTC?Pt:Ut).apply(null,a),o=t._useUTC?t._d.getUTCDay():t._d.getDay(),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[3]=24),t._w&&void 0!==t._w.d&&t._w.d!==o&&(p(t).weekdayMismatch=!0)}}function Ie(t){if(t._f!==r.ISO_8601)if(t._f!==r.RFC_2822){t._a=[],p(t).empty=!0;var e,n,i,o,s,a,u=""+t._i,c=u.length,l=0;for(i=j(t._f,t._locale).match(D)||[],e=0;e<i.length;e++)o=i[e],(n=(u.match(pt(o,t))||[])[0])&&((s=u.substr(0,u.indexOf(n))).length>0&&p(t).unusedInput.push(s),u=u.slice(u.indexOf(n)+n.length),l+=n.length),U[o]?(n?p(t).empty=!1:p(t).unusedTokens.push(o),_t(o,n,t)):t._strict&&!n&&p(t).unusedTokens.push(o);p(t).charsLeftOver=c-l,u.length>0&&p(t).unusedInput.push(u),t._a[3]<=12&&!0===p(t).bigHour&&t._a[3]>0&&(p(t).bigHour=void 0),p(t).parsedDateParts=t._a.slice(0),p(t).meridiem=t._meridiem,t._a[3]=function(t,e,n){var r;return null==n?e:null!=t.meridiemHour?t.meridiemHour(e,n):null!=t.isPM?((r=t.isPM(n))&&e<12&&(e+=12),r||12!==e||(e=0),e):e}(t._locale,t._a[3],t._meridiem),null!==(a=p(t).era)&&(t._a[0]=t._locale.erasConvertYear(a,t._a[0])),Ee(t),ce(t)}else _e(t);else ge(t)}function Te(t){var e=t._i,n=t._f;return t._locale=t._locale||ue(t._l),null===e||void 0===n&&""===e?m({nullInput:!0}):("string"==typeof e&&(t._i=e=t._locale.preparse(e)),w(e)?new _(ce(e)):(l(e)?t._d=e:i(n)?function(t){var e,n,r,i,o,s,a=!1;if(0===t._f.length)return p(t).invalidFormat=!0,void(t._d=new Date(NaN));for(i=0;i<t._f.length;i++)o=0,s=!1,e=b({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._f=t._f[i],Ie(e),v(e)&&(s=!0),o+=p(e).charsLeftOver,o+=10*p(e).unusedTokens.length,p(e).score=o,a?o<r&&(r=o,n=e):(null==r||o<r||s)&&(r=o,n=e,s&&(a=!0));f(t,n||e)}(t):n?Ie(t):function(t){var e=t._i;u(e)?t._d=new Date(r.now()):l(e)?t._d=new Date(e.valueOf()):"string"==typeof e?function(t){var e=ve.exec(t._i);null===e?(ge(t),!1===t._isValid&&(delete t._isValid,_e(t),!1===t._isValid&&(delete t._isValid,t._strict?t._isValid=!1:r.createFromInputFallback(t)))):t._d=new Date(+e[1])}(t):i(e)?(t._a=h(e.slice(0),(function(t){return parseInt(t,10)})),Ee(t)):o(e)?function(t){if(!t._d){var e=$(t._i),n=void 0===e.day?e.date:e.day;t._a=h([e.year,e.month,n,e.hour,e.minute,e.second,e.millisecond],(function(t){return t&&parseInt(t,10)})),Ee(t)}}(t):c(e)?t._d=new Date(e):r.createFromInputFallback(t)}(t),v(t)||(t._d=null),t))}function ke(t,e,n,r,s){var u={};return!0!==e&&!1!==e||(r=e,e=void 0),!0!==n&&!1!==n||(r=n,n=void 0),(o(t)&&a(t)||i(t)&&0===t.length)&&(t=void 0),u._isAMomentObject=!0,u._useUTC=u._isUTC=s,u._l=n,u._i=t,u._f=e,u._strict=r,function(t){var e=new _(ce(Te(t)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}(u)}function Se(t,e,n,r){return ke(t,e,n,r,!1)}r.createFromInputFallback=I("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",(function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))})),r.ISO_8601=function(){},r.RFC_2822=function(){};var xe=I("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var t=Se.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:m()})),Oe=I("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var t=Se.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:m()}));function Ae(t,e){var n,r;if(1===e.length&&i(e[0])&&(e=e[0]),!e.length)return Se();for(n=e[0],r=1;r<e.length;++r)e[r].isValid()&&!e[r][t](n)||(n=e[r]);return n}var Ne=["year","quarter","month","week","day","hour","minute","second","millisecond"];function De(t){var e=$(t),n=e.year||0,r=e.quarter||0,i=e.month||0,o=e.week||e.isoWeek||0,a=e.day||0,u=e.hour||0,c=e.minute||0,l=e.second||0,h=e.millisecond||0;this._isValid=function(t){var e,n,r=!1;for(e in t)if(s(t,e)&&(-1===mt.call(Ne,e)||null!=t[e]&&isNaN(t[e])))return!1;for(n=0;n<Ne.length;++n)if(t[Ne[n]]){if(r)return!1;parseFloat(t[Ne[n]])!==H(t[Ne[n]])&&(r=!0)}return!0}(e),this._milliseconds=+h+1e3*l+6e4*c+1e3*u*60*60,this._days=+a+7*o,this._months=+i+3*r+12*n,this._data={},this._locale=ue(),this._bubble()}function Re(t){return t instanceof De}function Ce(t){return t<0?-1*Math.round(-1*t):Math.round(t)}function Ue(t,e){P(t,0,0,(function(){var t=this.utcOffset(),n="+";return t<0&&(t=-t,n="-"),n+N(~~(t/60),2)+e+N(~~t%60,2)}))}Ue("Z",":"),Ue("ZZ",""),dt("Z",ht),dt("ZZ",ht),gt(["Z","ZZ"],(function(t,e,n){n._useUTC=!0,n._tzm=Le(ht,t)}));var Pe=/([\+\-]|\d\d)/gi;function Le(t,e){var n,r,i=(e||"").match(t);return null===i?null:0===(r=60*(n=((i[i.length-1]||[])+"").match(Pe)||["-",0,0])[1]+H(n[2]))?0:"+"===n[0]?r:-r}function je(t,e){var n,i;return e._isUTC?(n=e.clone(),i=(w(t)||l(t)?t.valueOf():Se(t).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+i),r.updateOffset(n,!1),n):Se(t).local()}function Me(t){return-Math.round(t._d.getTimezoneOffset())}function Ve(){return!!this.isValid()&&this._isUTC&&0===this._offset}r.updateOffset=function(){};var Fe=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,$e=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Be(t,e){var n,r,i,o,a,u,l=t,h=null;return Re(t)?l={ms:t._milliseconds,d:t._days,M:t._months}:c(t)||!isNaN(+t)?(l={},e?l[e]=+t:l.milliseconds=+t):(h=Fe.exec(t))?(n="-"===h[1]?-1:1,l={y:0,d:H(h[2])*n,h:H(h[3])*n,m:H(h[4])*n,s:H(h[5])*n,ms:H(Ce(1e3*h[6]))*n}):(h=$e.exec(t))?(n="-"===h[1]?-1:1,l={y:We(h[2],n),M:We(h[3],n),w:We(h[4],n),d:We(h[5],n),h:We(h[6],n),m:We(h[7],n),s:We(h[8],n)}):null==l?l={}:"object"==typeof l&&("from"in l||"to"in l)&&(o=Se(l.from),a=Se(l.to),i=o.isValid()&&a.isValid()?(a=je(a,o),o.isBefore(a)?u=qe(o,a):((u=qe(a,o)).milliseconds=-u.milliseconds,u.months=-u.months),u):{milliseconds:0,months:0},(l={}).ms=i.milliseconds,l.M=i.months),r=new De(l),Re(t)&&s(t,"_locale")&&(r._locale=t._locale),Re(t)&&s(t,"_isValid")&&(r._isValid=t._isValid),r}function We(t,e){var n=t&&parseFloat(t.replace(",","."));return(isNaN(n)?0:n)*e}function qe(t,e){var n={};return n.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(n.months,"M").isAfter(e)&&--n.months,n.milliseconds=+e-+t.clone().add(n.months,"M"),n}function ze(t,e){return function(n,r){var i;return null===r||isNaN(+r)||(S(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),i=n,n=r,r=i),He(this,Be(n,r),t),this}}function He(t,e,n,i){var o=e._milliseconds,s=Ce(e._days),a=Ce(e._months);t.isValid()&&(i=null==i||i,a&&Ot(t,Y(t,"Month")+a*n),s&&K(t,"Date",Y(t,"Date")+s*n),o&&t._d.setTime(t._d.valueOf()+o*n),i&&r.updateOffset(t,s||a))}Be.fn=De.prototype,Be.invalid=function(){return Be(NaN)};var Ge=ze(1,"add"),Ye=ze(-1,"subtract");function Ke(t){return"string"==typeof t||t instanceof String}function Xe(t){return w(t)||l(t)||Ke(t)||c(t)||function(t){var e=i(t),n=!1;return e&&(n=0===t.filter((function(e){return!c(e)&&Ke(t)})).length),e&&n}(t)||function(t){var e,n,r=o(t)&&!a(t),i=!1,u=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"];for(e=0;e<u.length;e+=1)n=u[e],i=i||s(t,n);return r&&i}(t)||null==t}function Je(t){var e,n=o(t)&&!a(t),r=!1,i=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"];for(e=0;e<i.length;e+=1)r=r||s(t,i[e]);return n&&r}function Ze(t,e){if(t.date()<e.date())return-Ze(e,t);var n=12*(e.year()-t.year())+(e.month()-t.month()),r=t.clone().add(n,"months");return-(n+(e-r<0?(e-r)/(r-t.clone().add(n-1,"months")):(e-r)/(t.clone().add(n+1,"months")-r)))||0}function Qe(t){var e;return void 0===t?this._locale._abbr:(null!=(e=ue(t))&&(this._locale=e),this)}r.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",r.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var tn=I("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",(function(t){return void 0===t?this.localeData():this.locale(t)}));function en(){return this._locale}function nn(t,e){return(t%e+e)%e}function rn(t,e,n){return t<100&&t>=0?new Date(t+400,e,n)-126227808e5:new Date(t,e,n).valueOf()}function on(t,e,n){return t<100&&t>=0?Date.UTC(t+400,e,n)-126227808e5:Date.UTC(t,e,n)}function sn(t,e){return e.erasAbbrRegex(t)}function an(){var t,e,n=[],r=[],i=[],o=[],s=this.eras();for(t=0,e=s.length;t<e;++t)r.push(vt(s[t].name)),n.push(vt(s[t].abbr)),i.push(vt(s[t].narrow)),o.push(vt(s[t].name)),o.push(vt(s[t].abbr)),o.push(vt(s[t].narrow));this._erasRegex=new RegExp("^("+o.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+r.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+n.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+i.join("|")+")","i")}function un(t,e){P(0,[t,t.length],0,e)}function cn(t,e,n,r,i){var o;return null==t?Mt(this,r,i).year:(e>(o=Vt(t,r,i))&&(e=o),ln.call(this,t,e,n,r,i))}function ln(t,e,n,r,i){var o=jt(t,e,n,r,i),s=Pt(o.year,0,o.dayOfYear);return this.year(s.getUTCFullYear()),this.month(s.getUTCMonth()),this.date(s.getUTCDate()),this}P("N",0,0,"eraAbbr"),P("NN",0,0,"eraAbbr"),P("NNN",0,0,"eraAbbr"),P("NNNN",0,0,"eraName"),P("NNNNN",0,0,"eraNarrow"),P("y",["y",1],"yo","eraYear"),P("y",["yy",2],0,"eraYear"),P("y",["yyy",3],0,"eraYear"),P("y",["yyyy",4],0,"eraYear"),dt("N",sn),dt("NN",sn),dt("NNN",sn),dt("NNNN",(function(t,e){return e.erasNameRegex(t)})),dt("NNNNN",(function(t,e){return e.erasNarrowRegex(t)})),gt(["N","NN","NNN","NNNN","NNNNN"],(function(t,e,n,r){var i=n._locale.erasParse(t,r,n._strict);i?p(n).era=i:p(n).invalidEra=t})),dt("y",ut),dt("yy",ut),dt("yyy",ut),dt("yyyy",ut),dt("yo",(function(t,e){return e._eraYearOrdinalRegex||ut})),gt(["y","yy","yyy","yyyy"],0),gt(["yo"],(function(t,e,n,r){var i;n._locale._eraYearOrdinalRegex&&(i=t.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?e[0]=n._locale.eraYearOrdinalParse(t,i):e[0]=parseInt(t,10)})),P(0,["gg",2],0,(function(){return this.weekYear()%100})),P(0,["GG",2],0,(function(){return this.isoWeekYear()%100})),un("gggg","weekYear"),un("ggggg","weekYear"),un("GGGG","isoWeekYear"),un("GGGGG","isoWeekYear"),V("weekYear","gg"),V("isoWeekYear","GG"),W("weekYear",1),W("isoWeekYear",1),dt("G",ct),dt("g",ct),dt("GG",nt,Z),dt("gg",nt,Z),dt("GGGG",st,tt),dt("gggg",st,tt),dt("GGGGG",at,et),dt("ggggg",at,et),bt(["gggg","ggggg","GGGG","GGGGG"],(function(t,e,n,r){e[r.substr(0,2)]=H(t)})),bt(["gg","GG"],(function(t,e,n,i){e[i]=r.parseTwoDigitYear(t)})),P("Q",0,"Qo","quarter"),V("quarter","Q"),W("quarter",7),dt("Q",J),gt("Q",(function(t,e){e[1]=3*(H(t)-1)})),P("D",["DD",2],"Do","date"),V("date","D"),W("date",9),dt("D",nt),dt("DD",nt,Z),dt("Do",(function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient})),gt(["D","DD"],2),gt("Do",(function(t,e){e[2]=H(t.match(nt)[0])}));var hn=G("Date",!0);P("DDD",["DDDD",3],"DDDo","dayOfYear"),V("dayOfYear","DDD"),W("dayOfYear",4),dt("DDD",ot),dt("DDDD",Q),gt(["DDD","DDDD"],(function(t,e,n){n._dayOfYear=H(t)})),P("m",["mm",2],0,"minute"),V("minute","m"),W("minute",14),dt("m",nt),dt("mm",nt,Z),gt(["m","mm"],4);var fn=G("Minutes",!1);P("s",["ss",2],0,"second"),V("second","s"),W("second",15),dt("s",nt),dt("ss",nt,Z),gt(["s","ss"],5);var dn,pn,vn=G("Seconds",!1);for(P("S",0,0,(function(){return~~(this.millisecond()/100)})),P(0,["SS",2],0,(function(){return~~(this.millisecond()/10)})),P(0,["SSS",3],0,"millisecond"),P(0,["SSSS",4],0,(function(){return 10*this.millisecond()})),P(0,["SSSSS",5],0,(function(){return 100*this.millisecond()})),P(0,["SSSSSS",6],0,(function(){return 1e3*this.millisecond()})),P(0,["SSSSSSS",7],0,(function(){return 1e4*this.millisecond()})),P(0,["SSSSSSSS",8],0,(function(){return 1e5*this.millisecond()})),P(0,["SSSSSSSSS",9],0,(function(){return 1e6*this.millisecond()})),V("millisecond","ms"),W("millisecond",16),dt("S",ot,J),dt("SS",ot,Z),dt("SSS",ot,Q),dn="SSSS";dn.length<=9;dn+="S")dt(dn,ut);function mn(t,e){e[6]=H(1e3*("0."+t))}for(dn="S";dn.length<=9;dn+="S")gt(dn,mn);pn=G("Milliseconds",!1),P("z",0,0,"zoneAbbr"),P("zz",0,0,"zoneName");var yn=_.prototype;function gn(t){return t}yn.add=Ge,yn.calendar=function(t,e){1===arguments.length&&(Xe(arguments[0])?(t=arguments[0],e=void 0):Je(arguments[0])&&(e=arguments[0],t=void 0));var n=t||Se(),i=je(n,this).startOf("day"),o=r.calendarFormat(this,i)||"sameElse",s=e&&(x(e[o])?e[o].call(this,n):e[o]);return this.format(s||this.localeData().calendar(o,this,Se(n)))},yn.clone=function(){return new _(this)},yn.diff=function(t,e,n){var r,i,o;if(!this.isValid())return NaN;if(!(r=je(t,this)).isValid())return NaN;switch(i=6e4*(r.utcOffset()-this.utcOffset()),e=F(e)){case"year":o=Ze(this,r)/12;break;case"month":o=Ze(this,r);break;case"quarter":o=Ze(this,r)/3;break;case"second":o=(this-r)/1e3;break;case"minute":o=(this-r)/6e4;break;case"hour":o=(this-r)/36e5;break;case"day":o=(this-r-i)/864e5;break;case"week":o=(this-r-i)/6048e5;break;default:o=this-r}return n?o:z(o)},yn.endOf=function(t){var e,n;if(void 0===(t=F(t))||"millisecond"===t||!this.isValid())return this;switch(n=this._isUTC?on:rn,t){case"year":e=n(this.year()+1,0,1)-1;break;case"quarter":e=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":e=n(this.year(),this.month()+1,1)-1;break;case"week":e=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":e=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":e=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":e=this._d.valueOf(),e+=36e5-nn(e+(this._isUTC?0:6e4*this.utcOffset()),36e5)-1;break;case"minute":e=this._d.valueOf(),e+=6e4-nn(e,6e4)-1;break;case"second":e=this._d.valueOf(),e+=1e3-nn(e,1e3)-1}return this._d.setTime(e),r.updateOffset(this,!0),this},yn.format=function(t){t||(t=this.isUtc()?r.defaultFormatUtc:r.defaultFormat);var e=L(this,t);return this.localeData().postformat(e)},yn.from=function(t,e){return this.isValid()&&(w(t)&&t.isValid()||Se(t).isValid())?Be({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()},yn.fromNow=function(t){return this.from(Se(),t)},yn.to=function(t,e){return this.isValid()&&(w(t)&&t.isValid()||Se(t).isValid())?Be({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()},yn.toNow=function(t){return this.to(Se(),t)},yn.get=function(t){return x(this[t=F(t)])?this[t]():this},yn.invalidAt=function(){return p(this).overflow},yn.isAfter=function(t,e){var n=w(t)?t:Se(t);return!(!this.isValid()||!n.isValid())&&("millisecond"===(e=F(e)||"millisecond")?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(e).valueOf())},yn.isBefore=function(t,e){var n=w(t)?t:Se(t);return!(!this.isValid()||!n.isValid())&&("millisecond"===(e=F(e)||"millisecond")?this.valueOf()<n.valueOf():this.clone().endOf(e).valueOf()<n.valueOf())},yn.isBetween=function(t,e,n,r){var i=w(t)?t:Se(t),o=w(e)?e:Se(e);return!!(this.isValid()&&i.isValid()&&o.isValid())&&(("("===(r=r||"()")[0]?this.isAfter(i,n):!this.isBefore(i,n))&&(")"===r[1]?this.isBefore(o,n):!this.isAfter(o,n)))},yn.isSame=function(t,e){var n,r=w(t)?t:Se(t);return!(!this.isValid()||!r.isValid())&&("millisecond"===(e=F(e)||"millisecond")?this.valueOf()===r.valueOf():(n=r.valueOf(),this.clone().startOf(e).valueOf()<=n&&n<=this.clone().endOf(e).valueOf()))},yn.isSameOrAfter=function(t,e){return this.isSame(t,e)||this.isAfter(t,e)},yn.isSameOrBefore=function(t,e){return this.isSame(t,e)||this.isBefore(t,e)},yn.isValid=function(){return v(this)},yn.lang=tn,yn.locale=Qe,yn.localeData=en,yn.max=Oe,yn.min=xe,yn.parsingFlags=function(){return f({},p(this))},yn.set=function(t,e){if("object"==typeof t){var n,r=function(t){var e,n=[];for(e in t)s(t,e)&&n.push({unit:e,priority:B[e]});return n.sort((function(t,e){return t.priority-e.priority})),n}(t=$(t));for(n=0;n<r.length;n++)this[r[n].unit](t[r[n].unit])}else if(x(this[t=F(t)]))return this[t](e);return this},yn.startOf=function(t){var e,n;if(void 0===(t=F(t))||"millisecond"===t||!this.isValid())return this;switch(n=this._isUTC?on:rn,t){case"year":e=n(this.year(),0,1);break;case"quarter":e=n(this.year(),this.month()-this.month()%3,1);break;case"month":e=n(this.year(),this.month(),1);break;case"week":e=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":e=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":e=n(this.year(),this.month(),this.date());break;case"hour":e=this._d.valueOf(),e-=nn(e+(this._isUTC?0:6e4*this.utcOffset()),36e5);break;case"minute":e=this._d.valueOf(),e-=nn(e,6e4);break;case"second":e=this._d.valueOf(),e-=nn(e,1e3)}return this._d.setTime(e),r.updateOffset(this,!0),this},yn.subtract=Ye,yn.toArray=function(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]},yn.toObject=function(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}},yn.toDate=function(){return new Date(this.valueOf())},yn.toISOString=function(t){if(!this.isValid())return null;var e=!0!==t,n=e?this.clone().utc():this;return n.year()<0||n.year()>9999?L(n,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):x(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",L(n,"Z")):L(n,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},yn.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t,e,n,r="moment",i="";return this.isLocal()||(r=0===this.utcOffset()?"moment.utc":"moment.parseZone",i="Z"),t="["+r+'("]',e=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",n=i+'[")]',this.format(t+e+"-MM-DD[T]HH:mm:ss.SSS"+n)},"undefined"!=typeof Symbol&&null!=Symbol.for&&(yn[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),yn.toJSON=function(){return this.isValid()?this.toISOString():null},yn.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},yn.unix=function(){return Math.floor(this.valueOf()/1e3)},yn.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},yn.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},yn.eraName=function(){var t,e,n,r=this.localeData().eras();for(t=0,e=r.length;t<e;++t){if(n=this.startOf("day").valueOf(),r[t].since<=n&&n<=r[t].until)return r[t].name;if(r[t].until<=n&&n<=r[t].since)return r[t].name}return""},yn.eraNarrow=function(){var t,e,n,r=this.localeData().eras();for(t=0,e=r.length;t<e;++t){if(n=this.startOf("day").valueOf(),r[t].since<=n&&n<=r[t].until)return r[t].narrow;if(r[t].until<=n&&n<=r[t].since)return r[t].narrow}return""},yn.eraAbbr=function(){var t,e,n,r=this.localeData().eras();for(t=0,e=r.length;t<e;++t){if(n=this.startOf("day").valueOf(),r[t].since<=n&&n<=r[t].until)return r[t].abbr;if(r[t].until<=n&&n<=r[t].since)return r[t].abbr}return""},yn.eraYear=function(){var t,e,n,i,o=this.localeData().eras();for(t=0,e=o.length;t<e;++t)if(n=o[t].since<=o[t].until?1:-1,i=this.startOf("day").valueOf(),o[t].since<=i&&i<=o[t].until||o[t].until<=i&&i<=o[t].since)return(this.year()-r(o[t].since).year())*n+o[t].offset;return this.year()},yn.year=Ct,yn.isLeapYear=function(){return q(this.year())},yn.weekYear=function(t){return cn.call(this,t,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},yn.isoWeekYear=function(t){return cn.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)},yn.quarter=yn.quarters=function(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)},yn.month=At,yn.daysInMonth=function(){return wt(this.year(),this.month())},yn.week=yn.weeks=function(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")},yn.isoWeek=yn.isoWeeks=function(t){var e=Mt(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")},yn.weeksInYear=function(){var t=this.localeData()._week;return Vt(this.year(),t.dow,t.doy)},yn.weeksInWeekYear=function(){var t=this.localeData()._week;return Vt(this.weekYear(),t.dow,t.doy)},yn.isoWeeksInYear=function(){return Vt(this.year(),1,4)},yn.isoWeeksInISOWeekYear=function(){return Vt(this.isoWeekYear(),1,4)},yn.date=hn,yn.day=yn.days=function(t){if(!this.isValid())return null!=t?this:NaN;var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=function(t,e){return"string"!=typeof t?t:isNaN(t)?"number"==typeof(t=e.weekdaysParse(t))?t:null:parseInt(t,10)}(t,this.localeData()),this.add(t-e,"d")):e},yn.weekday=function(t){if(!this.isValid())return null!=t?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")},yn.isoWeekday=function(t){if(!this.isValid())return null!=t?this:NaN;if(null!=t){var e=function(t,e){return"string"==typeof t?e.weekdaysParse(t)%7||7:isNaN(t)?null:t}(t,this.localeData());return this.day(this.day()%7?e:e-7)}return this.day()||7},yn.dayOfYear=function(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")},yn.hour=yn.hours=Qt,yn.minute=yn.minutes=fn,yn.second=yn.seconds=vn,yn.millisecond=yn.milliseconds=pn,yn.utcOffset=function(t,e,n){var i,o=this._offset||0;if(!this.isValid())return null!=t?this:NaN;if(null!=t){if("string"==typeof t){if(null===(t=Le(ht,t)))return this}else Math.abs(t)<16&&!n&&(t*=60);return!this._isUTC&&e&&(i=Me(this)),this._offset=t,this._isUTC=!0,null!=i&&this.add(i,"m"),o!==t&&(!e||this._changeInProgress?He(this,Be(t-o,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,r.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?o:Me(this)},yn.utc=function(t){return this.utcOffset(0,t)},yn.local=function(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(Me(this),"m")),this},yn.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var t=Le(lt,this._i);null!=t?this.utcOffset(t):this.utcOffset(0,!0)}return this},yn.hasAlignedHourOffset=function(t){return!!this.isValid()&&(t=t?Se(t).utcOffset():0,(this.utcOffset()-t)%60==0)},yn.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},yn.isLocal=function(){return!!this.isValid()&&!this._isUTC},yn.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},yn.isUtc=Ve,yn.isUTC=Ve,yn.zoneAbbr=function(){return this._isUTC?"UTC":""},yn.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},yn.dates=I("dates accessor is deprecated. Use date instead.",hn),yn.months=I("months accessor is deprecated. Use month instead",At),yn.years=I("years accessor is deprecated. Use year instead",Ct),yn.zone=I("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",(function(t,e){return null!=t?("string"!=typeof t&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()})),yn.isDSTShifted=I("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",(function(){if(!u(this._isDSTShifted))return this._isDSTShifted;var t,e={};return b(e,this),(e=Te(e))._a?(t=e._isUTC?d(e._a):Se(e._a),this._isDSTShifted=this.isValid()&&function(t,e,n){var r,i=Math.min(t.length,e.length),o=Math.abs(t.length-e.length),s=0;for(r=0;r<i;r++)(n&&t[r]!==e[r]||!n&&H(t[r])!==H(e[r]))&&s++;return s+o}(e._a,t.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}));var bn=A.prototype;function _n(t,e,n,r){var i=ue(),o=d().set(r,e);return i[n](o,t)}function wn(t,e,n){if(c(t)&&(e=t,t=void 0),t=t||"",null!=e)return _n(t,e,n,"month");var r,i=[];for(r=0;r<12;r++)i[r]=_n(t,r,n,"month");return i}function En(t,e,n,r){"boolean"==typeof t?(c(e)&&(n=e,e=void 0),e=e||""):(n=e=t,t=!1,c(e)&&(n=e,e=void 0),e=e||"");var i,o=ue(),s=t?o._week.dow:0,a=[];if(null!=n)return _n(e,(n+s)%7,r,"day");for(i=0;i<7;i++)a[i]=_n(e,(i+s)%7,r,"day");return a}bn.calendar=function(t,e,n){var r=this._calendar[t]||this._calendar.sameElse;return x(r)?r.call(e,n):r},bn.longDateFormat=function(t){var e=this._longDateFormat[t],n=this._longDateFormat[t.toUpperCase()];return e||!n?e:(this._longDateFormat[t]=n.match(D).map((function(t){return"MMMM"===t||"MM"===t||"DD"===t||"dddd"===t?t.slice(1):t})).join(""),this._longDateFormat[t])},bn.invalidDate=function(){return this._invalidDate},bn.ordinal=function(t){return this._ordinal.replace("%d",t)},bn.preparse=gn,bn.postformat=gn,bn.relativeTime=function(t,e,n,r){var i=this._relativeTime[n];return x(i)?i(t,e,n,r):i.replace(/%d/i,t)},bn.pastFuture=function(t,e){var n=this._relativeTime[t>0?"future":"past"];return x(n)?n(e):n.replace(/%s/i,e)},bn.set=function(t){var e,n;for(n in t)s(t,n)&&(x(e=t[n])?this[n]=e:this["_"+n]=e);this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},bn.eras=function(t,e){var n,i,o,s=this._eras||ue("en")._eras;for(n=0,i=s.length;n<i;++n){switch(typeof s[n].since){case"string":o=r(s[n].since).startOf("day"),s[n].since=o.valueOf()}switch(typeof s[n].until){case"undefined":s[n].until=1/0;break;case"string":o=r(s[n].until).startOf("day").valueOf(),s[n].until=o.valueOf()}}return s},bn.erasParse=function(t,e,n){var r,i,o,s,a,u=this.eras();for(t=t.toUpperCase(),r=0,i=u.length;r<i;++r)if(o=u[r].name.toUpperCase(),s=u[r].abbr.toUpperCase(),a=u[r].narrow.toUpperCase(),n)switch(e){case"N":case"NN":case"NNN":if(s===t)return u[r];break;case"NNNN":if(o===t)return u[r];break;case"NNNNN":if(a===t)return u[r]}else if([o,s,a].indexOf(t)>=0)return u[r]},bn.erasConvertYear=function(t,e){var n=t.since<=t.until?1:-1;return void 0===e?r(t.since).year():r(t.since).year()+(e-t.offset)*n},bn.erasAbbrRegex=function(t){return s(this,"_erasAbbrRegex")||an.call(this),t?this._erasAbbrRegex:this._erasRegex},bn.erasNameRegex=function(t){return s(this,"_erasNameRegex")||an.call(this),t?this._erasNameRegex:this._erasRegex},bn.erasNarrowRegex=function(t){return s(this,"_erasNarrowRegex")||an.call(this),t?this._erasNarrowRegex:this._erasRegex},bn.months=function(t,e){return t?i(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||Tt).test(e)?"format":"standalone"][t.month()]:i(this._months)?this._months:this._months.standalone},bn.monthsShort=function(t,e){return t?i(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[Tt.test(e)?"format":"standalone"][t.month()]:i(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},bn.monthsParse=function(t,e,n){var r,i,o;if(this._monthsParseExact)return xt.call(this,t,e,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(i=d([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),n||this._monthsParse[r]||(o="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[r]=new RegExp(o.replace(".",""),"i")),n&&"MMMM"===e&&this._longMonthsParse[r].test(t))return r;if(n&&"MMM"===e&&this._shortMonthsParse[r].test(t))return r;if(!n&&this._monthsParse[r].test(t))return r}},bn.monthsRegex=function(t){return this._monthsParseExact?(s(this,"_monthsRegex")||Dt.call(this),t?this._monthsStrictRegex:this._monthsRegex):(s(this,"_monthsRegex")||(this._monthsRegex=St),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)},bn.monthsShortRegex=function(t){return this._monthsParseExact?(s(this,"_monthsRegex")||Dt.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(s(this,"_monthsShortRegex")||(this._monthsShortRegex=kt),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)},bn.week=function(t){return Mt(t,this._week.dow,this._week.doy).week},bn.firstDayOfYear=function(){return this._week.doy},bn.firstDayOfWeek=function(){return this._week.dow},bn.weekdays=function(t,e){var n=i(this._weekdays)?this._weekdays:this._weekdays[t&&!0!==t&&this._weekdays.isFormat.test(e)?"format":"standalone"];return!0===t?Ft(n,this._week.dow):t?n[t.day()]:n},bn.weekdaysMin=function(t){return!0===t?Ft(this._weekdaysMin,this._week.dow):t?this._weekdaysMin[t.day()]:this._weekdaysMin},bn.weekdaysShort=function(t){return!0===t?Ft(this._weekdaysShort,this._week.dow):t?this._weekdaysShort[t.day()]:this._weekdaysShort},bn.weekdaysParse=function(t,e,n){var r,i,o;if(this._weekdaysParseExact)return Gt.call(this,t,e,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(i=d([2e3,1]).day(r),n&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(i,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(i,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(i,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[r]||(o="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[r]=new RegExp(o.replace(".",""),"i")),n&&"dddd"===e&&this._fullWeekdaysParse[r].test(t))return r;if(n&&"ddd"===e&&this._shortWeekdaysParse[r].test(t))return r;if(n&&"dd"===e&&this._minWeekdaysParse[r].test(t))return r;if(!n&&this._weekdaysParse[r].test(t))return r}},bn.weekdaysRegex=function(t){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||Yt.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(s(this,"_weekdaysRegex")||(this._weekdaysRegex=qt),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)},bn.weekdaysShortRegex=function(t){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||Yt.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(s(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=zt),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},bn.weekdaysMinRegex=function(t){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||Yt.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(s(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Ht),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},bn.isPM=function(t){return"p"===(t+"").toLowerCase().charAt(0)},bn.meridiem=function(t,e,n){return t>11?n?"pm":"PM":n?"am":"AM"},se("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10;return t+(1===H(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")}}),r.lang=I("moment.lang is deprecated. Use moment.locale instead.",se),r.langData=I("moment.langData is deprecated. Use moment.localeData instead.",ue);var In=Math.abs;function Tn(t,e,n,r){var i=Be(e,n);return t._milliseconds+=r*i._milliseconds,t._days+=r*i._days,t._months+=r*i._months,t._bubble()}function kn(t){return t<0?Math.floor(t):Math.ceil(t)}function Sn(t){return 4800*t/146097}function xn(t){return 146097*t/4800}function On(t){return function(){return this.as(t)}}var An=On("ms"),Nn=On("s"),Dn=On("m"),Rn=On("h"),Cn=On("d"),Un=On("w"),Pn=On("M"),Ln=On("Q"),jn=On("y");function Mn(t){return function(){return this.isValid()?this._data[t]:NaN}}var Vn=Mn("milliseconds"),Fn=Mn("seconds"),$n=Mn("minutes"),Bn=Mn("hours"),Wn=Mn("days"),qn=Mn("months"),zn=Mn("years"),Hn=Math.round,Gn={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function Yn(t,e,n,r,i){return i.relativeTime(e||1,!!n,t,r)}var Kn=Math.abs;function Xn(t){return(t>0)-(t<0)||+t}function Jn(){if(!this.isValid())return this.localeData().invalidDate();var t,e,n,r,i,o,s,a,u=Kn(this._milliseconds)/1e3,c=Kn(this._days),l=Kn(this._months),h=this.asSeconds();return h?(t=z(u/60),e=z(t/60),u%=60,t%=60,n=z(l/12),l%=12,r=u?u.toFixed(3).replace(/\.?0+$/,""):"",i=h<0?"-":"",o=Xn(this._months)!==Xn(h)?"-":"",s=Xn(this._days)!==Xn(h)?"-":"",a=Xn(this._milliseconds)!==Xn(h)?"-":"",i+"P"+(n?o+n+"Y":"")+(l?o+l+"M":"")+(c?s+c+"D":"")+(e||t||u?"T":"")+(e?a+e+"H":"")+(t?a+t+"M":"")+(u?a+r+"S":"")):"P0D"}var Zn=De.prototype;return Zn.isValid=function(){return this._isValid},Zn.abs=function(){var t=this._data;return this._milliseconds=In(this._milliseconds),this._days=In(this._days),this._months=In(this._months),t.milliseconds=In(t.milliseconds),t.seconds=In(t.seconds),t.minutes=In(t.minutes),t.hours=In(t.hours),t.months=In(t.months),t.years=In(t.years),this},Zn.add=function(t,e){return Tn(this,t,e,1)},Zn.subtract=function(t,e){return Tn(this,t,e,-1)},Zn.as=function(t){if(!this.isValid())return NaN;var e,n,r=this._milliseconds;if("month"===(t=F(t))||"quarter"===t||"year"===t)switch(e=this._days+r/864e5,n=this._months+Sn(e),t){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(e=this._days+Math.round(xn(this._months)),t){case"week":return e/7+r/6048e5;case"day":return e+r/864e5;case"hour":return 24*e+r/36e5;case"minute":return 1440*e+r/6e4;case"second":return 86400*e+r/1e3;case"millisecond":return Math.floor(864e5*e)+r;default:throw new Error("Unknown unit "+t)}},Zn.asMilliseconds=An,Zn.asSeconds=Nn,Zn.asMinutes=Dn,Zn.asHours=Rn,Zn.asDays=Cn,Zn.asWeeks=Un,Zn.asMonths=Pn,Zn.asQuarters=Ln,Zn.asYears=jn,Zn.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*H(this._months/12):NaN},Zn._bubble=function(){var t,e,n,r,i,o=this._milliseconds,s=this._days,a=this._months,u=this._data;return o>=0&&s>=0&&a>=0||o<=0&&s<=0&&a<=0||(o+=864e5*kn(xn(a)+s),s=0,a=0),u.milliseconds=o%1e3,t=z(o/1e3),u.seconds=t%60,e=z(t/60),u.minutes=e%60,n=z(e/60),u.hours=n%24,s+=z(n/24),i=z(Sn(s)),a+=i,s-=kn(xn(i)),r=z(a/12),a%=12,u.days=s,u.months=a,u.years=r,this},Zn.clone=function(){return Be(this)},Zn.get=function(t){return t=F(t),this.isValid()?this[t+"s"]():NaN},Zn.milliseconds=Vn,Zn.seconds=Fn,Zn.minutes=$n,Zn.hours=Bn,Zn.days=Wn,Zn.weeks=function(){return z(this.days()/7)},Zn.months=qn,Zn.years=zn,Zn.humanize=function(t,e){if(!this.isValid())return this.localeData().invalidDate();var n,r,i=!1,o=Gn;return"object"==typeof t&&(e=t,t=!1),"boolean"==typeof t&&(i=t),"object"==typeof e&&(o=Object.assign({},Gn,e),null!=e.s&&null==e.ss&&(o.ss=e.s-1)),n=this.localeData(),r=function(t,e,n,r){var i=Be(t).abs(),o=Hn(i.as("s")),s=Hn(i.as("m")),a=Hn(i.as("h")),u=Hn(i.as("d")),c=Hn(i.as("M")),l=Hn(i.as("w")),h=Hn(i.as("y")),f=o<=n.ss&&["s",o]||o<n.s&&["ss",o]||s<=1&&["m"]||s<n.m&&["mm",s]||a<=1&&["h"]||a<n.h&&["hh",a]||u<=1&&["d"]||u<n.d&&["dd",u];return null!=n.w&&(f=f||l<=1&&["w"]||l<n.w&&["ww",l]),(f=f||c<=1&&["M"]||c<n.M&&["MM",c]||h<=1&&["y"]||["yy",h])[2]=e,f[3]=+t>0,f[4]=r,Yn.apply(null,f)}(this,!i,o,n),i&&(r=n.pastFuture(+this,r)),n.postformat(r)},Zn.toISOString=Jn,Zn.toString=Jn,Zn.toJSON=Jn,Zn.locale=Qe,Zn.localeData=en,Zn.toIsoString=I("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Jn),Zn.lang=tn,P("X",0,0,"unix"),P("x",0,0,"valueOf"),dt("x",ct),dt("X",/[+-]?\d+(\.\d{1,3})?/),gt("X",(function(t,e,n){n._d=new Date(1e3*parseFloat(t))})),gt("x",(function(t,e,n){n._d=new Date(H(t))})),
//! moment.js
r.version="2.27.0",e=Se,r.fn=yn,r.min=function(){var t=[].slice.call(arguments,0);return Ae("isBefore",t)},r.max=function(){var t=[].slice.call(arguments,0);return Ae("isAfter",t)},r.now=function(){return Date.now?Date.now():+new Date},r.utc=d,r.unix=function(t){return Se(1e3*t)},r.months=function(t,e){return wn(t,e,"months")},r.isDate=l,r.locale=se,r.invalid=m,r.duration=Be,r.isMoment=w,r.weekdays=function(t,e,n){return En(t,e,n,"weekdays")},r.parseZone=function(){return Se.apply(null,arguments).parseZone()},r.localeData=ue,r.isDuration=Re,r.monthsShort=function(t,e){return wn(t,e,"monthsShort")},r.weekdaysMin=function(t,e,n){return En(t,e,n,"weekdaysMin")},r.defineLocale=ae,r.updateLocale=function(t,e){if(null!=e){var n,r,i=te;null!=ee[t]&&null!=ee[t].parentLocale?ee[t].set(O(ee[t]._config,e)):(null!=(r=oe(t))&&(i=r._config),e=O(i,e),null==r&&(e.abbr=t),(n=new A(e)).parentLocale=ee[t],ee[t]=n),se(t)}else null!=ee[t]&&(null!=ee[t].parentLocale?(ee[t]=ee[t].parentLocale,t===se()&&se(t)):null!=ee[t]&&delete ee[t]);return ee[t]},r.locales=function(){return T(ee)},r.weekdaysShort=function(t,e,n){return En(t,e,n,"weekdaysShort")},r.normalizeUnits=F,r.relativeTimeRounding=function(t){return void 0===t?Hn:"function"==typeof t&&(Hn=t,!0)},r.relativeTimeThreshold=function(t,e){return void 0!==Gn[t]&&(void 0===e?Gn[t]:(Gn[t]=e,"s"===t&&(Gn.ss=e-1),!0))},r.calendarFormat=function(t,e){var n=t.diff(e,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"},r.prototype=yn,r.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},r}()}));
/**
    * @license nested-property https://github.com/cosmosio/nested-property
    *
    * The MIT License (MIT)
    *
    * Copyright (c) 2014-2015 Olivier Scherrer <pode.fr@gmail.com>
    */var dl={set:function(t,e,n){if(t&&"object"==typeof t){if("string"==typeof e&&""!==e){var r=e.split(".");return r.reduce((function(t,e,i){return t[e]=t[e]||{},r.length==i+1&&(t[e]=n),t[e]}),t)}return"number"==typeof e?(t[e]=n,t[e]):t}return t},get:function(t,e){return t&&"object"==typeof t?"string"==typeof e&&""!==e?e.split(".").reduce((function(t,e){return t&&t[e]}),t):"number"==typeof e?t[e]:t:t},has:function(t,e,n){return n=n||{},!(!t||"object"!=typeof t)&&("string"==typeof e&&""!==e?e.split(".").reduce((function(t,e,r,i){return r==i.length-1?n.own?!(!t||!t.hasOwnProperty(e)):!(null===t||"object"!=typeof t||!(e in t)):t&&t[e]}),t):"number"==typeof e&&e in t)},hasOwn:function(t,e,n){return this.has(t,e,n||{own:!0})},isIn:function(t,e,n,r){if(r=r||{},t&&"object"==typeof t){if("string"==typeof e&&""!==e){var i,o=e.split("."),s=!1;return i=!!o.reduce((function(t,e){return s=s||t===n||!!t&&t[e]===n,t&&t[e]}),t),r.validPath?s&&i:s}return!1}return!1}};var pl=Rt((function(t,e){var n="[object Arguments]",r="[object Map]",i="[object Object]",o="[object Set]",s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/,u=/^\./,c=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,l=/\\(\\)?/g,h=/^\[object .+?Constructor\]$/,f=/^(?:0|[1-9]\d*)$/,d={};d["[object Float32Array]"]=d["[object Float64Array]"]=d["[object Int8Array]"]=d["[object Int16Array]"]=d["[object Int32Array]"]=d["[object Uint8Array]"]=d["[object Uint8ClampedArray]"]=d["[object Uint16Array]"]=d["[object Uint32Array]"]=!0,d[n]=d["[object Array]"]=d["[object ArrayBuffer]"]=d["[object Boolean]"]=d["[object DataView]"]=d["[object Date]"]=d["[object Error]"]=d["[object Function]"]=d[r]=d["[object Number]"]=d[i]=d["[object RegExp]"]=d[o]=d["[object String]"]=d["[object WeakMap]"]=!1;var p="object"==typeof At&&At&&At.Object===Object&&At,v="object"==typeof self&&self&&self.Object===Object&&self,m=p||v||Function("return this")(),y=e&&!e.nodeType&&e,g=y&&t&&!t.nodeType&&t,b=g&&g.exports===y&&p.process,_=function(){try{return b&&b.binding("util")}catch(t){}}(),w=_&&_.isTypedArray;function E(t,e,n,r){for(var i=-1,o=t?t.length:0;++i<o;){var s=t[i];e(r,s,n(s),t)}return r}function I(t,e){for(var n=-1,r=t?t.length:0;++n<r;)if(e(t[n],n,t))return!0;return!1}function T(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}function k(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function S(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}var x,O=Array.prototype,A=Function.prototype,N=Object.prototype,D=m["__core-js_shared__"],R=(x=/[^.]+$/.exec(D&&D.keys&&D.keys.IE_PROTO||""))?"Symbol(src)_1."+x:"",C=A.toString,U=N.hasOwnProperty,P=N.toString,L=RegExp("^"+C.call(U).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),j=m.Symbol,M=m.Uint8Array,V=N.propertyIsEnumerable,F=O.splice,$=function(t,e){return function(n){return t(e(n))}}(Object.keys,Object),B=It(m,"DataView"),W=It(m,"Map"),q=It(m,"Promise"),z=It(m,"Set"),H=It(m,"WeakMap"),G=It(Object,"create"),Y=Rt(B),K=Rt(W),X=Rt(q),J=Rt(z),Z=Rt(H),Q=j?j.prototype:void 0,tt=Q?Q.valueOf:void 0,et=Q?Q.toString:void 0;function nt(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function rt(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function it(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function ot(t){var e=-1,n=t?t.length:0;for(this.__data__=new it;++e<n;)this.add(t[e])}function st(t){this.__data__=new rt(t)}function at(t,e){var n=Vt(t)||Mt(t)?function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}(t.length,String):[],r=n.length,i=!!r;for(var o in t)!e&&!U.call(t,o)||i&&("length"==o||kt(o,r))||n.push(o);return n}function ut(t,e){for(var n=t.length;n--;)if(jt(t[n][0],e))return n;return-1}function ct(t,e,n,r){return ft(t,(function(t,i,o){e(r,t,n(t),o)})),r}nt.prototype.clear=function(){this.__data__=G?G(null):{}},nt.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},nt.prototype.get=function(t){var e=this.__data__;if(G){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return U.call(e,t)?e[t]:void 0},nt.prototype.has=function(t){var e=this.__data__;return G?void 0!==e[t]:U.call(e,t)},nt.prototype.set=function(t,e){return this.__data__[t]=G&&void 0===e?"__lodash_hash_undefined__":e,this},rt.prototype.clear=function(){this.__data__=[]},rt.prototype.delete=function(t){var e=this.__data__,n=ut(e,t);return!(n<0)&&(n==e.length-1?e.pop():F.call(e,n,1),!0)},rt.prototype.get=function(t){var e=this.__data__,n=ut(e,t);return n<0?void 0:e[n][1]},rt.prototype.has=function(t){return ut(this.__data__,t)>-1},rt.prototype.set=function(t,e){var n=this.__data__,r=ut(n,t);return r<0?n.push([t,e]):n[r][1]=e,this},it.prototype.clear=function(){this.__data__={hash:new nt,map:new(W||rt),string:new nt}},it.prototype.delete=function(t){return Et(this,t).delete(t)},it.prototype.get=function(t){return Et(this,t).get(t)},it.prototype.has=function(t){return Et(this,t).has(t)},it.prototype.set=function(t,e){return Et(this,t).set(t,e),this},ot.prototype.add=ot.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},ot.prototype.has=function(t){return this.__data__.has(t)},st.prototype.clear=function(){this.__data__=new rt},st.prototype.delete=function(t){return this.__data__.delete(t)},st.prototype.get=function(t){return this.__data__.get(t)},st.prototype.has=function(t){return this.__data__.has(t)},st.prototype.set=function(t,e){var n=this.__data__;if(n instanceof rt){var r=n.__data__;if(!W||r.length<199)return r.push([t,e]),this;n=this.__data__=new it(r)}return n.set(t,e),this};var lt,ht,ft=(lt=function(t,e){return t&&dt(t,e,Gt)},function(t,e){if(null==t)return t;if(!Ft(t))return lt(t,e);for(var n=t.length,r=ht?n:-1,i=Object(t);(ht?r--:++r<n)&&!1!==e(i[r],r,i););return t}),dt=function(t){return function(e,n,r){for(var i=-1,o=Object(e),s=r(e),a=s.length;a--;){var u=s[t?a:++i];if(!1===n(o[u],u,o))break}return e}}();function pt(t,e){for(var n=0,r=(e=St(e,t)?[e]:_t(e)).length;null!=t&&n<r;)t=t[Dt(e[n++])];return n&&n==r?t:void 0}function vt(t,e){return null!=t&&e in Object(t)}function mt(t,e,s,a,u){return t===e||(null==t||null==e||!Wt(t)&&!qt(e)?t!=t&&e!=e:function(t,e,s,a,u,c){var l=Vt(t),h=Vt(e),f="[object Array]",d="[object Array]";l||(f=(f=Tt(t))==n?i:f);h||(d=(d=Tt(e))==n?i:d);var p=f==i&&!T(t),v=d==i&&!T(e),m=f==d;if(m&&!p)return c||(c=new st),l||Ht(t)?wt(t,e,s,a,u,c):function(t,e,n,i,s,a,u){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!i(new M(t),new M(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return jt(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case r:var c=k;case o:var l=2&a;if(c||(c=S),t.size!=e.size&&!l)return!1;var h=u.get(t);if(h)return h==e;a|=1,u.set(t,e);var f=wt(c(t),c(e),i,s,a,u);return u.delete(t),f;case"[object Symbol]":if(tt)return tt.call(t)==tt.call(e)}return!1}(t,e,f,s,a,u,c);if(!(2&u)){var y=p&&U.call(t,"__wrapped__"),g=v&&U.call(e,"__wrapped__");if(y||g){var b=y?t.value():t,_=g?e.value():e;return c||(c=new st),s(b,_,a,u,c)}}if(!m)return!1;return c||(c=new st),function(t,e,n,r,i,o){var s=2&i,a=Gt(t),u=a.length,c=Gt(e).length;if(u!=c&&!s)return!1;var l=u;for(;l--;){var h=a[l];if(!(s?h in e:U.call(e,h)))return!1}var f=o.get(t);if(f&&o.get(e))return f==e;var d=!0;o.set(t,e),o.set(e,t);var p=s;for(;++l<u;){h=a[l];var v=t[h],m=e[h];if(r)var y=s?r(m,v,h,e,t,o):r(v,m,h,t,e,o);if(!(void 0===y?v===m||n(v,m,r,i,o):y)){d=!1;break}p||(p="constructor"==h)}if(d&&!p){var g=t.constructor,b=e.constructor;g==b||!("constructor"in t)||!("constructor"in e)||"function"==typeof g&&g instanceof g&&"function"==typeof b&&b instanceof b||(d=!1)}return o.delete(t),o.delete(e),d}(t,e,s,a,u,c)}(t,e,mt,s,a,u))}function yt(t){return!(!Wt(t)||function(t){return!!R&&R in t}(t))&&($t(t)||T(t)?L:h).test(Rt(t))}function gt(t){return"function"==typeof t?t:null==t?Yt:"object"==typeof t?Vt(t)?function(t,e){if(St(t)&&xt(e))return Ot(Dt(t),e);return function(n){var r=function(t,e,n){var r=null==t?void 0:pt(t,e);return void 0===r?n:r}(n,t);return void 0===r&&r===e?function(t,e){return null!=t&&function(t,e,n){e=St(e,t)?[e]:_t(e);var r,i=-1,o=e.length;for(;++i<o;){var s=Dt(e[i]);if(!(r=null!=t&&n(t,s)))break;t=t[s]}if(r)return r;return!!(o=t?t.length:0)&&Bt(o)&&kt(s,o)&&(Vt(t)||Mt(t))}(t,e,vt)}(n,t):mt(e,r,void 0,3)}}(t[0],t[1]):function(t){var e=function(t){var e=Gt(t),n=e.length;for(;n--;){var r=e[n],i=t[r];e[n]=[r,i,xt(i)]}return e}(t);if(1==e.length&&e[0][2])return Ot(e[0][0],e[0][1]);return function(n){return n===t||function(t,e,n,r){var i=n.length,o=i,s=!r;if(null==t)return!o;for(t=Object(t);i--;){var a=n[i];if(s&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++i<o;){var u=(a=n[i])[0],c=t[u],l=a[1];if(s&&a[2]){if(void 0===c&&!(u in t))return!1}else{var h=new st;if(r)var f=r(c,l,u,t,e,h);if(!(void 0===f?mt(l,c,r,3,h):f))return!1}}return!0}(n,t,e)}}(t):function(t){return St(t)?(e=Dt(t),function(t){return null==t?void 0:t[e]}):function(t){return function(e){return pt(e,t)}}(t);var e}(t)}function bt(t){if(n=(e=t)&&e.constructor,r="function"==typeof n&&n.prototype||N,e!==r)return $(t);var e,n,r,i=[];for(var o in Object(t))U.call(t,o)&&"constructor"!=o&&i.push(o);return i}function _t(t){return Vt(t)?t:Nt(t)}function wt(t,e,n,r,i,o){var s=2&i,a=t.length,u=e.length;if(a!=u&&!(s&&u>a))return!1;var c=o.get(t);if(c&&o.get(e))return c==e;var l=-1,h=!0,f=1&i?new ot:void 0;for(o.set(t,e),o.set(e,t);++l<a;){var d=t[l],p=e[l];if(r)var v=s?r(p,d,l,e,t,o):r(d,p,l,t,e,o);if(void 0!==v){if(v)continue;h=!1;break}if(f){if(!I(e,(function(t,e){if(!f.has(e)&&(d===t||n(d,t,r,i,o)))return f.add(e)}))){h=!1;break}}else if(d!==p&&!n(d,p,r,i,o)){h=!1;break}}return o.delete(t),o.delete(e),h}function Et(t,e){var n,r,i=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof e?"string":"hash"]:i.map}function It(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return yt(n)?n:void 0}var Tt=function(t){return P.call(t)};function kt(t,e){return!!(e=null==e?9007199254740991:e)&&("number"==typeof t||f.test(t))&&t>-1&&t%1==0&&t<e}function St(t,e){if(Vt(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!zt(t))||(a.test(t)||!s.test(t)||null!=e&&t in Object(e))}function xt(t){return t==t&&!Wt(t)}function Ot(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in Object(n)))}}(B&&"[object DataView]"!=Tt(new B(new ArrayBuffer(1)))||W&&Tt(new W)!=r||q&&"[object Promise]"!=Tt(q.resolve())||z&&Tt(new z)!=o||H&&"[object WeakMap]"!=Tt(new H))&&(Tt=function(t){var e=P.call(t),n=e==i?t.constructor:void 0,s=n?Rt(n):void 0;if(s)switch(s){case Y:return"[object DataView]";case K:return r;case X:return"[object Promise]";case J:return o;case Z:return"[object WeakMap]"}return e});var Nt=Lt((function(t){var e;t=null==(e=t)?"":function(t){if("string"==typeof t)return t;if(zt(t))return et?et.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}(e);var n=[];return u.test(t)&&n.push(""),t.replace(c,(function(t,e,r,i){n.push(r?i.replace(l,"$1"):e||t)})),n}));function Dt(t){if("string"==typeof t||zt(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Rt(t){if(null!=t){try{return C.call(t)}catch(t){}try{return t+""}catch(t){}}return""}var Ct,Ut,Pt=(Ct=function(t,e,n){t[n]=e},function(t,e){var n=Vt(t)?E:ct,r=Ut?Ut():{};return n(t,Ct,gt(e),r)});function Lt(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=t.apply(this,r);return n.cache=o.set(i,s),s};return n.cache=new(Lt.Cache||it),n}function jt(t,e){return t===e||t!=t&&e!=e}function Mt(t){return function(t){return qt(t)&&Ft(t)}(t)&&U.call(t,"callee")&&(!V.call(t,"callee")||P.call(t)==n)}Lt.Cache=it;var Vt=Array.isArray;function Ft(t){return null!=t&&Bt(t.length)&&!$t(t)}function $t(t){var e=Wt(t)?P.call(t):"";return"[object Function]"==e||"[object GeneratorFunction]"==e}function Bt(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}function Wt(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function qt(t){return!!t&&"object"==typeof t}function zt(t){return"symbol"==typeof t||qt(t)&&"[object Symbol]"==P.call(t)}var Ht=w?function(t){return function(e){return t(e)}}(w):function(t){return qt(t)&&Bt(t.length)&&!!d[P.call(t)]};function Gt(t){return Ft(t)?at(t):bt(t)}function Yt(t){return t}t.exports=Pt}));function vl(t){return Array.isArray(t)?t.map(vl):(e=t,"[object Object]"===Object.prototype.toString.call(e)?Object.keys(t).reduce((function(e,n){return e[n]=vl(t[n]),e}),{}):t);var e}var ml=function(t,e){if(e=Object.assign({parentProperty:"parent_id",childrenProperty:"children",customID:"id",rootID:"0"},e),!Array.isArray(t))throw new TypeError("Expected an array but got an invalid argument");var n=function(t,e){var n=pl(t,e.customID);return t.reduce((function(t,r){var i=dl.get(r,e.parentProperty);return i&&n.hasOwnProperty(i)||(i=e.rootID),i&&t.hasOwnProperty(i)?(t[i].push(r),t):(t[i]=[r],t)}),{})}(vl(t),e);return function t(e,n,r,i){var o=[];for(var s in n){var a=n[s],u=e[a[r]];(a||n.hasOwnProperty(s))&&(u&&(a[i]=t(e,u,r,i)),o.push(a))}return o}(n,n[e.rootID],e.customID,e.childrenProperty)};const yl=()=>{let t="";nn.subscribe(e=>t=e);let e="";rn.subscribe(t=>e=t);let n="";on.subscribe(t=>n=t);const r=cl.session({database:t});return r.run(`USE ${t}.${e}\n      match (t:Tag)\n      Return collect({title:t.tagName,value:t.tagName,group:t.tagGroup}) as groups `,{userID:n,clientDB:e,fabricDB:t}).then(t=>(r.close(),t.records[0].toObject().groups)).catch(t=>(r.close(),console.log(t),t))};function gl(t,e,n){const r=t.slice();return r[12]=e[n],r}function bl(t,e,n){const r=t.slice();return r[9]=e[n],r}function _l(t){let e;return{c(){e=k("option"),e.textContent="Any",e.__value="Any",e.value=e.__value},m(t,n){E(t,e,n)},d(t){t&&I(e)}}}function wl(t,e){let n,r,i,o,s,a=e[12].name+"";return{key:t,first:null,c(){n=k("option"),r=S(a),i=x(),n.__value=o=e[12].id,n.value=n.__value,n.selected=s=e[9].id===e[12].id,this.first=n},m(t,e){E(t,n,e),w(n,r),w(n,i)},p(t,e){4&e&&a!==(a=t[12].name+"")&&R(r,a),4&e&&o!==(o=t[12].id)&&(n.__value=o),n.value=n.__value,6&e&&s!==(s=t[9].id===t[12].id)&&(n.selected=s)},d(t){t&&I(n)}}}function El(t,e){let n,r,o,s,a,u,c,l,h,f,d,p=[],v=new Map,m=e[2];const y=t=>t[12].id;for(let t=0;t<m.length;t+=1){let n=gl(e,m,t),r=y(n);v.set(r,p[t]=wl(r,n))}let g=null;function b(...t){return e[6](e[9],...t)}function _(...t){return e[7](e[9],...t)}return m.length||(g=_l()),{key:t,first:null,c(){n=k("div"),r=k("select"),o=k("option"),s=S("---- SELECIONE tag ----\r\n        ");for(let t=0;t<p.length;t+=1)p[t].c();g&&g.c(),c=x(),l=k("div"),l.textContent="❌",h=x(),o.__value=a="null",o.value=o.__value,o.selected=u=!e[9].id,D(r,"name","tagUUID"),D(r,"class","svelte-14cjoi7"),D(l,"class","remove svelte-14cjoi7"),D(n,"class","tag svelte-14cjoi7"),this.first=n},m(t,e){E(t,n,e),w(n,r),w(r,o),w(o,s);for(let t=0;t<p.length;t+=1)p[t].m(r,null);g&&g.m(r,null),w(n,c),w(n,l),w(n,h),f||(d=[A(r,"input",b),A(l,"click",_)],f=!0)},p(t,n){if(e=t,2&n&&u!==(u=!e[9].id)&&(o.selected=u),6&n){const t=e[2];p=bt(p,n,y,1,e,t,v,r,yt,wl,null,gl),t.length?g&&(g.d(1),g=null):g||(g=_l(),g.c(),g.m(r,null))}},d(t){t&&I(n);for(let t=0;t<p.length;t+=1)p[t].d();g&&g.d(),f=!1,i(d)}}}function Il(e){let n,r,o,s,a,u,c,l=[],h=new Map,f=e[1];const d=t=>t[9].frontendUUID;for(let t=0;t<f.length;t+=1){let n=bl(e,f,t),r=d(n);h.set(r,l[t]=El(r,n))}return{c(){n=k("main");for(let t=0;t<l.length;t+=1)l[t].c();r=x(),o=k("button"),o.textContent="Adicionar Tag",s=x(),a=k("button"),a.textContent="Fazer mágica",D(n,"class","svelte-14cjoi7"),D(o,"class","svelte-14cjoi7"),D(a,"class","svelte-14cjoi7")},m(t,i){E(t,n,i);for(let t=0;t<l.length;t+=1)l[t].m(n,null);E(t,r,i),E(t,o,i),E(t,s,i),E(t,a,i),u||(c=[A(o,"click",e[4]),A(a,"click",e[8])],u=!0)},p(t,[e]){if(46&e){const r=t[1];l=bt(l,e,d,1,t,r,h,n,yt,El,null,bl)}},i:t,o:t,d(t){t&&I(n);for(let t=0;t<l.length;t+=1)l[t].d();t&&I(r),t&&I(o),t&&I(s),t&&I(a),u=!1,i(c)}}}function Tl(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)}))}function kl(t,e,n){let{generateReport:r}=e,i=[{id:1,name:"balanço",key:"journal.balanço",frontendUUID:Tl()},{id:2,name:"grupo",key:"journal.grupo",frontendUUID:Tl()},{id:9,name:"rubrica",key:"journal.rubrica",frontendUUID:Tl()}],o=[{id:1,name:"balanço",key:"journal.balanço"},{id:2,name:"grupo",key:"journal.grupo"},{id:9,name:"rubrica",key:"journal.rubrica"},{id:92,name:"Persona",key:"Persona",tag:!0}];function s(t,e){t.target.parentNode.id;console.log(t.target.name,t.target.value),n(1,i=i.map(n=>{if(n.frontendUUID===e){let e={};return e=o.find(e=>e.id==t.target.value),{...n,...e}}return{...n}}))}q(()=>{yl().then(t=>{const e=[...new Set(t.map(t=>t.group))].map(t=>({id:Tl(),name:t,key:t,tag:!0}));n(2,o=[...o,...e]),console.log("tagsChooser",e)}).catch(t=>console.log(t))});function a(t){n(1,i=i.filter(e=>e.frontendUUID!=t))}return t.$set=t=>{"generateReport"in t&&n(0,r=t.generateReport)},[r,i,o,s,()=>{n(1,i=[...i,{tagUUID:null,frontendUUID:Tl()}])},a,(t,e)=>s(e,t.frontendUUID),t=>a(t.frontendUUID),()=>r(i)]}class Sl extends kt{constructor(t){super(),Tt(this,t,kl,Il,s,{generateReport:0})}}var xl=function(t){if(!Array.isArray(t))throw new TypeError;var e=t.length-1,n=[];return t.length?function r(i,o){for(var s=t[o],a=o===e,u=0;u<s.length;++u){var c=i.slice();c.push(s[u]),a?n.push(c):r(c,o+1)}}([],0):n.push([]),n};const Ol=(t,e)=>{let n=t.map(t=>{console.log("[entry]",t);const n=t["journal.tags"]?[...t["journal.tags"]]:[];console.log("tags",n);const r=tn.groupBy(n,"title"),i=Object.keys(r).reduce((t,e)=>[[...r[e]],...t],[]);console.log("flattentags",i);const o=xl(i);return console.log("splittedJournals",o),o.map(n=>{console.log(n);let r=n.reduce((t,e)=>({...t,[e.title]:e.value,order:e.order,portion:parseFloat((t.portion*(e.portion?e.portion:1)).toFixed(2))}),{portion:1}),i={};return e.forEach((e,n)=>{e.tag?i[e.key]=r[e.key]?r[e.key]:null:i[e.key]=t[e.key]}),i.amount=t.amount*r.portion,i.year=t.year,i.month=t.month,{...t,...i,splitted:!0,amountTotal:t.amount}})});return tn.flatten(n)};function Al(t){let e,n,r,i,s,a,u,c,l,h,f=(t[32].date?"--":t[32].name)+"";return{c(){e=k("div"),n=k("div"),r=k("span"),i=S(f),s=x(),a=k("div"),D(a,"class","date-grid svelte-1o5pisp"),D(n,"class","title-tree svelte-1o5pisp"),D(e,"class","name svelte-1o5pisp"),D(e,"name",u=t[32].name),P(e,"color",t[32].header)},m(o,u){E(o,e,u),w(e,n),w(n,r),w(r,i),w(n,s),w(n,a),l||(h=p(c=t[4].call(null,e,t[32])),l=!0)},p(t,n){2&n[1]&&f!==(f=(t[32].date?"--":t[32].name)+"")&&R(i,f),2&n[1]&&u!==(u=t[32].name)&&D(e,"name",u),c&&o(c.update)&&2&n[1]&&c.update.call(null,t[32]),2&n[1]&&P(e,"color",t[32].header)},d(t){t&&I(e),l=!1,h()}}}function Nl(t){let e,n,r,o,s,a,u,c,l,h,f,d,p,v,m,y,g;return f=new Cn({props:{tree:t[0],$$slots:{default:[Al,({node:t})=>({32:t}),({node:t})=>[0,t?2:0]]},$$scope:{ctx:t}}}),v=new Sl({props:{generateReport:t[6]}}),{c(){e=k("main"),n=k("div"),r=k("button"),r.textContent="Ver Balanço | Ano",o=x(),s=k("button"),s.textContent="Ver Balanço | Mês",a=x(),u=k("button"),u.textContent="Novo Natural",c=x(),l=k("div"),h=k("div"),_t(f.$$.fragment),d=x(),p=k("div"),_t(v.$$.fragment),D(r,"class","svelte-1o5pisp"),D(s,"class","svelte-1o5pisp"),D(u,"class","svelte-1o5pisp"),D(n,"class","menu__top svelte-1o5pisp"),D(h,"class","group svelte-1o5pisp"),D(l,"class","grid svelte-1o5pisp"),D(p,"class","menu__bottom svelte-1o5pisp"),D(e,"class","svelte-1o5pisp")},m(i,b){E(i,e,b),w(e,n),w(n,r),w(n,o),w(n,s),w(n,a),w(n,u),w(e,c),w(e,l),w(l,h),wt(f,h,null),t[10](h),w(e,d),w(e,p),wt(v,p,null),m=!0,y||(g=[A(r,"click",t[8]),A(s,"click",t[9]),A(u,"click",t[7])],y=!0)},p(t,e){const n={};1&e[0]&&(n.tree=t[0]),6&e[1]&&(n.$$scope={dirty:e,ctx:t}),f.$set(n)},i(t){m||(lt(f.$$.fragment,t),lt(v.$$.fragment,t),m=!0)},o(t){ht(f.$$.fragment,t),ht(v.$$.fragment,t),m=!1},d(n){n&&I(e),Et(f),t[10](null),Et(v),y=!1,i(g)}}}function Dl(t,e,n){let r;c(t,sn,t=>n(14,r=t));const i=t=>{var e,n;console.log("setting....",t),fl.setData(t),e="drillDownData",n=t,W().$$.context.set(e,n)};let o=[];const s=new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRl"});let a=null,u=[],l=[],h=[],f="year";q(()=>{sn.set(null),n(2,l=[]),n(0,o=[]),p(),n(3,f="year")});const d=t=>{let e=[];e=[...e,{date:!0,key:"data",id:"data",name:"data",order:-1,parent_id:null}],t.map((t,e)=>{let n=[...new Set(l.map(e=>e[t.key]))];return{name:t.name,key:t.key,values:n}}).forEach((n,r)=>{0==r&&n.values.forEach((t,r)=>{e=[...e,{header:!0,key:n.key,id:t,name:t,parent_id:null}]}),t[r+1]&&n.values.forEach(i=>{l.filter(t=>t[n.key]==i).forEach(n=>{e=[...e,{amount:n.amount?s.format(n.amount):"-",key:t[r+1].name,id:n[""+t[r+1].key]?n[""+t[r+1].key]:"---",name:n[""+t[r+1].key]?n[""+t[r+1].key]:"---",parent_id:i}]})})}),e=tn.uniqBy(e,t=>t.id+t.parent_id),e=e.map(t=>{const e=hl.find(e=>e.name===t.name)?hl.find(e=>e.name===t.name).order:null;return{...t,order:e}}),e=tn.orderBy(e,["order"],["asc"]),h=[...ml(e)],n(0,o=[...ml(e)]),n(0,o=[...o]),console.log("tree",o,"groupsAux",e)},p=async()=>{u=[{id:1,name:"balanço",key:"journal.balanço"},{id:2,name:"grupo",key:"journal.grupo"},{id:9,name:"rubrica",key:"journal.rubrica"}],n(2,l=await ll()),n(2,l=[...l]),console.log("[accounts]",l),d(u)};return[o,a,l,f,(t,e)=>{const n=t.parentNode.parentNode.parentNode.parentNode.firstChild.firstChild.nextElementSibling;if(n){const r=n.getAttribute("path")?n.getAttribute("path"):null;t.setAttribute("path",r?r+"|"+e.name:e.name?e.name:"null")}else t.setAttribute("path",e.name?e.name:"null");let r=t.getAttribute("path").split("|");console.log("accounts",l),console.log("path",r);let o={};r.forEach((t,e)=>{u[e]&&t&&(o={...o,[u[e].key]:"---"===t?null:t}),t||console.log(u[e].key,t)}),console.log("matchObj",o);const a=tn.filter(l,tn.matches({...o}));if("year"===f){const n=[...new Set(l.map(t=>t.year))],r=t.firstChild.firstChild.nextElementSibling;r.style["grid-template-columns"]=`repeat(${n.length},4.55rem)`,n.forEach(t=>{const n=tn.filter(a,tn.matches({year:t})),u=tn.sumBy(tn.filter(a,tn.matches({year:t})),"amount"),c=document.createElement("div");u>0&&!e.date&&(c.style.color="green"),u<0&&!e.date&&(c.style.color="red"),e.header&&!e.date&&(c.style.color="blue"),e.date?(c.innerText=t,c.style.color="#008B8B"):c.innerText=s.format(u),console.log("year,path,amount",t,o,u,s.format(u)),c.addEventListener("click",t=>{t.preventDefault(),i(n),Ye("drilldown/11")}),r.append(c)})}if("month"===f){const n="2020",r=["JAN","FEV","MAR","ABR","MAIO","JUN","JUL","AGO","SET","OUT","NOV","DEZ"],o=t.firstChild.firstChild.nextElementSibling;o.style["grid-template-columns"]="repeat(12,4.55rem)",r.forEach((t,u)=>{const c=tn.filter(a,tn.matches({year:n,month:""+(u<9?"0"+(u+1):u+1)})),l=tn.sumBy(c,"amount"),h=document.createElement("div");l>0&&(h.style.color="green"),l<0&&(h.style.color="red"),e.header&&(h.style.color="blue"),e.date?(h.innerText=r[u]+"/"+n,h.style.color="#008B8B"):h.innerText=s.format(l),h.addEventListener("click",t=>{t.preventDefault(),i(c),Ye("drilldown/11")}),o.append(h)})}},p,async t=>{n(2,l=[]),n(0,o=[]),console.log(t),u=[...t],n(2,l=[...await ll()]),n(2,l=[...Ol(l,t)]),d(u),console.log(Ol(l,t))},()=>{console.log("clicked"),Ye("natural/"+fn())},()=>{n(2,l=[]),n(0,o=[]),p(),n(3,f="year")},()=>{n(2,l=[]),n(0,o=[]),p(),n(3,f="month")},function(t){G[t?"unshift":"push"](()=>{a=t,n(1,a)})}]}const Rl=t=>{let e="";nn.subscribe(t=>e=t);let n="";rn.subscribe(t=>n=t);let r="";on.subscribe(t=>r=t);const i=cl.session({database:e});return i.run(`  USE ${e}.${n}\n        CALL \n        apoc.mongodb.find('mongodb://mcbenner:mcbenner15@104.198.131.90:27017', 'realFlow', 'forms', {type:$formType},{_id:0},{},  false, 0,0,false, true) yield value\n        return value\n            `,{userID:r,clientDB:n,fabricDB:e,formType:t}).then(t=>(i.close(),t.records[0]?t.records[0].toObject().value:null)).catch(t=>(i.close(),console.log(t),t))};function Cl(t){var e,n,r="";if("string"==typeof t||"number"==typeof t)r+=t;else if("object"==typeof t)if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=Cl(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function Ul(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=Cl(t))&&(r&&(r+=" "),r+=e);return r}function Pl(t,e){const n=parseFloat(e[0]);return(isNaN(t)?t.length:parseFloat(t))>=n}function Ll(t,e){const n=parseFloat(e[0]),r=isNaN(t)?t.length:parseFloat(t);return!!isNaN(r)||r<=n}var jl=Object.freeze({__proto__:null,between:function(t,e){return Pl(t,[e[0]])&&Ll(t,[e[1]])},email:function(t,e){return t&&/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t)},max:Ll,min:Pl,required:function(t,e){if(null==t||"undefined"===t||"null"===t)return!1;if("string"==typeof t){return t.replace(/\s/g,"").length>0}return!0},url:function t(e,n){return/(https?|ftp|git|svn):\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/i.test(t)},equal:function(t,e){return t===e[0]},types:function(t,e){return!!e.includes(function(t){const e=t.name.split(".");return e[e.length-1].toLowerCase()}(t))},maxsize:function(t,e){const n=1024*parseFloat(e)*1024;return!(t.size>n)}});function Ml(t,e){let n=t.call(),r=!0;Object.keys(n).map(t=>{const e=n[t];if(e.validators){const i=function(t){const{value:e,validators:n}=t;let r,i=!0,o=[];return n.map(n=>{if("file"===n)e&&Object.keys(e).map(n=>{Object.keys(t.file).map(r=>{i=jl[r].call(null,e[n],t.file[r]),i||(o=[...o,r])})});else{if("function"==typeof n)i=n.call(),r=n.name;else{const t=n.split(/:/g);r=t.shift(),i=jl[r].call(null,e,t)}i||(o=[...o,r])}}),{...t,validation:{errors:o,dirty:o.length>0}}}(e);n[t]={...n[t],...i},i.validation.errors.length>0&&(r=!1)}else n[t]={...n[t],validation:{errors:[],dirty:!1}}}),n={...n,valid:r},e.set(n)}function Vl(t){const e=Ot({valid:!0});return function(t){W().$$.after_update.push(t)}(()=>Ml(t,e)),e}const Fl=Ot({isValidForm:!0,values:{}});function $l(t){let e,n,r;const i=t[3].default,o=l(i,t,t[2],null);return{c(){e=k("div"),o&&o.c(),D(e,"class",n=t[1].length>0?Ul(t[1]):null)},m(t,n){E(t,e,n),o&&o.m(e,null),r=!0},p(t,s){o&&o.p&&4&s&&f(o,i,t,t[2],s,null,null),(!r||2&s&&n!==(n=t[1].length>0?Ul(t[1]):null))&&D(e,"class",n)},i(t){r||(lt(o,t),r=!0)},o(t){ht(o,t),r=!1},d(t){t&&I(e),o&&o.d(t)}}}function Bl(t){let e,n,r;const i=t[3].default,o=l(i,t,t[2],null);return{c(){e=k("label"),o&&o.c(),D(e,"class",n=t[1].length>0?Ul(t[1]):null)},m(t,n){E(t,e,n),o&&o.m(e,null),r=!0},p(t,s){o&&o.p&&4&s&&f(o,i,t,t[2],s,null,null),(!r||2&s&&n!==(n=t[1].length>0?Ul(t[1]):null))&&D(e,"class",n)},i(t){r||(lt(o,t),r=!0)},o(t){ht(o,t),r=!1},d(t){t&&I(e),o&&o.d(t)}}}function Wl(t){let e,n,r;const i=t[3].default,o=l(i,t,t[2],null);return{c(){e=k("strong"),o&&o.c(),D(e,"class",n=t[1].length>0?Ul(t[1]):null)},m(t,n){E(t,e,n),o&&o.m(e,null),r=!0},p(t,s){o&&o.p&&4&s&&f(o,i,t,t[2],s,null,null),(!r||2&s&&n!==(n=t[1].length>0?Ul(t[1]):null))&&D(e,"class",n)},i(t){r||(lt(o,t),r=!0)},o(t){ht(o,t),r=!1},d(t){t&&I(e),o&&o.d(t)}}}function ql(t){let e,n,r;const i=t[3].default,o=l(i,t,t[2],null);return{c(){e=k("small"),o&&o.c(),D(e,"class",n=t[1].length>0?Ul(t[1]):null)},m(t,n){E(t,e,n),o&&o.m(e,null),r=!0},p(t,s){o&&o.p&&4&s&&f(o,i,t,t[2],s,null,null),(!r||2&s&&n!==(n=t[1].length>0?Ul(t[1]):null))&&D(e,"class",n)},i(t){r||(lt(o,t),r=!0)},o(t){ht(o,t),r=!1},d(t){t&&I(e),o&&o.d(t)}}}function zl(t){let e,n,r;const i=t[3].default,o=l(i,t,t[2],null);return{c(){e=k("span"),o&&o.c(),D(e,"class",n=t[1].length>0?Ul(t[1]):null)},m(t,n){E(t,e,n),o&&o.m(e,null),r=!0},p(t,s){o&&o.p&&4&s&&f(o,i,t,t[2],s,null,null),(!r||2&s&&n!==(n=t[1].length>0?Ul(t[1]):null))&&D(e,"class",n)},i(t){r||(lt(o,t),r=!0)},o(t){ht(o,t),r=!1},d(t){t&&I(e),o&&o.d(t)}}}function Hl(t){let e,n,r,i;const o=[zl,ql,Wl,Bl,$l],s=[];function a(t,e){return"span"===t[0]?0:"small"===t[0]?1:"strong"===t[0]?2:"label"===t[0]?3:4}return e=a(t),n=s[e]=o[e](t),{c(){n.c(),r=O()},m(t,n){s[e].m(t,n),E(t,r,n),i=!0},p(t,[i]){let u=e;e=a(t),e===u?s[e].p(t,i):(ut(),ht(s[u],1,1,()=>{s[u]=null}),ct(),n=s[e],n||(n=s[e]=o[e](t),n.c()),lt(n,1),n.m(r.parentNode,r))},i(t){i||(lt(n),i=!0)},o(t){ht(n),i=!1},d(t){s[e].d(t),t&&I(r)}}}function Gl(t,e,n){let{tag:r="div"}=e,{classes:i=[]}=e,{$$slots:o={},$$scope:s}=e;return t.$set=t=>{"tag"in t&&n(0,r=t.tag),"classes"in t&&n(1,i=t.classes),"$$scope"in t&&n(2,s=t.$$scope)},[r,i,s,o]}class Yl extends kt{constructor(t){super(),Tt(this,t,Gl,Hl,s,{tag:0,classes:1})}}function Kl(t,e,n){const r=t.slice();return r[22]=e[n],r}function Xl(t,e,n){const r=t.slice();return r[19]=e[n],r}function Jl(t,e,n){const r=t.slice();return r[16]=e[n],r[18]=n,r}function Zl(t,e){let n,r,i,o,s,a=e[22].title+"";return{key:t,first:null,c(){n=k("option"),r=S(a),i=x(),n.__value=o=e[22].value,n.value=n.__value,n.selected=s=e[16].tagUUID===e[22].value,this.first=n},m(t,e){E(t,n,e),w(n,r),w(n,i)},p(t,e){1&e&&a!==(a=t[22].title+"")&&R(r,a),1&e&&o!==(o=t[22].value)&&(n.__value=o),n.value=n.__value,3&e&&s!==(s=t[16].tagUUID===t[22].value)&&(n.selected=s)},d(t){t&&I(n)}}}function Ql(t){let e,n,r=[],i=new Map;function o(...e){return t[11](t[19],...e)}let s=t[0].filter(o);const a=t=>t[22].value+t[22].title+t[19];for(let e=0;e<s.length;e+=1){let n=Kl(t,s,e),o=a(n);i.set(o,r[e]=Zl(o,n))}return{c(){e=k("optgroup");for(let t=0;t<r.length;t+=1)r[t].c();D(e,"label",n=t[19])},m(t,n){E(t,e,n);for(let t=0;t<r.length;t+=1)r[t].m(e,null)},p(s,u){if(t=s,3&u){const n=t[0].filter(o);r=bt(r,u,a,1,t,n,i,e,yt,Zl,null,Kl)}1&u&&n!==(n=t[19])&&D(e,"label",n)},d(t){t&&I(e);for(let t=0;t<r.length;t+=1)r[t].d()}}}function th(t,e){let n,r,o,s,a,u,c,l,h,f,d,p,v=[...new Set(e[0].map(nh))],m=[];for(let t=0;t<v.length;t+=1)m[t]=Ql(Xl(e,v,t));function y(...t){return e[12](e[16],...t)}function g(...t){return e[13](e[16],...t)}function b(...t){return e[14](e[16],...t)}return{key:t,first:null,c(){n=k("div"),r=k("select"),o=k("option"),o.textContent="Selecionar TAG";for(let t=0;t<m.length;t+=1)m[t].c();a=x(),u=k("input"),l=x(),h=k("button"),h.textContent="🗑",o.__value="Selecionar TAG",o.value=o.__value,D(r,"id",s="grupo"+e[18]),D(r,"name","tagUUID"),D(r,"class","svelte-1y8kv85"),D(u,"name","amount"),D(u,"type","number"),u.value=c=e[16].amount,D(u,"class","svelte-1y8kv85"),D(h,"type","button"),D(h,"class","svelte-1y8kv85"),D(n,"id",f=e[18]),D(n,"name","tagwrapper"),D(n,"class","tag svelte-1y8kv85"),this.first=n},m(t,e){E(t,n,e),w(n,r),w(r,o);for(let t=0;t<m.length;t+=1)m[t].m(r,null);w(n,a),w(n,u),w(n,l),w(n,h),d||(p=[A(r,"input",y),A(u,"input",g),A(h,"click",N(b))],d=!0)},p(t,i){if(e=t,3&i){let t;for(v=[...new Set(e[0].map(nh))],t=0;t<v.length;t+=1){const n=Xl(e,v,t);m[t]?m[t].p(n,i):(m[t]=Ql(n),m[t].c(),m[t].m(r,null))}for(;t<m.length;t+=1)m[t].d(1);m.length=v.length}2&i&&s!==(s="grupo"+e[18])&&D(r,"id",s),2&i&&c!==(c=e[16].amount)&&(u.value=c),2&i&&f!==(f=e[18])&&D(n,"id",f)},d(t){t&&I(n),T(m,t),d=!1,i(p)}}}function eh(e){let n,r,i,o,s,a=[],u=new Map,c=e[1];const l=t=>t[16].frontendUUID;for(let t=0;t<c.length;t+=1){let n=Jl(e,c,t),r=l(n);u.set(r,a[t]=th(r,n))}return{c(){n=k("main");for(let t=0;t<a.length;t+=1)a[t].c();r=x(),i=k("button"),i.textContent="Adicionar Tag",D(i,"class","svelte-1y8kv85"),D(n,"class","svelte-1y8kv85")},m(t,u){E(t,n,u);for(let t=0;t<a.length;t+=1)a[t].m(n,null);w(n,r),w(n,i),o||(s=A(i,"click",e[2]),o=!0)},p(t,[e]){if(27&e){const i=t[1];a=bt(a,e,l,1,t,i,u,n,yt,th,r,Jl)}},i:t,o:t,d(t){t&&I(n);for(let t=0;t<a.length;t+=1)a[t].d();o=!1,s()}}}const nh=t=>t.group;function rh(t,e,n){let{id:r=""}=e,{name:i=""}=e,{classe:o=""}=e,{disabled:s=null}=e,{journals:a=[]}=e,{groups:u=[]}=e,{value:c=[]}=e;const l=z();let h=[];function f(t,e){t.target.parentNode.id;n(1,h=h.map(n=>{if(n.frontendUUID===e){let e={};return e[t.target.name]=t.target.value,{...n,...e}}return{...n}})),l("changeValue",{name:i,value:h})}function d(t){n(1,h=h.filter(e=>e.frontendUUID!=t)),l("changeValue",{name:i,value:h})}return t.$set=t=>{"id"in t&&n(5,r=t.id),"name"in t&&n(6,i=t.name),"classe"in t&&n(7,o=t.classe),"disabled"in t&&n(8,s=t.disabled),"journals"in t&&n(9,a=t.journals),"groups"in t&&n(0,u=t.groups),"value"in t&&n(10,c=t.value)},t.$$.update=()=>{1024&t.$$.dirty&&n(1,h=[...c]),1&t.$$.dirty&&console.log("[tags]",u),1&t.$$.dirty&&console.log("[tagGroup",[...new Set(u.map(t=>t.group))])},[u,h,()=>{n(1,h=[...h,{tagUUID:null,frontendUUID:"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)}))}])},f,d,r,i,o,s,a,c,(t,e)=>e.group===t,(t,e)=>f(e,t.frontendUUID),(t,e)=>f(e,t.frontendUUID),t=>{d(t.frontendUUID)}]}class ih extends kt{constructor(t){super(),Tt(this,t,rh,eh,s,{id:5,name:6,classe:7,disabled:8,journals:9,groups:0,value:10})}}function oh(e){let n,r,i,o;return{c(){n=k("input"),D(n,"type",e[0]),D(n,"id",e[3]),D(n,"name",e[4]),n.value=e[1],D(n,"class",r=d(Ul(e[5]))+" svelte-tzk7jc"),D(n,"placeholder",e[2]),n.disabled=e[10],n.readOnly=e[11],D(n,"min",e[6]),D(n,"max",e[7]),D(n,"step",e[8]),D(n,"autocomplete",e[9])},m(t,r){E(t,n,r),i||(o=A(n,"input",e[12]),i=!0)},p(t,[e]){1&e&&D(n,"type",t[0]),8&e&&D(n,"id",t[3]),16&e&&D(n,"name",t[4]),2&e&&n.value!==t[1]&&(n.value=t[1]),32&e&&r!==(r=d(Ul(t[5]))+" svelte-tzk7jc")&&D(n,"class",r),4&e&&D(n,"placeholder",t[2]),1024&e&&(n.disabled=t[10]),2048&e&&(n.readOnly=t[11]),64&e&&D(n,"min",t[6]),128&e&&D(n,"max",t[7]),256&e&&D(n,"step",t[8]),512&e&&D(n,"autocomplete",t[9])},i:t,o:t,d(t){t&&I(n),i=!1,o()}}}function sh(t,e,n){let{type:r="text"}=e,{id:i=""}=e,{name:o=""}=e,{value:s=""}=e,{classe:a=""}=e,{min:u=null}=e,{max:c=null}=e,{step:l=null}=e,{autocomplete:h="off"}=e,{placeholder:f=null}=e,{disabled:d=null}=e,{readonly:p=null}=e;"title"==o&&(f="Compra de água para o escritório...");const v=z();return q(()=>{n(0,r="datetimelocal"===r?"datetime-local":r),n(1,s="range"===r?n(1,s=u):s),v("changeValue",{name:o,value:s})}),t.$set=t=>{"type"in t&&n(0,r=t.type),"id"in t&&n(3,i=t.id),"name"in t&&n(4,o=t.name),"value"in t&&n(1,s=t.value),"classe"in t&&n(5,a=t.classe),"min"in t&&n(6,u=t.min),"max"in t&&n(7,c=t.max),"step"in t&&n(8,l=t.step),"autocomplete"in t&&n(9,h=t.autocomplete),"placeholder"in t&&n(2,f=t.placeholder),"disabled"in t&&n(10,d=t.disabled),"readonly"in t&&n(11,p=t.readonly)},[r,s,f,i,o,a,u,c,l,h,d,p,function(t){console.log("onmount"),v("changeValue",{name:o,value:t.target.value})}]}class ah extends kt{constructor(t){super(),Tt(this,t,sh,oh,s,{type:0,id:3,name:4,value:1,classe:5,min:6,max:7,step:8,autocomplete:9,placeholder:2,disabled:10,readonly:11})}}function uh(e){let n,r,i,o,s;return{c(){n=k("textarea"),D(n,"id",e[0]),D(n,"name",e[1]),D(n,"class",r=d(Ul(e[3]))+" svelte-15n1hs4"),n.required=e[6],n.disabled=e[7],n.readOnly=e[8],D(n,"rows",e[4]),D(n,"cols",e[5]),n.value=i="\n  "+e[2]+"\n"},m(t,r){E(t,n,r),o||(s=A(n,"input",e[9]),o=!0)},p(t,[e]){1&e&&D(n,"id",t[0]),2&e&&D(n,"name",t[1]),8&e&&r!==(r=d(Ul(t[3]))+" svelte-15n1hs4")&&D(n,"class",r),64&e&&(n.required=t[6]),128&e&&(n.disabled=t[7]),256&e&&(n.readOnly=t[8]),16&e&&D(n,"rows",t[4]),32&e&&D(n,"cols",t[5]),4&e&&i!==(i="\n  "+t[2]+"\n")&&(n.value=i)},i:t,o:t,d(t){t&&I(n),o=!1,s()}}}function ch(t,e,n){let{id:r=""}=e,{name:i=""}=e,{value:o=""}=e,{classe:s=""}=e,{rows:a=""}=e,{cols:u=50}=e,{required:c=!1}=e,{disabled:l=!1}=e,{readonly:h=!1}=e;const f=z();return q(()=>{f("changeValue",{name:i,value:o})}),t.$set=t=>{"id"in t&&n(0,r=t.id),"name"in t&&n(1,i=t.name),"value"in t&&n(2,o=t.value),"classe"in t&&n(3,s=t.classe),"rows"in t&&n(4,a=t.rows),"cols"in t&&n(5,u=t.cols),"required"in t&&n(6,c=t.required),"disabled"in t&&n(7,l=t.disabled),"readonly"in t&&n(8,h=t.readonly)},[r,i,o,s,a,u,c,l,h,function(t){let e=t.target.value;e.replace("\n"," "),f("changeValue",{name:i,value:e})}]}class lh extends kt{constructor(t){super(),Tt(this,t,ch,uh,s,{id:0,name:1,value:2,classe:3,rows:4,cols:5,required:6,disabled:7,readonly:8})}}function hh(t,e,n){const r=t.slice();return r[8]=e[n],r}function fh(t){let e;return{c(){e=k("option"),e.textContent="Any",e.__value="Any",e.value=e.__value},m(t,n){E(t,e,n)},d(t){t&&I(e)}}}function dh(t,e){let n,r,i,o=e[8].title+"";return{key:t,first:null,c(){n=k("option"),r=S(o),n.__value=i=e[8].value,n.value=n.__value,this.first=n},m(t,e){E(t,n,e),w(n,r)},p(t,e){8&e&&o!==(o=t[8].title+"")&&R(r,o),8&e&&i!==(i=t[8].value)&&(n.__value=i),n.value=n.__value},d(t){t&&I(n)}}}function ph(e){let n,r,i,o,s=[],a=new Map,u=e[3];const c=t=>t[8].value;for(let t=0;t<u.length;t+=1){let n=hh(e,u,t),r=c(n);a.set(r,s[t]=dh(r,n))}let l=null;return u.length||(l=fh()),{c(){n=k("select");for(let t=0;t<s.length;t+=1)s[t].c();l&&l.c(),D(n,"id",e[0]),D(n,"name",e[1]),D(n,"class",r=d(Ul(e[2]))+" svelte-127ol76"),n.disabled=e[4],n.multiple=e[5]},m(t,r){E(t,n,r);for(let t=0;t<s.length;t+=1)s[t].m(n,null);l&&l.m(n,null),i||(o=A(n,"input",e[6]),i=!0)},p(t,[e]){if(8&e){const r=t[3];s=bt(s,e,c,1,t,r,a,n,yt,dh,null,hh),r.length?l&&(l.d(1),l=null):l||(l=fh(),l.c(),l.m(n,null))}1&e&&D(n,"id",t[0]),2&e&&D(n,"name",t[1]),4&e&&r!==(r=d(Ul(t[2]))+" svelte-127ol76")&&D(n,"class",r),16&e&&(n.disabled=t[4]),32&e&&(n.multiple=t[5])},i:t,o:t,d(t){t&&I(n);for(let t=0;t<s.length;t+=1)s[t].d();l&&l.d(),i=!1,o()}}}function vh(t,e,n){let{id:r=""}=e,{name:i=""}=e,{classe:o=""}=e,{options:s=[]}=e,{disabled:a=!1}=e,{multiple:u=!1}=e;const c=z();return q(()=>{s.length>0&&c("changeValue",{name:i,value:s[0].value})}),t.$set=t=>{"id"in t&&n(0,r=t.id),"name"in t&&n(1,i=t.name),"classe"in t&&n(2,o=t.classe),"options"in t&&n(3,s=t.options),"disabled"in t&&n(4,a=t.disabled),"multiple"in t&&n(5,u=t.multiple)},[r,i,o,s,a,u,function(t){c("changeValue",{name:i,value:t.target.value})}]}class mh extends kt{constructor(t){super(),Tt(this,t,vh,ph,s,{id:0,name:1,classe:2,options:3,disabled:4,multiple:5})}}function yh(t,e,n){const r=t.slice();return r[20]=e[n],r}function gh(t,e,n){const r=t.slice();return r[20]=e[n],r}function bh(t,e,n){const r=t.slice();return r[25]=e[n],r}function _h(t){let e,n,r,i,o=t[5],s=[];for(let e=0;e<o.length;e+=1)s[e]=Eh(bh(t,o,e));return{c(){for(let t=0;t<s.length;t+=1)s[t].c();e=x(),n=k("div"),n.innerHTML='<svg width="100%" height="100%" viewBox="-2 -2 50 50" focusable="false" role="presentation" class="svelte-e3bo9s"><path fill="currentColor" d="M34.923,37.251L24,26.328L13.077,37.251L9.436,33.61l10.923-10.923L9.436,11.765l3.641-3.641L24,19.047L34.923,8.124\n          l3.641,3.641L27.641,22.688L38.564,33.61L34.923,37.251z"></path></svg>',D(n,"class","clear-all svelte-18kn78o")},m(o,a){for(let t=0;t<s.length;t+=1)s[t].m(o,a);E(o,e,a),E(o,n,a),r||(i=A(n,"click",t[11]),r=!0)},p(t,n){if(1060&n){let r;for(o=t[5],r=0;r<o.length;r+=1){const i=bh(t,o,r);s[r]?s[r].p(i,n):(s[r]=Eh(i),s[r].c(),s[r].m(e.parentNode,e))}for(;r<s.length;r+=1)s[r].d(1);s.length=o.length}},d(t){T(s,t),t&&I(e),t&&I(n),r=!1,i()}}}function wh(t){let e,n,r;function i(...e){return t[15](t[25],...e)}return{c(){e=k("div"),e.innerHTML='<svg width="100%" height="100%" viewBox="-2 -2 50 50" focusable="false" class="svelte-18kn78o"><path d="M34.923,37.251L24,26.328L13.077,37.251L9.436,33.61l10.923-10.923L9.436,11.765l3.641-3.641L24,19.047L34.923,8.124\n                l3.641,3.641L27.641,22.688L38.564,33.61L34.923,37.251z"></path></svg>',D(e,"class","clear svelte-18kn78o")},m(t,o){E(t,e,o),n||(r=A(e,"click",i),n=!0)},p(e,n){t=e},d(t){t&&I(e),n=!1,r()}}}function Eh(t){let e,n,r,i,o,s=t[25].title+"",a=t[2]&&wh(t);return{c(){e=k("div"),n=k("span"),r=S(s),i=x(),a&&a.c(),D(e,"class",o="item-selected "+(t[2]?"tag":"")+" svelte-18kn78o")},m(t,o){E(t,e,o),w(e,n),w(n,r),w(e,i),a&&a.m(e,null)},p(t,n){32&n&&s!==(s=t[25].title+"")&&R(r,s),t[2]?a?a.p(t,n):(a=wh(t),a.c(),a.m(e,null)):a&&(a.d(1),a=null),4&n&&o!==(o="item-selected "+(t[2]?"tag":"")+" svelte-18kn78o")&&D(e,"class",o)},d(t){t&&I(e),a&&a.d()}}}function Ih(t){let e,n;function r(t,e){return t[7]?kh:Th}let i=r(t),o=i(t);return{c(){e=k("div"),n=k("div"),o.c(),D(n,"class","items-container svelte-18kn78o"),U(e,"position","relative"),U(e,"width","100%")},m(t,r){E(t,e,r),w(e,n),o.m(n,null)},p(t,e){i===(i=r(t))&&o?o.p(t,e):(o.d(1),o=i(t),o&&(o.c(),o.m(n,null)))},d(t){t&&I(e),o.d()}}}function Th(t){let e,n=t[3],r=[];for(let e=0;e<n.length;e+=1)r[e]=Sh(yh(t,n,e));return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=O()},m(t,n){for(let e=0;e<r.length;e+=1)r[e].m(t,n);E(t,e,n)},p(t,i){if(520&i){let o;for(n=t[3],o=0;o<n.length;o+=1){const s=yh(t,n,o);r[o]?r[o].p(s,i):(r[o]=Sh(s),r[o].c(),r[o].m(e.parentNode,e))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},d(t){T(r,t),t&&I(e)}}}function kh(t){let e,n=t[4],r=[];for(let e=0;e<n.length;e+=1)r[e]=xh(gh(t,n,e));return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=O()},m(t,n){for(let e=0;e<r.length;e+=1)r[e].m(t,n);E(t,e,n)},p(t,i){if(528&i){let o;for(n=t[4],o=0;o<n.length;o+=1){const s=gh(t,n,o);r[o]?r[o].p(s,i):(r[o]=xh(s),r[o].c(),r[o].m(e.parentNode,e))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},d(t){T(r,t),t&&I(e)}}}function Sh(t){let e,n,r,i,o,s,a=t[20].title+"";function u(...e){return t[18](t[20],...e)}return{c(){e=k("div"),n=k("span"),r=S(a),i=x(),D(e,"class","item svelte-18kn78o")},m(t,a){E(t,e,a),w(e,n),w(n,r),w(e,i),o||(s=A(e,"click",u),o=!0)},p(e,n){t=e,8&n&&a!==(a=t[20].title+"")&&R(r,a)},d(t){t&&I(e),o=!1,s()}}}function xh(t){let e,n,r,i,o,s,a=t[20].title+"";function u(...e){return t[17](t[20],...e)}return{c(){e=k("div"),n=k("span"),r=S(a),i=x(),D(e,"class","item svelte-18kn78o")},m(t,a){E(t,e,a),w(e,n),w(n,r),w(e,i),o||(s=A(e,"click",u),o=!0)},p(e,n){t=e,16&n&&a!==(a=t[20].title+"")&&R(r,a)},d(t){t&&I(e),o=!1,s()}}}function Oh(e){let n,r,o,s,a,u,c=e[5].length>0&&_h(e),l=!e[6]&&Ih(e);return{c(){n=k("div"),c&&c.c(),r=x(),o=k("input"),s=x(),l&&l.c(),D(o,"id",e[0]),D(o,"type","text"),D(o,"spellcheck","false"),D(o,"autocorrect","off"),D(o,"autocomplete","off"),D(o,"placeholder",e[1]),D(o,"class","svelte-18kn78o"),D(n,"class","select-container svelte-18kn78o")},m(t,i){E(t,n,i),c&&c.m(n,null),w(n,r),w(n,o),C(o,e[8]),w(n,s),l&&l.m(n,null),a||(u=[A(o,"keyup",e[12]),A(o,"input",e[16])],a=!0)},p(t,[e]){t[5].length>0?c?c.p(t,e):(c=_h(t),c.c(),c.m(n,r)):c&&(c.d(1),c=null),1&e&&D(o,"id",t[0]),2&e&&D(o,"placeholder",t[1]),256&e&&o.value!==t[8]&&C(o,t[8]),t[6]?l&&(l.d(1),l=null):l?l.p(t,e):(l=Ih(t),l.c(),l.m(n,null))},i:t,o:t,d(t){t&&I(n),c&&c.d(),l&&l.d(),a=!1,i(u)}}}function Ah(t,e,n){let{id:r=!1}=e,{name:i=""}=e,{placeholder:o="Tap here..."}=e,{multiple:s=!1}=e,{loadItemes:a=[]}=e,u=a,c=[],l=[],h=!0,f=!1,d=null;const p=z(),v=t=>{n(6,h=!0);0===l.filter(e=>e.id===t.id).length&&(n(5,l=[...l,t]),n(3,u=u.filter(e=>e.id!=t.id))),f&&n(4,c=u),p("changeValue",{name:i,value:l}),n(8,d="")},m=t=>{n(5,l=l.filter(e=>e.id!=t.id)),n(3,u=[...u,t]),f&&n(4,c=u),p("changeValue",{name:i,value:l})};return t.$set=t=>{"id"in t&&n(0,r=t.id),"name"in t&&n(13,i=t.name),"placeholder"in t&&n(1,o=t.placeholder),"multiple"in t&&n(2,s=t.multiple),"loadItemes"in t&&n(14,a=t.loadItemes)},[r,o,s,u,c,l,h,f,d,v,m,function(){n(5,l=[]),n(3,u=a),f&&n(4,c=u),p("changeValue",{name:i,value:l})},t=>{const e=t.target.value;if(e.length>2){n(6,h=!1);const t=u.filter(t=>Object.values(t).some(t=>"string"==typeof t&&t.includes(e)));t.length>0&&n(4,c=t),n(7,f=!0)}},i,a,t=>m(t),function(){d=this.value,n(8,d)},t=>{v(t)},t=>{v(t)}]}class Nh extends kt{constructor(t){super(),Tt(this,t,Ah,Oh,s,{id:0,name:13,placeholder:1,multiple:2,loadItemes:14})}}function Dh(t,e,n){const r=t.slice();return r[6]=e[n],r[8]=n,r}function Rh(t){let e,n,r,i,o,s,a,u,c,l,h,f,d,p=t[6].title+"";return{c(){e=k("div"),n=k("input"),a=x(),u=k("span"),c=S(p),l=x(),D(n,"type","radio"),D(n,"class",r=Ul(t[1])),D(n,"id",i=t[6].id),D(n,"name",t[0]),n.value=o=t[6].value,n.checked=s=0===t[8],D(e,"class",h="inline"===t[2]?"form-check-inline":"form-check")},m(r,i){E(r,e,i),w(e,n),w(e,a),w(e,u),w(u,c),w(e,l),f||(d=A(n,"input",t[4]),f=!0)},p(t,s){2&s&&r!==(r=Ul(t[1]))&&D(n,"class",r),8&s&&i!==(i=t[6].id)&&D(n,"id",i),1&s&&D(n,"name",t[0]),8&s&&o!==(o=t[6].value)&&(n.value=o),8&s&&p!==(p=t[6].title+"")&&R(c,p),4&s&&h!==(h="inline"===t[2]?"form-check-inline":"form-check")&&D(e,"class",h)},d(t){t&&I(e),f=!1,d()}}}function Ch(e){let n,r=e[3],i=[];for(let t=0;t<r.length;t+=1)i[t]=Rh(Dh(e,r,t));return{c(){for(let t=0;t<i.length;t+=1)i[t].c();n=O()},m(t,e){for(let n=0;n<i.length;n+=1)i[n].m(t,e);E(t,n,e)},p(t,[e]){if(31&e){let o;for(r=t[3],o=0;o<r.length;o+=1){const s=Dh(t,r,o);i[o]?i[o].p(s,e):(i[o]=Rh(s),i[o].c(),i[o].m(n.parentNode,n))}for(;o<i.length;o+=1)i[o].d(1);i.length=r.length}},i:t,o:t,d(t){T(i,t),t&&I(n)}}}function Uh(t,e,n){let{name:r=""}=e,{classe:i=""}=e,{aligne:o="default"}=e,{items:s=[]}=e;const a=z();return q(()=>{s.length>0&&a("changeValue",{name:r,value:s[0].value})}),t.$set=t=>{"name"in t&&n(0,r=t.name),"classe"in t&&n(1,i=t.classe),"aligne"in t&&n(2,o=t.aligne),"items"in t&&n(3,s=t.items)},[r,i,o,s,function(t){a("changeValue",{name:r,value:t.target.value})}]}class Ph extends kt{constructor(t){super(),Tt(this,t,Uh,Ch,s,{name:0,classe:1,aligne:2,items:3})}}function Lh(t,e,n){const r=t.slice();return r[5]=e[n],r[7]=n,r}function jh(t){let e,n,r,i,o,s,a,u,c,l,h,f,d,p=t[5].title+"";return{c(){e=k("div"),n=k("input"),a=x(),u=k("span"),c=S(p),l=x(),D(n,"type","checkbox"),D(n,"class",r=Ul(t[1])),D(n,"id",i=t[5].id),D(n,"name",o=t[5].name),n.checked=s=!!t[5].checked&&t[5].checked,D(e,"class",h="inline"===t[2]?"form-check-inline":"form-check")},m(r,i){E(r,e,i),w(e,n),w(e,a),w(e,u),w(u,c),w(e,l),f||(d=A(n,"input",t[3]),f=!0)},p(t,a){2&a&&r!==(r=Ul(t[1]))&&D(n,"class",r),1&a&&i!==(i=t[5].id)&&D(n,"id",i),1&a&&o!==(o=t[5].name)&&D(n,"name",o),1&a&&s!==(s=!!t[5].checked&&t[5].checked)&&(n.checked=s),1&a&&p!==(p=t[5].title+"")&&R(c,p),4&a&&h!==(h="inline"===t[2]?"form-check-inline":"form-check")&&D(e,"class",h)},d(t){t&&I(e),f=!1,d()}}}function Mh(e){let n,r=e[0],i=[];for(let t=0;t<r.length;t+=1)i[t]=jh(Lh(e,r,t));return{c(){for(let t=0;t<i.length;t+=1)i[t].c();n=O()},m(t,e){for(let n=0;n<i.length;n+=1)i[n].m(t,e);E(t,n,e)},p(t,[e]){if(15&e){let o;for(r=t[0],o=0;o<r.length;o+=1){const s=Lh(t,r,o);i[o]?i[o].p(s,e):(i[o]=jh(s),i[o].c(),i[o].m(n.parentNode,n))}for(;o<i.length;o+=1)i[o].d(1);i.length=r.length}},i:t,o:t,d(t){T(i,t),t&&I(n)}}}function Vh(t,e,n){let{classe:r=""}=e,{aligne:i="default"}=e,{items:o=[]}=e;const s=z();return q(()=>{o.length>0&&(n(0,o[0].checked=!0,o),o.map(t=>{s("changeValue",{name:t.name,value:!!t.checked&&t.checked})}))}),t.$set=t=>{"classe"in t&&n(1,r=t.classe),"aligne"in t&&n(2,i=t.aligne),"items"in t&&n(0,o=t.items)},[o,r,i,function(t){s("changeValue",{name:t.target.name,value:t.target.checked})}]}class Fh extends kt{constructor(t){super(),Tt(this,t,Vh,Mh,s,{classe:1,aligne:2,items:0})}}function $h(t,e,n){const r=t.slice();return r[13]=e[n],r[15]=n,r}function Bh(t){let e,n=t[0]&&Wh(t);return{c(){n&&n.c(),e=O()},m(t,r){n&&n.m(t,r),E(t,e,r)},p(t,r){t[0]?n?n.p(t,r):(n=Wh(t),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(t){n&&n.d(t),t&&I(e)}}}function Wh(t){let e,n=t[0],r=[];for(let e=0;e<n.length;e+=1)r[e]=qh($h(t,n,e));return{c(){e=k("div");for(let t=0;t<r.length;t+=1)r[t].c();D(e,"class","list-files svelte-w6mkyi")},m(t,n){E(t,e,n);for(let t=0;t<r.length;t+=1)r[t].m(e,null)},p(t,i){if(769&i){let o;for(n=t[0],o=0;o<n.length;o+=1){const s=$h(t,n,o);r[o]?r[o].p(s,i):(r[o]=qh(s),r[o].c(),r[o].m(e,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},d(t){t&&I(e),T(r,t)}}}function qh(t){let e,n,r,o,s,a,u,c,l,h=t[13].name+"";function f(...e){return t[10](t[13],...e)}function d(...e){return t[11](t[13],...e)}return{c(){e=k("div"),n=k("div"),r=k("div"),o=S(h),s=x(),a=k("div"),a.textContent="✖",u=x(),D(a,"class","button svelte-w6mkyi"),D(n,"class","infos svelte-w6mkyi"),D(e,"class","file")},m(t,i){E(t,e,i),w(e,n),w(n,r),w(r,o),w(n,s),w(n,a),w(e,u),c||(l=[A(r,"click",f),A(a,"click",N(d))],c=!0)},p(e,n){t=e,1&n&&h!==(h=t[13].name+"")&&R(o,h)},d(t){t&&I(e),c=!1,i(l)}}}function zh(e){let n,r,i,o,s,a,u,c,l,h=e[6]&&Bh(e);return{c(){n=k("main"),r=k("label"),i=S("Anexar..."),o=x(),s=k("input"),u=x(),h&&h.c(),D(r,"class","btn--attach svelte-w6mkyi"),D(r,"for",e[1]),D(s,"type","file"),D(s,"id",e[1]),D(s,"name",e[2]),D(s,"class",a=d(Ul(e[3]))+" svelte-w6mkyi"),s.disabled=e[4],s.multiple=e[5],D(n,"class","svelte-w6mkyi")},m(t,a){E(t,n,a),w(n,r),w(r,i),w(n,o),w(n,s),w(n,u),h&&h.m(n,null),c||(l=A(s,"input",e[7]),c=!0)},p(t,[e]){2&e&&D(r,"for",t[1]),2&e&&D(s,"id",t[1]),4&e&&D(s,"name",t[2]),8&e&&a!==(a=d(Ul(t[3]))+" svelte-w6mkyi")&&D(s,"class",a),16&e&&(s.disabled=t[4]),32&e&&(s.multiple=t[5]),t[6]?h?h.p(t,e):(h=Bh(t),h.c(),h.m(n,null)):h&&(h.d(1),h=null)},i:t,o:t,d(t){t&&I(n),h&&h.d(),c=!1,l()}}}function Hh(t,e,n){let{id:r=""}=e,{name:i=""}=e,{classe:o=""}=e,{disabled:s=null}=e,{multiple:a=!1}=e,{showPreview:u=!1}=e,{files:c=[]}=e;const l=z();function h(t){n(0,c=c.filter(e=>e.name!=t.name)),l("changeValue",{name:i,value:c})}const f=t=>{var e=document.createElement("a");e.download=t.name,e.href=t,e.click()};return t.$set=t=>{"id"in t&&n(1,r=t.id),"name"in t&&n(2,i=t.name),"classe"in t&&n(3,o=t.classe),"disabled"in t&&n(4,s=t.disabled),"multiple"in t&&n(5,a=t.multiple),"showPreview"in t&&n(6,u=t.showPreview),"files"in t&&n(0,c=t.files)},t.$$.update=()=>{1&t.$$.dirty&&console.log("files",c)},[c,r,i,o,s,a,u,function(t){let e=Array.from(t.target.files);l("changeValue",{name:i,value:[...c,...e]}),n(0,c=[...c,...e])},h,f,t=>f(t),t=>{h(t)}]}class Gh extends kt{constructor(t){super(),Tt(this,t,Hh,zh,s,{id:1,name:2,classe:3,disabled:4,multiple:5,showPreview:6,files:0})}}function Yh(t){let e,n=t[1](t[0])+"";return{c(){e=S(n)},m(t,n){E(t,e,n)},p(t,r){1&r&&n!==(n=t[1](t[0])+"")&&R(e,n)},d(t){t&&I(e)}}}function Kh(e){let n,r=e[0]&&Yh(e);return{c(){n=k("div"),r&&r.c(),D(n,"class","invalid-feedback")},m(t,e){E(t,n,e),r&&r.m(n,null)},p(t,[e]){t[0]?r?r.p(t,e):(r=Yh(t),r.c(),r.m(n,null)):r&&(r.d(1),r=null)},i:t,o:t,d(t){t&&I(n),r&&r.d()}}}function Xh(t,e,n){let{error:r}=e,{messages:i={}}=e;const o={required:"This field is required",min:"This field must be more characters long",max:"This field must be more characters long",between:"This field must be between values defined",equal:"This field must be equal to value defined",email:"This email format is not valid",types:"Must to allowed file types",maxsize:"This file has size more than max size",custom_rule:"Error"};return t.$set=t=>{"error"in t&&n(0,r=t.error),"messages"in t&&n(2,i=t.messages)},[r,function(t){let e="";return i[t]?e+=i[t]?i[t]:o.custom_rule:e+=o[t]?o[t]:o.custom_rule,e},i]}class Jh extends kt{constructor(t){super(),Tt(this,t,Xh,Kh,s,{error:0,messages:2})}}function Zh(t,e,n){const r=t.slice();return r[18]=e[n],r}function Qh(t,e,n){const r=t.slice();return r[15]=e[n],r[17]=n,r}function tf(t){let e;return{c(){e=k("option"),e.textContent="Any",e.__value="Any",e.value=e.__value},m(t,n){E(t,e,n)},d(t){t&&I(e)}}}function ef(t,e){let n,r,i,o,s,a=e[18].title+"";return{key:t,first:null,c(){n=k("option"),r=S(a),i=x(),n.__value=o=e[18].value,n.value=n.__value,n.selected=s=e[15].account===e[18].value,this.first=n},m(t,e){E(t,n,e),w(n,r),w(n,i)},p(t,e){1&e&&a!==(a=t[18].title+"")&&R(r,a),1&e&&o!==(o=t[18].value)&&(n.__value=o),n.value=n.__value,3&e&&s!==(s=t[15].account===t[18].value)&&(n.selected=s)},d(t){t&&I(n)}}}function nf(t,e){let n,r,o,s,a,u,c,l,h,f,d,p,v,m,y,g,b,_,T,O,R=[],C=new Map;function U(...t){return e[10](e[15],...t)}let P=e[0];const L=t=>t[18].value;for(let t=0;t<P.length;t+=1){let n=Zh(e,P,t),r=L(n);C.set(r,R[t]=ef(r,n))}let j=null;function M(...t){return e[11](e[15],...t)}function V(...t){return e[12](e[15],...t)}function F(...t){return e[13](e[15],...t)}return P.length||(j=tf()),{key:t,first:null,c(){n=k("div"),r=k("select"),o=k("option"),s=S("D"),c=k("option"),l=S("C"),d=x(),p=k("select");for(let t=0;t<R.length;t+=1)R[t].c();j&&j.c(),v=x(),m=k("input"),g=x(),b=k("button"),b.textContent="Remove",o.__value=a="D",o.value=o.__value,o.selected=u="D"===e[15].nature,c.__value=h="C",c.value=c.__value,c.selected=f="C"===e[15].nature,D(r,"name","nature"),D(r,"class","svelte-16v50st"),D(p,"name","account"),D(p,"class","svelte-16v50st"),D(m,"name","amount"),D(m,"type","number"),m.value=y=e[15].amount,D(m,"class","svelte-16v50st"),D(b,"type","button"),D(b,"class","svelte-16v50st"),D(n,"id",_=e[17]),D(n,"name","journal"),D(n,"class","journal svelte-16v50st"),this.first=n},m(t,e){E(t,n,e),w(n,r),w(r,o),w(o,s),w(r,c),w(c,l),w(n,d),w(n,p);for(let t=0;t<R.length;t+=1)R[t].m(p,null);j&&j.m(p,null),w(n,v),w(n,m),w(n,g),w(n,b),T||(O=[A(r,"input",U),A(p,"input",M),A(m,"input",V),A(b,"click",N(F))],T=!0)},p(t,r){if(e=t,2&r&&u!==(u="D"===e[15].nature)&&(o.selected=u),2&r&&f!==(f="C"===e[15].nature)&&(c.selected=f),3&r){const t=e[0];R=bt(R,r,L,1,e,t,C,p,yt,ef,null,Zh),t.length?j&&(j.d(1),j=null):j||(j=tf(),j.c(),j.m(p,null))}2&r&&y!==(y=e[15].amount)&&(m.value=y),2&r&&_!==(_=e[17])&&D(n,"id",_)},d(t){t&&I(n);for(let t=0;t<R.length;t+=1)R[t].d();j&&j.d(),T=!1,i(O)}}}function rf(e){let n,r,i,o,s,a=[],u=new Map,c=e[1];const l=t=>t[15].frontendUUID;for(let t=0;t<c.length;t+=1){let n=Qh(e,c,t),r=l(n);u.set(r,a[t]=nf(r,n))}return{c(){n=k("div");for(let t=0;t<a.length;t+=1)a[t].c();r=x(),i=k("button"),i.textContent="Adicionar Mais Um",D(i,"class","svelte-16v50st"),D(n,"class","journals svelte-16v50st")},m(t,u){E(t,n,u);for(let t=0;t<a.length;t+=1)a[t].m(n,null);w(n,r),w(n,i),o||(s=A(i,"click",e[2]),o=!0)},p(t,[e]){if(27&e){const i=t[1];a=bt(a,e,l,1,t,i,u,n,yt,nf,r,Qh)}},i:t,o:t,d(t){t&&I(n);for(let t=0;t<a.length;t+=1)a[t].d();o=!1,s()}}}function of(t,e,n){let{id:r=""}=e,{name:i=""}=e,{classe:o=""}=e,{disabled:s=null}=e,{journals:a=[]}=e,{accounts:u=[]}=e;const c=z();let l=[];function h(t,e){t.target.parentNode.id;console.log(t.target.name,t.target.value),n(1,l=l.map(n=>{if(n.frontendUUID===e){let e={};return e[t.target.name]=t.target.value,{...n,...e}}return{...n}})),console.log(l),c("changeValue",{name:i,value:l})}function f(t){n(1,l=l.filter(e=>e.frontendUUID!=t)),c("changeValue",{name:i,value:l})}return t.$set=t=>{"id"in t&&n(5,r=t.id),"name"in t&&n(6,i=t.name),"classe"in t&&n(7,o=t.classe),"disabled"in t&&n(8,s=t.disabled),"journals"in t&&n(9,a=t.journals),"accounts"in t&&n(0,u=t.accounts)},t.$$.update=()=>{512&t.$$.dirty&&n(1,l=[...a])},[u,l,()=>{n(1,l=[...l,{amount:0,nature:"D",account:null,frontendUUID:"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)}))}])},h,f,r,i,o,s,a,(t,e)=>h(e,t.frontendUUID),(t,e)=>h(e,t.frontendUUID),(t,e)=>h(e,t.frontendUUID),t=>{f(t.frontendUUID)}]}class sf extends kt{constructor(t){super(),Tt(this,t,of,rf,s,{id:5,name:6,classe:7,disabled:8,journals:9,accounts:0})}}function af(t,e,n){const r=t.slice();return r[18]=e[n],r}function uf(t,e,n){const r=t.slice();return r[15]=e[n],r[17]=n,r}function cf(t){let e;return{c(){e=k("option"),e.textContent="Any",e.__value="Any",e.value=e.__value},m(t,n){E(t,e,n)},d(t){t&&I(e)}}}function lf(t,e){let n,r,i,o,s,a=e[18].name+"";return{key:t,first:null,c(){n=k("option"),r=S(a),i=x(),n.__value=o=e[18].uuid,n.value=n.__value,n.selected=s=e[15].personaUUID===e[18].uuid,this.first=n},m(t,e){E(t,n,e),w(n,r),w(n,i)},p(t,e){1&e&&a!==(a=t[18].name+"")&&R(r,a),1&e&&o!==(o=t[18].uuid)&&(n.__value=o),n.value=n.__value,3&e&&s!==(s=t[15].personaUUID===t[18].uuid)&&(n.selected=s)},d(t){t&&I(n)}}}function hf(t,e){let n,r,o,s,a,u,c,l,h,f,d,p,v,m,y,g,b,_,T,O,R,C,U,P,L,j,M,V,F=[],$=new Map,B=e[0];const W=t=>t[18].name;for(let t=0;t<B.length;t+=1){let n=af(e,B,t),r=W(n);$.set(r,F[t]=lf(r,n))}let q=null;function z(...t){return e[10](e[15],...t)}function H(...t){return e[11](e[15],...t)}function G(...t){return e[12](e[15],...t)}function Y(...t){return e[13](e[15],...t)}return B.length||(q=cf()),{key:t,first:null,c(){n=k("div"),r=k("select"),o=k("option"),s=S("---- SELECIONE PERSONA ----\n        ");for(let t=0;t<F.length;t+=1)F[t].c();q&&q.c(),c=x(),l=k("select"),h=k("option"),f=S("----- SELECIONAR TIPO -----\n        "),v=k("option"),m=S("VALUE_FROM\n        "),b=k("option"),_=S("VALUE_TO"),R=x(),C=k("input"),P=x(),L=k("button"),L.textContent="Remove",o.__value=a="null",o.value=o.__value,o.selected=u=!e[15].personaUUID,D(r,"name","personaUUID"),D(r,"class","svelte-iw8l4c"),h.__value=d="VALUE_TO",h.value=h.__value,h.selected=p=!e[15].tipo,v.__value=y="VALUE_FROM",v.value=v.__value,v.selected=g="VALUE_FROM"===e[15].tipo,b.__value=T="VALUE_TO",b.value=b.__value,b.selected=O="VALUE_TO"===e[15].tipo,D(l,"name","tipo"),D(l,"class","svelte-iw8l4c"),D(C,"name","amount"),D(C,"type","number"),C.value=U=e[15].amount,D(C,"class","svelte-iw8l4c"),D(L,"type","button"),D(L,"class","svelte-iw8l4c"),D(n,"id",j=e[17]),D(n,"name","persona"),D(n,"class","persona svelte-iw8l4c"),this.first=n},m(t,e){E(t,n,e),w(n,r),w(r,o),w(o,s);for(let t=0;t<F.length;t+=1)F[t].m(r,null);q&&q.m(r,null),w(n,c),w(n,l),w(l,h),w(h,f),w(l,v),w(v,m),w(l,b),w(b,_),w(n,R),w(n,C),w(n,P),w(n,L),M||(V=[A(r,"input",z),A(l,"input",H),A(C,"input",G),A(L,"click",N(Y))],M=!0)},p(t,i){if(e=t,2&i&&u!==(u=!e[15].personaUUID)&&(o.selected=u),3&i){const t=e[0];F=bt(F,i,W,1,e,t,$,r,yt,lf,null,af),t.length?q&&(q.d(1),q=null):q||(q=cf(),q.c(),q.m(r,null))}2&i&&p!==(p=!e[15].tipo)&&(h.selected=p),2&i&&g!==(g="VALUE_FROM"===e[15].tipo)&&(v.selected=g),2&i&&O!==(O="VALUE_TO"===e[15].tipo)&&(b.selected=O),2&i&&U!==(U=e[15].amount)&&(C.value=U),2&i&&j!==(j=e[17])&&D(n,"id",j)},d(t){t&&I(n);for(let t=0;t<F.length;t+=1)F[t].d();q&&q.d(),M=!1,i(V)}}}function ff(e){let n,r,i,o,s,a=[],u=new Map,c=e[1];const l=t=>t[15].frontendUUID;for(let t=0;t<c.length;t+=1){let n=uf(e,c,t),r=l(n);u.set(r,a[t]=hf(r,n))}return{c(){n=k("div");for(let t=0;t<a.length;t+=1)a[t].c();r=x(),i=k("button"),i.textContent="Adicionar Mais Um",D(i,"class","svelte-iw8l4c"),D(n,"class","journals svelte-iw8l4c")},m(t,u){E(t,n,u);for(let t=0;t<a.length;t+=1)a[t].m(n,null);w(n,r),w(n,i),o||(s=A(i,"click",e[2]),o=!0)},p(t,[e]){if(27&e){const i=t[1];a=bt(a,e,l,1,t,i,u,n,yt,hf,r,uf)}},i:t,o:t,d(t){t&&I(n);for(let t=0;t<a.length;t+=1)a[t].d();o=!1,s()}}}function df(t,e,n){let{id:r=""}=e,{name:i=""}=e,{classe:o=""}=e,{disabled:s=null}=e,{personas:a=[]}=e,{listOfPersonas:u=[]}=e;const c=z();let l=[];function h(t,e){t.target.parentNode.id;console.log(t.target.name,t.target.value),n(1,l=l.map(n=>{if(n.frontendUUID===e){let e={};return e[t.target.name]=t.target.value,{...n,...e}}return{...n}})),console.log(l),c("changeValue",{name:i,value:l})}function f(t){n(1,l=l.filter(e=>e.frontendUUID!=t)),c("changeValue",{name:i,value:l})}return t.$set=t=>{"id"in t&&n(5,r=t.id),"name"in t&&n(6,i=t.name),"classe"in t&&n(7,o=t.classe),"disabled"in t&&n(8,s=t.disabled),"personas"in t&&n(9,a=t.personas),"listOfPersonas"in t&&n(0,u=t.listOfPersonas)},t.$$.update=()=>{512&t.$$.dirty&&n(1,l=[...a]),512&t.$$.dirty&&console.log("[persona]",a)},[u,l,()=>{n(1,l=[...l,{amount:0,personaUUID:null,frontendUUID:"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)}))}])},h,f,r,i,o,s,a,(t,e)=>h(e,t.frontendUUID),(t,e)=>h(e,t.frontendUUID),(t,e)=>h(e,t.frontendUUID),t=>{f(t.frontendUUID)}]}class pf extends kt{constructor(t){super(),Tt(this,t,df,ff,s,{id:5,name:6,classe:7,disabled:8,personas:9,listOfPersonas:0})}}function vf(t,e,n){const r=t.slice();return r[17]=e[n],r}function mf(t,e,n){const r=t.slice();return r[14]=e[n],r[16]=n,r}function yf(t){let e;return{c(){e=k("option"),e.textContent="Any",e.__value="Any",e.value=e.__value},m(t,n){E(t,e,n)},d(t){t&&I(e)}}}function gf(t,e){let n,r,i,o,s,a=e[17].title+"";return{key:t,first:null,c(){n=k("option"),r=S(a),i=x(),n.__value=o=e[17].value,n.value=n.__value,n.selected=s=e[14].account===e[17].value,this.first=n},m(t,e){E(t,n,e),w(n,r),w(n,i)},p(t,e){1&e&&a!==(a=t[17].title+"")&&R(r,a),1&e&&o!==(o=t[17].value)&&(n.__value=o),n.value=n.__value,3&e&&s!==(s=t[14].account===t[17].value)&&(n.selected=s)},d(t){t&&I(n)}}}function bf(t,e){let n,r,o,s,a,u,c,l,h,f,d,p,v,m,y,g,b,_,T,O=[],R=new Map;function C(...t){return e[10](e[14],...t)}let U=e[0];const P=t=>t[17].value;for(let t=0;t<U.length;t+=1){let n=vf(e,U,t),r=P(n);R.set(r,O[t]=gf(r,n))}let L=null;function j(...t){return e[11](e[14],...t)}function M(...t){return e[12](e[14],...t)}return U.length||(L=yf()),{key:t,first:null,c(){n=k("div"),r=k("select"),o=k("option"),s=S("D"),c=k("option"),l=S("C"),p=x(),v=k("select");for(let t=0;t<O.length;t+=1)O[t].c();L&&L.c(),y=x(),g=k("button"),g.textContent="Remove",o.__value=a="D",o.value=o.__value,o.selected=u="D"===e[14].nature,c.__value=h="C",c.value=c.__value,c.selected=f="C"===e[14].nature,D(r,"id",d="nature"+e[16]),D(r,"name","nature"),D(r,"class","svelte-1p5mei8"),D(v,"id",m="account"+e[16]),D(v,"name","account"),D(v,"class","svelte-1p5mei8"),D(g,"type","button"),D(g,"class","svelte-1p5mei8"),D(n,"id",b=e[16]),D(n,"name","journal"),D(n,"class","journal svelte-1p5mei8"),this.first=n},m(t,e){E(t,n,e),w(n,r),w(r,o),w(o,s),w(r,c),w(c,l),w(n,p),w(n,v);for(let t=0;t<O.length;t+=1)O[t].m(v,null);L&&L.m(v,null),w(n,y),w(n,g),_||(T=[A(r,"input",C),A(v,"input",j),A(g,"click",N(M))],_=!0)},p(t,i){if(e=t,2&i&&u!==(u="D"===e[14].nature)&&(o.selected=u),2&i&&f!==(f="C"===e[14].nature)&&(c.selected=f),2&i&&d!==(d="nature"+e[16])&&D(r,"id",d),3&i){const t=e[0];O=bt(O,i,P,1,e,t,R,v,yt,gf,null,vf),t.length?L&&(L.d(1),L=null):L||(L=yf(),L.c(),L.m(v,null))}2&i&&m!==(m="account"+e[16])&&D(v,"id",m),2&i&&b!==(b=e[16])&&D(n,"id",b)},d(t){t&&I(n);for(let t=0;t<O.length;t+=1)O[t].d();L&&L.d(),_=!1,i(T)}}}function _f(e){let n,r,i,o,s,a,u,c=[],l=new Map,h=e[1];const f=t=>t[14].frontendUUID;for(let t=0;t<h.length;t+=1){let n=mf(e,h,t),r=f(n);l.set(r,c[t]=bf(r,n))}return{c(){n=k("div");for(let t=0;t<c.length;t+=1)c[t].c();r=x(),i=k("button"),o=S("Adicionar"),i.disabled=s=e[1].length>5,D(i,"class","svelte-1p5mei8"),D(n,"class","journals")},m(t,s){E(t,n,s);for(let t=0;t<c.length;t+=1)c[t].m(n,null);w(n,r),w(n,i),w(i,o),a||(u=A(i,"click",e[2]),a=!0)},p(t,[e]){if(27&e){const i=t[1];c=bt(c,e,f,1,t,i,l,n,yt,bf,r,mf)}2&e&&s!==(s=t[1].length>5)&&(i.disabled=s)},i:t,o:t,d(t){t&&I(n);for(let t=0;t<c.length;t+=1)c[t].d();a=!1,u()}}}function wf(t,e,n){let{id:r=""}=e,{name:i=""}=e,{classe:o=""}=e,{disabled:s=null}=e,{journals:a=[]}=e,{accounts:u=[]}=e;const c=z();let l=[];function h(t,e){t.target.parentNode.id;console.log(t.target.name,t.target.value),n(1,l=l.map(n=>{if(n.frontendUUID===e){let e={};return e[t.target.name]=t.target.value,{...n,...e}}return{...n}})),console.log(l),c("changeValue",{name:i,value:l})}function f(t){n(1,l=l.filter(e=>e.frontendUUID!=t)),c("changeValue",{name:i,value:l})}return t.$set=t=>{"id"in t&&n(5,r=t.id),"name"in t&&n(6,i=t.name),"classe"in t&&n(7,o=t.classe),"disabled"in t&&n(8,s=t.disabled),"journals"in t&&n(9,a=t.journals),"accounts"in t&&n(0,u=t.accounts)},t.$$.update=()=>{512&t.$$.dirty&&n(1,l=[...a]),2&t.$$.dirty&&console.log("[entries]",l)},[u,l,()=>{n(1,l=[...l,{nature:"D",account:null,frontendUUID:"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)}))}])},h,f,r,i,o,s,a,(t,e)=>h(e,t.frontendUUID),(t,e)=>h(e,t.frontendUUID),t=>{f(t.frontendUUID)}]}class Ef extends kt{constructor(t){super(),Tt(this,t,wf,_f,s,{id:5,name:6,classe:7,disabled:8,journals:9,accounts:0})}}function If(t,e,n){const r=t.slice();return r[17]=e[n],r[19]=n,r}function Tf(t,e,n){const r=t.slice();return r[14]=e[n],r}function kf(t){let e,n,r,i=t[14].label+"";return{c(){e=k("label"),n=S(i),D(e,"for",r=t[14].id)},m(t,r){E(t,e,r),w(e,n)},p(t,o){1&o&&i!==(i=t[14].label+"")&&R(n,i),1&o&&r!==(r=t[14].id)&&D(e,"for",r)},d(t){t&&I(e)}}}function Sf(t){let e,n;return e=new ih({props:{id:t[14].id,name:t[14].name,groups:t[3],classe:t[14].class,disabled:t[14].disabled,value:t[14].value}}),e.$on("changeValue",t[6]),{c(){_t(e.$$.fragment)},m(t,r){wt(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.id=t[14].id),1&n&&(r.name=t[14].name),8&n&&(r.groups=t[3]),1&n&&(r.classe=t[14].class),1&n&&(r.disabled=t[14].disabled),1&n&&(r.value=t[14].value),e.$set(r)},i(t){n||(lt(e.$$.fragment,t),n=!0)},o(t){ht(e.$$.fragment,t),n=!1},d(t){Et(e,t)}}}function xf(t){let e,n;return e=new Ef({props:{id:t[14].id,name:t[14].name,accounts:t[1],classe:t[14].class,disabled:t[14].disabled,journals:t[14].value}}),e.$on("changeValue",t[6]),{c(){_t(e.$$.fragment)},m(t,r){wt(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.id=t[14].id),1&n&&(r.name=t[14].name),2&n&&(r.accounts=t[1]),1&n&&(r.classe=t[14].class),1&n&&(r.disabled=t[14].disabled),1&n&&(r.journals=t[14].value),e.$set(r)},i(t){n||(lt(e.$$.fragment,t),n=!0)},o(t){ht(e.$$.fragment,t),n=!1},d(t){Et(e,t)}}}function Of(t){let e,n;return e=new pf({props:{id:t[14].id,name:t[14].name,listOfPersonas:t[2],classe:t[14].class,disabled:t[14].disabled,personas:t[14].value}}),e.$on("changeValue",t[6]),{c(){_t(e.$$.fragment)},m(t,r){wt(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.id=t[14].id),1&n&&(r.name=t[14].name),4&n&&(r.listOfPersonas=t[2]),1&n&&(r.classe=t[14].class),1&n&&(r.disabled=t[14].disabled),1&n&&(r.personas=t[14].value),e.$set(r)},i(t){n||(lt(e.$$.fragment,t),n=!0)},o(t){ht(e.$$.fragment,t),n=!1},d(t){Et(e,t)}}}function Af(t){let e,n;return e=new sf({props:{id:t[14].id,name:t[14].name,accounts:t[1],classe:t[14].class,disabled:t[14].disabled,journals:t[14].value}}),e.$on("changeValue",t[6]),{c(){_t(e.$$.fragment)},m(t,r){wt(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.id=t[14].id),1&n&&(r.name=t[14].name),2&n&&(r.accounts=t[1]),1&n&&(r.classe=t[14].class),1&n&&(r.disabled=t[14].disabled),1&n&&(r.journals=t[14].value),e.$set(r)},i(t){n||(lt(e.$$.fragment,t),n=!0)},o(t){ht(e.$$.fragment,t),n=!1},d(t){Et(e,t)}}}function Nf(t){let e,n;return e=new Gh({props:{id:t[14].id,name:t[14].name,files:t[14].value?t[14].value:[],classe:t[14].class,disabled:t[14].disabled,multiple:t[14].multiple,showPreview:t[14].showPreview}}),e.$on("changeValue",t[6]),{c(){_t(e.$$.fragment)},m(t,r){wt(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.id=t[14].id),1&n&&(r.name=t[14].name),1&n&&(r.files=t[14].value?t[14].value:[]),1&n&&(r.classe=t[14].class),1&n&&(r.disabled=t[14].disabled),1&n&&(r.multiple=t[14].multiple),1&n&&(r.showPreview=t[14].showPreview),e.$set(r)},i(t){n||(lt(e.$$.fragment,t),n=!0)},o(t){ht(e.$$.fragment,t),n=!1},d(t){Et(e,t)}}}function Df(t){let e,n;return e=new Fh({props:{classe:t[14].class,items:t[14].items,aligne:t[14].aligne}}),e.$on("changeValue",t[6]),{c(){_t(e.$$.fragment)},m(t,r){wt(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.classe=t[14].class),1&n&&(r.items=t[14].items),1&n&&(r.aligne=t[14].aligne),e.$set(r)},i(t){n||(lt(e.$$.fragment,t),n=!0)},o(t){ht(e.$$.fragment,t),n=!1},d(t){Et(e,t)}}}function Rf(t){let e,n;return e=new Ph({props:{name:t[14].name,classe:t[14].class,items:t[14].items,aligne:t[14].aligne}}),e.$on("changeValue",t[6]),{c(){_t(e.$$.fragment)},m(t,r){wt(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.name=t[14].name),1&n&&(r.classe=t[14].class),1&n&&(r.items=t[14].items),1&n&&(r.aligne=t[14].aligne),e.$set(r)},i(t){n||(lt(e.$$.fragment,t),n=!0)},o(t){ht(e.$$.fragment,t),n=!1},d(t){Et(e,t)}}}function Cf(t){let e,n;return e=new Nh({props:{id:t[14].id,name:t[14].name,classe:t[14].class,loadItemes:t[14].loadItemes,disabled:t[14].disabled,multiple:t[14].multiple}}),e.$on("changeValue",t[6]),e.$on("onSelectItem",t[9]),{c(){_t(e.$$.fragment)},m(t,r){wt(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.id=t[14].id),1&n&&(r.name=t[14].name),1&n&&(r.classe=t[14].class),1&n&&(r.loadItemes=t[14].loadItemes),1&n&&(r.disabled=t[14].disabled),1&n&&(r.multiple=t[14].multiple),e.$set(r)},i(t){n||(lt(e.$$.fragment,t),n=!0)},o(t){ht(e.$$.fragment,t),n=!1},d(t){Et(e,t)}}}function Uf(t){let e,n;return e=new mh({props:{id:t[14].id,name:t[14].name,classe:t[14].class,options:t[14].options,disabled:t[14].disabled,multiple:t[14].multiple}}),e.$on("changeValue",t[6]),{c(){_t(e.$$.fragment)},m(t,r){wt(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.id=t[14].id),1&n&&(r.name=t[14].name),1&n&&(r.classe=t[14].class),1&n&&(r.options=t[14].options),1&n&&(r.disabled=t[14].disabled),1&n&&(r.multiple=t[14].multiple),e.$set(r)},i(t){n||(lt(e.$$.fragment,t),n=!0)},o(t){ht(e.$$.fragment,t),n=!1},d(t){Et(e,t)}}}function Pf(t){let e,n;return e=new lh({props:{id:t[14].id,name:t[14].name,value:t[14].value,classe:t[14].class,rows:t[14].rows,cols:t[14].cols,disabled:t[14].disabled,readonly:t[14].readonly}}),e.$on("changeValue",t[6]),{c(){_t(e.$$.fragment)},m(t,r){wt(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.id=t[14].id),1&n&&(r.name=t[14].name),1&n&&(r.value=t[14].value),1&n&&(r.classe=t[14].class),1&n&&(r.rows=t[14].rows),1&n&&(r.cols=t[14].cols),1&n&&(r.disabled=t[14].disabled),1&n&&(r.readonly=t[14].readonly),e.$set(r)},i(t){n||(lt(e.$$.fragment,t),n=!0)},o(t){ht(e.$$.fragment,t),n=!1},d(t){Et(e,t)}}}function Lf(t){let e,n;return e=new ah({props:{type:t[14].type,id:t[14].id,name:t[14].name,value:t[14].value,classe:t[14].class,placeholder:t[14].placeholder,min:t[14].min,max:t[14].max,step:t[14].step,autocomplete:t[14].autocomplete,disabled:t[14].disabled,readonly:t[14].readonly}}),e.$on("changeValue",t[6]),{c(){_t(e.$$.fragment)},m(t,r){wt(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.type=t[14].type),1&n&&(r.id=t[14].id),1&n&&(r.name=t[14].name),1&n&&(r.value=t[14].value),1&n&&(r.classe=t[14].class),1&n&&(r.placeholder=t[14].placeholder),1&n&&(r.min=t[14].min),1&n&&(r.max=t[14].max),1&n&&(r.step=t[14].step),1&n&&(r.autocomplete=t[14].autocomplete),1&n&&(r.disabled=t[14].disabled),1&n&&(r.readonly=t[14].readonly),e.$set(r)},i(t){n||(lt(e.$$.fragment,t),n=!0)},o(t){ht(e.$$.fragment,t),n=!1},d(t){Et(e,t)}}}function jf(t){let e,n,r=t[14].description.text&&Mf(t);return{c(){r&&r.c(),e=O()},m(t,i){r&&r.m(t,i),E(t,e,i),n=!0},p(t,n){t[14].description.text?r?(r.p(t,n),1&n&&lt(r,1)):(r=Mf(t),r.c(),lt(r,1),r.m(e.parentNode,e)):r&&(ut(),ht(r,1,1,()=>{r=null}),ct())},i(t){n||(lt(r),n=!0)},o(t){ht(r),n=!1},d(t){r&&r.d(t),t&&I(e)}}}function Mf(t){let e,n;return e=new Yl({props:{tag:t[14].description.tag,classes:t[14].description.class,$$slots:{default:[Vf]},$$scope:{ctx:t}}}),{c(){_t(e.$$.fragment)},m(t,r){wt(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.tag=t[14].description.tag),1&n&&(r.classes=t[14].description.class),1048577&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(lt(e.$$.fragment,t),n=!0)},o(t){ht(e.$$.fragment,t),n=!1},d(t){Et(e,t)}}}function Vf(t){let e,n=t[14].description.text+"";return{c(){e=S(n)},m(t,n){E(t,e,n)},p(t,r){1&r&&n!==(n=t[14].description.text+"")&&R(e,n)},d(t){t&&I(e)}}}function Ff(t){let e,n,r=t[5][t[14].name].validation.errors.length>0&&$f(t);return{c(){r&&r.c(),e=O()},m(t,i){r&&r.m(t,i),E(t,e,i),n=!0},p(t,n){t[5][t[14].name].validation.errors.length>0?r?(r.p(t,n),33&n&&lt(r,1)):(r=$f(t),r.c(),lt(r,1),r.m(e.parentNode,e)):r&&(ut(),ht(r,1,1,()=>{r=null}),ct())},i(t){n||(lt(r),n=!0)},o(t){ht(r),n=!1},d(t){r&&r.d(t),t&&I(e)}}}function $f(t){let e,n,r=t[5][t[14].name].validation.errors,i=[];for(let e=0;e<r.length;e+=1)i[e]=Bf(If(t,r,e));const o=t=>ht(i[t],1,1,()=>{i[t]=null});return{c(){for(let t=0;t<i.length;t+=1)i[t].c();e=O()},m(t,r){for(let e=0;e<i.length;e+=1)i[e].m(t,r);E(t,e,r),n=!0},p(t,n){if(33&n){let s;for(r=t[5][t[14].name].validation.errors,s=0;s<r.length;s+=1){const o=If(t,r,s);i[s]?(i[s].p(o,n),lt(i[s],1)):(i[s]=Bf(o),i[s].c(),lt(i[s],1),i[s].m(e.parentNode,e))}for(ut(),s=r.length;s<i.length;s+=1)o(s);ct()}},i(t){if(!n){for(let t=0;t<r.length;t+=1)lt(i[t]);n=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)ht(i[t]);n=!1},d(t){T(i,t),t&&I(e)}}}function Bf(t){let e,n;return e=new Jh({props:{error:t[17],messages:t[14].messages}}),{c(){_t(e.$$.fragment)},m(t,r){wt(e,t,r),n=!0},p(t,n){const r={};33&n&&(r.error=t[17]),1&n&&(r.messages=t[14].messages),e.$set(r)},i(t){n||(lt(e.$$.fragment,t),n=!0)},o(t){ht(e.$$.fragment,t),n=!1},d(t){Et(e,t)}}}function Wf(t){let e,n,r,i,o,s,a,u=t[14].label&&"file"!==t[14].type&&kf(t);const c=[Lf,Pf,Uf,Cf,Rf,Df,Nf,Af,Of,xf,Sf],l=[];function h(t,e){return"text"===t[14].type||"password"===t[14].type||"email"===t[14].type||"tel"===t[14].type||"number"===t[14].type||"range"===t[14].type||"date"===t[14].type||"color"===t[14].type||"datetimelocal"===t[14].type?0:"textarea"===t[14].type?1:"select"===t[14].type?2:"autocomplete"===t[14].type?3:"radio"===t[14].type?4:"checkbox"===t[14].type?5:"file"===t[14].type?6:"journal"===t[14].type?7:"persona"===t[14].type?8:"journalwithoutamount"===t[14].type?9:"tags"===t[14].type?10:-1}~(n=h(t))&&(r=l[n]=c[n](t));let f=t[14].description&&jf(t),d=!t[4]&&Ff(t);return{c(){u&&u.c(),e=x(),r&&r.c(),i=x(),f&&f.c(),o=x(),d&&d.c(),s=x()},m(t,r){u&&u.m(t,r),E(t,e,r),~n&&l[n].m(t,r),E(t,i,r),f&&f.m(t,r),E(t,o,r),d&&d.m(t,r),E(t,s,r),a=!0},p(t,a){t[14].label&&"file"!==t[14].type?u?u.p(t,a):(u=kf(t),u.c(),u.m(e.parentNode,e)):u&&(u.d(1),u=null);let p=n;n=h(t),n===p?~n&&l[n].p(t,a):(r&&(ut(),ht(l[p],1,1,()=>{l[p]=null}),ct()),~n?(r=l[n],r||(r=l[n]=c[n](t),r.c()),lt(r,1),r.m(i.parentNode,i)):r=null),t[14].description?f?(f.p(t,a),1&a&&lt(f,1)):(f=jf(t),f.c(),lt(f,1),f.m(o.parentNode,o)):f&&(ut(),ht(f,1,1,()=>{f=null}),ct()),t[4]?d&&(ut(),ht(d,1,1,()=>{d=null}),ct()):d?(d.p(t,a),16&a&&lt(d,1)):(d=Ff(t),d.c(),lt(d,1),d.m(s.parentNode,s))},i(t){a||(lt(r),lt(f),lt(d),a=!0)},o(t){ht(r),ht(f),ht(d),a=!1},d(t){u&&u.d(t),t&&I(e),~n&&l[n].d(t),t&&I(i),f&&f.d(t),t&&I(o),d&&d.d(t),t&&I(s)}}}function qf(t,e){let n,r,i;return r=new Yl({props:{tag:e[14].prefix&&e[14].prefix.tag?e[14].prefix.tag:"div",classes:e[14].prefix&&e[14].prefix.class?e[14].prefix.class:"form-group",$$slots:{default:[Wf]},$$scope:{ctx:e}}}),{key:t,first:null,c(){n=O(),_t(r.$$.fragment),this.first=n},m(t,e){E(t,n,e),wt(r,t,e),i=!0},p(t,e){const n={};1&e&&(n.tag=t[14].prefix&&t[14].prefix.tag?t[14].prefix.tag:"div"),1&e&&(n.classes=t[14].prefix&&t[14].prefix.class?t[14].prefix.class:"form-group"),1048639&e&&(n.$$scope={dirty:e,ctx:t}),r.$set(n)},i(t){i||(lt(r.$$.fragment,t),i=!0)},o(t){ht(r.$$.fragment,t),i=!1},d(t){t&&I(n),Et(r,t)}}}function zf(t){let e,n,r=[],i=new Map,o=t[0];const s=t=>t[14].name;for(let e=0;e<o.length;e+=1){let n=Tf(t,o,e),a=s(n);i.set(a,r[e]=qf(a,n))}return{c(){e=k("main");for(let t=0;t<r.length;t+=1)r[t].c();D(e,"class","svelte-66lomk")},m(t,i){E(t,e,i);for(let t=0;t<r.length;t+=1)r[t].m(e,null);n=!0},p(t,[n]){if(127&n){const o=t[0];ut(),r=bt(r,n,s,1,t,o,i,e,gt,qf,null,Tf),ct()}},i(t){if(!n){for(let t=0;t<o.length;t+=1)lt(r[t]);n=!0}},o(t){for(let t=0;t<r.length;t+=1)ht(r[t]);n=!1},d(t){t&&I(e);for(let t=0;t<r.length;t+=1)r[t].d()}}}function Hf(t,e,n){let r,i;c(t,Fl,t=>n(12,r=t));let{fields:o=[]}=e,{accounts:s=[]}=e,{listOfPersonas:a=[]}=e,{groups:u=[]}=e,{uuid:l=""}=e,h=[],f=!0;const d=(t,e)=>{l?Fl.set({...r,[l]:{isValidForm:t,values:{...e}}}):Fl.set({isValidForm:t,values:{...e}})};let p={};const v=Vl(()=>(o.length>0&&o.map(t=>{let{validation:e}=t;const n=t.value?t.value:null,r={[t.name]:{value:h[t.name]?h[t.name]:n,validators:e,file:"file"===t.type?t.file:null}};p={...p,...r}}),p));return c(t,v,t=>n(5,i=t)),v.subscribe(t=>{n(4,f=t.valid),d(f,h)}),q(()=>{}),t.$set=t=>{"fields"in t&&n(0,o=t.fields),"accounts"in t&&n(1,s=t.accounts),"listOfPersonas"in t&&n(2,a=t.listOfPersonas),"groups"in t&&n(3,u=t.groups),"uuid"in t&&n(8,l=t.uuid)},[o,s,a,u,f,i,t=>{h[""+t.detail.name]=t.detail.value,o.filter(e=>{e.name===t.detail.name&&(e.value=t.detail.value)}),d(f,h)},v,l,function(e){!function(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(t=>t(e))}(t,e)}]}class Gf extends kt{constructor(t){super(),Tt(this,t,Hf,zf,s,{fields:0,accounts:1,listOfPersonas:2,groups:3,uuid:8})}}var Yf=Rt((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var n={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},r=function(t,e){if(!t)throw i(e)},i=function(t){return new Error("Firebase Database ("+n.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},o=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},s={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=o>>2,h=(3&o)<<4|a>>4,f=(15&a)<<2|c>>6,d=63&c;u||(d=64,s||(f=64)),r.push(n[l],n[h],n[f],n[d])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(o(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();var c=o<<2|s>>4;if(r.push(c),64!==a){var l=s<<4&240|a>>2;if(r.push(l),64!==u){var h=a<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},a=function(t){try{return s.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function u(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&(t[n]=u(t[n],e[n]));return t}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var c=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function l(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function h(){try{return"[object process]"===Object.prototype.toString.call(At.process)}catch(t){return!1}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var f=function(t){function e(n,r){var i=t.call(this,r)||this;return i.code=n,i.name="FirebaseError",Object.setPrototypeOf(i,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(i,d.prototype.create),i}return _i.__extends(e,t),e}(Error),d=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?p(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new f(i,a),c=0,l=Object.keys(r);c<l.length;c++){var h=l[c];"_"!==h.slice(-1)&&(h in u&&console.warn('Overwriting FirebaseError base field "'+h+'" can cause unexpected behavior.'),u[h]=r[h])}return u},t}();function p(t,e){return t.replace(v,(function(t,n){var r=e[n];return null!=r?r.toString():"<"+n+"?>"}))}var v=/\{\$([^}]+)}/g;
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function m(t){return JSON.parse(t)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var y=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=m(a(o[0])||""),n=m(a(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(t){}return{header:e,claims:n,data:r,signature:i}};
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var g=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,s,a=this.chain_[0],u=this.chain_[1],c=this.chain_[2],l=this.chain_[3],h=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(o=l^u&(c^l),s=1518500249):(o=u^c^l,s=1859775393):r<60?(o=u&c|l&(u|c),s=2400959708):(o=u^c^l,s=3395469782);i=(a<<5|a>>>27)+o+h+s+n[r]&4294967295;h=l,l=c,c=4294967295&(u<<30|u>>>2),u=a,a=i}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();var b=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=_),void 0===r.error&&(r.error=_),void 0===r.complete&&(r.complete=_);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function _(){}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function w(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var i=t+" failed: ";return i+=r+" argument "}e.CONSTANTS=n,e.Deferred=c,e.ErrorFactory=d,e.FirebaseError=f,e.Sha1=g,e.assert=r,e.assertionError=i,e.async=function(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then((function(){t.apply(void 0,n)})).catch((function(t){e&&e(t)}))}},e.base64=s,e.base64Decode=a,e.base64Encode=function(t){var e=o(t);return s.encodeByteArray(e,!0)},e.contains=
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.createSubscribe=function(t,e){var n=new b(t,e);return n.subscribe.bind(n)},e.decode=y,e.deepCopy=
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function(t){return u(void 0,t)},e.deepExtend=u,e.errorPrefix=w,e.getUA=l,e.isAdmin=function(t){var e=y(t).claims;return"object"==typeof e&&!0===e.admin},e.isBrowser=function(){return"object"==typeof self&&self.self===self},e.isBrowserExtension=function(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id},e.isElectron=function(){return l().indexOf("Electron/")>=0},e.isEmpty=function(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0},e.isIE=function(){var t=l();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0},e.isMobileCordova=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(l())},e.isNode=h,e.isNodeSdk=function(){return!0===n.NODE_CLIENT||!0===n.NODE_ADMIN},e.isReactNative=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product},e.isSafari=function(){return!h()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")},e.isUWP=function(){return l().indexOf("MSAppHost/")>=0},e.isValidFormat=function(t){var e=y(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},e.isValidTimestamp=function(t){var e=y(t).claims,n=Math.floor((new Date).getTime()/1e3),r=0,i=0;return"object"==typeof e&&(e.hasOwnProperty("nbf")?r=e.nbf:e.hasOwnProperty("iat")&&(r=e.iat),i=e.hasOwnProperty("exp")?e.exp:r+86400),!!n&&!!r&&!!i&&n>=r&&n<=i},e.issuedAtTime=function(t){var e=y(t).claims;return"object"==typeof e&&e.hasOwnProperty("iat")?e.iat:null},e.jsonEval=m,e.map=function(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */,e.querystring=function(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach((function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))})):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""},e.querystringDecode=function(t){var e={};return t.replace(/^\?/,"").split("&").forEach((function(t){if(t){var n=t.split("=");e[n[0]]=n[1]}})),e},e.safeGet=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0},e.stringLength=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e},e.stringToByteArray=function(t){for(var e=[],n=0,i=0;i<t.length;i++){var o=t.charCodeAt(i);if(o>=55296&&o<=56319){var s=o-55296;i++,r(i<t.length,"Surrogate pair missing trail surrogate."),o=65536+(s<<10)+(t.charCodeAt(i)-56320)}o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=63&o|128):o<65536?(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=63&o|128):(e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=63&o|128)}return e},e.stringify=function(t){return JSON.stringify(t)},e.validateArgCount=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")},e.validateCallback=function(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(w(t,e,r)+"must be a valid function.")},e.validateContextObject=function(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(w(t,e,r)+"must be a valid context object.")}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */,e.validateNamespace=function(t,e,n,r){if((!r||n)&&"string"!=typeof n)throw new Error(w(t,e,r)+"must be a valid firebase namespace.")}}));Dt(Yf);Yf.CONSTANTS,Yf.Deferred,Yf.ErrorFactory,Yf.FirebaseError,Yf.Sha1,Yf.assert,Yf.assertionError,Yf.async,Yf.base64,Yf.base64Decode,Yf.base64Encode,Yf.contains,Yf.createSubscribe,Yf.decode,Yf.deepCopy,Yf.deepExtend,Yf.errorPrefix,Yf.getUA,Yf.isAdmin,Yf.isBrowser,Yf.isBrowserExtension,Yf.isElectron,Yf.isEmpty,Yf.isIE,Yf.isMobileCordova,Yf.isNode,Yf.isNodeSdk,Yf.isReactNative,Yf.isSafari,Yf.isUWP,Yf.isValidFormat,Yf.isValidTimestamp,Yf.issuedAtTime,Yf.jsonEval,Yf.map,Yf.querystring,Yf.querystringDecode,Yf.safeGet,Yf.stringLength,Yf.stringToByteArray,Yf.stringify,Yf.validateArgCount,Yf.validateCallback,Yf.validateContextObject,Yf.validateNamespace;var Kf=Rt((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),r=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t="[DEFAULT]");var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new Yf.Deferred;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=_i.__assign({identifier:"[DEFAULT]",optional:!1},t),n=e.identifier,r=e.optional,i=this.normalizeInstanceIdentifier(n);try{var o=this.getOrInitializeService(i);if(!o){if(r)return null;throw Error("Service "+this.name+" is not available")}return o}catch(t){if(r)return null;throw t}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(t))try{this.getOrInitializeService("[DEFAULT]")}catch(t){}try{for(var r=_i.__values(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=_i.__read(i.value,2),s=o[0],a=o[1],u=this.normalizeInstanceIdentifier(s);try{var c=this.getOrInitializeService(u);a.resolve(c)}catch(t){}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t="[DEFAULT]"),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return _i.__awaiter(this,void 0,void 0,(function(){var t;return _i.__generator(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return"[DEFAULT]"===t?void 0:t}(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:"[DEFAULT]":t},t}();
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var i=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new r(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();e.Component=n,e.ComponentContainer=i,e.Provider=r}));Dt(Kf);var Xf,Jf=Kf.Component;Kf.ComponentContainer,Kf.Provider;
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */
function Zf(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Qf,td=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(Qf||(Qf={}));var ed={debug:Qf.DEBUG,verbose:Qf.VERBOSE,info:Qf.INFO,warn:Qf.WARN,error:Qf.ERROR,silent:Qf.SILENT},nd=Qf.INFO,rd=((Xf={})[Qf.DEBUG]="log",Xf[Qf.VERBOSE]="log",Xf[Qf.INFO]="info",Xf[Qf.WARN]="warn",Xf[Qf.ERROR]="error",Xf),id=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=rd[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,Zf(["["+i+"]  "+t.name+":"],n))}},od=function(){function t(t){this.name=t,this._logLevel=nd,this._logHandler=id,this._userLogHandler=null,td.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in Qf))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!0,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?ed[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!0,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Zf([this,Qf.DEBUG],t)),this._logHandler.apply(this,Zf([this,Qf.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Zf([this,Qf.VERBOSE],t)),this._logHandler.apply(this,Zf([this,Qf.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Zf([this,Qf.INFO],t)),this._logHandler.apply(this,Zf([this,Qf.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Zf([this,Qf.WARN],t)),this._logHandler.apply(this,Zf([this,Qf.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Zf([this,Qf.ERROR],t)),this._logHandler.apply(this,Zf([this,Qf.ERROR],t))},t}();var sd=Object.freeze({__proto__:null,get LogLevel(){return Qf},Logger:od,setLogLevel:function(t){td.forEach((function(e){e.setLogLevel(t)}))},setUserLogHandler:function(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=ed[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var s=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:Qf[n].toLowerCase(),message:s,args:i,type:e.name})}},r=0,i=td;r<i.length;r++){n(i[r])}}}),ad=Rt((function(t,e){
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var n;Object.defineProperty(e,"__esModule",{value:!0});var r,i=((n={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",n["bad-app-name"]="Illegal App name: '{$appName}",n["duplicate-app"]="Firebase App named '{$appName}' already exists",n["app-deleted"]="Firebase App named '{$appName}' already deleted",n["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",n["invalid-log-argument"]="First argument to `onLog` must be null or a function.",n),o=new Yf.ErrorFactory("app","Firebase",i),s=((r={})["@firebase/app"]="fire-core",r["@firebase/analytics"]="fire-analytics",r["@firebase/auth"]="fire-auth",r["@firebase/database"]="fire-rtdb",r["@firebase/functions"]="fire-fn",r["@firebase/installations"]="fire-iid",r["@firebase/messaging"]="fire-fcm",r["@firebase/performance"]="fire-perf",r["@firebase/remote-config"]="fire-rc",r["@firebase/storage"]="fire-gcs",r["@firebase/firestore"]="fire-fst",r["fire-js"]="fire-js",r["firebase-wrapper"]="fire-js-all",r),a=new sd.Logger("@firebase/app"),u=function(){function t(t,e,n){var r,i,o=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Yf.deepCopy(t),this.container=new Kf.ComponentContainer(e.name),this._addComponent(new Kf.Component("app",(function(){return o}),"PUBLIC"));try{for(var s=_i.__values(this.firebase_.INTERNAL.components.values()),a=s.next();!a.done;a=s.next()){var u=a.value;this._addComponent(u)}}catch(t){r={error:t}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){return void 0===e&&(e="[DEFAULT]"),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e="[DEFAULT]"),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){a.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw o.create("app-deleted",{appName:this.name_})},t}();u.prototype.name&&u.prototype.options||u.prototype.delete||console.log("dc");var c=
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function t(){var e=
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={});if("object"!=typeof i||null===i){i={name:i}}var s=i;void 0===s.name&&(s.name="[DEFAULT]");var a=s.name;if("string"!=typeof a||!a)throw o.create("bad-app-name",{appName:String(a)});if(Yf.contains(e,a))throw o.create("duplicate-app",{appName:a});var u=new t(n,s,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=s[t])&&void 0!==r?r:t;n&&(i+="-"+n);var o=i.match(/\s|\//),c=e.match(/\s|\//);if(o||c){var l=['Unable to register library "'+i+'" with version "'+e+'":'];return o&&l.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),o&&c&&l.push("and"),c&&l.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void a.warn(l.join(" "))}u(new Kf.Component(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:sd.setLogLevel,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw o.create("invalid-log-argument",{appName:name});sd.setUserLogHandler(t,e)},apps:null,SDK_VERSION:"7.15.2",INTERNAL:{registerComponent:u,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){if("serverAuth"===e)return null;return e}}};function i(t){if(t=t||"[DEFAULT]",!Yf.contains(e,t))throw o.create("no-app",{appName:t});return e[t]}function u(s){var u,c,l=s.name;if(n.has(l))return a.debug("There were multiple attempts to register component "+l+"."),"PUBLIC"===s.type?r[l]:null;if(n.set(l,s),"PUBLIC"===s.type){var h=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[l])throw o.create("invalid-app-argument",{appName:l});return t[l]()};void 0!==s.serviceProps&&Yf.deepExtend(h,s.serviceProps),r[l]=h,t.prototype[l]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._getService.bind(this,l);return n.apply(this,s.multipleInstances?t:[])}}try{for(var f=_i.__values(Object.keys(e)),d=f.next();!d.done;d=f.next()){var p=d.value;e[p]._addComponent(s)}}catch(t){u={error:t}}finally{try{d&&!d.done&&(c=f.return)&&c.call(f)}finally{if(u)throw u.error}}return"PUBLIC"===s.type?r[l]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}(u);return e.INTERNAL=_i.__assign(_i.__assign({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Yf.deepExtend(e,t)},createSubscribe:Yf.createSubscribe,ErrorFactory:Yf.ErrorFactory,deepExtend:Yf.deepExtend}),e}(),l=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
if(Yf.isBrowser()&&void 0!==self.firebase){a.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var h=self.firebase.SDK_VERSION;h&&h.indexOf("LITE")>=0&&a.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var f=c.initializeApp;c.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Yf.isNode()&&a.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),f.apply(void 0,t)};var d=c;!function(t,e){t.INTERNAL.registerComponent(new Kf.Component("platform-logger",(function(t){return new l(t)}),"PRIVATE")),t.registerVersion("@firebase/app","0.6.6",e),t.registerVersion("fire-js","")}(d),e.default=d,e.firebase=d})),ud=Dt(ad);ad.firebase;var cd,ld=(cd=ad)&&"object"==typeof cd&&"default"in cd?cd.default:cd;
/**
     * @license
     * Copyright 2018 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
ld.registerVersion("firebase","7.15.4","app");var hd=ld;
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */
function fd(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)};var n=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,t];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}return globalThis}(this);function r(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function i(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:r(t)}}!function(t,r){if(r){var i=n;t=t.split(".");for(var o=0;o<t.length-1;o++){var s=t[o];s in i||(i[s]={}),i=i[s]}(r=r(o=i[t=t[t.length-1]]))!=o&&null!=r&&e(i,t,{configurable:!0,writable:!0,value:r})}}("Promise",(function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function r(){this.a=null}function o(t){return t instanceof e?t:new e((function(e){e(t)}))}if(t)return t;r.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c((function(){e.g()}))}this.a.push(t)};var s=n.setTimeout;r.prototype.c=function(t){s(t,0)},r.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(t){this.f(t)}}}this.a=null},r.prototype.f=function(t){this.c((function(){throw t}))},e.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.m),reject:t(this.g)}},e.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.s(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.u(t):this.h(t)}},e.prototype.u=function(t){var e=void 0;try{e=t.then}catch(t){return void this.g(t)}"function"==typeof e?this.w(e,t):this.h(t)},e.prototype.g=function(t){this.i(2,t)},e.prototype.h=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},e.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)a.b(this.a[t]);this.a=null}};var a=new r;return e.prototype.s=function(t){var e=this.f();t.Oa(e.resolve,e.reject)},e.prototype.w=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(t){n.reject(t)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(t){o(t)}}:e}var i,o,s=new e((function(t,e){i=t,o=e}));return this.Oa(r(t,i),r(n,o)),s},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Oa=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?a.b(n):this.a.push(n)},e.resolve=o,e.reject=function(t){return new e((function(e,n){n(t)}))},e.race=function(t){return new e((function(e,n){for(var r=i(t),s=r.next();!s.done;s=r.next())o(s.value).Oa(e,n)}))},e.all=function(t){var n=i(t),r=n.next();return r.done?o([]):new e((function(t,e){function i(e){return function(n){s[e]=n,0==--a&&t(s)}}var s=[],a=0;do{s.push(void 0),a++,o(r.value).Oa(i(s.length-1),e),r=n.next()}while(!r.done)}))},e}));var o=o||{},s=this||self,a=/^[\w+/_-]+[=]{0,2}$/,u=null;function c(){}function l(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function h(t){var e=l(t);return"array"==e||"object"==e&&"number"==typeof t.length}function f(t){return"function"==l(t)}function d(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var p="closure_uid_"+(1e9*Math.random()>>>0),v=0;function m(t,e,n){return t.call.apply(t.bind,arguments)}function y(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function g(t,e,n){return(g=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?m:y).apply(null,arguments)}function b(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var _=Date.now||function(){return+new Date};function w(t,e){function n(){}n.prototype=e.prototype,t.Za=e.prototype,t.prototype=new n,t.prototype.constructor=t}function E(t,e,n){this.code=k+t,this.message=e||S[t]||"",this.a=n||null}function I(t){var e=t&&t.code;return e?new E(e.substring(k.length),t.message,t.serverResponse):null}w(E,Error),E.prototype.v=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},E.prototype.toJSON=function(){return this.v()};var T,k="auth/",S={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},x={hd:{Ra:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Xa:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},pd:{Ra:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Xa:"https://securetoken.googleapis.com/v1/token",Ua:"https://identitytoolkit.googleapis.com/v2/",id:"p"},rd:{Ra:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Xa:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},sd:{Ra:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Xa:"https://test-securetoken.sandbox.googleapis.com/v1/token",Ua:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function O(t){for(var e in x)if(x[e].id===t)return{firebaseEndpoint:(t=x[e]).Ra,secureTokenEndpoint:t.Xa,identityPlatformEndpoint:t.Ua};return null}function A(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(t){return!1}}function N(t){if(Error.captureStackTrace)Error.captureStackTrace(this,N);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function D(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");N.call(this,n+t[r])}function R(t,e){throw new D("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function C(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function U(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function P(){this.b=this.a=null}T=O("__EID__")?"__EID__":void 0,w(N,Error),N.prototype.name="CustomError",w(D,N),D.prototype.name="AssertionError",C.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var L=new C((function(){return new M}),(function(t){t.reset()}));function j(){var t=ve,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function M(){this.next=this.b=this.a=null}P.prototype.add=function(t,e){var n=L.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},M.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},M.prototype.reset=function(){this.next=this.b=this.a=null};var V=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},F=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};var $=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=[],i=0,o="string"==typeof t?t.split(""):t,s=0;s<n;s++)if(s in o){var a=o[s];e.call(void 0,a,s,t)&&(r[i++]=a)}return r},B=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"==typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},W=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function q(t,e){return 0<=V(t,e)}function z(t,e){var n;return(n=0<=(e=V(t,e)))&&Array.prototype.splice.call(t,e,1),n}function H(t,e){!function(t,e){for(var n="string"==typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(t,(function(n,r){e.call(void 0,n,r,t)&&1==Array.prototype.splice.call(t,r,1).length&&0}))}function G(t){return Array.prototype.concat.apply([],arguments)}function Y(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var K,X=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},J=/&/g,Z=/</g,Q=/>/g,tt=/"/g,et=/'/g,nt=/\x00/g,rt=/[\x00&<>"']/;function it(t,e){return-1!=t.indexOf(e)}function ot(t,e){return t<e?-1:t>e?1:0}t:{var st=s.navigator;if(st){var at=st.userAgent;if(at){K=at;break t}}K=""}function ut(t){return it(K,t)}function ct(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function lt(t){for(var e in t)return!1;return!0}function ht(t){var e,n={};for(e in t)n[e]=t[e];return n}var ft="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function dt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<ft.length;o++)n=ft[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function pt(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||s).Element&&r.Location){var i=r;break t}}catch(t){}i=null}if(i&&void 0!==i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(d(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(t){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;R("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function vt(t,e){this.a=t===gt&&e||"",this.b=yt}function mt(t){return t instanceof vt&&t.constructor===vt&&t.b===yt?t.a:(R("expected object of type Const, got '"+t+"'"),"type_error:Const")}vt.prototype.ra=!0,vt.prototype.qa=function(){return this.a},vt.prototype.toString=function(){return"Const{"+this.a+"}"};var yt={},gt={},bt=new vt(gt,"");function _t(t,e){this.a=t===St&&e||"",this.b=kt}function wt(t){return t instanceof _t&&t.constructor===_t&&t.b===kt?t.a:(R("expected object of type TrustedResourceUrl, got '"+t+"' of type "+l(t)),"type_error:TrustedResourceUrl")}function Et(t,e){var n=mt(t);if(!Tt.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return t=n.replace(It,(function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[r])instanceof vt?mt(t):encodeURIComponent(String(t))})),new _t(St,t)}_t.prototype.ra=!0,_t.prototype.qa=function(){return this.a.toString()},_t.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var It=/%{(\w+)}/g,Tt=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,kt={},St={};function xt(t,e){this.a=t===Rt&&e||"",this.b=Dt}function Ot(t){return t instanceof xt&&t.constructor===xt&&t.b===Dt?t.a:(R("expected object of type SafeUrl, got '"+t+"' of type "+l(t)),"type_error:SafeUrl")}xt.prototype.ra=!0,xt.prototype.qa=function(){return this.a.toString()},xt.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var At=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Nt(t){return t instanceof xt?t:(t="object"==typeof t&&t.ra?t.qa():String(t),At.test(t)||(t="about:invalid#zClosurez"),new xt(Rt,t))}var Dt={},Rt={};function Ct(){this.a="",this.b=Pt}function Ut(t){return t instanceof Ct&&t.constructor===Ct&&t.b===Pt?t.a:(R("expected object of type SafeHtml, got '"+t+"' of type "+l(t)),"type_error:SafeHtml")}Ct.prototype.ra=!0,Ct.prototype.qa=function(){return this.a.toString()},Ct.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Pt={};function Lt(t){var e=new Ct;return e.a=t,e}Lt("<!DOCTYPE html>");var jt=Lt("");function Mt(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function Vt(t){return rt.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(J,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(Z,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(Q,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(tt,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(et,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(nt,"&#0;"))),t}function Ft(t){return Ft[" "](t),t}Lt("<br>"),Ft[" "]=c;var $t,Bt,Wt=ut("Opera"),qt=ut("Trident")||ut("MSIE"),zt=ut("Edge"),Ht=zt||qt,Gt=ut("Gecko")&&!(it(K.toLowerCase(),"webkit")&&!ut("Edge"))&&!(ut("Trident")||ut("MSIE"))&&!ut("Edge"),Yt=it(K.toLowerCase(),"webkit")&&!ut("Edge");function Kt(){var t=s.document;return t?t.documentMode:void 0}t:{var Xt="",Jt=(Bt=K,Gt?/rv:([^\);]+)(\)|;)/.exec(Bt):zt?/Edge\/([\d\.]+)/.exec(Bt):qt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Bt):Yt?/WebKit\/(\S+)/.exec(Bt):Wt?/(?:Version)[ \/]?(\S+)/.exec(Bt):void 0);if(Jt&&(Xt=Jt?Jt[1]:""),qt){var Zt=Kt();if(null!=Zt&&Zt>parseFloat(Xt)){$t=String(Zt);break t}}$t=Xt}var Qt,te={};function ee(t){return function(t,e){var n=te;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,(function(){for(var e=0,n=X(String($t)).split("."),r=X(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=ot(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||ot(0==s[2].length,0==a[2].length)||ot(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e}))}Qt=s.document&&qt?Kt():void 0;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(Bt){}var ne=!qt||9<=Number(Qt);function re(t){var e=document;return"string"==typeof t?e.getElementById(t):t}function ie(t,e){ct(e,(function(e,n){e&&"object"==typeof e&&e.ra&&(e=e.qa()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:ae.hasOwnProperty(n)?t.setAttribute(ae[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e}))}var oe,se,ae={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function ue(t,e,n){function r(n){n&&e.appendChild("string"==typeof n?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];!h(o)||d(o)&&0<o.nodeType?r(o):F(le(o)?Y(o):o,r)}}function ce(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function le(t){if(t&&"number"==typeof t.length){if(d(t))return"function"==typeof t.item||"string"==typeof t.item;if(f(t))return"function"==typeof t.item}return!1}function he(t){s.setTimeout((function(){throw t}),0)}function fe(){var t=s.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!ut("Presto")&&(t=function(){var t=ce(document,"IFRAME");t.style.display="none",function(t){var e=new _t(St,mt(bt));pt(t,"HTMLIFrameElement"),t.src=wt(e).toString()}(t),document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.write(Ut(jt)),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=g((function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()}),this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),void 0!==t&&!ut("Trident")&&!ut("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).Db;n.Db=null,t()}},function(t){r.next={Db:t},r=r.next,e.port2.postMessage(0)}}return function(t){s.setTimeout(t,0)}}function de(t,e){se||function(){if(s.Promise&&s.Promise.resolve){var t=s.Promise.resolve(void 0);se=function(){t.then(me)}}else se=function(){var t=me;!f(s.setImmediate)||s.Window&&s.Window.prototype&&!ut("Edge")&&s.Window.prototype.setImmediate==s.setImmediate?(oe||(oe=fe()),oe(t)):s.setImmediate(t)}}(),pe||(se(),pe=!0),ve.add(t,e)}var pe=!1,ve=new P;function me(){for(var t;t=j();){try{t.a.call(t.b)}catch(t){he(t)}U(L,t)}pe=!1}function ye(t,e){if(this.a=ge,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=c)try{var n=this;t.call(e,(function(t){Ne(n,be,t)}),(function(t){if(!(t instanceof je))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}Ne(n,_e,t)}))}catch(t){Ne(this,_e,t)}}var ge=0,be=2,_e=3;function we(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}we.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Ee=new C((function(){return new we}),(function(t){t.reset()}));function Ie(t,e,n){var r=Ee.get();return r.g=t,r.b=e,r.f=n,r}function Te(t){if(t instanceof ye)return t;var e=new ye(c);return Ne(e,be,t),e}function ke(t){return new ye((function(e,n){n(t)}))}function Se(t,e,n){De(t,e,n,null)||de(b(e,t))}function xe(t){return new ye((function(e){var n=t.length,r=[];if(n)for(var i=function(t,i,o){n--,r[t]=i?{Mb:!0,value:o}:{Mb:!1,reason:o},0==n&&e(r)},o=0;o<t.length;o++)Se(t[o],b(i,o,!0),b(i,o,!1));else e(r)}))}function Oe(t,e){t.b||t.a!=be&&t.a!=_e||Re(t),t.f?t.f.next=e:t.b=e,t.f=e}function Ae(t,e,n,r){var i=Ie(null,null,null);return i.a=new ye((function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(t){o(t)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof je?o(e):t(i)}catch(t){o(t)}}:o})),i.a.c=t,Oe(t,i),i.a}function Ne(t,e,n){t.a==ge&&(t===n&&(e=_e,n=new TypeError("Promise cannot resolve to itself")),t.a=1,De(n,t.Yc,t.Zc,t)||(t.i=n,t.a=e,t.c=null,Re(t),e!=_e||n instanceof je||function(t,e){t.g=!0,de((function(){t.g&&Le.call(null,e)}))}(t,n)))}function De(t,e,n,r){if(t instanceof ye)return Oe(t,Ie(e||c,n||null,r)),!0;if(A(t))return t.then(e,n,r),!0;if(d(t))try{var i=t.then;if(f(i))return function(t,e,n,r,i){function o(t){s||(s=!0,r.call(i,t))}var s=!1;try{e.call(t,(function(t){s||(s=!0,n.call(i,t))}),o)}catch(t){o(t)}}(t,i,e,n,r),!0}catch(t){return n.call(r,t),!0}return!1}function Re(t){t.h||(t.h=!0,de(t.ec,t))}function Ce(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function Ue(t,e,n,r){if(n==_e&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,Pe(e,n,r);else try{e.c?e.g.call(e.f):Pe(e,n,r)}catch(t){Le.call(null,t)}U(Ee,e)}function Pe(t,e,n){e==be?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}ye.prototype.then=function(t,e,n){return Ae(this,f(t)?t:null,f(e)?e:null,n)},ye.prototype.$goog_Thenable=!0,(t=ye.prototype).ma=function(t,e){return(t=Ie(t,t,e)).c=!0,Oe(this,t),this},t.o=function(t,e){return Ae(this,null,t,e)},t.cancel=function(t){if(this.a==ge){var e=new je(t);de((function(){!function t(e,n){if(e.a==ge)if(e.c){var r=e.c;if(r.b){for(var i=0,o=null,s=null,a=r.b;a&&(a.c||(i++,a.a==e&&(o=a),!(o&&1<i)));a=a.next)o||(s=a);o&&(r.a==ge&&1==i?t(r,n):(s?((i=s).next==r.f&&(r.f=i),i.next=i.next.next):Ce(r),Ue(r,o,_e,n)))}e.c=null}else Ne(e,_e,n)}(this,e)}),this)}},t.Yc=function(t){this.a=ge,Ne(this,be,t)},t.Zc=function(t){this.a=ge,Ne(this,_e,t)},t.ec=function(){for(var t;t=Ce(this);)Ue(this,t,this.a,this.i);this.h=!1};var Le=he;function je(t){N.call(this,t)}function Me(){this.wa=this.wa,this.na=this.na}w(je,N),je.prototype.name="cancel";function Ve(t){if(!t.wa&&(t.wa=!0,t.Ba(),0))(function(t){Object.prototype.hasOwnProperty.call(t,p)&&t[p]||(t[p]=++v)})(t)}Me.prototype.wa=!1,Me.prototype.Ba=function(){if(this.na)for(;this.na.length;)this.na.shift()()};var Fe=Object.freeze||function(t){return t},$e=!qt||9<=Number(Qt),Be=qt&&!ee("9"),We=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{s.addEventListener("test",c,e),s.removeEventListener("test",c,e)}catch(t){}return t}();function qe(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function ze(t,e){if(qe.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Gt){t:{try{Ft(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:He[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}qe.prototype.preventDefault=function(){this.defaultPrevented=!0},w(ze,qe);var He=Fe({2:"touch",3:"pen",4:"mouse"});ze.prototype.preventDefault=function(){ze.Za.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Be)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}},ze.prototype.f=function(){return this.a};var Ge="closure_listenable_"+(1e6*Math.random()|0),Ye=0;function Ke(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Ta=i,this.key=++Ye,this.ua=this.Na=!1}function Xe(t){t.ua=!0,t.listener=null,t.proxy=null,t.src=null,t.Ta=null}function Je(t){this.src=t,this.a={},this.b=0}function Ze(t,e){var n=e.type;n in t.a&&z(t.a[n],e)&&(Xe(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function Qe(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.ua&&o.listener==e&&o.capture==!!n&&o.Ta==r)return i}return-1}Je.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=Qe(t,e,r,i);return-1<s?(e=t[s],n||(e.Na=!1)):((e=new Ke(e,this.src,o,!!r,i)).Na=n,t.push(e)),e};var tn="closure_lm_"+(1e6*Math.random()|0),en={};function nn(t,e,n,r,i){if(r&&r.once)on(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)nn(t,e[o],n,r,i);else n=pn(n),t&&t[Ge]?mn(t,e,n,d(r)?!!r.capture:!!r,i):rn(t,e,n,!1,r,i)}function rn(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=d(i)?!!i.capture:!!i,a=fn(t);if(a||(t[tn]=a=new Je(t)),!(n=a.add(e,n,r,s,o)).proxy)if(r=function(){var t=hn,e=$e?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)We||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(un(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}}function on(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)on(t,e[o],n,r,i);else n=pn(n),t&&t[Ge]?yn(t,e,n,d(r)?!!r.capture:!!r,i):rn(t,e,n,!0,r,i)}function sn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)sn(t,e[o],n,r,i);else r=d(r)?!!r.capture:!!r,n=pn(n),t&&t[Ge]?(t=t.u,(e=String(e).toString())in t.a&&(-1<(n=Qe(o=t.a[e],n,r,i))&&(Xe(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):t&&(t=fn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=Qe(e,n,r,i)),(n=-1<t?e[t]:null)&&an(n))}function an(t){if("number"!=typeof t&&t&&!t.ua){var e=t.src;if(e&&e[Ge])Ze(e.u,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(un(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=fn(e))?(Ze(n,t),0==n.b&&(n.src=null,e[tn]=null)):Xe(t)}}}function un(t){return t in en?en[t]:en[t]="on"+t}function cn(t,e,n,r){var i=!0;if((t=fn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.ua&&(o=ln(o,r),i=i&&!1!==o)}return i}function ln(t,e){var n=t.listener,r=t.Ta||t.src;return t.Na&&an(t),n.call(r,e)}function hn(t,e){if(t.ua)return!0;if(!$e){if(!e)t:{e=["window","event"];for(var n=s,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new ze(r=e,this),n=!0,!(0>r.keyCode||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(t){i=!0}(i||null==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=cn(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=cn(r[i],t,!1,e),n=n&&o}return n}return ln(t,new ze(e,this))}function fn(t){return(t=t[tn])instanceof Je?t:null}var dn="__closure_events_fn_"+(1e9*Math.random()>>>0);function pn(t){return f(t)?t:(t[dn]||(t[dn]=function(e){return t.handleEvent(e)}),t[dn])}function vn(){Me.call(this),this.u=new Je(this),this.Yb=this,this.eb=null}function mn(t,e,n,r,i){t.u.add(String(e),n,!1,r,i)}function yn(t,e,n,r,i){t.u.add(String(e),n,!0,r,i)}function gn(t,e,n,r){if(!(e=t.u.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.ua&&s.capture==n){var a=s.listener,u=s.Ta||s.src;s.Na&&Ze(t.u,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}function bn(t,e,n){if(f(t))n&&(t=g(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=g(t.handleEvent,t)}return 2147483647<Number(e)?-1:s.setTimeout(t,e||0)}function _n(t){var e=null;return new ye((function(n,r){-1==(e=bn((function(){n(void 0)}),t))&&r(Error("Failed to schedule timer."))})).o((function(t){throw s.clearTimeout(e),t}))}function wn(t){if(t.V&&"function"==typeof t.V)return t.V();if("string"==typeof t)return t.split("");if(h(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function En(t){if(t.X&&"function"==typeof t.X)return t.X();if(!t.V||"function"!=typeof t.V){if(h(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function In(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof In)for(n=t.X(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Tn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];kn(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)kn(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function kn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}w(vn,Me),vn.prototype[Ge]=!0,vn.prototype.addEventListener=function(t,e,n,r){nn(this,t,e,n,r)},vn.prototype.removeEventListener=function(t,e,n,r){sn(this,t,e,n,r)},vn.prototype.dispatchEvent=function(t){var e,n=this.eb;if(n)for(e=[];n;n=n.eb)e.push(n);n=this.Yb;var r=t.type||t;if("string"==typeof t)t=new qe(t,n);else if(t instanceof qe)t.target=t.target||n;else{var i=t;dt(t=new qe(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.b=e[o];i=gn(s,r,!0,t)&&i}if(i=gn(s=t.b=n,r,!0,t)&&i,i=gn(s,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=gn(s=t.b=e[o],r,!1,t)&&i;return i},vn.prototype.Ba=function(){if(vn.Za.Ba.call(this),this.u){var t,e=this.u;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Xe(n[r]);delete e.a[t],e.b--}}this.eb=null},(t=In.prototype).V=function(){Tn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.X=function(){return Tn(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return kn(this.b,t)?this.b[t]:e},t.set=function(t,e){kn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.X(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Sn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/\\#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function xn(t,e){var n;this.b=this.i=this.f="",this.l=null,this.g=this.c="",this.h=!1,t instanceof xn?(this.h=void 0!==e?e:t.h,On(this,t.f),this.i=t.i,this.b=t.b,An(this,t.l),this.c=t.c,Nn(this,Kn(t.a)),this.g=t.g):t&&(n=String(t).match(Sn))?(this.h=!!e,On(this,n[1]||"",!0),this.i=Pn(n[2]||""),this.b=Pn(n[3]||"",!0),An(this,n[4]),this.c=Pn(n[5]||"",!0),Nn(this,n[6]||"",!0),this.g=Pn(n[7]||"")):(this.h=!!e,this.a=new Wn(null,this.h))}function On(t,e,n){t.f=n?Pn(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function An(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.l=e}else t.l=null}function Nn(t,e,n){e instanceof Wn?(t.a=e,function(t,e){e&&!t.f&&(qn(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Hn(this,e),Yn(this,n,t))}),t)),t.f=e}(t.a,t.h)):(n||(e=Ln(e,$n)),t.a=new Wn(e,t.h))}function Dn(t,e,n){t.a.set(e,n)}function Rn(t,e){return t.a.get(e)}function Cn(t){return t instanceof xn?new xn(t):new xn(t,void 0)}function Un(t,e){var n=new xn(null,void 0);return On(n,"https"),t&&(n.b=t),e&&(n.c=e),n}function Pn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Ln(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,jn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function jn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}xn.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Ln(e,Mn,!0),":");var n=this.b;return(n||"file"==e)&&(t.push("//"),(e=this.i)&&t.push(Ln(e,Mn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.l)&&t.push(":",String(n))),(n=this.c)&&(this.b&&"/"!=n.charAt(0)&&t.push("/"),t.push(Ln(n,"/"==n.charAt(0)?Fn:Vn,!0))),(n=this.a.toString())&&t.push("?",n),(n=this.g)&&t.push("#",Ln(n,Bn)),t.join("")},xn.prototype.resolve=function(t){var e=new xn(this),n=!!t.f;n?On(e,t.f):n=!!t.i,n?e.i=t.i:n=!!t.b,n?e.b=t.b:n=null!=t.l;var r=t.c;if(n)An(e,t.l);else if(n=!!t.c){if("/"!=r.charAt(0))if(this.b&&!this.c)r="/"+r;else{var i=e.c.lastIndexOf("/");-1!=i&&(r=e.c.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(it(i,"./")||it(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],s=0;s<i.length;){var a=i[s++];"."==a?r&&s==i.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&s==i.length&&o.push("")):(o.push(a),r=!0)}r=o.join("/")}else r=i}return n?e.c=r:n=""!==t.a.toString(),n?Nn(e,Kn(t.a)):n=!!t.g,n&&(e.g=t.g),e};var Mn=/[#\/\?@]/g,Vn=/[#\?:]/g,Fn=/[#\?]/g,$n=/[#\?@]/g,Bn=/#/g;function Wn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function qn(t){t.a||(t.a=new In,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function zn(t){var e=En(t);if(void 0===e)throw Error("Keys are undefined");var n=new Wn(null,void 0);t=wn(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?Yn(n,i,o):n.add(i,o)}return n}function Hn(t,e){qn(t),e=Xn(t,e),kn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,kn((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Tn(t)))}function Gn(t,e){return qn(t),e=Xn(t,e),kn(t.a.b,e)}function Yn(t,e,n){Hn(t,e),0<n.length&&(t.c=null,t.a.set(Xn(t,e),Y(n)),t.b+=n.length)}function Kn(t){var e=new Wn;return e.c=t.c,t.a&&(e.a=new In(t.a),e.b=t.b),e}function Xn(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function Jn(t){var e=[];return function t(e,n,r){if(null==n)r.push("null");else{if("object"==typeof n){if(Array.isArray(n)){var i=n;n=i.length,r.push("[");for(var o="",s=0;s<n;s++)r.push(o),t(e,i[s],r),o=",";return void r.push("]")}if(!(n instanceof String||n instanceof Number||n instanceof Boolean)){for(i in r.push("{"),o="",n)Object.prototype.hasOwnProperty.call(n,i)&&("function"!=typeof(s=n[i])&&(r.push(o),er(i,r),r.push(":"),t(e,s,r),o=","));return void r.push("}")}n=n.valueOf()}switch(typeof n){case"string":er(n,r);break;case"number":r.push(isFinite(n)&&!isNaN(n)?String(n):"null");break;case"boolean":r.push(String(n));break;case"function":r.push("null");break;default:throw Error("Unknown type: "+typeof n)}}}(new Zn,t,e),e.join("")}function Zn(){}(t=Wn.prototype).add=function(t,e){qn(this),this.c=null,t=Xn(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(t,e){qn(this),this.a.forEach((function(n,r){F(n,(function(n){t.call(e,n,r,this)}),this)}),this)},t.X=function(){qn(this);for(var t=this.a.V(),e=this.a.X(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.V=function(t){qn(this);var e=[];if("string"==typeof t)Gn(this,t)&&(e=G(e,this.a.get(Xn(this,t))));else{t=this.a.V();for(var n=0;n<t.length;n++)e=G(e,t[n])}return e},t.set=function(t,e){return qn(this),this.c=null,Gn(this,t=Xn(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.V(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.X(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.V(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var Qn={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},tr=/\uffff/.test("￿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function er(t,e){e.push('"',t.replace(tr,(function(t){var e=Qn[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),Qn[t]=e),e})),'"')}function nr(){var t=wr();return qt&&!!Qt&&11==Qt||/Edge\/\d+/.test(t)}function rr(){return s.window&&s.window.location.href||self&&self.location&&self.location.href||""}function ir(t,e){e=e||s.window;var n="about:blank";t&&(n=Ot(Nt(t))),e.location.href=n}function or(t){return!!((t=(t||wr()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function sr(t){t=t||s.window;try{t.close()}catch(t){}}function ar(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(s in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=wr().toLowerCase(),r&&(e.target=r,it(n,"crios/")&&(e.target="_blank")),gr(wr())==mr&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof xt?n:Nt(void 0!==n.href?n.href:String(n)),n=t.target||n.target,i=[],t)switch(s){case"width":case"height":case"top":case"left":i.push(s+"="+t[s]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(s+"="+(t[s]?1:0))}var s=i.join(",");if((ut("iPhone")&&!ut("iPod")&&!ut("iPad")||ut("iPad")||ut("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(pt(s=ce(document,"A"),"HTMLAnchorElement"),e instanceof xt||e instanceof xt||(e="object"==typeof e&&e.ra?e.qa():String(e),At.test(e)||(e="about:invalid#zClosurez"),e=new xt(Rt,e)),s.href=Ot(e),s.setAttribute("target",n),t.noreferrer&&s.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),s.dispatchEvent(t),s={}):t.noreferrer?(s=r.open("",n,s),t=Ot(e),s&&(Ht&&it(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),s.opener=null,t=Lt('<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Vt(t)+'">'),r=s.document)&&(r.write(Ut(t)),r.close())):(s=r.open(Ot(e),n,s))&&t.noopener&&(s.opener=null),s)try{s.focus()}catch(t){}return s}var ur=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,cr=/^[^@]+@[^@]+$/;function lr(){var t=null;return new ye((function(e){"complete"==s.document.readyState?e():(t=function(){e()},on(window,"load",t))})).o((function(e){throw sn(window,"load",t),e}))}function hr(t){return t=t||wr(),!("file:"!==Sr()&&"ionic:"!==Sr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function fr(){var t=s.window;try{return!(!t||t==t.top)}catch(t){return!1}}function dr(){return void 0!==s.WorkerGlobalScope&&"function"==typeof s.importScripts}function pr(){return ud.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":ud.INTERNAL.hasOwnProperty("node")?"Node":dr()?"Worker":"Browser"}function vr(){var t=pr();return"ReactNative"===t||"Node"===t}var mr="Firefox",yr="Chrome";function gr(t){var e=t.toLowerCase();return it(e,"opera/")||it(e,"opr/")||it(e,"opios/")?"Opera":it(e,"iemobile")?"IEMobile":it(e,"msie")||it(e,"trident/")?"IE":it(e,"edge/")?"Edge":it(e,"firefox/")?mr:it(e,"silk/")?"Silk":it(e,"blackberry")?"Blackberry":it(e,"webos")?"Webos":!it(e,"safari/")||it(e,"chrome/")||it(e,"crios/")||it(e,"android")?!it(e,"chrome/")&&!it(e,"crios/")||it(e,"edge/")?it(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":yr:"Safari"}var br={jd:"FirebaseCore-web",ld:"FirebaseUI-web"};function _r(t,e){e=e||[];var n,r=[],i={};for(n in br)i[br[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=pr())?r=gr(i=wr()):"Worker"===r&&(r=gr(i=wr())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function wr(){return s.navigator&&s.navigator.userAgent||""}function Er(t,e){t=t.split("."),e=e||s;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function Ir(){try{var t=s.localStorage,e=Dr();if(t)return t.setItem(e,"1"),t.removeItem(e),!nr()||!!s.indexedDB}catch(t){return dr()&&!!s.indexedDB}return!1}function Tr(){return(kr()||"chrome-extension:"===Sr()||hr())&&!vr()&&Ir()&&!dr()}function kr(){return"http:"===Sr()||"https:"===Sr()}function Sr(){return s.location&&s.location.protocol||null}function xr(t){return!or(t=t||wr())&&gr(t)!=mr}function Or(t){return void 0===t?null:Jn(t)}function Ar(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function Nr(t){if(null!==t)return JSON.parse(t)}function Dr(t){return t||Math.floor(1e9*Math.random()).toString()}function Rr(t){return"Safari"!=gr(t=t||wr())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function Cr(){var t=s.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function Ur(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=wr(),e=pr(),this.b=or(t)||"ReactNative"===e}function Pr(){var t=s.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function Lr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(t){}return null}function jr(){return!(!Er("fireauth.oauthhelper",s)&&!Er("fireauth.iframe",s))}Ur.prototype.get=function(){var t=s.navigator;return!t||"boolean"!=typeof t.onLine||!kr()&&"chrome-extension:"!==Sr()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Mr,Vr={};function Fr(t){Vr[t]||(Vr[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var $r={};Object.defineProperty($r,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty($r,"abcd",{configurable:!0,enumerable:!0,value:2}),Mr=2==$r.abcd}catch(Bt){Mr=!1}function Br(t,e,n){Mr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Wr(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Br(t,n,e[n])}function qr(t){var e={};return Wr(e,t),e}function zr(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)Br(e,n,zr(t[n]));return e}function Hr(t){var e=t&&(t[Jr]?"phone":null);if(!(e&&t&&t[Xr]))throw new E("internal-error","Internal assert: invalid MultiFactorInfo object");Br(this,"uid",t[Xr]),Br(this,"displayName",t[Yr]||null);var n=null;t[Kr]&&(n=new Date(t[Kr]).toUTCString()),Br(this,"enrollmentTime",n),Br(this,"factorId",e)}function Gr(t){try{var e=new Zr(t)}catch(t){e=null}return e}Hr.prototype.v=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var Yr="displayName",Kr="enrolledAt",Xr="mfaEnrollmentId",Jr="phoneInfo";function Zr(t){Hr.call(this,t),Br(this,"phoneNumber",t[Jr])}function Qr(t){var e={},n=t[ri],r=t[oi],i=t[si];if(t=Gr(t[ii]),!i||i!=ei&&i!=ni&&!n||i==ni&&!r||i==ti&&!t)throw Error("Invalid checkActionCode response!");i==ni?(e[ui]=n||null,e[li]=n||null,e[ai]=r):(e[ui]=r||null,e[li]=r||null,e[ai]=n||null),e[ci]=t||null,Br(this,fi,i),Br(this,hi,zr(e))}w(Zr,Hr),Zr.prototype.v=function(){var t=Zr.Za.v.call(this);return t.phoneNumber=this.phoneNumber,t};var ti="REVERT_SECOND_FACTOR_ADDITION",ei="EMAIL_SIGNIN",ni="VERIFY_AND_CHANGE_EMAIL",ri="email",ii="mfaInfo",oi="newEmail",si="requestType",ai="email",ui="fromEmail",ci="multiFactorInfo",li="previousEmail",hi="data",fi="operation";function di(t){var e=Rn(t=Cn(t),pi)||null,n=Rn(t,vi)||null,r=Rn(t,gi)||null;if(r=r&&_i[r]||null,!e||!n||!r)throw new E("argument-error",pi+", "+vi+"and "+gi+" are required in a valid action code URL.");Wr(this,{apiKey:e,operation:r,code:n,continueUrl:Rn(t,mi)||null,languageCode:Rn(t,yi)||null,tenantId:Rn(t,bi)||null})}var pi="apiKey",vi="oobCode",mi="continueUrl",yi="languageCode",gi="mode",bi="tenantId",_i={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:ti,signIn:ei,verifyAndChangeEmail:ni,verifyEmail:"VERIFY_EMAIL"};function wi(t){try{return new di(t)}catch(t){return null}}function Ei(t){var e=t[xi];if(void 0===e)throw new E("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new E("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[Ii];if(n&&"object"==typeof n){e=n[Ni];var r=n[Oi];if(n=n[Ai],"string"==typeof e&&e.length){if(this.a=e,void 0!==r&&"boolean"!=typeof r)throw new E("argument-error",Oi+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new E("argument-error",Ai+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==e)throw new E("argument-error",Ni+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new E("missing-android-pkg-name")}}else if(void 0!==n)throw new E("argument-error",Ii+" property must be a non null object when specified.");if(this.f=null,(e=t[Si])&&"object"==typeof e){if("string"==typeof(e=e[Di])&&e.length)this.f=e;else if(void 0!==e)throw new E("argument-error",Di+" property must be a non empty string when specified.")}else if(void 0!==e)throw new E("argument-error",Si+" property must be a non null object when specified.");if(void 0!==(e=t[ki])&&"boolean"!=typeof e)throw new E("argument-error",ki+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[Ti])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new E("argument-error",Ti+" property must be a non empty string when specified.");this.i=t||null}var Ii="android",Ti="dynamicLinkDomain",ki="handleCodeInApp",Si="iOS",xi="url",Oi="installApp",Ai="minimumVersion",Ni="packageName",Di="bundleId";function Ri(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var Ci=null;function Ui(t){var e="";return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=Ci[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!Ci){Ci={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===Ci[o]&&(Ci[o]=i)}}}();for(var r=0;;){var i=n(-1),o=n(0),s=n(64),a=n(64);if(64===a&&-1===i)break;e(i<<2|o>>4),64!=s&&(e(o<<4&240|s>>2),64!=a&&e(s<<6&192|a))}}(t,(function(t){e+=String.fromCharCode(t)})),e}function Pi(t){var e=ji(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.g=t,this.c=e.exp,this.h=e.sub,this.a=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.b=!!e.is_anonymous||"anonymous"==this.a}function Li(t){try{return new Pi(t)}catch(t){return null}}function ji(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{return JSON.parse(Ui(t))}catch(t){}return null}Pi.prototype.S=function(){return this.f},Pi.prototype.i=function(){return this.b},Pi.prototype.toString=function(){return this.g};var Mi="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Vi=["client_id","response_type","scope","redirect_uri","state"],Fi={kd:{Ha:"locale",ta:700,sa:600,ea:"facebook.com",Va:Vi},md:{Ha:null,ta:500,sa:750,ea:"github.com",Va:Vi},nd:{Ha:"hl",ta:515,sa:680,ea:"google.com",Va:Vi},td:{Ha:"lang",ta:485,sa:705,ea:"twitter.com",Va:Mi},gd:{Ha:"locale",ta:640,sa:600,ea:"apple.com",Va:[]}};function $i(t){for(var e in Fi)if(Fi[e].ea==t)return Fi[e];return null}function Bi(t){var e={};e["facebook.com"]=Gi,e["google.com"]=Ki,e["github.com"]=Yi,e["twitter.com"]=Xi;var n=t&&t[qi];try{if(n)return e[n]?new e[n](t):new Hi(t);if(void 0!==t[Wi])return new zi(t)}catch(t){}return null}var Wi="idToken",qi="providerId";function zi(t){var e=t[qi];if(!e&&t[Wi]){var n=Li(t[Wi]);n&&n.a&&(e=n.a)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),Br(this,"providerId",e),Br(this,"isNewUser",n)}function Hi(t){zi.call(this,t),Br(this,"profile",zr((t=Nr(t.rawUserInfo||"{}"))||{}))}function Gi(t){if(Hi.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function Yi(t){if(Hi.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Br(this,"username",this.profile&&this.profile.login||null)}function Ki(t){if(Hi.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function Xi(t){if(Hi.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Br(this,"username",t.screenName||null)}function Ji(t){var e=Cn(t),n=Rn(e,"link"),r=Rn(Cn(n),"link");return e=Rn(e,"deep_link_id"),Rn(Cn(e),"link")||e||r||n||t}function Zi(t,e){if(!t&&!e)throw new E("internal-error","Internal assert: no raw session string available");if(t&&e)throw new E("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?Qi:to}w(Hi,zi),w(Gi,Hi),w(Yi,Hi),w(Ki,Hi),w(Xi,Hi);var Qi="enroll",to="signin";function eo(){}function no(t,e){return t.then((function(t){if(t[qs]){var n=Li(t[qs]);if(!n||e!=n.h)throw new E("user-mismatch");return t}throw new E("user-mismatch")})).o((function(t){throw t&&t.code&&t.code==k+"user-not-found"?new E("user-mismatch"):t}))}function ro(t,e){if(!e)throw new E("internal-error","failed to construct a credential");this.a=e,Br(this,"providerId",t),Br(this,"signInMethod",t)}function io(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function oo(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new ro(t.providerId,t.pendingToken)}catch(t){}return null}function so(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&Br(this,"idToken",e.idToken),e.accessToken&&Br(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&Br(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new E("internal-error","failed to construct a credential");Br(this,"accessToken",e.oauthToken),Br(this,"secret",e.oauthTokenSecret)}Br(this,"providerId",t),Br(this,"signInMethod",n)}function ao(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:zn(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function uo(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new so(t.providerId,e,t.signInMethod)}catch(t){}}return null}function co(t,e){this.Oc=e||[],Wr(this,{providerId:t,isOAuthProvider:!0}),this.Fb={},this.lb=($i(t)||{}).Ha||null,this.kb=null}function lo(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new E("argument-error",'SAML provider IDs must be prefixed with "saml."');co.call(this,t,[])}function ho(t){co.call(this,t,Vi),this.a=[]}function fo(){ho.call(this,"facebook.com")}function po(t){if(!t)throw new E("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return d(t)&&(e=t.accessToken),(new fo).credential({accessToken:e})}function vo(){ho.call(this,"github.com")}function mo(t){if(!t)throw new E("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return d(t)&&(e=t.accessToken),(new vo).credential({accessToken:e})}function yo(){ho.call(this,"google.com"),this.Aa("profile")}function go(t,e){var n=t;return d(t)&&(n=t.idToken,e=t.accessToken),(new yo).credential({idToken:n,accessToken:e})}function bo(){co.call(this,"twitter.com",Mi)}function _o(t,e){var n=t;if(d(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new E("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new so("twitter.com",n,"twitter.com")}function wo(t,e,n){this.a=t,this.f=e,Br(this,"providerId","password"),Br(this,"signInMethod",n===Io.EMAIL_LINK_SIGN_IN_METHOD?Io.EMAIL_LINK_SIGN_IN_METHOD:Io.EMAIL_PASSWORD_SIGN_IN_METHOD)}function Eo(t){return t&&t.email&&t.password?new wo(t.email,t.password,t.signInMethod):null}function Io(){Wr(this,{providerId:"password",isOAuthProvider:!1})}function To(t,e){if(!(e=ko(e)))throw new E("argument-error","Invalid email link!");return new wo(t,e.code,Io.EMAIL_LINK_SIGN_IN_METHOD)}function ko(t){return(t=wi(t=Ji(t)))&&t.operation===ei?t:null}function So(t){if(!(t.bb&&t.ab||t.Ja&&t.da))throw new E("internal-error");this.a=t,Br(this,"providerId","phone"),this.ea="phone",Br(this,"signInMethod","phone")}function xo(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return F(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){t[n]&&(e[n]=t[n])})),new So(e)}return null}function Oo(t){return t.a.Ja&&t.a.da?{temporaryProof:t.a.Ja,phoneNumber:t.a.da}:{sessionInfo:t.a.bb,code:t.a.ab}}function Ao(t){try{this.a=t||ud.auth()}catch(t){throw new E("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Wr(this,{providerId:"phone",isOAuthProvider:!1})}function No(t,e){if(!t)throw new E("missing-verification-id");if(!e)throw new E("missing-verification-code");return new So({bb:t,ab:e})}function Do(t){if(t.temporaryProof&&t.phoneNumber)return new So({Ja:t.temporaryProof,da:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,s=t&&t.pendingToken;try{switch(e){case"google.com":return go(o,n);case"facebook.com":return po(n);case"github.com":return mo(n);case"twitter.com":return _o(n,r);default:return n||r||o||s?s?0==e.indexOf("saml.")?new ro(e,s):new so(e,{pendingToken:s,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new ho(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(t){return null}}function Ro(t){if(!t.isOAuthProvider)throw new E("invalid-oauth-provider")}function Co(t,e,n,r,i,o,s){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=s||null,this.a=i||null,!this.g&&!this.a)throw new E("invalid-auth-event");if(this.g&&this.a)throw new E("invalid-auth-event");if(this.g&&!this.f)throw new E("invalid-auth-event")}function Uo(t){return(t=t||{}).type?new Co(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&I(t.error),t.postBody,t.tenantId):null}function Po(){this.b=null,this.a=[]}Zi.prototype.Fa=function(){return this.a?Te(this.a):Te(this.b)},Zi.prototype.v=function(){return this.type==Qi?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},eo.prototype.ia=function(){},eo.prototype.b=function(){},eo.prototype.c=function(){},eo.prototype.v=function(){},ro.prototype.ia=function(t){return la(t,io(this))},ro.prototype.b=function(t,e){var n=io(this);return n.idToken=e,ha(t,n)},ro.prototype.c=function(t,e){return no(fa(t,io(this)),e)},ro.prototype.v=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},so.prototype.ia=function(t){return la(t,ao(this))},so.prototype.b=function(t,e){var n=ao(this);return n.idToken=e,ha(t,n)},so.prototype.c=function(t,e){return no(fa(t,ao(this)),e)},so.prototype.v=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},co.prototype.Ia=function(t){return this.Fb=ht(t),this},w(lo,co),w(ho,co),ho.prototype.Aa=function(t){return q(this.a,t)||this.a.push(t),this},ho.prototype.Nb=function(){return Y(this.a)},ho.prototype.credential=function(t,e){var n;if(!(n=d(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new E("argument-error","credential failed: must provide the ID token and/or the access token.");return new so(this.providerId,n,this.providerId)},w(fo,ho),Br(fo,"PROVIDER_ID","facebook.com"),Br(fo,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),w(vo,ho),Br(vo,"PROVIDER_ID","github.com"),Br(vo,"GITHUB_SIGN_IN_METHOD","github.com"),w(yo,ho),Br(yo,"PROVIDER_ID","google.com"),Br(yo,"GOOGLE_SIGN_IN_METHOD","google.com"),w(bo,co),Br(bo,"PROVIDER_ID","twitter.com"),Br(bo,"TWITTER_SIGN_IN_METHOD","twitter.com"),wo.prototype.ia=function(t){return this.signInMethod==Io.EMAIL_LINK_SIGN_IN_METHOD?Ga(t,_a,{email:this.a,oobCode:this.f}):Ga(t,Ba,{email:this.a,password:this.f})},wo.prototype.b=function(t,e){return this.signInMethod==Io.EMAIL_LINK_SIGN_IN_METHOD?Ga(t,wa,{idToken:e,email:this.a,oobCode:this.f}):Ga(t,Ua,{idToken:e,email:this.a,password:this.f})},wo.prototype.c=function(t,e){return no(this.ia(t),e)},wo.prototype.v=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},Wr(Io,{PROVIDER_ID:"password"}),Wr(Io,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Wr(Io,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),So.prototype.ia=function(t){return t.cb(Oo(this))},So.prototype.b=function(t,e){var n=Oo(this);return n.idToken=e,Ga(t,qa,n)},So.prototype.c=function(t,e){var n=Oo(this);return n.operation="REAUTH",no(t=Ga(t,za,n),e)},So.prototype.v=function(){var t={providerId:"phone"};return this.a.bb&&(t.verificationId=this.a.bb),this.a.ab&&(t.verificationCode=this.a.ab),this.a.Ja&&(t.temporaryProof=this.a.Ja),this.a.da&&(t.phoneNumber=this.a.da),t},Ao.prototype.cb=function(t,e){var n=this.a.b;return Te(e.verify()).then((function(r){if("string"!=typeof r)throw new E("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(e.type){case"recaptcha":var i=d(t)?t.session:null,o=d(t)?t.phoneNumber:t;return(i&&i.type==Qi?i.Fa().then((function(t){return function(t,e){return Ga(t,La,e).then((function(t){return t.phoneSessionInfo.sessionInfo}))}(n,{idToken:t,phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:r}})})):i&&i.type==to?i.Fa().then((function(e){return function(t,e){return Ga(t,ja,e).then((function(t){return t.phoneResponseInfo.sessionInfo}))}(n,{mfaPendingCredential:e,mfaEnrollmentId:t.multiFactorHint&&t.multiFactorHint.uid||t.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}})})):function(t,e){return Ga(t,Ra,e)}(n,{phoneNumber:o,recaptchaToken:r})).then((function(t){return"function"==typeof e.reset&&e.reset(),t}),(function(t){throw"function"==typeof e.reset&&e.reset(),t}));default:throw new E("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}}))},Wr(Ao,{PROVIDER_ID:"phone"}),Wr(Ao,{PHONE_SIGN_IN_METHOD:"phone"}),Co.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},Co.prototype.S=function(){return this.h},Co.prototype.v=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.v()}};var Lo,jo=null;function Mo(t){var e="unauthorized-domain",n=void 0,r=Cn(t);t=r.b,"chrome-extension"==(r=r.f)?n=Mt("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=Mt("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",E.call(this,e,n)}function Vo(t,e,n){E.call(this,t,n),(t=e||{}).Gb&&Br(this,"email",t.Gb),t.da&&Br(this,"phoneNumber",t.da),t.credential&&Br(this,"credential",t.credential),t.Wb&&Br(this,"tenantId",t.Wb)}function Fo(t){if(t.code){var e=t.code||"";0==e.indexOf(k)&&(e=e.substring(k.length));var n={credential:Do(t),Wb:t.tenantId};if(t.email)n.Gb=t.email;else if(t.phoneNumber)n.da=t.phoneNumber;else if(!n.credential)return new E(e,t.message||void 0);return new Vo(e,n,t.message)}return null}function $o(){}function Bo(t){return t.c||(t.c=t.b())}function Wo(){}function qo(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function zo(){}function Ho(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=g(this.oc,this),this.a.onerror=g(this.Pb,this),this.a.onprogress=g(this.pc,this),this.a.ontimeout=g(this.tc,this)}function Go(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function Yo(t,e,n){this.reset(t,e,n,void 0,void 0)}function Ko(t){this.f=t,this.b=this.c=this.a=null}function Xo(t,e){this.name=t,this.value=e}w(Mo,E),w(Vo,E),Vo.prototype.v=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.v();return e&&dt(t,e),t},Vo.prototype.toJSON=function(){return this.v()},$o.prototype.c=null,w(Wo,$o),Wo.prototype.a=function(){var t=qo(this);return t?new ActiveXObject(t):new XMLHttpRequest},Wo.prototype.b=function(){var t={};return qo(this)&&(t[0]=!0,t[1]=!0),t},Lo=new Wo,w(zo,$o),zo.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new Ho;throw Error("Unsupported browser")},zo.prototype.b=function(){return{}},(t=Ho.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.oc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Go(this,4)},t.Pb=function(){this.status=500,this.response=this.responseText="",Go(this,4)},t.tc=function(){this.Pb()},t.pc=function(){this.status=200,Go(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},Yo.prototype.a=null,Yo.prototype.reset=function(t,e,n,r,i){delete this.a},Xo.prototype.toString=function(){return this.name};var Jo=new Xo("SEVERE",1e3),Zo=new Xo("WARNING",900),Qo=new Xo("CONFIG",700),ts=new Xo("FINE",500);Ko.prototype.log=function(t,e,n){if(t.value>=function t(e){return e.c?e.c:e.a?t(e.a):(R("Root logger has no level set."),null)}(this).value)for(f(e)&&(e=e()),t=new Yo(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var es={},ns=null;function rs(t){var e;if(ns||(ns=new Ko(""),es[""]=ns,ns.c=Qo),!(e=es[t])){e=new Ko(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=rs(t.substr(0,n))).b||(n.b={}),n.b[r]=e,e.a=n,es[t]=e}return e}function is(t,e){t&&t.log(ts,e,void 0)}function os(t){this.f=t}function ss(t){vn.call(this),this.s=t,this.readyState=as,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.i=new Headers,this.b=null,this.m="GET",this.g="",this.a=!1,this.h=rs("goog.net.FetchXmlHttp"),this.l=this.c=this.f=null}w(os,$o),os.prototype.a=function(){return new ss(this.f)},os.prototype.b=function(t){return function(){return t}}({}),w(ss,vn);var as=0;function us(t){t.c.read().then(t.nc.bind(t)).catch(t.Sa.bind(t))}function cs(t,e){e&&t.f&&(t.status=t.f.status,t.statusText=t.f.statusText),t.readyState=4,t.f=null,t.c=null,t.l=null,ls(t)}function ls(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function hs(t){vn.call(this),this.headers=new In,this.D=t||null,this.c=!1,this.B=this.a=null,this.h=this.P=this.l="",this.f=this.O=this.i=this.N=!1,this.g=0,this.s=null,this.m=fs,this.w=this.R=!1}(t=ss.prototype).open=function(t,e){if(this.readyState!=as)throw this.abort(),Error("Error reopening a connection");this.m=t,this.g=e,this.readyState=1,ls(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.i,method:this.m,credentials:void 0,cache:void 0};t&&(e.body=t),this.s.fetch(new Request(this.g,e)).then(this.sc.bind(this),this.Sa.bind(this))},t.abort=function(){this.response=this.responseText="",this.i=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,cs(this,!1)),this.readyState=as},t.sc=function(t){this.a&&(this.f=t,this.b||(this.b=t.headers,this.readyState=2,ls(this)),this.a&&(this.readyState=3,ls(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.qc.bind(this),this.Sa.bind(this)):void 0!==s.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.l=new TextDecoder,us(this)):t.text().then(this.rc.bind(this),this.Sa.bind(this)))))},t.nc=function(t){if(this.a){var e=this.l.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?cs(this,!0):ls(this),3==this.readyState&&us(this)}},t.rc=function(t){this.a&&(this.response=this.responseText=t,cs(this,!0))},t.qc=function(t){this.a&&(this.response=t,cs(this,!0))},t.Sa=function(t){var e=this.h;e&&e.log(Zo,"Failed to fetch url "+this.g,t instanceof Error?t:Error(t)),this.a&&cs(this,!0)},t.setRequestHeader=function(t,e){this.i.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.h)&&t.log(Zo,"Attempting to get response header but no headers have been received for url: "+this.g,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.h;return t&&t.log(Zo,"Attempting to get all response headers but no headers have been received for url: "+this.g,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},w(hs,vn);var fs="";hs.prototype.b=rs("goog.net.XhrIo");var ds=/^https?$/i,ps=["POST","PUT"];function vs(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.P=n,t.N=!1,t.c=!0,t.a=t.D?t.D.a():Lo.a(),t.B=t.D?Bo(t.D):Bo(Lo),t.a.onreadystatechange=g(t.Sb,t);try{is(t.b,Ts(t,"Opening Xhr")),t.O=!0,t.a.open(n,String(e),!0),t.O=!1}catch(e){return is(t.b,Ts(t,"Error opening Xhr: "+e.message)),void ys(t,e)}e=r||"";var o=new In(t.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(h(t)||"string"==typeof t)F(t,e,void 0);else for(var n=En(t),r=wn(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,(function(t,e){o.set(e,t)})),i=function(t){t:{for(var e=ms,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(o.X()),r=s.FormData&&e instanceof s.FormData,!q(ps,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(t,e){this.a.setRequestHeader(e,t)}),t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.R&&(t.a.withCredentials=t.R);try{ws(t),0<t.g&&(t.w=function(t){return qt&&ee(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(t.a),is(t.b,Ts(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.w)),t.w?(t.a.timeout=t.g,t.a.ontimeout=g(t.Ka,t)):t.s=bn(t.Ka,t.g,t)),is(t.b,Ts(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(e){is(t.b,Ts(t,"Send error: "+e.message)),ys(t,e)}}function ms(t){return"content-type"==t.toLowerCase()}function ys(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,gs(t),_s(t)}function gs(t){t.N||(t.N=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function bs(t){if(t.c&&void 0!==o)if(t.B[1]&&4==Es(t)&&2==Is(t))is(t.b,Ts(t,"Local request error detected and ignored"));else if(t.i&&4==Es(t))bn(t.Sb,0,t);else if(t.dispatchEvent("readystatechange"),4==Es(t)){is(t.b,Ts(t,"Request complete")),t.c=!1;try{var e,n=Is(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var a=String(t.l).match(Sn)[1]||null;if(!a&&s.self&&s.self.location){var u=s.self.location.protocol;a=u.substr(0,u.length-1)}i=!ds.test(a?a.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var c=2<Es(t)?t.a.statusText:""}catch(e){is(t.b,"Can not get status: "+e.message),c=""}t.h=c+" ["+Is(t)+"]",gs(t)}}finally{_s(t)}}}function _s(t,e){if(t.a){ws(t);var n=t.a,r=t.B[0]?c:null;t.a=null,t.B=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(e){(t=t.b)&&t.log(Jo,"Problem encountered resetting onreadystatechange: "+e.message,void 0)}}}function ws(t){t.a&&t.w&&(t.a.ontimeout=null),t.s&&(s.clearTimeout(t.s),t.s=null)}function Es(t){return t.a?t.a.readyState:0}function Is(t){try{return 2<Es(t)?t.a.status:-1}catch(t){return-1}}function Ts(t,e){return e+" ["+t.P+" "+t.l+" "+Is(t)+"]"}function ks(t){var e=Ls;this.g=[],this.w=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.u=this.B=this.i=!1,this.h=0,this.b=null,this.l=0}function Ss(t,e,n){t.a=!0,t.c=n,t.f=!e,Ns(t)}function xs(t){if(t.a){if(!t.u)throw new Ds(t);t.u=!1}}function Os(t,e,n,r){t.g.push([e,n,r]),t.a&&Ns(t)}function As(t){return W(t.g,(function(t){return f(t[1])}))}function Ns(t){if(t.h&&t.a&&As(t)){var e=t.h,n=Us[e];n&&(s.clearTimeout(n.a),delete Us[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var i=t.g.shift(),o=i[0],a=i[1];if(i=i[2],o=t.f?a:o)try{var u=o.call(i||t.s,e);void 0!==u&&(t.f=t.f&&(u==e||u instanceof Error),t.c=e=u),(A(e)||"function"==typeof s.Promise&&e instanceof s.Promise)&&(r=!0,t.i=!0)}catch(r){e=r,t.f=!0,As(t)||(n=!0)}}t.c=e,r&&(u=g(t.m,t,!0),r=g(t.m,t,!1),e instanceof ks?(Os(e,u,r),e.B=!0):e.then(u,r)),n&&(e=new Cs(e),Us[e.a]=e,t.h=e.a)}function Ds(){N.call(this)}function Rs(){N.call(this)}function Cs(t){this.a=s.setTimeout(g(this.c,this),0),this.b=t}(t=hs.prototype).Ka=function(){void 0!==o&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",is(this.b,Ts(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(is(this.b,Ts(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),_s(this))},t.Ba=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),_s(this,!0)),hs.Za.Ba.call(this)},t.Sb=function(){this.wa||(this.O||this.i||this.f?bs(this):this.Hc())},t.Hc=function(){bs(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case fs:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(Jo,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return is(this.b,"Can not get response: "+t.message),null}},ks.prototype.cancel=function(t){if(this.a)this.c instanceof ks&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,0>=e.l&&e.cancel())}this.w?this.w.call(this.s,this):this.u=!0,this.a||(t=new Rs(this),xs(this),Ss(this,!1,t))}},ks.prototype.m=function(t,e){this.i=!1,Ss(this,t,e)},ks.prototype.then=function(t,e,n){var r,i,o=new ye((function(t,e){r=t,i=e}));return Os(this,r,(function(t){t instanceof Rs?o.cancel():i(t)})),o.then(t,e,n)},ks.prototype.$goog_Thenable=!0,w(Ds,N),Ds.prototype.message="Deferred has already fired",Ds.prototype.name="AlreadyCalledError",w(Rs,N),Rs.prototype.message="Deferred was canceled",Rs.prototype.name="CanceledError",Cs.prototype.c=function(){throw delete Us[this.a],this.b};var Us={};function Ps(t){var e,n=document,r=wt(t).toString(),i=ce(document,"SCRIPT"),o={Tb:i,Ka:void 0},c=new ks(o);return e=window.setTimeout((function(){js(i,!0);var t=new Fs(Vs,"Timeout reached for loading script "+r);xs(c),Ss(c,!1,t)}),5e3),o.Ka=e,i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(js(i,!1,e),xs(c),Ss(c,!0,null))},i.onerror=function(){js(i,!0,e);var t=new Fs(Ms,"Error while loading script "+r);xs(c),Ss(c,!1,t)},dt(o={},{type:"text/javascript",charset:"UTF-8"}),ie(i,o),function(t,e){pt(t,"HTMLScriptElement"),t.src=wt(e),null===u&&(u=(e=(e=s.document).querySelector&&e.querySelector("script[nonce]"))&&(e=e.nonce||e.getAttribute("nonce"))&&a.test(e)?e:""),(e=u)&&t.setAttribute("nonce",e)}(i,t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(i),c}function Ls(){if(this&&this.Tb){var t=this.Tb;t&&"SCRIPT"==t.tagName&&js(t,!0,this.Ka)}}function js(t,e,n){null!=n&&s.clearTimeout(n),t.onload=c,t.onerror=c,t.onreadystatechange=c,e&&window.setTimeout((function(){t&&t.parentNode&&t.parentNode.removeChild(t)}),0)}var Ms=0,Vs=1;function Fs(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),N.call(this,n),this.code=t}function $s(t){this.f=t}function Bs(t,e,n){if(this.c=t,t=e||{},this.u=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=t.secureTokenTimeout||zs,this.g=ht(t.secureTokenHeaders||Hs),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.l=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.i=t.firebaseTimeout||Gs,this.a=ht(t.firebaseHeaders||Ys),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==pr(),!(n=s.XMLHttpRequest||n&&ud.INTERNAL.node&&ud.INTERNAL.node.XMLHttpRequest)&&!dr())throw new E("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,dr()?this.f=new os(self):vr()?this.f=new $s(n):this.f=new zo,this.b=null}w(Fs,N),w($s,$o),$s.prototype.a=function(){return new this.f},$s.prototype.b=function(){return{}};var Ws,qs="idToken",zs=new Ur(3e4,6e4),Hs={"Content-Type":"application/x-www-form-urlencoded"},Gs=new Ur(3e4,6e4),Ys={"Content-Type":"application/json"};function Ks(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function Xs(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function Js(t,e,n,r,i,o,a){(function(){var t=wr();return!((t=gr(t)!=yr?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t)&&(!qt||!Qt||9<Qt)})()||dr()?t=g(t.w,t):(Ws||(Ws=new ye((function(t,e){!function(t,e){if(((window.gapi||{}).client||{}).request)t();else{s[Qs]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){Os(t,null,e,void 0)}(Ps(Et(Zs,{onload:Qs})),(function(){e(Error("CORS_UNSUPPORTED"))}))}}(t,e)}))),t=g(t.s,t)),t(e,n,r,i,o,a)}Bs.prototype.S=function(){return this.b},Bs.prototype.w=function(t,e,n,r,i,o){if(dr()&&(void 0===s.fetch||void 0===s.Headers||void 0===s.Request))throw new E("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var a=new hs(this.f);if(o){a.g=Math.max(0,o);var u=setTimeout((function(){a.dispatchEvent("timeout")}),o)}mn(a,"complete",(function(){u&&clearTimeout(u);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return is(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(e){t=null}e&&e(t)})),yn(a,"ready",(function(){u&&clearTimeout(u),Ve(this)})),yn(a,"timeout",(function(){u&&clearTimeout(u),Ve(this),e&&e(null)})),vs(a,t,n,r,i)};var Zs=new vt(gt,"https://apis.google.com/js/client.js?onload=%{onload}"),Qs="__fcb"+Math.floor(1e6*Math.random()).toString();function ta(t,e,n,r,i,o,s){var a=Cn(e+n);Dn(a,"key",t.c),s&&Dn(a,"cb",_().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&Dn(a,c,i[c]);return new ye((function(e,n){Js(t,a.toString(),(function(t){t?t.error?n(Ka(t,o||{})):e(t):n(new E("network-request-failed"))}),r,u?void 0:Jn(Ar(i)),t.a,t.i.get())}))}function ea(t){if("string"!=typeof(t=t.email)||!cr.test(t))throw new E("invalid-email")}function na(t){"email"in t&&ea(t)}function ra(t){if(!t[qs]){if(t.mfaPendingCredential)throw new E("multi-factor-auth-required",null,ht(t));throw new E("internal-error")}}function ia(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new E("internal-error")}else{if(!t.sessionInfo)throw new E("missing-verification-id");if(!t.code)throw new E("missing-verification-code")}}Bs.prototype.s=function(t,e,n,r,i){var o=this;Ws.then((function(){window.gapi.client.setApiKey(o.c);var s=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(s),e&&e(t)}})})).o((function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})}))},Bs.prototype.vb=function(){return Ga(this,Pa,{})},Bs.prototype.xb=function(t,e){return Ga(this,Ca,{idToken:t,email:e})},Bs.prototype.yb=function(t,e){return Ga(this,Ua,{idToken:t,password:e})};var oa={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function sa(t){if(!t.phoneVerificationInfo)throw new E("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new E("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new E("missing-verification-code")}function aa(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new E("internal-error")}function ua(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&(Gn(t=new Wn(t.postBody),"nonce")&&(e.nonce=t.get("nonce")))),e}function ca(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Fo(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Fo(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Fo(t)):t.errorMessage&&(e=Ya(t.errorMessage)),e)throw e;ra(t)}function la(t,e){return e.returnIdpCredential=!0,Ga(t,Ma,e)}function ha(t,e){return e.returnIdpCredential=!0,Ga(t,Fa,e)}function fa(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,Ga(t,Va,e)}function da(t){if(!t.oobCode)throw new E("invalid-action-code")}(t=Bs.prototype).zb=function(t,e){var n={idToken:t},r=[];return ct(oa,(function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),Ga(this,Ca,n)},t.rb=function(t,e){return dt(t={requestType:"PASSWORD_RESET",email:t},e),Ga(this,Oa,t)},t.sb=function(t,e){return dt(t={requestType:"EMAIL_SIGNIN",email:t},e),Ga(this,ka,t)},t.qb=function(t,e){return dt(t={requestType:"VERIFY_EMAIL",idToken:t},e),Ga(this,Sa,t)},t.Ab=function(t,e,n){return dt(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),Ga(this,xa,t)},t.cb=function(t){return Ga(this,Wa,t)},t.jb=function(t,e){return Ga(this,Da,{oobCode:t,newPassword:e})},t.Pa=function(t){return Ga(this,va,{oobCode:t})},t.fb=function(t){return Ga(this,pa,{oobCode:t})};var pa={endpoint:"setAccountInfo",A:da,Y:"email",C:!0},va={endpoint:"resetPassword",A:da,G:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new E("internal-error")},C:!0},ma={endpoint:"signupNewUser",A:function(t){if(ea(t),!t.password)throw new E("weak-password")},G:ra,U:!0,C:!0},ya={endpoint:"createAuthUri",C:!0},ga={endpoint:"deleteAccount",M:["idToken"]},ba={endpoint:"setAccountInfo",M:["idToken","deleteProvider"],A:function(t){if("array"!=l(t.deleteProvider))throw new E("internal-error")}},_a={endpoint:"emailLinkSignin",M:["email","oobCode"],A:ea,G:ra,U:!0,C:!0},wa={endpoint:"emailLinkSignin",M:["idToken","email","oobCode"],A:ea,G:ra,U:!0},Ea={endpoint:"accounts/mfaEnrollment:finalize",M:["idToken","phoneVerificationInfo"],A:sa,G:ra,C:!0,La:!0},Ia={endpoint:"accounts/mfaSignIn:finalize",M:["mfaPendingCredential","phoneVerificationInfo"],A:sa,G:ra,C:!0,La:!0},Ta={endpoint:"getAccountInfo"},ka={endpoint:"getOobConfirmationCode",M:["requestType"],A:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new E("internal-error");ea(t)},Y:"email",C:!0},Sa={endpoint:"getOobConfirmationCode",M:["idToken","requestType"],A:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new E("internal-error")},Y:"email",C:!0},xa={endpoint:"getOobConfirmationCode",M:["idToken","newEmail","requestType"],A:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new E("internal-error")},Y:"email",C:!0},Oa={endpoint:"getOobConfirmationCode",M:["requestType"],A:function(t){if("PASSWORD_RESET"!=t.requestType)throw new E("internal-error");ea(t)},Y:"email",C:!0},Aa={hb:!0,endpoint:"getProjectConfig",Rb:"GET"},Na={hb:!0,endpoint:"getRecaptchaParam",Rb:"GET",G:function(t){if(!t.recaptchaSiteKey)throw new E("internal-error")}},Da={endpoint:"resetPassword",A:da,Y:"email",C:!0},Ra={endpoint:"sendVerificationCode",M:["phoneNumber","recaptchaToken"],Y:"sessionInfo",C:!0},Ca={endpoint:"setAccountInfo",M:["idToken"],A:na,U:!0},Ua={endpoint:"setAccountInfo",M:["idToken"],A:function(t){if(na(t),!t.password)throw new E("weak-password")},G:ra,U:!0},Pa={endpoint:"signupNewUser",G:ra,U:!0,C:!0},La={endpoint:"accounts/mfaEnrollment:start",M:["idToken","phoneEnrollmentInfo"],A:function(t){if(!t.phoneEnrollmentInfo)throw new E("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new E("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new E("missing-app-credential")},G:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new E("internal-error")},C:!0,La:!0},ja={endpoint:"accounts/mfaSignIn:start",M:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new E("missing-app-credential")},G:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new E("internal-error")},C:!0,La:!0},Ma={endpoint:"verifyAssertion",A:aa,Wa:ua,G:ca,U:!0,C:!0},Va={endpoint:"verifyAssertion",A:aa,Wa:ua,G:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new E("user-not-found");if(t.errorMessage)throw Ya(t.errorMessage);ra(t)},U:!0,C:!0},Fa={endpoint:"verifyAssertion",A:function(t){if(aa(t),!t.idToken)throw new E("internal-error")},Wa:ua,G:ca,U:!0},$a={endpoint:"verifyCustomToken",A:function(t){if(!t.token)throw new E("invalid-custom-token")},G:ra,U:!0,C:!0},Ba={endpoint:"verifyPassword",A:function(t){if(ea(t),!t.password)throw new E("wrong-password")},G:ra,U:!0,C:!0},Wa={endpoint:"verifyPhoneNumber",A:ia,G:ra,C:!0},qa={endpoint:"verifyPhoneNumber",A:function(t){if(!t.idToken)throw new E("internal-error");ia(t)},G:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Fo(t);ra(t)}},za={Eb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:ia,G:ra,C:!0},Ha={endpoint:"accounts/mfaEnrollment:withdraw",M:["idToken","mfaEnrollmentId"],G:function(t){if(!!t[qs]^!!t.refreshToken)throw new E("internal-error")},C:!0,La:!0};function Ga(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return!1}return!0}(n,e.M))return ke(new E("internal-error"));var r,i=!!e.La,o=e.Rb||"POST";return Te(n).then(e.A).then((function(){return e.U&&(n.returnSecureToken=!0),e.C&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),ta(t,i?t.l:t.h,e.endpoint,o,n,e.Eb,e.hb||!1)})).then((function(t){return r=t,e.Wa?e.Wa(n,r):r})).then(e.G).then((function(){if(!e.Y)return r;if(!(e.Y in r))throw new E("internal-error");return r[e.Y]}))}function Ya(t){return Ka({error:{errors:[{message:t}],code:400,message:t}})}function Ka(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new E(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",dt(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new E(r[i],e);return!e&&t&&(e=Or(t)),new E("internal-error",e)}function Xa(t){this.b=t,this.a=null,this.nb=function(t){return(tu||(tu=new ye((function(t,e){function n(){Cr(),Er("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){Cr(),e(Error("Network Error"))},timeout:Za.get()})}if(Er("gapi.iframes.Iframe"))t();else if(Er("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();s[r]=function(){Er("gapi.load")?n():e(Error("Network Error"))},Te(Ps(r=Et(Ja,{onload:r}))).o((function(){e(Error("Network Error"))}))}})).o((function(t){throw tu=null,t})))).then((function(){return new ye((function(e,n){Er("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:Er("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),Qa.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))}))}(this)}var Ja=new vt(gt,"https://apis.google.com/js/api.js?onload=%{onload}"),Za=new Ur(3e4,6e4),Qa=new Ur(5e3,15e3),tu=null;function eu(t,e,n){this.i=t,this.g=e,this.h=n,this.f=null,this.a=Un(this.i,"/__/auth/iframe"),Dn(this.a,"apiKey",this.g),Dn(this.a,"appName",this.h),this.b=null,this.c=[]}function nu(t,e,n,r,i){this.s=t,this.m=e,this.c=n,this.u=r,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function ru(t){try{return ud.app(t).auth().Ea()}catch(t){return[]}}function iu(t,e,n,r,i){this.u=t,this.f=e,this.b=n,this.c=r||null,this.h=i||null,this.m=this.s=this.w=null,this.g=[],this.l=this.a=null}function ou(t){var e=rr();return function(t){return Ga(t,Aa,{}).then((function(t){return t.authorizedDomains||[]}))}(t).then((function(t){t:{var n=Cn(e),r=n.f;n=n.b;for(var i=0;i<t.length;i++){var o=t[i],s=n,a=r;if(0==o.indexOf("chrome-extension://")?s=Cn(o).b==s&&"chrome-extension"==a:"http"!=a&&"https"!=a?s=!1:ur.test(o)?s=s==o:(o=o.split(".").join("\\."),s=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)),s){t=!0;break t}}t=!1}if(!t)throw new Mo(rr())}))}function su(t){return t.l||(t.l=lr().then((function(){if(!t.s){var e=t.c,n=t.h,r=ru(t.b),i=new eu(t.u,t.f,t.b);i.f=e,i.b=n,i.c=Y(r||[]),t.s=i.toString()}t.i=new Xa(t.s),function(t){if(!t.i)throw Error("IfcHandler must be initialized!");!function(t,e){t.nb.then((function(){t.a.register("authEvent",e,Er("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(t.i,(function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=Uo(e.authEvent),n=0;n<t.g.length;n++)r=t.g[n](e)||r;return(n={}).status=r?"ACK":"ERROR",Te(n)}return n.status="ERROR",Te(n)}))}(t)}))),t.l}function au(t){return t.m||(t.w=t.c?_r(t.c,ru(t.b)):null,t.m=new Bs(t.f,O(t.h),t.w)),t.m}function uu(t,e,n,r,i,o,s,a,u,c,l){return(t=new nu(t,e,n,r,i)).l=o,t.g=s,t.i=a,t.b=ht(u||null),t.f=c,t.ub(l).toString()}function cu(t){if(this.a=t||ud.INTERNAL.reactNative&&ud.INTERNAL.reactNative.AsyncStorage,!this.a)throw new E("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function lu(t){this.b=t,this.a={},this.f=g(this.c,this)}eu.prototype.toString=function(){return this.f?Dn(this.a,"v",this.f):Hn(this.a.a,"v"),this.b?Dn(this.a,"eid",this.b):Hn(this.a.a,"eid"),this.c.length?Dn(this.a,"fw",this.c.join(",")):Hn(this.a.a,"fw"),this.a.toString()},nu.prototype.ub=function(t){return this.h=t,this},nu.prototype.toString=function(){var t=Un(this.s,"/__/auth/handler");if(Dn(t,"apiKey",this.m),Dn(t,"appName",this.c),Dn(t,"authType",this.u),this.a.isOAuthProvider){var e=this.a;try{var n=ud.app(this.c).auth().ja()}catch(t){n=null}for(var r in e.kb=n,Dn(t,"providerId",this.a.providerId),n=Ar((e=this.a).Fb))n[r]=n[r].toString();r=e.Oc,n=ht(n);for(var i=0;i<r.length;i++){var o=r[i];o in n&&delete n[o]}e.lb&&e.kb&&!n[e.lb]&&(n[e.lb]=e.kb),lt(n)||Dn(t,"customParameters",Or(n))}if("function"==typeof this.a.Nb&&((e=this.a.Nb()).length&&Dn(t,"scopes",e.join(","))),this.l?Dn(t,"redirectUrl",this.l):Hn(t.a,"redirectUrl"),this.g?Dn(t,"eventId",this.g):Hn(t.a,"eventId"),this.i?Dn(t,"v",this.i):Hn(t.a,"v"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!Rn(t,s)&&Dn(t,s,this.b[s]);return this.h?Dn(t,"tid",this.h):Hn(t.a,"tid"),this.f?Dn(t,"eid",this.f):Hn(t.a,"eid"),(s=ru(this.c)).length&&Dn(t,"fw",s.join(",")),t.toString()},(t=iu.prototype).Lb=function(t,e,n){var r=new E("popup-closed-by-user"),i=new E("web-storage-unsupported"),o=this,s=!1;return this.ka().then((function(){(function(t){var e={type:"webStorageSupport"};return su(t).then((function(){return function(t,e){return t.nb.then((function(){return new ye((function(n){t.a.send(e.type,e,n,Er("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}(t.i,e)})).then((function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}))})(o).then((function(n){n||(t&&sr(t),e(i),s=!0)}))})).o((function(){})).then((function(){if(!s)return function(t){return new ye((function(e){return function n(){_n(2e3).then((function(){if(t&&!t.closed)return n();e()}))}()}))}(t)})).then((function(){if(!s)return _n(n).then((function(){e(r)}))}))},t.Ub=function(){var t=wr();return!xr(t)&&!Rr(t)},t.Qb=function(){return!1},t.Jb=function(t,e,n,r,i,o,s,a){if(!t)return ke(new E("popup-blocked"));if(s&&!xr())return this.ka().o((function(e){sr(t),i(e)})),r(),Te();this.a||(this.a=ou(au(this)));var u=this;return this.a.then((function(){var e=u.ka().o((function(e){throw sr(t),i(e),e}));return r(),e})).then((function(){(Ro(n),s)||ir(uu(u.u,u.f,u.b,e,n,null,o,u.c,void 0,u.h,a),t)})).o((function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t}))},t.Kb=function(t,e,n,r){this.a||(this.a=ou(au(this)));var i=this;return this.a.then((function(){Ro(e),ir(uu(i.u,i.f,i.b,t,e,rr(),n,i.c,void 0,i.h,r))})).o((function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t}))},t.ka=function(){var t=this;return su(this).then((function(){return t.i.nb})).o((function(){throw t.a=null,new E("network-request-failed")}))},t.Xb=function(){return!0},t.Ca=function(t){this.g.push(t)},t.Qa=function(t){H(this.g,(function(e){return e==t}))},(t=cu.prototype).get=function(t){return Te(this.a.getItem(t)).then((function(t){return t&&Nr(t)}))},t.set=function(t,e){return Te(this.a.setItem(t,Or(e)))},t.T=function(t){return Te(this.a.removeItem(t))},t.ba=function(){},t.ha=function(){};var hu,fu=[];function du(t,e,n){lt(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function pu(t){this.a=t}function vu(t){this.c=t,this.b=!1,this.a=[]}function mu(t,e,n,r){var i,o,s,a,u=n||{},c=null;if(t.b)return ke(Error("connection_unavailable"));var l=r?800:50,h="undefined"!=typeof MessageChannel?new MessageChannel:null;return new ye((function(n,r){h?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),h.port1.start(),s=setTimeout((function(){r(Error("unsupported_event"))}),l),c={messageChannel:h,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(s),a=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===t.data.status?(clearTimeout(a),void 0!==t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(s),clearTimeout(a),r(Error("invalid_response"))))}},t.a.push(c),h.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:u},[h.port2])):r(Error("connection_unavailable"))})).then((function(e){return yu(t,c),e})).o((function(e){throw yu(t,c),e}))}function yu(t,e){if(e){var n=e.messageChannel,r=e.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),H(t.a,(function(t){return t==e}))}}function gu(){if(!wu())throw new E("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.u=s.indexedDB,this.type="indexedDB",this.g=this.l=this.f=this.i=null,this.s=!1,this.h=null;var t=this;dr()&&self?(this.l=function(){var t=dr()?self:null;if(F(fu,(function(n){n.b==t&&(e=n)})),!e){var e=new lu(t);fu.push(e)}return e}(),du(this.l,"keyChanged",(function(e,n){return Su(t).then((function(e){return 0<e.length&&F(t.a,(function(t){t(e)})),{keyProcessed:q(e,n.key)}}))})),du(this.l,"ping",(function(){return Te(["keyChanged"])}))):function(){var t=s.navigator;return t&&t.serviceWorker?Te().then((function(){return t.serviceWorker.ready})).then((function(t){return t.active||null})).o((function(){return null})):Te(null)}().then((function(e){(t.h=e)&&(t.g=new vu(new pu(e)),mu(t.g,"ping",null,!0).then((function(e){e[0].fulfilled&&q(e[0].value,"keyChanged")&&(t.s=!0)})).o((function(){})))}))}function bu(t){return new ye((function(e,n){var r=t.u.open("firebaseLocalStorageDb",1);r.onerror=function(t){try{t.preventDefault()}catch(t){}n(Error(t.target.error))},r.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){n(t)}},r.onsuccess=function(r){(r=r.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(r):function(t){return new ye((function(e,n){var r=t.u.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}}))}(t).then((function(){return bu(t)})).then((function(t){e(t)})).o((function(t){n(t)}))}}))}function _u(t){return t.m||(t.m=bu(t)),t.m}function wu(){try{return!!s.indexedDB}catch(t){return!1}}function Eu(t){return t.objectStore("firebaseLocalStorage")}function Iu(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function Tu(t){return new ye((function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}}))}function ku(t,e){return t.g&&t.h&&function(){var t=s.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}()===t.h?mu(t.g,"keyChanged",{key:e},t.s).then((function(){})).o((function(){})):Te()}function Su(t){return _u(t).then((function(t){var e=Eu(Iu(t,!1));return e.getAll?Tu(e.getAll()):new ye((function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(t.target.error)}}))})).then((function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=function t(e,n){var r,i=[];for(r in e)r in n?typeof e[r]!=typeof n[r]?i.push(r):"object"==typeof e[r]&&null!=e[r]&&null!=n[r]?0<t(e[r],n[r]).length&&i.push(r):e[r]!==n[r]&&i.push(r):i.push(r);for(r in n)r in e||i.push(r);return i}(t.c,n),t.c=n}return r}))}function xu(t){t.i&&t.i.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function Ou(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=Te().then((function(){if(wu()){var t=Dr(),r="__sak"+t;return hu||(hu=new gu),(n=hu).set(r,t).then((function(){return n.get(r)})).then((function(e){if(e!==t)throw Error("indexedDB not supported!");return n.T(r)})).then((function(){return n})).o((function(){return e.c}))}return e.c})).then((function(t){return e.type=t.type,t.ba((function(t){F(e.a,(function(e){e(t)}))})),t}))}function Au(){this.a={},this.type="inMemory"}function Nu(){if(!function(){var t="Node"==pr();if(!(t=Du()||t&&ud.INTERNAL.node&&ud.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==pr())throw new E("internal-error","The LocalStorage compatibility library was not found.");throw new E("web-storage-unsupported")}this.a=Du()||ud.INTERNAL.node.localStorage,this.type="localStorage"}function Du(){try{var t=s.localStorage,e=Dr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Ru(){this.type="nullStorage"}function Cu(){if(!function(){var t="Node"==pr();if(!(t=Uu()||t&&ud.INTERNAL.node&&ud.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==pr())throw new E("internal-error","The SessionStorage compatibility library was not found.");throw new E("web-storage-unsupported")}this.a=Uu()||ud.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Uu(){try{var t=s.sessionStorage,e=Dr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Pu(){var t={};t.Browser=Mu,t.Node=Vu,t.ReactNative=Fu,t.Worker=$u,this.a=t[pr()]}lu.prototype.c=function(t){var e=t.data.eventType,n=t.data.eventId,r=this.a[e];if(r&&0<r.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var i=[];F(r,(function(e){i.push(Te().then((function(){return e(t.origin,t.data.data)})))})),xe(i).then((function(r){var i=[];F(r,(function(t){i.push({fulfilled:t.Mb,value:t.value,reason:t.reason?t.reason.message:void 0})})),F(i,(function(t){for(var e in t)void 0===t[e]&&delete t[e]})),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:i})}))}},pu.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},vu.prototype.close=function(){for(;0<this.a.length;)yu(this,this.a[0]);this.b=!0},(t=gu.prototype).set=function(t,e){var n,r=!1,i=this;return _u(this).then((function(e){return Tu((e=Eu(Iu(n=e,!0))).get(t))})).then((function(o){var s=Eu(Iu(n,!0));return o?(o.value=e,Tu(s.put(o))):(i.b++,r=!0,(o={}).fbase_key=t,o.value=e,Tu(s.add(o)))})).then((function(){return i.c[t]=e,ku(i,t)})).ma((function(){r&&i.b--}))},t.get=function(t){return _u(this).then((function(e){return Tu(Eu(Iu(e,!1)).get(t))})).then((function(t){return t&&t.value}))},t.T=function(t){var e=!1,n=this;return _u(this).then((function(r){return e=!0,n.b++,Tu(Eu(Iu(r,!0)).delete(t))})).then((function(){return delete n.c[t],ku(n,t)})).ma((function(){e&&n.b--}))},t.ba=function(t){0==this.a.length&&function(t){xu(t),function e(){t.f=setTimeout((function(){t.i=Su(t).then((function(e){0<e.length&&F(t.a,(function(t){t(e)}))})).then((function(){e()})).o((function(t){"STOP_EVENT"!=t.message&&e()}))}),800)}()}(this),this.a.push(t)},t.ha=function(t){H(this.a,(function(e){return e==t})),0==this.a.length&&xu(this)},(t=Ou.prototype).get=function(t){return this.b.then((function(e){return e.get(t)}))},t.set=function(t,e){return this.b.then((function(n){return n.set(t,e)}))},t.T=function(t){return this.b.then((function(e){return e.T(t)}))},t.ba=function(t){this.a.push(t)},t.ha=function(t){H(this.a,(function(e){return e==t}))},(t=Au.prototype).get=function(t){return Te(this.a[t])},t.set=function(t,e){return this.a[t]=e,Te()},t.T=function(t){return delete this.a[t],Te()},t.ba=function(){},t.ha=function(){},(t=Nu.prototype).get=function(t){var e=this;return Te().then((function(){return Nr(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return Te().then((function(){var r=Or(e);null===r?n.T(t):n.a.setItem(t,r)}))},t.T=function(t){var e=this;return Te().then((function(){e.a.removeItem(t)}))},t.ba=function(t){s.window&&nn(s.window,"storage",t)},t.ha=function(t){s.window&&sn(s.window,"storage",t)},(t=Ru.prototype).get=function(){return Te(null)},t.set=function(){return Te()},t.T=function(){return Te()},t.ba=function(){},t.ha=function(){},(t=Cu.prototype).get=function(t){var e=this;return Te().then((function(){return Nr(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return Te().then((function(){var r=Or(e);null===r?n.T(t):n.a.setItem(t,r)}))},t.T=function(t){var e=this;return Te().then((function(){e.a.removeItem(t)}))},t.ba=function(){},t.ha=function(){};var Lu,ju,Mu={F:Nu,$a:Cu},Vu={F:Nu,$a:Cu},Fu={F:cu,$a:Ru},$u={F:Nu,$a:Ru},Bu={od:"local",NONE:"none",qd:"session"};function Wu(){var t=!(Rr(wr())||!fr()),e=xr(),n=Ir();this.m=t,this.h=e,this.l=n,this.a={},Lu||(Lu=new Pu),t=Lu;try{this.g=!nr()&&jr()||!s.indexedDB?new t.a.F:new Ou(dr()?new Au:new t.a.F)}catch(t){this.g=new Au,this.h=!0}try{this.i=new t.a.$a}catch(t){this.i=new Au}this.u=new Au,this.f=g(this.Vb,this),this.b={}}function qu(){return ju||(ju=new Wu),ju}function zu(t,e){switch(e){case"session":return t.i;case"none":return t.u;default:return t.g}}function Hu(t,e){return"firebase:"+t.name+(e?":"+e:"")}function Gu(t,e,n){return n=Hu(e,n),"local"==e.F&&(t.b[n]=null),zu(t,e.F).T(n)}function Yu(t){t.c&&(clearInterval(t.c),t.c=null)}function Ku(t){this.a=t,this.b=qu()}(t=Wu.prototype).get=function(t,e){return zu(this,t.F).get(Hu(t,e))},t.set=function(t,e,n){var r=Hu(t,n),i=this,o=zu(this,t.F);return o.set(r,e).then((function(){return o.get(r)})).then((function(e){"local"==t.F&&(i.b[r]=e)}))},t.addListener=function(t,e,n){t=Hu(t,e),this.l&&(this.b[t]=s.localStorage.getItem(t)),lt(this.a)&&(zu(this,"local").ba(this.f),this.h||(nr()||!jr())&&s.indexedDB||!this.l||function(t){Yu(t),t.c=setInterval((function(){for(var e in t.a){var n=s.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new ze({type:"storage",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.Vb(n))}}),1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=Hu(t,e),this.a[t]&&(H(this.a[t],(function(t){return t==n})),0==this.a[t].length&&delete this.a[t]),lt(this.a)&&(zu(this,"local").ha(this.f),Yu(this))},t.Vb=function(t){if(t&&t.f){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=s.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.ib(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?zu(this,"local").ha(this.f):Yu(this),this.m)if(n=s.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?s.localStorage.setItem(e,r):s.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this;n=function(){void 0===t.a.a&&o.b[e]===s.localStorage.getItem(e)||(o.b[e]=s.localStorage.getItem(e),o.ib(e))},qt&&Qt&&10==Qt&&s.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else F(t,g(this.ib,this))},t.ib=function(t){this.a[t]&&F(this.a[t],(function(t){t()}))};var Xu,Ju={name:"authEvent",F:"local"};function Zu(){this.a=qu()}function Qu(t,e){this.b=tc,this.f=s.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=s.Int32Array?new Int32Array(64):Array(64),void 0===Xu&&(Xu=s.Int32Array?new Int32Array(ac):ac),this.reset()}w(Qu,(function(){this.b=-1}));for(var tc=64,ec=tc-1,nc=[],rc=0;rc<ec;rc++)nc[rc]=0;var ic=G(128,nc);function oc(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,s=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+s|0}r=0|t.a[0],i=0|t.a[1];var a=0|t.a[2],u=0|t.a[3],c=0|t.a[4],l=0|t.a[5],h=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&a^i&a)|0;s=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((s=(s=c&l^~c&h)+(0|Xu[e])|0)+(0|n[e])|0)|0,o=h,h=l,l=c,c=u+s|0,u=a,a=i,i=r,r=s+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+a|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+l|0,t.a[6]=t.a[6]+h|0,t.a[7]=t.a[7]+o|0}function sc(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"==typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(oc(t),i=0);else{if(!h(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(oc(t),i=0)}}t.c=i,t.g+=n}Qu.prototype.reset=function(){this.g=this.c=0,this.a=s.Int32Array?new Int32Array(this.h):Y(this.h)};var ac=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function uc(){Qu.call(this,8,cc)}w(uc,Qu);var cc=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function lc(t,e,n,r,i){this.u=t,this.i=e,this.l=n,this.m=r||null,this.s=i||null,this.h=e+":"+n,this.w=new Zu,this.g=new Ku(this.h),this.f=null,this.b=[],this.a=this.c=null}function hc(t){return new E("invalid-cordova-configuration",t)}function fc(t){var e=new uc;sc(e,t),t=[];var n=8*e.g;56>e.c?sc(e,ic,56-e.c):sc(e,ic,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(oc(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return function(t){return B(t,(function(t){return 1<(t=t.toString(16)).length?t:"0"+t})).join("")}(t)}function dc(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(t){}}function pc(t){return t.f||(t.f=t.ka().then((function(){return new ye((function(e){t.Ca((function n(r){return e(r),t.Qa(n),!1})),function(t){function e(e){r=!0,i&&i.cancel(),vc(t).then((function(r){var i=n;if(r&&e&&e.url){var o=null;-1!=(i=Ji(e.url)).indexOf("/__/auth/callback")&&(o=(o="object"==typeof(o=Nr(Rn(o=Cn(i),"firebaseError")||null))?I(o):null)?new Co(r.c,r.b,null,null,o,null,r.S()):new Co(r.c,r.b,i,r.f,null,null,r.S())),i=o||n}dc(t,i)}))}var n=new Co("unknown",null,null,null,new E("no-auth-event")),r=!1,i=_n(500).then((function(){return vc(t).then((function(){r||dc(t,n)}))})),o=s.handleOpenURL;s.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(Er("BuildInfo.packageName",s).toLowerCase()+"://")&&e({url:t}),"function"==typeof o)try{o(t)}catch(t){console.error(t)}},jo||(jo=new Po),function(t){var e=jo;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"==typeof(t=Er("universalLinks.subscribe",s))&&t(null,e.b))}(e)}(t)}))}))),t.f}function vc(t){var e=null;return function(t){return t.b.get(Ju,t.a).then((function(t){return Uo(t)}))}(t.g).then((function(n){return e=n,Gu((n=t.g).b,Ju,n.a)})).then((function(){return e}))}function mc(t){this.a=t,this.b=qu()}(t=lc.prototype).ka=function(){return this.Ga?this.Ga:this.Ga=(hr(void 0)?lr().then((function(){return new ye((function(t,e){var n=s.document,r=setTimeout((function(){e(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),t()}),!1)}))})):ke(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!=typeof Er("universalLinks.subscribe",s))throw hc("cordova-universal-links-plugin-fix is not installed");if(void 0===Er("BuildInfo.packageName",s))throw hc("cordova-plugin-buildinfo is not installed");if("function"!=typeof Er("cordova.plugins.browsertab.openUrl",s))throw hc("cordova-plugin-browsertab is not installed");if("function"!=typeof Er("cordova.InAppBrowser.open",s))throw hc("cordova-plugin-inappbrowser is not installed")}),(function(){throw new E("cordova-not-ready")}))},t.Lb=function(t,e){return e(new E("operation-not-supported-in-this-environment")),Te()},t.Jb=function(){return ke(new E("operation-not-supported-in-this-environment"))},t.Xb=function(){return!1},t.Ub=function(){return!0},t.Qb=function(){return!0},t.Kb=function(t,e,n,r){if(this.c)return ke(new E("redirect-operation-pending"));var i=this,o=s.document,a=null,u=null,c=null,l=null;return this.c=Te().then((function(){return Ro(e),pc(i)})).then((function(){return function(t,e,n,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),a=new Co(e,r,null,o,new E("no-auth-event"),null,i),u=Er("BuildInfo.packageName",s);if("string"!=typeof u)throw new E("invalid-cordova-configuration");var c=Er("BuildInfo.displayName",s),l={};if(wr().toLowerCase().match(/iphone|ipad|ipod/))l.ibi=u;else{if(!wr().toLowerCase().match(/android/))return ke(new E("operation-not-supported-in-this-environment"));l.apn=u}c&&(l.appDisplayName=c),o=fc(o),l.sessionId=o;var h=uu(t.u,t.i,t.l,e,n,null,r,t.m,l,t.s,i);return t.ka().then((function(){var e=t.h;return t.w.a.set(Ju,a.v(),e)})).then((function(){var e=Er("cordova.plugins.browsertab.isAvailable",s);if("function"!=typeof e)throw new E("invalid-cordova-configuration");var n=null;e((function(e){if(e){if("function"!=typeof(n=Er("cordova.plugins.browsertab.openUrl",s)))throw new E("invalid-cordova-configuration");n(h)}else{if("function"!=typeof(n=Er("cordova.InAppBrowser.open",s)))throw new E("invalid-cordova-configuration");e=wr(),t.a=n(h,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(i,t,e,n,r)})).then((function(){return new ye((function(t,e){u=function(){var e=Er("cordova.plugins.browsertab.close",s);return t(),"function"==typeof e&&e(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ca(u),c=function(){a||(a=_n(2e3).then((function(){e(new E("redirect-cancelled-by-user"))})))},l=function(){Pr()&&c()},o.addEventListener("resume",c,!1),wr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",l,!1)})).o((function(t){return vc(i).then((function(){throw t}))}))})).ma((function(){c&&o.removeEventListener("resume",c,!1),l&&o.removeEventListener("visibilitychange",l,!1),a&&a.cancel(),u&&i.Qa(u),i.c=null}))},t.Ca=function(t){this.b.push(t),pc(this).o((function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new Co("unknown",null,null,null,new E("no-auth-event")),t(e))}))},t.Qa=function(t){H(this.b,(function(e){return e==t}))};var yc={name:"pendingRedirect",F:"session"};function gc(t){return Gu(t.b,yc,t.a)}function bc(t,e,n){this.i={},this.w=0,this.D=t,this.u=e,this.m=n,this.h=[],this.f=!1,this.l=g(this.s,this),this.b=new Cc,this.B=new Mc,this.g=new mc(this.u+":"+this.m),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.B,this.c.linkViaPopup=this.B,this.c.reauthViaPopup=this.B,this.a=_c(this.D,this.u,this.m,T)}function _c(t,e,n,r){var i=ud.SDK_VERSION||null;return hr()?new lc(t,e,n,i,r):new iu(t,e,n,i,r)}function wc(t){t.f||(t.f=!0,t.a.Ca(t.l));var e=t.a;return t.a.ka().o((function(n){throw t.a==e&&t.reset(),n}))}function Ec(t){t.a.Ub()&&wc(t).o((function(e){var n=new Co("unknown",null,null,null,new E("operation-not-supported-in-this-environment"));Oc(e)&&t.s(n)})),t.a.Qb()||Uc(t.b)}function Ic(t,e){q(t.h,e)||t.h.push(e),t.f||function(t){return t.b.get(yc,t.a).then((function(t){return"pending"==t}))}(t.g).then((function(e){e?gc(t.g).then((function(){wc(t).o((function(e){var n=new Co("unknown",null,null,null,new E("operation-not-supported-in-this-environment"));Oc(e)&&t.s(n)}))})):Ec(t)})).o((function(){Ec(t)}))}function Tc(t,e){H(t.h,(function(t){return t==e}))}bc.prototype.reset=function(){this.f=!1,this.a.Qa(this.l),this.a=_c(this.D,this.u,this.m),this.i={}},bc.prototype.s=function(t){if(!t)throw new E("invalid-auth-event");if(6e5<=_()-this.w&&(this.i={},this.w=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Cb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.w=_())),e=!0;break}}return Uc(this.b),e};var kc=new Ur(2e3,1e4),Sc=new Ur(3e4,6e4);function xc(t,e,n,r,i,o,s){return t.a.Jb(e,n,r,(function(){t.f||(t.f=!0,t.a.Ca(t.l))}),(function(){t.reset()}),i,o,s)}function Oc(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function Ac(t,e,n,r,i){var o;return function(t){return t.b.set(yc,"pending",t.a)}(t.g).then((function(){return t.a.Kb(e,n,r,i).o((function(e){if(Oc(e))throw new E("operation-not-supported-in-this-environment");return o=e,gc(t.g).then((function(){throw o}))})).then((function(){return t.a.Xb()?new ye((function(){})):gc(t.g).then((function(){return t.pa()})).then((function(){})).o((function(){}))}))}))}function Nc(t,e,n,r,i){return t.a.Lb(r,(function(t){e.la(n,null,t,i)}),kc.get())}bc.prototype.pa=function(){return this.b.pa()};var Dc={};function Rc(t,e,n){var r=e+":"+n;return Dc[r]||(Dc[r]=new bc(t,e,n)),Dc[r]}function Cc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Uc(t){t.g||(t.g=!0,jc(t,!1,null,null))}function Pc(t){t.g&&!t.i&&jc(t,!1,null,null)}function Lc(t,e){if(t.b=function(){return Te(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function jc(t,e,n,r){e?r?function(t,e){if(t.b=function(){return ke(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):Lc(t,n):Lc(t,{user:null}),t.f=[],t.c=[]}function Mc(){}function Vc(){this.Bb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.Bb},set:function(t){this.Bb=t},enumerable:!1})}function Fc(t,e){this.a=e,Br(this,"verificationId",t)}function $c(t,e,n,r){return new Ao(t).cb(e,n).then((function(t){return new Fc(t,r)}))}function Bc(t){var e=ji(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new E("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Wr(this,{token:t,expirationTime:Lr(1e3*e.exp),authTime:Lr(1e3*e.auth_time),issuedAtTime:Lr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function Wc(t,e,n){var r=e&&e[zc];if(!r)throw new E("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=ht(e),this.g=n,this.c=new Zi(null,r),this.b=[];var i=this;F(e[qc]||[],(function(t){(t=Gr(t))&&i.b.push(t)})),Br(this,"auth",this.a),Br(this,"session",this.c),Br(this,"hints",this.b)}Cc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Cc.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(jc(this,!0,null,t.a),Te()):e.Da(n,r)?function(t,e,n){n=n.Da(e.c,e.b);var r=e.g,i=e.f,o=e.i,s=e.S(),a=!!e.c.match(/Redirect$/);n(r,i,s,o).then((function(e){jc(t,a,e,null)})).o((function(e){jc(t,a,null,e)}))}(this,t,e):ke(new E("invalid-auth-event")):(jc(this,!1,null,null),Te())}else ke(new E("invalid-auth-event"))},Cc.prototype.pa=function(){var t=this;return new ye((function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new E("timeout");t.a&&t.a.cancel(),t.a=_n(Sc.get()).then((function(){t.b||(t.g=!0,jc(t,!0,null,e))}))}(t))}))},Mc.prototype.h=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.la(t.c,null,t.a,t.b),Te()):e.Da(n,r)?function(t,e){var n=t.b,r=t.c;e.Da(r,n)(t.g,t.f,t.S(),t.i).then((function(t){e.la(r,t,null,n)})).o((function(t){e.la(r,null,t,n)}))}(t,e):ke(new E("invalid-auth-event"))}else ke(new E("invalid-auth-event"))},Fc.prototype.confirm=function(t){return t=No(this.verificationId,t),this.a(t)};var qc="mfaInfo",zc="mfaPendingCredential";function Hc(t,e,n,r){E.call(this,"multi-factor-auth-required",r,e),this.b=new Wc(t,e,n),Br(this,"resolver",this.b)}function Gc(t,e,n){if(t&&d(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new Hc(e,t.serverResponse,n,t.message)}catch(t){}return null}function Yc(){}function Kc(t){Br(this,"factorId",t.ea),this.a=t}function Xc(t){if(Kc.call(this,t),this.a.ea!=Ao.PROVIDER_ID)throw new E("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function Jc(t,e){for(var n in qe.call(this,t),e)this[n]=e[n]}function Zc(t,e){this.a=t,this.b=[],this.c=g(this.wc,this),nn(this.a,"userReloaded",this.c);var n=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&F(e.multiFactor.enrolledFactors,(function(t){var e=null,r={};if(t){t.uid&&(r[Xr]=t.uid),t.displayName&&(r[Yr]=t.displayName),t.enrollmentTime&&(r[Kr]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(r[Jr]=t.phoneNumber);try{e=new Zr(r)}catch(t){}t=e}else t=null;t&&n.push(t)})),Qc(this,n)}function Qc(t,e){t.b=e,Br(t,"enrolledFactors",e)}function tl(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function el(t){this.c=t,this.b=this.a=null}function nl(t){return t.b&&1e3*t.b.c||0}function rl(t,e){var n=e.refreshToken;t.b=Li(e[qs]||""),t.a=n}function il(t,e){return function(t,e){return new ye((function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?Js(t,t.u+"?key="+encodeURIComponent(t.c),(function(t){t?t.error?r(Ka(t)):t.access_token&&t.refresh_token?n(t):r(new E("internal-error")):r(new E("network-request-failed"))}),"POST",zn(e).toString(),t.g,t.m.get()):r(new E("internal-error"))}))}(t.c,e).then((function(e){return t.b=Li(e.access_token),t.a=e.refresh_token,{accessToken:t.b.toString(),refreshToken:t.a}})).o((function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e}))}function ol(t,e){this.a=t||null,this.b=e||null,Wr(this,{lastSignInTime:Lr(e||null),creationTime:Lr(t||null)})}function sl(t,e,n,r,i,o){Wr(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function al(t,e,n){this.N=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null,t=ud.SDK_VERSION?_r(ud.SDK_VERSION):null,this.a=new Bs(this.l,O(T),t),this.b=new el(this.a),pl(this,e[qs]),rl(this.b,e),Br(this,"refreshToken",this.b.a),yl(this,n||{}),vn.call(this),this.P=!1,this.s&&Tr()&&(this.i=Rc(this.s,this.l,this.m)),this.R=[],this.h=null,this.B=function(t){return new tl((function(){return t.I(!0)}),(function(t){return!(!t||"auth/network-request-failed"!=t.code)}),(function(){var e=nl(t.b)-_()-3e5;return 0<e?e:0}))}(this),this.Z=g(this.Ma,this);var r=this;this.oa=null,this.za=function(t){r.va(t.g)},this.aa=null,this.W=[],this.ya=function(t){cl(r,t.c)},this.$=null,this.O=new Zc(this,n),Br(this,"multiFactor",this.O)}function ul(t,e){t.aa&&sn(t.aa,"languageCodeChanged",t.za),(t.aa=e)&&nn(e,"languageCodeChanged",t.za)}function cl(t,e){t.W=e,Xs(t.a,ud.SDK_VERSION?_r(ud.SDK_VERSION,t.W):null)}function ll(t,e){t.$&&sn(t.$,"frameworkChanged",t.ya),(t.$=e)&&nn(e,"frameworkChanged",t.ya)}function hl(t){try{return ud.app(t.m).auth()}catch(e){throw new E("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.m+"'!")}}function fl(t){t.D||t.B.b||(t.B.start(),sn(t,"tokenChanged",t.Z),nn(t,"tokenChanged",t.Z))}function dl(t){sn(t,"tokenChanged",t.Z),t.B.stop()}function pl(t,e){t.xa=e,Br(t,"_lat",e)}function vl(t){for(var e=[],n=0;n<t.R.length;n++)e.push(t.R[n](t));return xe(e).then((function(){return t}))}function ml(t){t.i&&!t.P&&(t.P=!0,Ic(t.i,t))}function yl(t,e){Wr(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new ol(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function gl(){}function bl(t){return Te().then((function(){if(t.D)throw new E("app-deleted")}))}function _l(t){return B(t.providerData,(function(t){return t.providerId}))}function wl(t,e){e&&(El(t,e.providerId),t.providerData.push(e))}function El(t,e){H(t.providerData,(function(t){return t.providerId==e}))}function Il(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Br(t,e,n)}function Tl(t,e){t!=e&&(Wr(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),e.metadata?Br(t,"metadata",function(t){return new ol(t.a,t.b)}(e.metadata)):Br(t,"metadata",new ol),F(e.providerData,(function(e){wl(t,e)})),function(t,e){t.b=e.b,t.a=e.a}(t.b,e.b),Br(t,"refreshToken",t.b.a),Qc(t.O,e.O.b))}function kl(t){return t.I().then((function(e){var n=t.isAnonymous;return function(t,e){return Ga(t.a,Ta,{idToken:e}).then(g(t.Ic,t))}(t,e).then((function(){return n||Il(t,"isAnonymous",!1),e}))}))}function Sl(t,e){e[qs]&&t.xa!=e[qs]&&(rl(t.b,e),t.dispatchEvent(new Jc("tokenChanged")),pl(t,e[qs]),Il(t,"refreshToken",t.b.a))}function xl(t,e){return kl(t).then((function(){if(q(_l(t),e))return vl(t).then((function(){throw new E("provider-already-linked")}))}))}function Ol(t,e,n){return qr({user:t,credential:Do(e),additionalUserInfo:e=Bi(e),operationType:n})}function Al(t,e){return Sl(t,e),t.reload().then((function(){return t}))}function Nl(t,e,n,r,i){if(!Tr())return ke(new E("operation-not-supported-in-this-environment"));if(t.h&&!i)return ke(t.h);var o=$i(n.providerId),s=Dr(t.uid+":::"),a=null;(!xr()||fr())&&t.s&&n.isOAuthProvider&&(a=uu(t.s,t.l,t.m,e,n,null,s,ud.SDK_VERSION||null,null,null,t.tenantId));var u=ar(a,o&&o.ta,o&&o.sa);return r=r().then((function(){if(Rl(t),!i)return t.I().then((function(){}))})).then((function(){return xc(t.i,u,e,n,s,!!a,t.tenantId)})).then((function(){return new ye((function(n,r){t.la(e,null,new E("cancelled-popup-request"),t.g||null),t.f=n,t.w=r,t.g=s,t.c=Nc(t.i,t,e,u,s)}))})).then((function(t){return u&&sr(u),t?qr(t):null})).o((function(t){throw u&&sr(u),t})),Cl(t,r,i)}function Dl(t,e,n,r,i){if(!Tr())return ke(new E("operation-not-supported-in-this-environment"));if(t.h&&!i)return ke(t.h);var o=null,s=Dr(t.uid+":::");return r=r().then((function(){if(Rl(t),!i)return t.I().then((function(){}))})).then((function(){return t.fa=s,vl(t)})).then((function(e){return t.ga&&(e=(e=t.ga).b.set(Ll,t.v(),e.a)),e})).then((function(){return Ac(t.i,e,n,s,t.tenantId)})).o((function(e){if(o=e,t.ga)return jl(t.ga);throw o})).then((function(){if(o)throw o})),Cl(t,r,i)}function Rl(t){if(!t.i||!t.P){if(t.i&&!t.P)throw new E("internal-error");throw new E("auth-domain-config-required")}}function Cl(t,e,n){var r=function(t,e,n){return t.h&&!n?(e.cancel(),ke(t.h)):e.o((function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.h||t.dispatchEvent(new Jc("userInvalidated")),t.h=e),e}))}(t,e,n);return t.N.push(r),r.ma((function(){z(t.N,r)})),r.o((function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=Gc(e.v(),hl(t),g(t.hc,t))),n||e}))}function Ul(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[qs]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=new al(e,n,t);return t.providerData&&F(t.providerData,(function(t){t&&wl(r,qr(t))})),t.redirectEventId&&(r.fa=t.redirectEventId),r}function Pl(t){this.a=t,this.b=qu()}Wc.prototype.Pc=function(t){var e=this;return t.ob(this.a.b,this.c).then((function(t){var n=ht(e.f);return delete n[qc],delete n[zc],dt(n,t),e.g(n)}))},w(Hc,E),Yc.prototype.ob=function(t,e,n){return e.type==Qi?function(t,e,n,r){return n.Fa().then((function(n){return n={idToken:n},void 0!==r&&(n.displayName=r),dt(n,{phoneVerificationInfo:Oo(t.a)}),Ga(e,Ea,n)}))}(this,t,e,n):function(t,e,n){return n.Fa().then((function(n){return dt(n={mfaPendingCredential:n},{phoneVerificationInfo:Oo(t.a)}),Ga(e,Ia,n)}))}(this,t,e)},w(Kc,Yc),w(Xc,Kc),w(Jc,qe),(t=Zc.prototype).wc=function(t){Qc(this,function(t){var e=[];return F(t.mfaInfo||[],(function(t){(t=Gr(t))&&e.push(t)})),e}(t.ed))},t.Ob=function(){return this.a.I().then((function(t){return new Zi(t,null)}))},t.dc=function(t,e){var n=this,r=this.a.a;return this.Ob().then((function(n){return t.ob(r,n,e)})).then((function(t){return Sl(n.a,t),n.a.reload()}))},t.$c=function(t){var e=this,n="string"==typeof t?t:t.uid,r=this.a.a;return this.a.I().then((function(t){return Ga(r,Ha,{idToken:t,mfaEnrollmentId:n})})).then((function(t){var r=$(e.b,(function(t){return t.uid!=n}));return Qc(e,r),Sl(e.a,t),e.a.reload().o((function(t){if("auth/user-token-expired"!=t.code)throw t}))}))},t.v=function(){return{multiFactor:{enrolledFactors:B(this.b,(function(t){return t.v()}))}}},tl.prototype.start=function(){this.a=this.c,function t(e,n){e.stop(),e.b=_n(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(e,n)).then((function(){return function(){var t=s.document,e=null;return Pr()||!t?Te():new ye((function(n){e=function(){Pr()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)})).o((function(n){throw t.removeEventListener("visibilitychange",e,!1),n}))}()})).then((function(){return e.h()})).then((function(){t(e,!0)})).o((function(n){e.i(n)&&t(e,!1)}))}(this,!0)},tl.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},el.prototype.v=function(){return{apiKey:this.c.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:nl(this)}},el.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?ke(new E("user-token-expired")):t||!this.b||_()>nl(this)-3e4?this.a?il(this,{grant_type:"refresh_token",refresh_token:this.a}):Te(null):Te({accessToken:this.b.toString(),refreshToken:this.a})},ol.prototype.v=function(){return{lastLoginAt:this.b,createdAt:this.a}},w(al,vn),al.prototype.va=function(t){this.oa=t,Ks(this.a,t)},al.prototype.ja=function(){return this.oa},al.prototype.Ea=function(){return Y(this.W)},al.prototype.Ma=function(){this.B.b&&(this.B.stop(),this.B.start())},Br(al.prototype,"providerId","firebase"),(t=al.prototype).reload=function(){var t=this;return Cl(this,bl(this).then((function(){return kl(t).then((function(){return vl(t)})).then(gl)})))},t.mc=function(t){return this.I(t).then((function(t){return new Bc(t)}))},t.I=function(t){var e=this;return Cl(this,bl(this).then((function(){return e.b.getToken(t)})).then((function(t){if(!t)throw new E("internal-error");return t.accessToken!=e.xa&&(pl(e,t.accessToken),e.dispatchEvent(new Jc("tokenChanged"))),Il(e,"refreshToken",t.refreshToken),t.accessToken})))},t.Ic=function(t){if(!(t=t.users)||!t.length)throw new E("internal-error");yl(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?B(t,(function(t){return new sl(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)})):[]}(t),n=0;n<e.length;n++)wl(this,e[n]);Il(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new Jc("userReloaded",{ed:t}))},t.Jc=function(t){return Fr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.pb(t)},t.pb=function(t){var e=this,n=null;return Cl(this,t.c(this.a,this.uid).then((function(t){return Sl(e,t),n=Ol(e,t,"reauthenticate"),e.h=null,e.reload()})).then((function(){return n})),!0)},t.Ac=function(t){return Fr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.mb(t)},t.mb=function(t){var e=this,n=null;return Cl(this,xl(this,t.providerId).then((function(){return e.I()})).then((function(n){return t.b(e.a,n)})).then((function(t){return n=Ol(e,t,"link"),Al(e,t)})).then((function(){return n})))},t.Bc=function(t,e){var n=this;return Cl(this,xl(this,"phone").then((function(){return $c(hl(n),t,e,g(n.mb,n))})))},t.Kc=function(t,e){var n=this;return Cl(this,Te().then((function(){return $c(hl(n),t,e,g(n.pb,n))})),!0)},t.xb=function(t){var e=this;return Cl(this,this.I().then((function(n){return e.a.xb(n,t)})).then((function(t){return Sl(e,t),e.reload()})))},t.cd=function(t){var e=this;return Cl(this,this.I().then((function(n){return t.b(e.a,n)})).then((function(t){return Sl(e,t),e.reload()})))},t.yb=function(t){var e=this;return Cl(this,this.I().then((function(n){return e.a.yb(n,t)})).then((function(t){return Sl(e,t),e.reload()})))},t.zb=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return bl(this);var e=this;return Cl(this,this.I().then((function(n){return e.a.zb(n,{displayName:t.displayName,photoUrl:t.photoURL})})).then((function(t){return Sl(e,t),Il(e,"displayName",t.displayName||null),Il(e,"photoURL",t.photoUrl||null),F(e.providerData,(function(t){"password"===t.providerId&&(Br(t,"displayName",e.displayName),Br(t,"photoURL",e.photoURL))})),vl(e)})).then(gl))},t.ad=function(t){var e=this;return Cl(this,kl(this).then((function(n){return q(_l(e),t)?function(t,e,n){return Ga(t,ba,{idToken:e,deleteProvider:n})}(e.a,n,[t]).then((function(t){var n={};return F(t.providerUserInfo||[],(function(t){n[t.providerId]=!0})),F(_l(e),(function(t){n[t]||El(e,t)})),n[Ao.PROVIDER_ID]||Br(e,"phoneNumber",null),vl(e)})):vl(e).then((function(){throw new E("no-such-provider")}))})))},t.delete=function(){var t=this;return Cl(this,this.I().then((function(e){return Ga(t.a,ga,{idToken:e})})).then((function(){t.dispatchEvent(new Jc("userDeleted"))}))).then((function(){for(var e=0;e<t.N.length;e++)t.N[e].cancel("app-deleted");ul(t,null),ll(t,null),t.N=[],t.D=!0,dl(t),Br(t,"refreshToken",null),t.i&&Tc(t.i,t)}))},t.Cb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.fa||null)==e||"reauthViaRedirect"==t&&(this.fa||null)==e)},t.la=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.w?this.w(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.w)},t.Da=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?g(this.Hb,this):"reauthViaPopup"==t&&e==(this.g||null)?g(this.Ib,this):"linkViaRedirect"==t&&(this.fa||null)==e?g(this.Hb,this):"reauthViaRedirect"==t&&(this.fa||null)==e?g(this.Ib,this):null},t.Cc=function(t){var e=this;return Nl(this,"linkViaPopup",t,(function(){return xl(e,t.providerId).then((function(){return vl(e)}))}),!1)},t.Lc=function(t){return Nl(this,"reauthViaPopup",t,(function(){return Te()}),!0)},t.Dc=function(t){var e=this;return Dl(this,"linkViaRedirect",t,(function(){return xl(e,t.providerId)}),!1)},t.Mc=function(t){return Dl(this,"reauthViaRedirect",t,(function(){return Te()}),!0)},t.Hb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Cl(this,this.I().then((function(n){return ha(i.a,{requestUri:t,postBody:r,sessionId:e,idToken:n})})).then((function(t){return o=Ol(i,t,"link"),Al(i,t)})).then((function(){return o})))},t.Ib=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Cl(this,Te().then((function(){return no(fa(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)})).then((function(t){return o=Ol(i,t,"reauthenticate"),Sl(i,t),i.h=null,i.reload()})).then((function(){return o})),!0)},t.qb=function(t){var e=this,n=null;return Cl(this,this.I().then((function(e){return n=e,void 0===t||lt(t)?{}:Ri(new Ei(t))})).then((function(t){return e.a.qb(n,t)})).then((function(t){if(e.email!=t)return e.reload()})).then((function(){})))},t.Ab=function(t,e){var n=this,r=null;return Cl(this,this.I().then((function(t){return r=t,void 0===e||lt(e)?{}:Ri(new Ei(e))})).then((function(e){return n.a.Ab(r,t,e)})).then((function(t){if(n.email!=t)return n.reload()})).then((function(){})))},t.hc=function(t){var e=null,n=this;return Cl(this,t=no(Te(t),n.uid).then((function(t){return e=Ol(n,t,"reauthenticate"),Sl(n,t),n.h=null,n.reload()})).then((function(){return e})),!0)},t.toJSON=function(){return this.v()},t.v=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.b.v(),redirectEventId:this.fa||null};return this.metadata&&dt(t,this.metadata.v()),F(this.providerData,(function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))})),dt(t,this.O.v()),t};var Ll={name:"redirectUser",F:"session"};function jl(t){return Gu(t.b,Ll,t.a)}function Ml(t){this.a=t,this.b=qu(),this.c=null,this.f=function(t){var e=$l("local"),n=$l("session"),r=$l("none");return function(t,e,n){var r=Hu(e,n),i=zu(t,e.F);return t.get(e,n).then((function(o){var a=null;try{a=Nr(s.localStorage.getItem(r))}catch(t){}if(a&&!o)return s.localStorage.removeItem(r),t.set(e,a,n);a&&o&&"localStorage"!=i.type&&s.localStorage.removeItem(r)}))}(t.b,e,t.a).then((function(){return t.b.get(n,t.a)})).then((function(i){return i?n:t.b.get(r,t.a).then((function(n){return n?r:t.b.get(e,t.a).then((function(n){return n?e:t.b.get(Fl,t.a).then((function(t){return t?$l(t):e}))}))}))})).then((function(e){return t.c=e,Vl(t,e.F)})).o((function(){t.c||(t.c=e)}))}(this),this.b.addListener($l("local"),this.a,g(this.g,this))}function Vl(t,e){var n,r=[];for(n in Bu)Bu[n]!==e&&r.push(Gu(t.b,$l(Bu[n]),t.a));return r.push(Gu(t.b,Fl,t.a)),function(t){return new ye((function(e,n){var r=t.length,i=[];if(r)for(var o=function(t,n){r--,i[t]=n,0==r&&e(i)},s=function(t){n(t)},a=0;a<t.length;a++)Se(t[a],b(o,a),s);else e(i)}))}(r)}Ml.prototype.g=function(){var t=this,e=$l("local");zl(this,(function(){return Te().then((function(){return t.c&&"local"!=t.c.F?t.b.get(e,t.a):null})).then((function(n){if(n)return Vl(t,"local").then((function(){t.c=e}))}))}))};var Fl={name:"persistence",F:"session"};function $l(t){return{name:"authUser",F:t}}function Bl(t,e){return zl(t,(function(){return t.b.set(t.c,e.v(),t.a)}))}function Wl(t){return zl(t,(function(){return Gu(t.b,t.c,t.a)}))}function ql(t,e){return zl(t,(function(){return t.b.get(t.c,t.a).then((function(t){return t&&e&&(t.authDomain=e),Ul(t||{})}))}))}function zl(t,e){return t.f=t.f.then(e,e),t.f}function Hl(t){if(this.l=!1,Br(this,"settings",new Vc),Br(this,"app",t),!th(this).options||!th(this).options.apiKey)throw new E("invalid-api-key");t=ud.SDK_VERSION?_r(ud.SDK_VERSION):null,this.b=new Bs(th(this).options&&th(this).options.apiKey,O(T),t),this.P=[],this.m=[],this.O=[],this.$b=ud.INTERNAL.createSubscribe(g(this.xc,this)),this.W=void 0,this.ac=ud.INTERNAL.createSubscribe(g(this.yc,this)),Zl(this,null),this.i=new Ml(th(this).options.apiKey+":"+th(this).name),this.B=new Pl(th(this).options.apiKey+":"+th(this).name),this.Z=ih(this,function(t){var e=th(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get(Ll,t.a).then((function(t){return t&&e&&(t.authDomain=e),Ul(t||{})}))}(t.B,th(t).options.authDomain).then((function(e){return(t.D=e)&&(e.ga=t.B),jl(t.B)}));return ih(t,e)}(t).then((function(){return ql(t.i,e)})).then((function(e){return e?(e.ga=t.B,t.D&&(t.D.fa||null)==(e.fa||null)?e:e.reload().then((function(){return Bl(t.i,e).then((function(){return e}))})).o((function(n){return"auth/network-request-failed"==n.code?e:Wl(t.i)}))):null})).then((function(e){Zl(t,e||null)}));return ih(t,n)}(this)),this.h=ih(this,function(t){return t.Z.then((function(){return Xl(t)})).o((function(){})).then((function(){if(!t.l)return t.oa()})).o((function(){})).then((function(){if(!t.l){t.aa=!0;var e=t.i;e.b.addListener($l("local"),e.a,t.oa)}}))}(this)),this.aa=!1,this.oa=g(this.Xc,this),this.Ma=g(this.ca,this),this.xa=g(this.jc,this),this.ya=g(this.uc,this),this.za=g(this.vc,this),this.a=null,function(t){var e=th(t).options.authDomain,n=th(t).options.apiKey;e&&Tr()&&(t.Zb=t.Z.then((function(){if(!t.l){if(t.a=Rc(e,n,th(t).name),Ic(t.a,t),eh(t)&&ml(eh(t)),t.D){ml(t.D);var r=t.D;r.va(t.ja()),ul(r,t),cl(r=t.D,t.N),ll(r,t),t.D=null}return t.a}})))}(this),this.INTERNAL={},this.INTERNAL.delete=g(this.delete,this),this.INTERNAL.logFramework=g(this.Ec,this),this.s=0,vn.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.ja()},set:function(t){this.va(t)},enumerable:!1}),t.$=null,Object.defineProperty(t,"ti",{get:function(){return this.S()},set:function(t){this.ub(t)},enumerable:!1}),t.R=null}(this),this.N=[]}function Gl(t){qe.call(this,"languageCodeChanged"),this.g=t}function Yl(t){qe.call(this,"frameworkChanged"),this.c=t}function Kl(t){return t.Zb||ke(new E("auth-domain-config-required"))}function Xl(t){if(!Tr())return ke(new E("operation-not-supported-in-this-environment"));var e=Kl(t).then((function(){return t.a.pa()})).then((function(t){return t?qr(t):null}));return ih(t,e)}function Jl(t,e){var n={};return n.apiKey=th(t).options.apiKey,n.authDomain=th(t).options.authDomain,n.appName=th(t).name,t.Z.then((function(){return function(t,e,n,r){var i=new al(t,e);return n&&(i.ga=n),r&&cl(i,r),i.reload().then((function(){return i}))}(n,e,t.B,t.Ea())})).then((function(e){return eh(t)&&e.uid==eh(t).uid?(Tl(eh(t),e),t.ca(e)):(Zl(t,e),ml(e),t.ca(e))})).then((function(){rh(t)}))}function Zl(t,e){eh(t)&&(function(t,e){H(t.R,(function(t){return t==e}))}(eh(t),t.Ma),sn(eh(t),"tokenChanged",t.xa),sn(eh(t),"userDeleted",t.ya),sn(eh(t),"userInvalidated",t.za),dl(eh(t))),e&&(e.R.push(t.Ma),nn(e,"tokenChanged",t.xa),nn(e,"userDeleted",t.ya),nn(e,"userInvalidated",t.za),0<t.s&&fl(e)),Br(t,"currentUser",e),e&&(e.va(t.ja()),ul(e,t),cl(e,t.N),ll(e,t))}function Ql(t,e){var n=null,r=null;return ih(t,e.then((function(e){return n=Do(e),r=Bi(e),Jl(t,e)}),(function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=Gc(e.v(),t,g(t.ic,t))),n||e})).then((function(){return qr({user:eh(t),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function th(t){return t.app}function eh(t){return t.currentUser}function nh(t){return eh(t)&&eh(t)._lat||null}function rh(t){if(t.aa){for(var e=0;e<t.m.length;e++)t.m[e]&&t.m[e](nh(t));if(t.W!==t.getUid()&&t.O.length)for(t.W=t.getUid(),e=0;e<t.O.length;e++)t.O[e]&&t.O[e](nh(t))}}function ih(t,e){return t.P.push(e),e.ma((function(){z(t.P,e)})),e}function oh(){}function sh(){this.a={},this.b=1e12}Ml.prototype.tb=function(t){var e=null,n=this;return function(t){var e=new E("invalid-persistence-type"),n=new E("unsupported-persistence-type");t:{for(r in Bu)if(Bu[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(pr()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!wu()&&"none"!==t)throw n;break;default:if(!Ir()&&"none"!==t)throw n}}(t),zl(this,(function(){return t!=n.c.F?n.b.get(n.c,n.a).then((function(r){return e=r,Vl(n,t)})).then((function(){if(n.c=$l(t),e)return n.b.set(n.c,e,n.a)})):Te()}))},w(Hl,vn),w(Gl,qe),w(Yl,qe),(t=Hl.prototype).tb=function(t){return ih(this,t=this.i.tb(t))},t.va=function(t){this.$===t||this.l||(this.$=t,Ks(this.b,this.$),this.dispatchEvent(new Gl(this.ja())))},t.ja=function(){return this.$},t.dd=function(){var t=s.navigator;this.va(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.Ec=function(t){this.N.push(t),Xs(this.b,ud.SDK_VERSION?_r(ud.SDK_VERSION,this.N):null),this.dispatchEvent(new Yl(this.N))},t.Ea=function(){return Y(this.N)},t.ub=function(t){this.R===t||this.l||(this.R=t,this.b.b=this.R)},t.S=function(){return this.R},t.toJSON=function(){return{apiKey:th(this).options.apiKey,authDomain:th(this).options.authDomain,appName:th(this).name,currentUser:eh(this)&&eh(this).v()}},t.Cb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.la=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.w?this.w(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.w)},t.Da=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?g(this.gc,this):null},t.gc=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.Z.then((function(){return Ql(i,la(i.b,o))}))},t.Vc=function(t){if(!Tr())return ke(new E("operation-not-supported-in-this-environment"));var e=this,n=$i(t.providerId),r=Dr(),i=null;(!xr()||fr())&&th(this).options.authDomain&&t.isOAuthProvider&&(i=uu(th(this).options.authDomain,th(this).options.apiKey,th(this).name,"signInViaPopup",t,null,r,ud.SDK_VERSION||null,null,null,this.S()));var o=ar(i,n&&n.ta,n&&n.sa);return ih(this,n=Kl(this).then((function(n){return xc(n,o,"signInViaPopup",t,r,!!i,e.S())})).then((function(){return new ye((function(t,n){e.la("signInViaPopup",null,new E("cancelled-popup-request"),e.g),e.f=t,e.w=n,e.g=r,e.c=Nc(e.a,e,"signInViaPopup",o,r)}))})).then((function(t){return o&&sr(o),t?qr(t):null})).o((function(t){throw o&&sr(o),t})))},t.Wc=function(t){if(!Tr())return ke(new E("operation-not-supported-in-this-environment"));var e=this;return ih(this,Kl(this).then((function(){return function(t){return zl(t,(function(){return t.b.set(Fl,t.c.F,t.a)}))}(e.i)})).then((function(){return Ac(e.a,"signInViaRedirect",t,void 0,e.S())})))},t.pa=function(){var t=this;return Xl(this).then((function(e){return t.a&&Pc(t.a.b),e})).o((function(e){throw t.a&&Pc(t.a.b),e}))},t.bd=function(t){if(!t)return ke(new E("null-user"));if(this.R!=t.tenantId)return ke(new E("tenant-id-mismatch"));var e=this,n={};n.apiKey=th(this).options.apiKey,n.authDomain=th(this).options.authDomain,n.appName=th(this).name;var r=function(t,e,n,r){var i=t.b,o={};return o[qs]=i.b&&i.b.toString(),o.refreshToken=i.a,e=new al(e||{apiKey:t.l,authDomain:t.s,appName:t.m},o),n&&(e.ga=n),r&&cl(e,r),Tl(e,t),e}(t,n,e.B,e.Ea());return ih(this,this.h.then((function(){if(th(e).options.apiKey!=t.l)return r.reload()})).then((function(){return eh(e)&&t.uid==eh(e).uid?(Tl(eh(e),t),e.ca(t)):(Zl(e,r),ml(r),e.ca(r))})).then((function(){rh(e)})))},t.wb=function(){var t=this;return ih(this,this.h.then((function(){return t.a&&Pc(t.a.b),eh(t)?(Zl(t,null),Wl(t.i).then((function(){rh(t)}))):Te()})))},t.Xc=function(){var t=this;return ql(this.i,th(this).options.authDomain).then((function(e){if(!t.l){var n;if(n=eh(t)&&e){n=eh(t).uid;var r=e.uid;n=null!=n&&""!==n&&null!=r&&""!==r&&n==r}if(n)return Tl(eh(t),e),eh(t).I();(eh(t)||e)&&(Zl(t,e),e&&(ml(e),e.ga=t.B),t.a&&Ic(t.a,t),rh(t))}}))},t.ca=function(t){return Bl(this.i,t)},t.jc=function(){rh(this),this.ca(eh(this))},t.uc=function(){this.wb()},t.vc=function(){this.wb()},t.ic=function(t){var e=this;return this.h.then((function(){return Ql(e,Te(t))}))},t.xc=function(t){var e=this;this.addAuthTokenListener((function(){t.next(eh(e))}))},t.yc=function(t){var e=this;!function(t,e){t.O.push(e),ih(t,t.h.then((function(){!t.l&&q(t.O,e)&&t.W!==t.getUid()&&(t.W=t.getUid(),e(nh(t)))})))}(this,(function(){t.next(eh(e))}))},t.Gc=function(t,e,n){var r=this;return this.aa&&Promise.resolve().then((function(){f(t)?t(eh(r)):f(t.next)&&t.next(eh(r))})),this.$b(t,e,n)},t.Fc=function(t,e,n){var r=this;return this.aa&&Promise.resolve().then((function(){r.W=r.getUid(),f(t)?t(eh(r)):f(t.next)&&t.next(eh(r))})),this.ac(t,e,n)},t.kc=function(t){var e=this;return ih(this,this.h.then((function(){return eh(e)?eh(e).I(t).then((function(t){return{accessToken:t}})):null})))},t.Rc=function(t){var e=this;return this.h.then((function(){return Ql(e,Ga(e.b,$a,{token:t}))})).then((function(t){var n=t.user;return Il(n,"isAnonymous",!1),e.ca(n),t}))},t.Sc=function(t,e){var n=this;return this.h.then((function(){return Ql(n,Ga(n.b,Ba,{email:t,password:e}))}))},t.cc=function(t,e){var n=this;return this.h.then((function(){return Ql(n,Ga(n.b,ma,{email:t,password:e}))}))},t.Ya=function(t){var e=this;return this.h.then((function(){return Ql(e,t.ia(e.b))}))},t.Qc=function(t){return Fr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.Ya(t)},t.vb=function(){var t=this;return this.h.then((function(){var e=eh(t);if(e&&e.isAnonymous){var n=qr({providerId:null,isNewUser:!1});return qr({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return Ql(t,t.b.vb()).then((function(e){var n=e.user;return Il(n,"isAnonymous",!0),t.ca(n),e}))}))},t.getUid=function(){return eh(this)&&eh(this).uid||null},t.bc=function(t){this.addAuthTokenListener(t),this.s++,0<this.s&&eh(this)&&fl(eh(this))},t.Nc=function(t){var e=this;F(this.m,(function(n){n==t&&e.s--})),0>this.s&&(this.s=0),0==this.s&&eh(this)&&dl(eh(this)),this.removeAuthTokenListener(t)},t.addAuthTokenListener=function(t){var e=this;this.m.push(t),ih(this,this.h.then((function(){e.l||q(e.m,t)&&t(nh(e))})))},t.removeAuthTokenListener=function(t){H(this.m,(function(e){return e==t}))},t.delete=function(){this.l=!0;for(var t=0;t<this.P.length;t++)this.P[t].cancel("app-deleted");return this.P=[],this.i&&(t=this.i).b.removeListener($l("local"),t.a,this.oa),this.a&&(Tc(this.a,this),Pc(this.a.b)),Promise.resolve()},t.fc=function(t){return ih(this,function(t,e){return Ga(t,ya,{identifier:e,continueUri:kr()?rr():"http://localhost"}).then((function(t){return t.signinMethods||[]}))}(this.b,t))},t.zc=function(t){return!!ko(t)},t.sb=function(t,e){var n=this;return ih(this,Te().then((function(){var t=new Ei(e);if(!t.c)throw new E("argument-error",ki+" must be true when sending sign in link to email");return Ri(t)})).then((function(e){return n.b.sb(t,e)})).then((function(){})))},t.fd=function(t){return this.Pa(t).then((function(t){return t.data.email}))},t.jb=function(t,e){return ih(this,this.b.jb(t,e).then((function(){})))},t.Pa=function(t){return ih(this,this.b.Pa(t).then((function(t){return new Qr(t)})))},t.fb=function(t){return ih(this,this.b.fb(t).then((function(){})))},t.rb=function(t,e){var n=this;return ih(this,Te().then((function(){return void 0===e||lt(e)?{}:Ri(new Ei(e))})).then((function(e){return n.b.rb(t,e)})).then((function(){})))},t.Uc=function(t,e){return ih(this,$c(this,t,e,g(this.Ya,this)))},t.Tc=function(t,e){var n=this;return ih(this,Te().then((function(){var r=e||rr(),i=To(t,r);if(!(r=ko(r)))throw new E("argument-error","Invalid email link!");if(r.tenantId!==n.S())throw new E("tenant-id-mismatch");return n.Ya(i)})))},oh.prototype.render=function(){},oh.prototype.reset=function(){},oh.prototype.getResponse=function(){},oh.prototype.execute=function(){};var ah=null;function uh(t,e){return(e=ch(e))&&t.a[e]||null}function ch(t){return(t=void 0===t?1e12:t)?t.toString():null}function lh(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=re(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():nn(this.f,"click",this.i)}function hh(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function fh(){}function dh(){}sh.prototype.render=function(t,e){return this.a[this.b.toString()]=new lh(t,e),this.b++},sh.prototype.reset=function(t){var e=uh(this,t);t=ch(t),e&&t&&(e.delete(),delete this.a[t])},sh.prototype.getResponse=function(t){return(t=uh(this,t))?t.getResponse():null},sh.prototype.execute=function(t){(t=uh(this,t))&&t.execute()},lh.prototype.getResponse=function(){return hh(this),this.b},lh.prototype.execute=function(){hh(this);var t=this;this.a||(this.a=setTimeout((function(){t.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(t){}t.a=setTimeout((function(){if(t.a=null,t.b=null,n)try{n()}catch(t){}t.h&&t.execute()}),6e4)}),500))},lh.prototype.delete=function(){hh(this),this.g=!0,clearTimeout(this.a),this.a=null,sn(this.f,"click",this.i)},Br(fh,"FACTOR_ID","phone"),dh.prototype.g=function(){return ah||(ah=new sh),Te(ah)},dh.prototype.c=function(){};var ph=null;function vh(){this.b=s.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var mh=new vt(gt,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),yh=new Ur(3e4,6e4);vh.prototype.g=function(t){var e=this;return new ye((function(n,r){var i=setTimeout((function(){r(new E("network-request-failed"))}),yh.get());!s.grecaptcha||t!==e.f&&!e.b?(s[e.a]=function(){if(s.grecaptcha){e.f=t;var o=s.grecaptcha.render;s.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(i),n(s.grecaptcha)}else clearTimeout(i),r(new E("internal-error"));delete s[e.a]},Te(Ps(Et(mh,{onload:e.a,hl:t||""}))).o((function(){clearTimeout(i),r(new E("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(i),n(s.grecaptcha))}))},vh.prototype.c=function(){this.b--};var gh=null;function bh(t,e,n,r,i,o,a){if(Br(this,"type","recaptcha"),this.c=this.f=null,this.D=!1,this.u=e,this.g=null,a?(ph||(ph=new dh),a=ph):(gh||(gh=new vh),a=gh),this.m=a,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Eh])throw new E("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Ih],!s.document)throw new E("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!re(e)||!this.i&&re(e).hasChildNodes())throw new E("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new Bs(t,o||null,i||null),this.w=r||function(){return null};var u=this;this.l=[];var c=this.a[_h];this.a[_h]=function(t){if(Th(u,t),"function"==typeof c)c(t);else if("string"==typeof c){var e=Er(c,s);"function"==typeof e&&e(t)}};var l=this.a[wh];this.a[wh]=function(){if(Th(u,null),"function"==typeof l)l();else if("string"==typeof l){var t=Er(l,s);"function"==typeof t&&t()}}}var _h="callback",wh="expired-callback",Eh="sitekey",Ih="size";function Th(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(t){}}function kh(t,e){return t.h.push(e),e.ma((function(){z(t.h,e)})),e}function Sh(t){if(t.D)throw new E("internal-error","RecaptchaVerifier instance has been destroyed.")}function xh(t,e,n){var r=!1;try{this.b=n||ud.app()}catch(t){throw new E("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new E("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().Ea()}catch(t){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(t){}o=ud.SDK_VERSION?_r(ud.SDK_VERSION,o):null,bh.call(this,n,t,e,(function(){try{var t=i.b.auth().ja()}catch(e){t=null}return t}),o,O(T),r)}function Oh(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,s=0;s<e.length;s++)if(e[s].optional)o=!0;else{if(o)throw new E("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].K(n[i])&&!o){if(e=e[i],0>i||i>=Ah.length)throw new E("internal-error","Argument validator received an unsupported number of arguments.");n=Ah[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.J+".";break t}r=null}}if(r)throw new E("argument-error",t+" failed: "+r)}(t=bh.prototype).Ga=function(){var t=this;return this.f?this.f:this.f=kh(this,Te().then((function(){if(kr()&&!dr())return lr();throw new E("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return t.m.g(t.w())})).then((function(e){return t.g=e,Ga(t.s,Na,{})})).then((function(e){t.a[Eh]=e.recaptchaSiteKey})).o((function(e){throw t.f=null,e})))},t.render=function(){Sh(this);var t=this;return kh(this,this.Ga().then((function(){if(null===t.c){var e=t.u;if(!t.i){var n=re(e);e=function(t,e,n){var r=arguments,i=document,o=String(r[0]),s=r[1];if(!ne&&s&&(s.name||s.type)){if(o=["<",o],s.name&&o.push(' name="',Vt(s.name),'"'),s.type){o.push(' type="',Vt(s.type),'"');var a={};dt(a,s),delete a.type,s=a}o.push(">"),o=o.join("")}return o=ce(i,o),s&&("string"==typeof s?o.className=s:Array.isArray(s)?o.className=s.join(" "):ie(o,s)),2<r.length&&ue(i,o,r),o}("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c})))},t.verify=function(){Sh(this);var t=this;return kh(this,this.render().then((function(e){return new ye((function(n){var r=t.g.getResponse(e);if(r)n(r);else{var i=function(e){e&&(function(t,e){H(t.l,(function(t){return t==e}))}(t,i),n(e))};t.l.push(i),t.i&&t.g.execute(t.c)}}))})))},t.reset=function(){Sh(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){Sh(this),this.D=!0,this.m.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=re(this.u);for(var e;e=t.firstChild;)t.removeChild(e)}},w(xh,bh);var Ah="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Nh(t,e){return{name:t||"",J:"a valid string",optional:!!e,K:function(t){return"string"==typeof t}}}function Dh(t,e){return{name:t||"",J:"a boolean",optional:!!e,K:function(t){return"boolean"==typeof t}}}function Rh(t,e){return{name:t||"",J:"a valid object",optional:!!e,K:d}}function Ch(t,e){return{name:t||"",J:"a function",optional:!!e,K:f}}function Uh(t,e){return{name:t||"",J:"null",optional:!!e,K:function(t){return null===t}}}function Ph(t){return{name:t?t+"Credential":"credential",J:t?"a valid "+t+" credential":"a valid credential",optional:!1,K:function(e){if(!e)return!1;var n=!t||e.providerId===t;return!(!e.ia||!n)}}}function Lh(t,e){return d(t)&&"string"==typeof t.type&&t.type===e&&f(t.Fa)}function jh(t){return d(t)&&"string"==typeof t.uid}function Mh(){return{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(t){return!(!t||"string"!=typeof t.type||!f(t.verify))}}}function Vh(t,e,n,r){return{name:n||"",J:t.J+" or "+e.J,optional:!!r,K:function(n){return t.K(n)||e.K(n)}}}function Fh(t,e){for(var n in e){var r=e[n].name;t[r]=Wh(r,t[n],e[n].j)}}function $h(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:b((function(t){return this[t]}),n),set:b((function(t,e,n,r){Oh(t,[n],[r],!0),this[e]=r}),r,n,e[n].gb),enumerable:!0})}}function Bh(t,e,n,r){t[e]=Wh(e,n,r)}function Wh(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return Oh(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}Fh(Hl.prototype,{fb:{name:"applyActionCode",j:[Nh("code")]},Pa:{name:"checkActionCode",j:[Nh("code")]},jb:{name:"confirmPasswordReset",j:[Nh("code"),Nh("newPassword")]},cc:{name:"createUserWithEmailAndPassword",j:[Nh("email"),Nh("password")]},fc:{name:"fetchSignInMethodsForEmail",j:[Nh("email")]},pa:{name:"getRedirectResult",j:[]},zc:{name:"isSignInWithEmailLink",j:[Nh("emailLink")]},Fc:{name:"onAuthStateChanged",j:[Vh(Rh(),Ch(),"nextOrObserver"),Ch("opt_error",!0),Ch("opt_completed",!0)]},Gc:{name:"onIdTokenChanged",j:[Vh(Rh(),Ch(),"nextOrObserver"),Ch("opt_error",!0),Ch("opt_completed",!0)]},rb:{name:"sendPasswordResetEmail",j:[Nh("email"),Vh(Rh("opt_actionCodeSettings",!0),Uh(null,!0),"opt_actionCodeSettings",!0)]},sb:{name:"sendSignInLinkToEmail",j:[Nh("email"),Rh("actionCodeSettings")]},tb:{name:"setPersistence",j:[Nh("persistence")]},Qc:{name:"signInAndRetrieveDataWithCredential",j:[Ph()]},vb:{name:"signInAnonymously",j:[]},Ya:{name:"signInWithCredential",j:[Ph()]},Rc:{name:"signInWithCustomToken",j:[Nh("token")]},Sc:{name:"signInWithEmailAndPassword",j:[Nh("email"),Nh("password")]},Tc:{name:"signInWithEmailLink",j:[Nh("email"),Nh("emailLink",!0)]},Uc:{name:"signInWithPhoneNumber",j:[Nh("phoneNumber"),Mh()]},Vc:{name:"signInWithPopup",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Wc:{name:"signInWithRedirect",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},bd:{name:"updateCurrentUser",j:[Vh({name:"user",J:"an instance of Firebase User",optional:!1,K:function(t){return!!(t&&t instanceof al)}},Uh(),"user")]},wb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Nh(null,!0)]},dd:{name:"useDeviceLanguage",j:[]},fd:{name:"verifyPasswordResetCode",j:[Nh("code")]}}),$h(Hl.prototype,{lc:{name:"languageCode",gb:Vh(Nh(),Uh(),"languageCode")},ti:{name:"tenantId",gb:Vh(Nh(),Uh(),"tenantId")}}),Hl.Persistence=Bu,Hl.Persistence.LOCAL="local",Hl.Persistence.SESSION="session",Hl.Persistence.NONE="none",Fh(al.prototype,{delete:{name:"delete",j:[]},mc:{name:"getIdTokenResult",j:[Dh("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Dh("opt_forceRefresh",!0)]},Ac:{name:"linkAndRetrieveDataWithCredential",j:[Ph()]},mb:{name:"linkWithCredential",j:[Ph()]},Bc:{name:"linkWithPhoneNumber",j:[Nh("phoneNumber"),Mh()]},Cc:{name:"linkWithPopup",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Dc:{name:"linkWithRedirect",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Jc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Ph()]},pb:{name:"reauthenticateWithCredential",j:[Ph()]},Kc:{name:"reauthenticateWithPhoneNumber",j:[Nh("phoneNumber"),Mh()]},Lc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Mc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},qb:{name:"sendEmailVerification",j:[Vh(Rh("opt_actionCodeSettings",!0),Uh(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Nh(null,!0)]},ad:{name:"unlink",j:[Nh("provider")]},xb:{name:"updateEmail",j:[Nh("email")]},yb:{name:"updatePassword",j:[Nh("password")]},cd:{name:"updatePhoneNumber",j:[Ph("phone")]},zb:{name:"updateProfile",j:[Rh("profile")]},Ab:{name:"verifyBeforeUpdateEmail",j:[Nh("email"),Vh(Rh("opt_actionCodeSettings",!0),Uh(null,!0),"opt_actionCodeSettings",!0)]}}),Fh(sh.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Fh(oh.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Fh(ye.prototype,{ma:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),$h(Vc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",gb:Dh("appVerificationDisabledForTesting")}}),Fh(Fc.prototype,{confirm:{name:"confirm",j:[Nh("verificationCode")]}}),Bh(eo,"fromJSON",(function(t){t="string"==typeof t?JSON.parse(t):t;for(var e,n=[uo,Eo,xo,oo],r=0;r<n.length;r++)if(e=n[r](t))return e;return null}),[Vh(Nh(),Rh(),"json")]),Bh(Io,"credential",(function(t,e){return new wo(t,e)}),[Nh("email"),Nh("password")]),Fh(wo.prototype,{v:{name:"toJSON",j:[Nh(null,!0)]}}),Fh(fo.prototype,{Aa:{name:"addScope",j:[Nh("scope")]},Ia:{name:"setCustomParameters",j:[Rh("customOAuthParameters")]}}),Bh(fo,"credential",po,[Vh(Nh(),Rh(),"token")]),Bh(Io,"credentialWithLink",To,[Nh("email"),Nh("emailLink")]),Fh(vo.prototype,{Aa:{name:"addScope",j:[Nh("scope")]},Ia:{name:"setCustomParameters",j:[Rh("customOAuthParameters")]}}),Bh(vo,"credential",mo,[Vh(Nh(),Rh(),"token")]),Fh(yo.prototype,{Aa:{name:"addScope",j:[Nh("scope")]},Ia:{name:"setCustomParameters",j:[Rh("customOAuthParameters")]}}),Bh(yo,"credential",go,[Vh(Nh(),Vh(Rh(),Uh()),"idToken"),Vh(Nh(),Uh(),"accessToken",!0)]),Fh(bo.prototype,{Ia:{name:"setCustomParameters",j:[Rh("customOAuthParameters")]}}),Bh(bo,"credential",_o,[Vh(Nh(),Rh(),"token"),Nh("secret",!0)]),Fh(ho.prototype,{Aa:{name:"addScope",j:[Nh("scope")]},credential:{name:"credential",j:[Vh(Nh(),Vh(Rh(),Uh()),"optionsOrIdToken"),Vh(Nh(),Uh(),"accessToken",!0)]},Ia:{name:"setCustomParameters",j:[Rh("customOAuthParameters")]}}),Fh(so.prototype,{v:{name:"toJSON",j:[Nh(null,!0)]}}),Fh(ro.prototype,{v:{name:"toJSON",j:[Nh(null,!0)]}}),Bh(Ao,"credential",No,[Nh("verificationId"),Nh("verificationCode")]),Fh(Ao.prototype,{cb:{name:"verifyPhoneNumber",j:[Vh(Nh(),{name:"phoneInfoOptions",J:"valid phone info options",optional:!1,K:function(t){return!!t&&(t.session&&t.phoneNumber?Lh(t.session,Qi)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?Lh(t.session,to)&&jh(t.multiFactorHint):t.session&&t.multiFactorUid?Lh(t.session,to)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),Mh()]}}),Fh(So.prototype,{v:{name:"toJSON",j:[Nh(null,!0)]}}),Fh(E.prototype,{toJSON:{name:"toJSON",j:[Nh(null,!0)]}}),Fh(Vo.prototype,{toJSON:{name:"toJSON",j:[Nh(null,!0)]}}),Fh(Mo.prototype,{toJSON:{name:"toJSON",j:[Nh(null,!0)]}}),Fh(Hc.prototype,{toJSON:{name:"toJSON",j:[Nh(null,!0)]}}),Fh(Wc.prototype,{Pc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",J:"a valid multiFactorAssertion",optional:!1,K:function(t){return!!t&&!!t.ob}}]}}),Fh(Zc.prototype,{Ob:{name:"getSession",j:[]},dc:{name:"enroll",j:[{name:"multiFactorAssertion",J:"a valid multiFactorAssertion",optional:!1,K:function(t){return!!t&&!!t.ob}},Nh("displayName",!0)]},$c:{name:"unenroll",j:[Vh({name:"multiFactorInfo",J:"a valid multiFactorInfo",optional:!1,K:jh},Nh(),"multiFactorInfoIdentifier")]}}),Fh(xh.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),Bh(di,"parseLink",wi,[Nh("link")]),Bh(fh,"assertion",(function(t){return new Xc(t)}),[Ph("phone")]),function(){if(void 0===ud||!ud.INTERNAL||!ud.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ei,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:ti,VERIFY_AND_CHANGE_EMAIL:ni,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:Hl,AuthCredential:eo,Error:E};Bh(t,"EmailAuthProvider",Io,[]),Bh(t,"FacebookAuthProvider",fo,[]),Bh(t,"GithubAuthProvider",vo,[]),Bh(t,"GoogleAuthProvider",yo,[]),Bh(t,"TwitterAuthProvider",bo,[]),Bh(t,"OAuthProvider",ho,[Nh("providerId")]),Bh(t,"SAMLAuthProvider",lo,[Nh("providerId")]),Bh(t,"PhoneAuthProvider",Ao,[{name:"auth",J:"an instance of Firebase Auth",optional:!0,K:function(t){return!!(t&&t instanceof Hl)}}]),Bh(t,"RecaptchaVerifier",xh,[Vh(Nh(),{name:"",J:"an HTML element",optional:!1,K:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),Rh("recaptchaParameters",!0),{name:"app",J:"an instance of Firebase App",optional:!0,K:function(t){return!!(t&&t instanceof ud.app.App)}}]),Bh(t,"ActionCodeURL",di,[]),Bh(t,"PhoneMultiFactorGenerator",fh,[]),ud.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new Hl(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC"}),ud.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:g((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:g(t.kc,t),addAuthTokenListener:g(t.bc,t),removeAuthTokenListener:g(t.Nc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),ud.registerVersion("@firebase/auth","0.14.7"),ud.INTERNAL.extendNamespace({User:al})}()}).apply("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var dd,pd="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},vd=vd||{},md=pd||self;function yd(){}function gd(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function bd(t){var e=gd(t);return"array"==e||"object"==e&&"number"==typeof t.length}function _d(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var wd="closure_uid_"+(1e9*Math.random()>>>0),Ed=0;function Id(t,e,n){return t.call.apply(t.bind,arguments)}function Td(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function kd(t,e,n){return(kd=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Id:Td).apply(null,arguments)}function Sd(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var xd=Date.now||function(){return+new Date};function Od(t,e){function n(){}n.prototype=e.prototype,t.M=e.prototype,t.prototype=new n,t.prototype.constructor=t}function Ad(){this.j=this.j,this.i=this.i}Ad.prototype.j=!1,Ad.prototype.da=function(){if(!this.j&&(this.j=!0,this.C(),0))(function(t){Object.prototype.hasOwnProperty.call(t,wd)&&t[wd]||(t[wd]=++Ed)})(this)},Ad.prototype.C=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var Nd=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Dd=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function Rd(t){return Array.prototype.concat.apply([],arguments)}function Cd(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function Ud(t){return/^[\s\xa0]*$/.test(t)}var Pd,Ld=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function jd(t,e){return-1!=t.indexOf(e)}function Md(t,e){return t<e?-1:t>e?1:0}t:{var Vd=md.navigator;if(Vd){var Fd=Vd.userAgent;if(Fd){Pd=Fd;break t}}Pd=""}function $d(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function Bd(t){var e={};for(var n in t)e[n]=t[n];return e}var Wd="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function qd(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<Wd.length;o++)n=Wd[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function zd(t){return zd[" "](t),t}zd[" "]=yd;var Hd,Gd,Yd=jd(Pd,"Opera"),Kd=jd(Pd,"Trident")||jd(Pd,"MSIE"),Xd=jd(Pd,"Edge"),Jd=Xd||Kd,Zd=jd(Pd,"Gecko")&&!(jd(Pd.toLowerCase(),"webkit")&&!jd(Pd,"Edge"))&&!(jd(Pd,"Trident")||jd(Pd,"MSIE"))&&!jd(Pd,"Edge"),Qd=jd(Pd.toLowerCase(),"webkit")&&!jd(Pd,"Edge");function tp(){var t=md.document;return t?t.documentMode:void 0}t:{var ep="",np=(Gd=Pd,Zd?/rv:([^\);]+)(\)|;)/.exec(Gd):Xd?/Edge\/([\d\.]+)/.exec(Gd):Kd?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Gd):Qd?/WebKit\/(\S+)/.exec(Gd):Yd?/(?:Version)[ \/]?(\S+)/.exec(Gd):void 0);if(np&&(ep=np?np[1]:""),Kd){var rp=tp();if(null!=rp&&rp>parseFloat(ep)){Hd=String(rp);break t}}Hd=ep}var ip,op={};function sp(t){return function(t,e){var n=op;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,(function(){for(var e=0,n=Ld(String(Hd)).split("."),r=Ld(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=Md(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||Md(0==s[2].length,0==a[2].length)||Md(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e}))}if(md.document&&Kd){var ap=tp();ip=ap||(parseInt(Hd,10)||void 0)}else ip=void 0;var up=ip,cp=!Kd||9<=Number(up),lp=Kd&&!sp("9"),hp=function(){if(!md.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{md.addEventListener("test",yd,e),md.removeEventListener("test",yd,e)}catch(t){}return t}();function fp(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function dp(t,e){if(fp.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(Zd){t:{try{zd(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:pp[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}fp.prototype.b=function(){this.defaultPrevented=!0},Od(dp,fp);var pp={2:"touch",3:"pen",4:"mouse"};dp.prototype.b=function(){dp.M.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,lp)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}};var vp="closure_listenable_"+(1e6*Math.random()|0),mp=0;function yp(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.aa=i,this.key=++mp,this.V=this.X=!1}function gp(t){t.V=!0,t.listener=null,t.proxy=null,t.src=null,t.aa=null}function bp(t){this.src=t,this.a={},this.b=0}function _p(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=Nd(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(gp(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function wp(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.V&&o.listener==e&&o.capture==!!n&&o.aa==r)return i}return-1}bp.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=wp(t,e,r,i);return-1<s?(e=t[s],n||(e.X=!1)):((e=new yp(e,this.src,o,!!r,i)).X=n,t.push(e)),e};var Ep="closure_lm_"+(1e6*Math.random()|0),Ip={};function Tp(t,e,n,r,i){if(r&&r.once)return function t(e,n,r,i,o){if(Array.isArray(n)){for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);return null}return r=Rp(r),e&&e[vp]?e.sa(n,r,_d(i)?!!i.capture:!!i,o):kp(e,n,r,!0,i,o)}(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Tp(t,e[o],n,r,i);return null}return n=Rp(n),t&&t[vp]?t.ra(e,n,_d(r)?!!r.capture:!!r,i):kp(t,e,n,!1,r,i)}function kp(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=_d(i)?!!i.capture:!!i;if(s&&!cp)return null;var a=Np(t);if(a||(t[Ep]=a=new bp(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=Ap,e=cp?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)hp||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(xp(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Sp(t){if("number"!=typeof t&&t&&!t.V){var e=t.src;if(e&&e[vp])_p(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(xp(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Np(e))?(_p(n,t),0==n.b&&(n.src=null,e[Ep]=null)):gp(t)}}}function xp(t){return t in Ip?Ip[t]:Ip[t]="on"+t}function Op(t,e){var n=t.listener,r=t.aa||t.src;return t.X&&Sp(t),n.call(r,e)}function Ap(t,e){if(t.V)return!0;if(!cp){if(!e)t:{e=["window","event"];for(var n=md,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return Op(t,e=new dp(e,this))}return Op(t,new dp(e,this))}function Np(t){return(t=t[Ep])instanceof bp?t:null}var Dp="__closure_events_fn_"+(1e9*Math.random()>>>0);function Rp(t){return"function"==gd(t)?t:(t[Dp]||(t[Dp]=function(e){return t.handleEvent(e)}),t[Dp])}function Cp(){Ad.call(this),this.c=new bp(this),this.J=this,this.A=null}function Up(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.V&&s.capture==n){var a=s.listener,u=s.aa||s.src;s.X&&_p(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}Od(Cp,Ad),Cp.prototype[vp]=!0,(dd=Cp.prototype).addEventListener=function(t,e,n,r){Tp(this,t,e,n,r)},dd.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(Array.isArray(n))for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);else i=_d(i)?!!i.capture:!!i,r=Rp(r),e&&e[vp]?(e=e.c,(n=String(n).toString())in e.a&&(-1<(r=wp(s=e.a[n],r,i,o))&&(gp(s[r]),Array.prototype.splice.call(s,r,1),0==s.length&&(delete e.a[n],e.b--)))):e&&(e=Np(e))&&(n=e.a[n.toString()],e=-1,n&&(e=wp(n,r,i,o)),(r=-1<e?n[e]:null)&&Sp(r))}(this,t,e,n,r)},dd.dispatchEvent=function(t){var e,n=this.A;if(n)for(e=[];n;n=n.A)e.push(n);n=this.J;var r=t.type||t;if("string"==typeof t)t=new fp(t,n);else if(t instanceof fp)t.target=t.target||n;else{var i=t;qd(t=new fp(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.a=e[o];i=Up(s,r,!0,t)&&i}if(i=Up(s=t.a=n,r,!0,t)&&i,i=Up(s,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=Up(s=t.a=e[o],r,!1,t)&&i;return i},dd.C=function(){if(Cp.M.C.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)gp(n[r]);delete e.a[t],e.b--}}this.A=null},dd.ra=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},dd.sa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Pp=md.JSON.stringify;function Lp(){this.b=this.a=null}var jp,Mp=new(function(){function t(t,e,n){this.f=n,this.c=t,this.g=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},t}())((function(){return new Fp}),(function(t){t.reset()}),100);function Vp(){var t=qp,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Fp(){this.next=this.b=this.a=null}function $p(t){md.setTimeout((function(){throw t}),0)}function Bp(t,e){jp||function(){var t=md.Promise.resolve(void 0);jp=function(){t.then(zp)}}(),Wp||(jp(),Wp=!0),qp.add(t,e)}Lp.prototype.add=function(t,e){var n=Mp.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Fp.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Fp.prototype.reset=function(){this.next=this.b=this.a=null};var Wp=!1,qp=new Lp;function zp(){for(var t;t=Vp();){try{t.a.call(t.b)}catch(t){$p(t)}var e=Mp;e.g(t),e.b<e.f&&(e.b++,t.next=e.a,e.a=t)}Wp=!1}function Hp(t,e){Cp.call(this),this.b=t||1,this.a=e||md,this.f=kd(this.Ua,this),this.g=xd()}function Gp(t){t.Z=!1,t.L&&(t.a.clearTimeout(t.L),t.L=null)}function Yp(t,e,n){if("function"==gd(t))n&&(t=kd(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=kd(t.handleEvent,t)}return 2147483647<Number(e)?-1:md.setTimeout(t,e||0)}function Kp(t,e,n){Ad.call(this),this.f=null!=n?kd(t,n):t,this.c=e,this.b=kd(this.Pa,this),this.a=[]}function Xp(t){t.T=Yp(t.b,t.c),t.f.apply(null,t.a)}function Jp(t){Ad.call(this),this.b=t,this.a={}}Od(Hp,Cp),(dd=Hp.prototype).Z=!1,dd.L=null,dd.Ua=function(){if(this.Z){var t=xd()-this.g;0<t&&t<.8*this.b?this.L=this.a.setTimeout(this.f,this.b-t):(this.L&&(this.a.clearTimeout(this.L),this.L=null),this.dispatchEvent("tick"),this.Z&&(Gp(this),this.start()))}},dd.start=function(){this.Z=!0,this.L||(this.L=this.a.setTimeout(this.f,this.b),this.g=xd())},dd.C=function(){Hp.M.C.call(this),Gp(this),delete this.a},Od(Kp,Ad),(dd=Kp.prototype).ba=!1,dd.T=null,dd.Ia=function(t){this.a=arguments,this.T?this.ba=!0:Xp(this)},dd.C=function(){Kp.M.C.call(this),this.T&&(md.clearTimeout(this.T),this.T=null,this.ba=!1,this.a=[])},dd.Pa=function(){this.T=null,this.ba&&(this.ba=!1,Xp(this))},Od(Jp,Ad);var Zp=[];function Qp(t,e,n,r){Array.isArray(n)||(n&&(Zp[0]=n.toString()),n=Zp);for(var i=0;i<n.length;i++){var o=Tp(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function tv(t){$d(t.a,(function(t,e){this.a.hasOwnProperty(e)&&Sp(t)}),t),t.a={}}function ev(){}Jp.prototype.C=function(){Jp.M.C.call(this),tv(this)},Jp.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var nv=null;function rv(){return nv=nv||new Cp}function iv(t){fp.call(this,"serverreachability",t)}function ov(t){var e=rv();e.dispatchEvent(new iv(e,t))}function sv(t){fp.call(this,"statevent",t)}function av(t){var e=rv();e.dispatchEvent(new sv(e,t))}function uv(t){fp.call(this,"timingevent",t)}function cv(t,e){if("function"!=gd(t))throw Error("Fn must not be null and must be a function");return md.setTimeout((function(){t()}),e)}Od(iv,fp),Od(sv,fp),Od(uv,fp);var lv={NO_ERROR:0,Va:1,bb:2,ab:3,Ya:4,$a:5,cb:6,za:7,TIMEOUT:8,gb:9},hv={Xa:"complete",kb:"success",Aa:"error",za:"abort",ib:"ready",jb:"readystatechange",TIMEOUT:"timeout",eb:"incrementaldata",hb:"progress",Za:"downloadprogress",lb:"uploadprogress"};function fv(){}function dv(t){var e;return(e=t.a)||(e=t.a={}),e}function pv(){}fv.prototype.a=null;var vv,mv={OPEN:"a",Wa:"b",Aa:"c",fb:"d"};function yv(){fp.call(this,"d")}function gv(){fp.call(this,"c")}function bv(){}function _v(t,e,n){this.g=t,this.W=e,this.U=n||1,this.G=new Jp(this),this.N=wv,t=Jd?125:void 0,this.O=new Hp(t),this.m=null,this.b=!1,this.j=this.A=this.f=this.B=this.s=this.P=this.h=null,this.i=[],this.a=null,this.w=0,this.c=this.v=null,this.H=-1,this.l=!1,this.J=0,this.D=null,this.o=this.R=this.F=!1}Od(yv,fp),Od(gv,fp),Od(bv,fv),vv=new bv;var wv=45e3,Ev={},Iv={};function Tv(t,e,n){t.B=1,t.f=Hv(Fv(e)),t.j=n,t.F=!0,kv(t,null)}function kv(t,e){t.s=xd(),Ov(t),t.A=Fv(t.f);var n=t.A,r=t.U;Array.isArray(r)||(r=[String(r)]),om(n.b,"t",r),t.w=0,t.a=Xm(t.g,t.g.w?e:null),0<t.J&&(t.D=new Kp(kd(t.ya,t,t.a),t.J)),Qp(t.G,t.a,"readystatechange",t.Sa),e=t.m?Bd(t.m):{},t.j?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.$(t.A,t.v,t.j,e)):(t.v="GET",t.a.$(t.A,t.v,null,e)),ov(1)}function Sv(t,e,n){for(var r=!0;!t.l&&t.w<n.length;){var i=xv(t,n);if(i==Iv){4==e&&(t.c=4,av(14),r=!1);break}if(i==Ev){t.c=4,av(15),r=!1;break}Cv(t,i)}4==e&&0==n.length&&(t.c=1,av(16),r=!1),t.b=t.b&&r,r||(Rv(t),Dv(t))}function xv(t,e){var n=t.w,r=e.indexOf("\n",n);return-1==r?Iv:(n=Number(e.substring(n,r)),isNaN(n)?Ev:(r+=1)+n>e.length?Iv:(e=e.substr(r,n),t.w=r+n,e))}function Ov(t){t.P=xd()+t.N,Av(t,t.N)}function Av(t,e){if(null!=t.h)throw Error("WatchDog timer not null");t.h=cv(kd(t.Qa,t),e)}function Nv(t){t.h&&(md.clearTimeout(t.h),t.h=null)}function Dv(t){0==t.g.u||t.l||zm(t.g,t)}function Rv(t){Nv(t);var e=t.D;e&&"function"==typeof e.da&&e.da(),t.D=null,Gp(t.O),tv(t.G),t.a&&(e=t.a,t.a=null,e.abort(),e.da())}function Cv(t,e){try{var n=t.g;if(0!=n.u&&(n.a==t||fm(n.b,t)))if(n.A=t.H,!t.o&&fm(n.b,t)&&3==n.u){try{var r=n.ja.a.parse(e)}catch(t){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.i){if(n.a){if(!(n.a.s+3e3<t.s))break t;qm(n),n.a.cancel(),n.a=null}Wm(n),av(18)}}else n.ia=i[1],0<n.ia-n.G&&37500>i[2]&&n.U&&0==n.m&&!n.l&&(n.l=cv(kd(n.Na,n),6e3));if(1>=hm(n.b)&&n.O){try{n.O()}catch(t){}n.O=void 0}}else Gm(n,11)}else if((t.o||n.a==t)&&qm(n),!Ud(e))for(e=r=n.ja.a.parse(e),r=0;r<e.length;r++)if(i=e[r],n.G=i[0],i=i[1],2==n.u)if("c"==i[0]){n.B=i[1],n.R=i[2];var o=i[3];null!=o&&(n.oa=o);var s=i[5];null!=s&&"number"==typeof s&&0<s&&(n.D=1.5*s);var a=n,u=t.a;if(u){var c=u.a?u.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(c){var l=a.b;!l.a&&(jd(c,"spdy")||jd(c,"quic")||jd(c,"h2"))&&(l.f=l.g,l.a=new Set,l.b&&(dm(l,l.b),l.b=null))}if(a.s){var h=u.a?u.a.getResponseHeader("X-HTTP-Session-Id"):null;h&&(a.ha=h,zv(a.v,a.s,h))}}n.u=3,n.c&&n.c.na();var f=t;if((a=n).ea=Km(a,a.w?a.R:null,a.P),f.o){pm(a.b,f);var d=f,p=a.D;p&&d.setTimeout(p),d.h&&(Nv(d),Ov(d)),a.a=f}else Bm(a);0<n.f.length&&Mm(n)}else"stop"!=i[0]&&"close"!=i[0]||Gm(n,7);else 3==n.u&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?Gm(n,7):Pm(n):"noop"!=i[0]&&n.c&&n.c.ma(i),n.m=0);ov(4)}catch(t){}}function Uv(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(bd(t)||"string"==typeof t)Dd(t,e,void 0);else{if(t.K&&"function"==typeof t.K)var n=t.K();else if(t.I&&"function"==typeof t.I)n=void 0;else if(bd(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.I&&"function"==typeof t.I)return t.I();if("string"==typeof t)return t.split("");if(bd(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Pv(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Pv)for(n=t.K(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Lv(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];jv(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)jv(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function jv(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(dd=_v.prototype).setTimeout=function(t){this.N=t},dd.Sa=function(t){t=t.target;var e=this.D;e&&3==Dm(t)?e.Ia():this.ya(t)},dd.ya=function(t){try{if(t==this.a)t:{var e=Dm(this.a),n=this.a.qa(),r=this.a.S();if(!(3>e||3==e&&!Jd&&!this.a.Y())){this.l||4!=e||7==n||ov(8==n||0>=r?3:2),Nv(this);var i=this.a.S();this.H=i;var o=this.a.Y();if(this.b=200==i){if(this.R&&!this.o){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ud(s)){var u=s;break e}}u=null}if(!u){this.b=!1,this.c=3,av(12),Rv(this),Dv(this);break t}this.o=!0,Cv(this,u)}this.F?(Sv(this,e,o),Jd&&this.b&&3==e&&(Qp(this.G,this.O,"tick",this.Ra),this.O.start())):Cv(this,o),4==e&&Rv(this),this.b&&!this.l&&(4==e?zm(this.g,this):(this.b=!1,Ov(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.c=3,av(12)):(this.c=0,av(13)),Rv(this),Dv(this)}}}catch(t){}},dd.Ra=function(){if(this.a){var t=Dm(this.a),e=this.a.Y();this.w<e.length&&(Nv(this),Sv(this,t,e),this.b&&4!=t&&Ov(this))}},dd.cancel=function(){this.l=!0,Rv(this)},dd.Qa=function(){this.h=null;var t=xd();0<=t-this.P?(2!=this.B&&(ov(3),av(17)),Rv(this),this.c=2,Dv(this)):Av(this,this.P-t)},(dd=Pv.prototype).I=function(){Lv(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},dd.K=function(){return Lv(this),this.a.concat()},dd.get=function(t,e){return jv(this.b,t)?this.b[t]:e},dd.set=function(t,e){jv(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},dd.forEach=function(t,e){for(var n=this.K(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Mv=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Vv(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof Vv){this.a=void 0!==e?e:t.a,$v(this,t.f),this.j=t.j,Bv(this,t.c),Wv(this,t.h),this.g=t.g,e=t.b;var n=new em;n.c=e.c,e.a&&(n.a=new Pv(e.a),n.b=e.b),qv(this,n),this.i=t.i}else t&&(n=String(t).match(Mv))?(this.a=!!e,$v(this,n[1]||"",!0),this.j=Gv(n[2]||""),Bv(this,n[3]||"",!0),Wv(this,n[4]),this.g=Gv(n[5]||"",!0),qv(this,n[6]||"",!0),this.i=Gv(n[7]||"")):(this.a=!!e,this.b=new em(null,this.a))}function Fv(t){return new Vv(t)}function $v(t,e,n){t.f=n?Gv(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Bv(t,e,n){t.c=n?Gv(e,!0):e}function Wv(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function qv(t,e,n){e instanceof em?(t.b=e,function(t,e){e&&!t.f&&(nm(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(rm(this,e),om(this,n,t))}),t)),t.f=e}(t.b,t.a)):(n||(e=Yv(e,Qv)),t.b=new em(e,t.a))}function zv(t,e,n){t.b.set(e,n)}function Hv(t){return zv(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^xd()).toString(36)),t}function Gv(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Yv(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Kv),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Kv(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Vv.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Yv(e,Xv,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(Yv(e,Xv,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(Yv(n,"/"==n.charAt(0)?Zv:Jv,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",Yv(n,tm)),t.join("")};var Xv=/[#\/\?@]/g,Jv=/[#\?:]/g,Zv=/[#\?]/g,Qv=/[#\?@]/g,tm=/#/g;function em(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function nm(t){t.a||(t.a=new Pv,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function rm(t,e){nm(t),e=sm(t,e),jv(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,jv((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Lv(t)))}function im(t,e){return nm(t),e=sm(t,e),jv(t.a.b,e)}function om(t,e,n){rm(t,e),0<n.length&&(t.c=null,t.a.set(sm(t,e),Cd(n)),t.b+=n.length)}function sm(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function am(t,e){this.b=t,this.a=e}function um(t){this.g=t||cm,md.PerformanceNavigationTiming?t=0<(t=md.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(md.ca&&md.ca.ua&&md.ca.ua()&&md.ca.ua().mb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}(dd=em.prototype).add=function(t,e){nm(this),this.c=null,t=sm(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},dd.forEach=function(t,e){nm(this),this.a.forEach((function(n,r){Dd(n,(function(n){t.call(e,n,r,this)}),this)}),this)},dd.K=function(){nm(this);for(var t=this.a.I(),e=this.a.K(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},dd.I=function(t){nm(this);var e=[];if("string"==typeof t)im(this,t)&&(e=Rd(e,this.a.get(sm(this,t))));else{t=this.a.I();for(var n=0;n<t.length;n++)e=Rd(e,t[n])}return e},dd.set=function(t,e){return nm(this),this.c=null,im(this,t=sm(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},dd.get=function(t,e){return t&&0<(t=this.I(t)).length?String(t[0]):e},dd.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.K(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.I(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var cm=10;function lm(t){return!!t.b||!!t.a&&t.a.size>=t.f}function hm(t){return t.b?1:t.a?t.a.size:0}function fm(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function dm(t,e){t.a?t.a.add(e):t.b=e}function pm(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function vm(t){var e,n;if(null!=t.b)return t.c.concat(t.b.i);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=fd(t.a.values()),o=i.next();!o.done;o=i.next()){var s=o.value;r=r.concat(s.i)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return Cd(t.c)}function mm(){}function ym(){this.a=new mm}function gm(t,e,n){var r=n||"";try{Uv(t,(function(t,n){var i=t;_d(t)&&(i=Pp(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}}function bm(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}um.prototype.cancel=function(){var t,e;if(this.c=vm(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=fd(this.a.values()),r=n.next();!r.done;r=n.next()){r.value.cancel()}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},mm.prototype.stringify=function(t){return md.JSON.stringify(t,void 0)},mm.prototype.parse=function(t){return md.JSON.parse(t,void 0)};var _m=md.JSON.parse;function wm(t){Cp.call(this),this.headers=new Pv,this.G=t||null,this.b=!1,this.s=this.a=null,this.D="",this.h=0,this.f="",this.g=this.w=this.l=this.v=!1,this.o=0,this.m=null,this.H=Em,this.B=this.F=!1}Od(wm,Cp);var Em="",Im=/^https?$/i,Tm=["POST","PUT"];function km(t){return"content-type"==t.toLowerCase()}function Sm(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,xm(t),Am(t)}function xm(t){t.v||(t.v=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function Om(t){if(t.b&&void 0!==vd&&(!t.s[1]||4!=Dm(t)||2!=t.S()))if(t.l&&4==Dm(t))Yp(t.va,0,t);else if(t.dispatchEvent("readystatechange"),4==Dm(t)){t.b=!1;try{var e,n=t.S();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.D).match(Mv)[1]||null;if(!o&&md.self&&md.self.location){var s=md.self.location.protocol;o=s.substr(0,s.length-1)}i=!Im.test(o?o.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{t.h=6;try{var a=2<Dm(t)?t.a.statusText:""}catch(t){a=""}t.f=a+" ["+t.S()+"]",xm(t)}}finally{Am(t)}}}function Am(t,e){if(t.a){Nm(t);var n=t.a,r=t.s[0]?yd:null;t.a=null,t.s=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(t){}}}function Nm(t){t.a&&t.B&&(t.a.ontimeout=null),t.m&&(md.clearTimeout(t.m),t.m=null)}function Dm(t){return t.a?t.a.readyState:0}function Rm(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return $d(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):zv(t,e,n))}function Cm(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Um(t){this.f=[],this.R=this.ea=this.v=this.P=this.a=this.ha=this.s=this.N=this.h=this.F=this.j=null,this.Fa=this.H=0,this.Ca=Cm("failFast",!1,t),this.U=this.l=this.i=this.g=this.c=null,this.W=!0,this.A=this.ia=this.G=-1,this.J=this.m=this.o=0,this.Ba=Cm("baseRetryDelayMs",5e3,t),this.Ga=Cm("retryDelaySeedMs",1e4,t),this.Da=Cm("forwardChannelMaxRetries",2,t),this.ga=Cm("forwardChannelRequestTimeoutMs",2e4,t),this.Ea=t&&t.nb||void 0,this.D=void 0,this.w=t&&t.supportsCrossDomainXhr||!1,this.B="",this.b=new um(t&&t.concurrentRequestLimit),this.ja=new ym,this.fa=t&&t.fastHandshake||!1,t&&t.forceLongPolling&&(this.W=!1),this.O=void 0}function Pm(t){if(Lm(t),3==t.u){var e=t.H++,n=Fv(t.v);zv(n,"SID",t.B),zv(n,"RID",e),zv(n,"TYPE","terminate"),Fm(t,n),(e=new _v(t,e,void 0)).B=2,e.f=Hv(Fv(n)),n=!1,md.navigator&&md.navigator.sendBeacon&&(n=md.navigator.sendBeacon(e.f.toString(),"")),!n&&md.Image&&((new Image).src=e.f,n=!0),n||(e.a=Xm(e.g,null),e.a.$(e.f)),e.s=xd(),Ov(e)}Ym(t)}function Lm(t){t.a&&(t.a.cancel(),t.a=null),t.i&&(md.clearTimeout(t.i),t.i=null),qm(t),t.b.cancel(),t.g&&("number"==typeof t.g&&md.clearTimeout(t.g),t.g=null)}function jm(t,e){t.f.push(new am(t.Fa++,e)),3==t.u&&Mm(t)}function Mm(t){lm(t.b)||t.g||(t.g=!0,Bp(t.xa,t),t.o=0)}function Vm(t,e){var n;n=e?e.W:t.H++;var r=Fv(t.v);zv(r,"SID",t.B),zv(r,"RID",n),zv(r,"AID",t.G),Fm(t,r),t.h&&t.j&&Rm(r,t.h,t.j),n=new _v(t,n,t.o+1),null===t.h&&(n.m=t.j),e&&(t.f=e.i.concat(t.f)),e=$m(t,n,1e3),n.setTimeout(Math.round(.5*t.ga)+Math.round(.5*t.ga*Math.random())),dm(t.b,n),Tv(n,r,e)}function Fm(t,e){t.c&&Uv({},(function(t,n){zv(e,n,t)}))}function $m(t,e,n){n=Math.min(t.f.length,n);var r=t.c?kd(t.c.Ha,t.c,t):null;t:for(var i=t.f,o=-1;;){var s=["count="+n];-1==o?0<n?(o=i[0].b,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),a=!1;else try{gm(l,s,"req"+c+"_")}catch(t){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.f.splice(0,n),e.i=t,r}function Bm(t){t.a||t.i||(t.J=1,Bp(t.wa,t),t.m=0)}function Wm(t){return!(t.a||t.i||3<=t.m)&&(t.J++,t.i=cv(kd(t.wa,t),Hm(t,t.m)),t.m++,!0)}function qm(t){null!=t.l&&(md.clearTimeout(t.l),t.l=null)}function zm(t,e){var n=null;if(t.a==e){qm(t),t.a=null;var r=2}else{if(!fm(t.b,e))return;n=e.i,pm(t.b,e),r=1}if(t.A=e.H,0!=t.u)if(e.b)if(1==r){n=e.j?e.j.length:0,e=xd()-e.s;var i=t.o;(r=rv()).dispatchEvent(new uv(r,n,e,i)),Mm(t)}else Bm(t);else if(3==(i=e.c)||0==i&&0<t.A||!(1==r&&function(t,e){return!(hm(t.b)>=t.b.f-(t.g?1:0))&&(t.g?(t.f=e.i.concat(t.f),!0):!(1==t.u||2==t.u||t.o>=(t.Ca?0:t.Da))&&(t.g=cv(kd(t.xa,t,e),Hm(t,t.o)),t.o++,!0))}(t,e)||2==r&&Wm(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:Gm(t,5);break;case 4:Gm(t,10);break;case 3:Gm(t,6);break;default:Gm(t,2)}}function Hm(t,e){var n=t.Ba+Math.floor(Math.random()*t.Ga);return t.c||(n*=2),n*e}function Gm(t,e){if(2==e){var n=null;t.c&&(n=null);var r=kd(t.Ta,t);n||(n=new Vv("//www.google.com/images/cleardot.gif"),md.location&&"http"==md.location.protocol||$v(n,"https"),Hv(n)),function(t,e){var n=new ev;if(md.Image){var r=new Image;r.onload=Sd(bm,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Sd(bm,n,r,"TestLoadImage: error",!1,e),r.onabort=Sd(bm,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Sd(bm,n,r,"TestLoadImage: timeout",!1,e),md.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else av(2);t.u=0,t.c&&t.c.la(e),Ym(t),Lm(t)}function Ym(t){t.u=0,t.A=-1,t.c&&(0==vm(t.b).length&&0==t.f.length||(t.b.c.length=0,Cd(t.f),t.f.length=0),t.c.ka())}function Km(t,e,n){var r=function(t){return t instanceof Vv?Fv(t):new Vv(t,void 0)}(n);if(""!=r.c)e&&Bv(r,e+"."+r.c),Wv(r,r.h);else{var i=md.location;r=function(t,e,n,r){var i=new Vv(null,void 0);return t&&$v(i,t),e&&Bv(i,e),n&&Wv(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.N&&$d(t.N,(function(t,e){zv(r,e,t)})),e=t.s,n=t.ha,e&&n&&zv(r,e,n),zv(r,"VER",t.oa),Fm(t,r),r}function Xm(t,e){if(e&&!t.w)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new wm(t.Ea)).F=t.w,e}function Jm(){}function Zm(){if(Kd&&!(10<=Number(up)))throw Error("Environmental error: no available transport.")}function Qm(t,e){Cp.call(this),this.a=new Um(e),this.l=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.j=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.pa&&(t?t["X-WebChannel-Client-Profile"]=e.pa:t={"X-WebChannel-Client-Profile":e.pa}),this.a.F=t,(t=e&&e.httpHeadersOverwriteParam)&&!Ud(t)&&(this.a.h=t),this.h=e&&e.supportsCrossDomainXhr||!1,this.g=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Ud(e)&&(this.a.s=e,null!==(t=this.b)&&e in t&&(e in(t=this.b)&&delete t[e])),this.f=new ny(this)}function ty(t){yv.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function ey(){gv.call(this),this.status=1}function ny(t){this.a=t}(dd=wm.prototype).$=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+t);e=e?e.toUpperCase():"GET",this.D=t,this.f="",this.h=0,this.v=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.G?dv(this.G):dv(vv),this.a.onreadystatechange=kd(this.va,this);try{this.w=!0,this.a.open(e,String(t),!0),this.w=!1}catch(t){return void Sm(this,t)}t=n||"";var i=new Pv(this.headers);r&&Uv(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=km,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.K()),n=md.FormData&&t instanceof md.FormData,!(0<=Nd(Tm,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.H&&(this.a.responseType=this.H),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Nm(this),0<this.o&&((this.B=function(t){return Kd&&sp(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=kd(this.ta,this)):this.m=Yp(this.ta,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(t){Sm(this,t)}},dd.ta=function(){void 0!==vd&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},dd.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Am(this))},dd.C=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Am(this,!0)),wm.M.C.call(this)},dd.va=function(){this.j||(this.w||this.l||this.g?Om(this):this.Oa())},dd.Oa=function(){Om(this)},dd.S=function(){try{return 2<Dm(this)?this.a.status:-1}catch(t){return-1}},dd.Y=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},dd.Ja=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),_m(e)}},dd.qa=function(){return this.h},dd.Ma=function(){return"string"==typeof this.f?this.f:String(this.f)},(dd=Um.prototype).oa=8,dd.u=1,dd.xa=function(t){if(this.g)if(this.g=null,1==this.u){if(!t){this.H=Math.floor(1e5*Math.random());var e,n=new _v(this,t=this.H++,void 0),r=this.j;if(this.F&&(r?qd(r=Bd(r),this.F):r=this.F),null===this.h&&(n.m=r),this.fa)t:{for(var i=e=0;i<this.f.length;i++){var o=this.f[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.f.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=$m(this,n,e),zv(i=Fv(this.v),"RID",t),zv(i,"CVER",22),this.s&&zv(i,"X-HTTP-Session-Id",this.s),Fm(this,i),this.h&&r&&Rm(i,this.h,r),dm(this.b,n),this.fa?(zv(i,"$req",e),zv(i,"SID","null"),n.R=!0,Tv(n,i,null)):Tv(n,i,e),this.u=2}}else 3==this.u&&(t?Vm(this,t):0==this.f.length||lm(this.b)||Vm(this))},dd.wa=function(){this.i=null,this.a=new _v(this,"rpc",this.J),null===this.h&&(this.a.m=this.j),this.a.J=0;var t=Fv(this.ea);zv(t,"RID","rpc"),zv(t,"SID",this.B),zv(t,"CI",this.U?"0":"1"),zv(t,"AID",this.G),Fm(this,t),zv(t,"TYPE","xmlhttp"),this.h&&this.j&&Rm(t,this.h,this.j),this.D&&this.a.setTimeout(this.D);var e=this.a,n=this.R;e.B=1,e.f=Hv(Fv(t)),e.j=null,e.F=!0,kv(e,n)},dd.Na=function(){null!=this.l&&(this.l=null,this.a.cancel(),this.a=null,Wm(this),av(19))},dd.Ta=function(t){av(t?2:1)},(dd=Jm.prototype).na=function(){},dd.ma=function(){},dd.la=function(){},dd.ka=function(){},dd.Ha=function(){},Zm.prototype.a=function(t,e){return new Qm(t,e)},Od(Qm,Cp),(dd=Qm.prototype).addEventListener=function(t,e,n,r){Qm.M.addEventListener.call(this,t,e,n,r)},dd.removeEventListener=function(t,e,n,r){Qm.M.removeEventListener.call(this,t,e,n,r)},dd.Ka=function(){this.a.c=this.f,this.h&&(this.a.w=!0);var t=this.a,e=this.l,n=this.b||void 0;av(0),t.P=e,t.N=n||{},t.U=t.W,t.v=Km(t,null,t.P),Mm(t)},dd.close=function(){Pm(this.a)},dd.La=function(t){if("string"==typeof t){var e={};e.__data__=t,jm(this.a,e)}else this.g?((e={}).__data__=Pp(t),jm(this.a,e)):jm(this.a,t)},dd.C=function(){this.a.c=null,delete this.f,Pm(this.a),delete this.a,Qm.M.C.call(this)},Od(ty,yv),Od(ey,gv),Od(ny,Jm),ny.prototype.na=function(){this.a.dispatchEvent("a")},ny.prototype.ma=function(t){this.a.dispatchEvent(new ty(t))},ny.prototype.la=function(t){this.a.dispatchEvent(new ey(t))},ny.prototype.ka=function(){this.a.dispatchEvent("b")},Zm.prototype.createWebChannel=Zm.prototype.a,Qm.prototype.send=Qm.prototype.La,Qm.prototype.open=Qm.prototype.Ka,Qm.prototype.close=Qm.prototype.close,lv.NO_ERROR=0,lv.TIMEOUT=8,lv.HTTP_ERROR=6,hv.COMPLETE="complete",pv.EventType=mv,mv.OPEN="a",mv.CLOSE="b",mv.ERROR="c",mv.MESSAGE="d",Cp.prototype.listen=Cp.prototype.ra,wm.prototype.listenOnce=wm.prototype.sa,wm.prototype.getLastError=wm.prototype.Ma,wm.prototype.getLastErrorCode=wm.prototype.qa,wm.prototype.getStatus=wm.prototype.S,wm.prototype.getResponseJson=wm.prototype.Ja,wm.prototype.getResponseText=wm.prototype.Y,wm.prototype.send=wm.prototype.$;var ry={createWebChannelTransport:function(){return new Zm},ErrorCode:lv,EventType:hv,WebChannel:pv,XhrIo:wm},iy=Rt((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n,r=_i,i=(n=ad)&&"object"==typeof n&&"default"in n?n.default:n,o=sd,s=Yf,a=Kf,u=ry,c=i.SDK_VERSION,l=function(){function t(t){this.uid=t}return t.prototype.t=function(){return null!=this.uid},t.prototype.s=function(){return this.t()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();l.UNAUTHENTICATED=new l(null),l.i=new l("google-credentials-uid"),l.h=new l("first-party-uid");
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var h={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},f=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return r.__extends(e,t),e}(Error),d=function(t,e){this.user=e,this.type="OAuth",this.o={},this.o.Authorization="Bearer "+t},p=function(){function t(){this.u=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype._=function(){},t.prototype.l=function(t){this.u=t,t(l.UNAUTHENTICATED)},t.prototype.T=function(){this.u=null},t}(),v=function(){function t(t){var e=this;this.I=null,this.currentUser=l.UNAUTHENTICATED,this.R=!1,this.A=0,this.u=null,this.forceRefresh=!1,this.I=function(){e.A++,e.currentUser=e.m(),e.R=!0,e.u&&e.u(e.currentUser)},this.A=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.I):(this.I(null),t.get().then((function(t){e.auth=t,e.I&&e.auth.addAuthTokenListener(e.I)}),(function(){})))}return t.prototype.getToken=function(){var t=this,e=this.A,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.A!==e?(pe("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(ge("string"==typeof n.accessToken),new d(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype._=function(){this.forceRefresh=!0},t.prototype.l=function(t){this.u=t,this.R&&t(this.currentUser)},t.prototype.T=function(){this.auth&&this.auth.removeAuthTokenListener(this.I),this.I=null,this.u=null},t.prototype.m=function(){var t=this.auth&&this.auth.getUid();return ge(null===t||"string"==typeof t),new l(t)},t}(),m=function(){function t(t,e){this.P=t,this.V=e,this.type="FirstParty",this.user=l.h}return Object.defineProperty(t.prototype,"o",{get:function(){var t={"X-Goog-AuthUser":this.V},e=this.P.auth.g([]);return e&&(t.Authorization=e),t},enumerable:!0,configurable:!0}),t}(),y=function(){function t(t,e){this.P=t,this.V=e}return t.prototype.getToken=function(){return Promise.resolve(new m(this.P,this.V))},t.prototype.l=function(t){t(l.h)},t.prototype.T=function(){},t.prototype._=function(){},t}(),g=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new f(h.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new f(h.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new f(h.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new f(h.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.p=function(t){return this.seconds===t.seconds?we(this.nanoseconds,t.nanoseconds):we(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),b=function(){function t(t){this.timestamp=t}return t.v=function(e){return new t(e)},t.min=function(){return new t(new g(0,0))},t.prototype.S=function(t){return this.timestamp.p(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.D=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.C=function(){return this.timestamp},t}(),_=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&ye(),void 0===n?n=t.length-e:n>t.length-e&&ye(),this.segments=t,this.offset=e,this.F=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.F},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.N(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.k(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.M=function(t){return t=void 0===t?1:t,this.k(this.segments,this.offset+t,this.length-t)},t.prototype.$=function(){return this.k(this.segments,this.offset,this.length-1)},t.prototype.O=function(){return this.segments[this.offset]},t.prototype.L=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.B=function(){return 0===this.length},t.prototype.q=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.U=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.W=function(){return this.segments.slice(this.offset,this.limit())},t.N=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),w=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e.prototype.k=function(t,n,r){return new e(t,n,r)},e.prototype.j=function(){return this.W().join("/")},e.prototype.toString=function(){return this.j()},e.K=function(t){if(t.indexOf("//")>=0)throw new f(h.INVALID_ARGUMENT,"Invalid path ("+t+"). Paths must not contain // in them.");return new e(t.split("/").filter((function(t){return t.length>0})))},e}(_);w.G=new w([]);var E=/^[_a-zA-Z][_a-zA-Z0-9]*$/,I=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e.prototype.k=function(t,n,r){return new e(t,n,r)},e.H=function(t){return E.test(t)},e.prototype.j=function(){return this.W().map((function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),e.H(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.j()},e.prototype.Y=function(){return 1===this.length&&"__name__"===this.get(0)},e.J=function(){return new e(["__name__"])},e.X=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new f(h.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new f(h.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new f(h.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new f(h.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e}(_);I.G=new I([]);
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var T=function(){function t(t){this.path=t}return t.Z=function(e){return new t(w.K(e).M(5))},t.prototype.tt=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===w.N(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.N=function(t,e){return w.N(t.path,e.path)},t.et=function(t){return t.length%2==0},t.st=function(e){return new t(new w(e.slice()))},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function k(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function S(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function x(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */T.EMPTY=new T(new w([]));var O=function(){function t(t){this.it=t}return t.fromBase64String=function(e){return new t(he.nt().atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return he.nt().btoa(this.it)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.it)},t.prototype.rt=function(){return 2*this.it.length},t.prototype.S=function(t){return we(this.it,t.it)},t.prototype.isEqual=function(t){return this.it===t.it},t}();function A(t){return null==t}function N(t){return-0===t&&1/t==-1/0}function D(t){return"number"==typeof t&&Number.isInteger(t)&&!N(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function R(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function C(t){var e=$(t.mapValue.fields.__local_write_time__.timestampValue);return new g(e.seconds,e.nanos)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */O.ht=new O("");var U=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function P(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?R(t)?4:10:ye()}function L(t,e){var n=P(t);if(n!==P(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return C(t).isEqual(C(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=$(t.timestampValue),r=$(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return W(t.bytesValue).isEqual(W(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return B(t.geoPointValue.latitude)===B(e.geoPointValue.latitude)&&B(t.geoPointValue.longitude)===B(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return B(t.integerValue)===B(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=B(t.doubleValue),r=B(e.doubleValue);return n===r?N(n)===N(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Ee(t.arrayValue.values||[],e.arrayValue.values||[],L);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(k(n)!==k(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!L(n[i],r[i])))return!1;return!0}(t,e);default:return ye()}}function j(t,e){return void 0!==(t.values||[]).find((function(t){return L(t,e)}))}function M(t,e){var n=P(t),r=P(e);if(n!==r)return we(n,r);switch(n){case 0:return 0;case 1:return we(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=B(t.integerValue||t.doubleValue),r=B(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return V(t.timestampValue,e.timestampValue);case 4:return V(C(t),C(e));case 5:return we(t.stringValue,e.stringValue);case 6:return function(t,e){var n=W(t),r=W(e);return n.S(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=we(n[i],r[i]);if(0!==o)return o}return we(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=we(B(t.latitude),B(e.latitude));return 0!==n?n:we(B(t.longitude),B(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=M(n[i],r[i]);if(o)return o}return we(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=we(r[s],o[s]);if(0!==a)return a;var u=M(n[r[s]],i[o[s]]);if(0!==u)return u}return we(r.length,o.length)}(t.mapValue,e.mapValue);default:throw ye()}}function V(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return we(t,e);var n=$(t),r=$(e),i=we(n.seconds,r.seconds);return 0!==i?i:we(n.nanos,r.nanos)}function F(t){return function t(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(t){var e=$(t);return"time("+e.seconds+","+e.nanos+")"}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?W(e.bytesValue).toBase64():"referenceValue"in e?(r=e.referenceValue,T.Z(r).toString()):"geoPointValue"in e?"geo("+(n=e.geoPointValue).latitude+","+n.longitude+")":"arrayValue"in e?function(e){for(var n="[",r=!0,i=0,o=e.values||[];i<o.length;i++){var s=o[i];r?r=!1:n+=",",n+=t(s)}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){for(var n="{",r=!0,i=0,o=Object.keys(e.fields||{}).sort();i<o.length;i++){var s=o[i];r?r=!1:n+=",",n+=s+":"+t(e.fields[s])}return n+"}"}(e.mapValue):ye();var n,r}(t)}function $(t){if(ge(!!t),"string"==typeof t){var e=0,n=U.exec(t);if(ge(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:B(t.seconds),nanos:B(t.nanos)}}function B(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function W(t){return"string"==typeof t?O.fromBase64String(t):O.fromUint8Array(t)}function q(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.j()}}function z(t){return!!t&&"integerValue"in t}function H(t){return!!t&&"arrayValue"in t}function G(t){return!!t&&"nullValue"in t}function Y(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function K(t){return!!t&&"mapValue"in t}
/**
     * @license
     * Copyright 2018 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var X=function(){function t(){}return t.prototype.ot=function(t,e){return function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(e,t)},t.prototype.at=function(t,e){return e},t.prototype.ut=function(t){return null},t.prototype.isEqual=function(e){return e instanceof t},t}();X.instance=new X;var J=function(){function t(t){this.elements=t}return t.prototype.ot=function(t,e){return this.apply(t)},t.prototype.at=function(t,e){return this.apply(t)},t.prototype.apply=function(t){for(var e=tt(t),n=function(t){e.some((function(e){return L(e,t)}))||e.push(t)},r=0,i=this.elements;r<i.length;r++)n(i[r]);return{arrayValue:{values:e}}},t.prototype.ut=function(t){return null},t.prototype.isEqual=function(e){return e instanceof t&&Ee(this.elements,e.elements,L)},t}(),Z=function(){function t(t){this.elements=t}return t.prototype.ot=function(t,e){return this.apply(t)},t.prototype.at=function(t,e){return this.apply(t)},t.prototype.apply=function(t){for(var e=tt(t),n=function(t){e=e.filter((function(e){return!L(e,t)}))},r=0,i=this.elements;r<i.length;r++)n(i[r]);return{arrayValue:{values:e}}},t.prototype.ut=function(t){return null},t.prototype.isEqual=function(e){return e instanceof t&&Ee(this.elements,e.elements,L)},t}(),Q=function(){function t(t,e){this.serializer=t,this.ct=e}return t.prototype.ot=function(t,e){var n=this.ut(t),r=this.asNumber(n)+this.asNumber(this.ct);return z(n)&&z(this.ct)?this.serializer._t(r):this.serializer.lt(r)},t.prototype.at=function(t,e){return e},t.prototype.ut=function(t){return z(e=t)||function(t){return!!t&&"doubleValue"in t}(e)?t:{integerValue:0};var e},t.prototype.isEqual=function(e){return e instanceof t&&L(this.ct,e.ct)},t.prototype.asNumber=function(t){return B(t.integerValue||t.doubleValue)},t}();function tt(t){return H(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var et=function(){function t(t){this.fields=t,t.sort(I.N)}return t.prototype.dt=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].q(t))return!0;return!1},t.prototype.isEqual=function(t){return Ee(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),nt=function(){function t(t,e){this.field=t,this.transform=e}return t.prototype.isEqual=function(t){return this.field.isEqual(t.field)&&this.transform.isEqual(t.transform)},t}(),rt=function(t,e){this.version=t,this.transformResults=e},it=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.ft=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"Tt",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!0,configurable:!0}),t.prototype.Et=function(t){return void 0!==this.updateTime?t instanceof yt&&t.version.isEqual(this.updateTime):void 0===this.exists||this.exists===t instanceof yt},t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}(),ot=function(){function t(){}return t.prototype.It=function(t){},t.wt=function(t){return t instanceof yt?t.version:b.min()},t}(),st=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).key=e,i.value=n,i.Rt=r,i.type=0,i}return r.__extends(e,t),e.prototype.at=function(t,e){this.It(t);var n=e.version;return new yt(this.key,n,this.value,{hasCommittedMutations:!0})},e.prototype.ot=function(t,e,n){if(this.It(t),!this.Rt.Et(t))return t;var r=ot.wt(t);return new yt(this.key,r,this.value,{At:!0})},e.prototype.Pt=function(t){return null},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.value.isEqual(t.value)&&this.Rt.isEqual(t.Rt)},e}(ot),at=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this)||this).key=e,o.data=n,o.Vt=r,o.Rt=i,o.type=1,o}return r.__extends(e,t),e.prototype.at=function(t,e){if(this.It(t),!this.Rt.Et(t))return new bt(this.key,e.version);var n=this.gt(t);return new yt(this.key,e.version,n,{hasCommittedMutations:!0})},e.prototype.ot=function(t,e,n){if(this.It(t),!this.Rt.Et(t))return t;var r=ot.wt(t),i=this.gt(t);return new yt(this.key,r,i,{At:!0})},e.prototype.Pt=function(t){return null},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.Vt.isEqual(t.Vt)&&this.Rt.isEqual(t.Rt)},e.prototype.gt=function(t){var e;return e=t instanceof yt?t.data():ht.empty(),this.pt(e)},e.prototype.pt=function(t){var e=this,n=new ft(t);return this.Vt.fields.forEach((function(t){if(!t.B()){var r=e.data.field(t);null!==r?n.set(t,r):n.delete(t)}})),n.yt()},e}(ot),ut=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.fieldTransforms=n,r.type=2,r.Rt=it.exists(!0),r}return r.__extends(e,t),e.prototype.at=function(t,e){if(this.It(t),ge(null!=e.transformResults),!this.Rt.Et(t))return new bt(this.key,e.version);var n=this.bt(t),r=this.vt(t,e.transformResults),i=e.version,o=this.St(n.data(),r);return new yt(this.key,i,o,{hasCommittedMutations:!0})},e.prototype.ot=function(t,e,n){if(this.It(t),!this.Rt.Et(t))return t;var r=this.bt(t),i=this.Dt(n,t,e),o=this.St(r.data(),i);return new yt(this.key,r.version,o,{At:!0})},e.prototype.Pt=function(t){for(var e=null,n=0,r=this.fieldTransforms;n<r.length;n++){var i=r[n],o=t instanceof yt?t.field(i.field):void 0,s=i.transform.ut(o||null);null!=s&&(e=null==e?(new ft).set(i.field,s):e.set(i.field,s))}return e?e.yt():null},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&Ee(this.fieldTransforms,t.fieldTransforms,(function(t,e){return t.isEqual(e)}))&&this.Rt.isEqual(t.Rt)},e.prototype.bt=function(t){return t},e.prototype.vt=function(t,e){var n=[];ge(this.fieldTransforms.length===e.length);for(var r=0;r<e.length;r++){var i=this.fieldTransforms[r],o=i.transform,s=null;t instanceof yt&&(s=t.field(i.field)),n.push(o.at(s,e[r]))}return n},e.prototype.Dt=function(t,e,n){for(var r=[],i=0,o=this.fieldTransforms;i<o.length;i++){var s=o[i],a=s.transform,u=null;e instanceof yt&&(u=e.field(s.field)),null===u&&n instanceof yt&&(u=n.field(s.field)),r.push(a.ot(u,t))}return r},e.prototype.St=function(t,e){for(var n=new ft(t),r=0;r<this.fieldTransforms.length;r++){var i=this.fieldTransforms[r].field;n.set(i,e[r])}return n.yt()},e}(ot),ct=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Rt=n,r.type=3,r}return r.__extends(e,t),e.prototype.at=function(t,e){return this.It(t),new gt(this.key,e.version,{hasCommittedMutations:!0})},e.prototype.ot=function(t,e,n){return this.It(t),this.Rt.Et(t)?new gt(this.key,b.min()):t},e.prototype.Pt=function(t){return null},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.Rt.isEqual(t.Rt)},e}(ot),lt=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Rt=n,r.type=4,r}return r.__extends(e,t),e.prototype.at=function(t,e){ye()},e.prototype.ot=function(t,e,n){ye()},e.prototype.Pt=function(t){ye()},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.Rt.isEqual(t.Rt)},e}(ot),ht=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.B())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!K(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.L()])||null},t.prototype.isEqual=function(t){return L(this.proto,t.proto)},t}(),ft=function(){function t(t){void 0===t&&(t=ht.empty()),this.Ct=t,this.Ft=new Map}return t.prototype.set=function(t,e){return this.Nt(t,e),this},t.prototype.delete=function(t){return this.Nt(t,null),this},t.prototype.Nt=function(t,e){for(var n=this.Ft,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===P(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.L(),e)},t.prototype.yt=function(){var t=this.kt(I.G,this.Ft);return null!=t?new ht(t):this.Ct},t.prototype.kt=function(t,e){var n=this,r=!1,i=this.Ct.field(t),o=K(i)?Object.assign({},i.mapValue.fields):{};return e.forEach((function(e,i){if(e instanceof Map){var s=n.kt(t.child(i),e);null!=s&&(o[i]=s,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)})),r?{mapValue:{fields:o}}:null},t}();function dt(t){var e=[];return S(t.fields||{},(function(t,n){var r=new I([t]);if(K(n)){var i=dt(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++){var a=s[o];e.push(r.child(a))}}else e.push(r)})),new et(e)
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */}var pt,vt,mt=function(t,e){this.key=t,this.version=e},yt=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).Mt=r,o.At=!!i.At,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return r.__extends(e,t),e.prototype.field=function(t){return this.Mt.field(t)},e.prototype.data=function(){return this.Mt},e.prototype.xt=function(){return this.Mt.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.At===t.At&&this.hasCommittedMutations===t.hasCommittedMutations&&this.Mt.isEqual(t.Mt)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.Mt.toString()+", {hasLocalMutations: "+this.At+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.At||this.hasCommittedMutations},enumerable:!0,configurable:!0}),e}(mt),gt=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return r.__extends(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(mt),bt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(mt),_t=function(){function t(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.$t=null}return t.prototype.canonicalId=function(){if(null===this.$t){var t=this.path.j();null!==this.collectionGroup&&(t+="|cg:"+this.collectionGroup),t+="|f:",t+=this.filters.map((function(t){return t.canonicalId()})).join(","),t+="|ob:",t+=this.orderBy.map((function(t){return t.canonicalId()})).join(","),A(this.limit)||(t+="|l:",t+=this.limit),this.startAt&&(t+="|lb:",t+=this.startAt.canonicalId()),this.endAt&&(t+="|ub:",t+=this.endAt.canonicalId()),this.$t=t}return this.$t},t.prototype.toString=function(){var t=this.path.j();return null!==this.collectionGroup&&(t+=" collectionGroup="+this.collectionGroup),this.filters.length>0&&(t+=", filters: ["+this.filters.join(", ")+"]"),A(this.limit)||(t+=", limit: "+this.limit),this.orderBy.length>0&&(t+=", orderBy: ["+this.orderBy.join(", ")+"]"),this.startAt&&(t+=", startAt: "+this.startAt.canonicalId()),this.endAt&&(t+=", endAt: "+this.endAt.canonicalId()),"Target("+t+")"},t.prototype.isEqual=function(t){if(this.limit!==t.limit)return!1;if(this.orderBy.length!==t.orderBy.length)return!1;for(var e=0;e<this.orderBy.length;e++)if(!this.orderBy[e].isEqual(t.orderBy[e]))return!1;if(this.filters.length!==t.filters.length)return!1;for(var n=0;n<this.filters.length;n++)if(!this.filters[n].isEqual(t.filters[n]))return!1;return this.collectionGroup===t.collectionGroup&&!!this.path.isEqual(t.path)&&!!(null!==this.startAt?this.startAt.isEqual(t.startAt):null===t.startAt)&&(null!==this.endAt?this.endAt.isEqual(t.endAt):null===t.endAt)},t.prototype.Ot=function(){return T.et(this.path)&&null===this.collectionGroup&&0===this.filters.length},t}(),wt=function(){function t(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.Lt=n,this.filters=r,this.limit=i,this.Bt=o,this.startAt=s,this.endAt=a,this.qt=null,this.Ut=null,this.startAt&&this.Qt(this.startAt),this.endAt&&this.Qt(this.endAt)}return t.Wt=function(e){return new t(e)},Object.defineProperty(t.prototype,"orderBy",{get:function(){if(null===this.qt){this.qt=[];var t=this.jt(),e=this.Kt();if(null!==t&&null===e)t.Y()||this.qt.push(new At(t)),this.qt.push(new At(I.J(),"asc"));else{for(var n=!1,r=0,i=this.Lt;r<i.length;r++){var o=i[r];this.qt.push(o),o.field.Y()&&(n=!0)}if(!n){var s=this.Lt.length>0?this.Lt[this.Lt.length-1].dir:"asc";this.qt.push(new At(I.J(),s))}}}return this.qt},enumerable:!0,configurable:!0}),t.prototype.Gt=function(e){var n=this.filters.concat([e]);return new t(this.path,this.collectionGroup,this.Lt.slice(),n,this.limit,this.Bt,this.startAt,this.endAt)},t.prototype.zt=function(e){var n=this.Lt.concat([e]);return new t(this.path,this.collectionGroup,n,this.filters.slice(),this.limit,this.Bt,this.startAt,this.endAt)},t.prototype.Ht=function(e){return new t(this.path,this.collectionGroup,this.Lt.slice(),this.filters.slice(),e,"F",this.startAt,this.endAt)},t.prototype.Yt=function(e){return new t(this.path,this.collectionGroup,this.Lt.slice(),this.filters.slice(),e,"L",this.startAt,this.endAt)},t.prototype.Jt=function(e){return new t(this.path,this.collectionGroup,this.Lt.slice(),this.filters.slice(),this.limit,this.Bt,e,this.endAt)},t.prototype.Xt=function(e){return new t(this.path,this.collectionGroup,this.Lt.slice(),this.filters.slice(),this.limit,this.Bt,this.startAt,e)},t.prototype.Zt=function(e){return new t(e,null,this.Lt.slice(),this.filters.slice(),this.limit,this.Bt,this.startAt,this.endAt)},t.prototype.te=function(){return 0===this.filters.length&&null===this.limit&&null==this.startAt&&null==this.endAt&&(0===this.Lt.length||1===this.Lt.length&&this.Lt[0].field.Y())},t.prototype.canonicalId=function(){return this.ee().canonicalId()+"|lt:"+this.Bt},t.prototype.toString=function(){return"Query(target="+this.ee().toString()+"; limitType="+this.Bt+")"},t.prototype.isEqual=function(t){return this.ee().isEqual(t.ee())&&this.Bt===t.Bt},t.prototype.se=function(t,e){for(var n=!1,r=0,i=this.orderBy;r<i.length;r++){var o=i[r],s=o.compare(t,e);if(0!==s)return s;n=n||o.field.Y()}return 0},t.prototype.matches=function(t){return this.ie(t)&&this.ne(t)&&this.re(t)&&this.he(t)},t.prototype.oe=function(){return!A(this.limit)&&"F"===this.Bt},t.prototype.ae=function(){return!A(this.limit)&&"L"===this.Bt},t.prototype.Kt=function(){return this.Lt.length>0?this.Lt[0].field:null},t.prototype.jt=function(){for(var t=0,e=this.filters;t<e.length;t++){var n=e[t];if(n instanceof Et&&n.ue())return n.field}return null},t.prototype.ce=function(t){for(var e=0,n=this.filters;e<n.length;e++){var r=n[e];if(r instanceof Et&&t.indexOf(r.op)>=0)return r.op}return null},t.prototype.Ot=function(){return this.ee().Ot()},t.prototype._e=function(){return null!==this.collectionGroup},t.prototype.ee=function(){if(!this.Ut)if("F"===this.Bt)this.Ut=new _t(this.path,this.collectionGroup,this.orderBy,this.filters,this.limit,this.startAt,this.endAt);else{for(var t=[],e=0,n=this.orderBy;e<n.length;e++){var r=n[e],i="desc"===r.dir?"asc":"desc";t.push(new At(r.field,i))}var o=this.endAt?new Ot(this.endAt.position,!this.endAt.before):null,s=this.startAt?new Ot(this.startAt.position,!this.startAt.before):null;this.Ut=new _t(this.path,this.collectionGroup,t,this.filters,this.limit,o,s)}return this.Ut},t.prototype.ie=function(t){var e=t.key.path;return null!==this.collectionGroup?t.key.tt(this.collectionGroup)&&this.path.q(e):T.et(this.path)?this.path.isEqual(e):this.path.U(e)},t.prototype.ne=function(t){for(var e=0,n=this.Lt;e<n.length;e++){var r=n[e];if(!r.field.Y()&&null===t.field(r.field))return!1}return!0},t.prototype.re=function(t){for(var e=0,n=this.filters;e<n.length;e++)if(!n[e].matches(t))return!1;return!0},t.prototype.he=function(t){return!(this.startAt&&!this.startAt.le(this.orderBy,t)||this.endAt&&this.endAt.le(this.orderBy,t))},t.prototype.Qt=function(t){},t}(),Et=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return r.__extends(e,t),e.create=function(t,n,r){if(t.Y())return"in"===n?new Tt(t,r):new It(t,n,r);if(G(r)){if("=="!==n)throw new f(h.INVALID_ARGUMENT,"Invalid query. Null supports only equality comparisons.");return new e(t,n,r)}if(Y(r)){if("=="!==n)throw new f(h.INVALID_ARGUMENT,"Invalid query. NaN supports only equality comparisons.");return new e(t,n,r)}return"array-contains"===n?new kt(t,r):"in"===n?new St(t,r):"array-contains-any"===n?new xt(t,r):new e(t,n,r)},e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&P(this.value)===P(e)&&this.de(M(e,this.value))},e.prototype.de=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case">":return t>0;case">=":return t>=0;default:return ye()}},e.prototype.ue=function(){return["<","<=",">",">="].indexOf(this.op)>=0},e.prototype.canonicalId=function(){return this.field.j()+this.op.toString()+F(this.value)},e.prototype.isEqual=function(t){return t instanceof e&&this.op===t.op&&this.field.isEqual(t.field)&&L(this.value,t.value)},e.prototype.toString=function(){return this.field.j()+" "+this.op+" "+F(this.value)},e}((function(){})),It=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=T.Z(r.referenceValue),i}return r.__extends(e,t),e.prototype.matches=function(t){var e=T.N(t.key,this.key);return this.de(e)},e}(Et),Tt=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=(n.arrayValue.values||[]).map((function(t){return T.Z(t.referenceValue)})),r}return r.__extends(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Et),kt=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return r.__extends(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return H(e)&&j(e.arrayValue,this.value)},e}(Et),St=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return r.__extends(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&j(this.value.arrayValue,e)},e}(Et),xt=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return r.__extends(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!H(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return j(e.value.arrayValue,t)}))},e}(Et),Ot=function(){function t(t,e){this.position=t,this.before=e}return t.prototype.canonicalId=function(){return(this.before?"b":"a")+":"+this.position.map((function(t){return F(t)})).join(",")},t.prototype.le=function(t,e){for(var n=0,r=0;r<this.position.length;r++){var i=t[r],o=this.position[r];if(n=i.field.Y()?T.N(T.Z(o.referenceValue),e.key):M(o,e.field(i.field)),"desc"===i.dir&&(n*=-1),0!==n)break}return this.before?n<=0:n<0},t.prototype.isEqual=function(t){if(null===t)return!1;if(this.before!==t.before||this.position.length!==t.position.length)return!1;for(var e=0;e<this.position.length;e++)if(!L(this.position[e],t.position[e]))return!1;return!0},t}(),At=function(){function t(t,e){this.field=t,void 0===e&&(e="asc"),this.dir=e,this.fe=t.Y()}return t.prototype.compare=function(t,e){var n=this.fe?T.N(t.key,e.key):function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?M(r,i):ye()}(this.field,t,e);switch(this.dir){case"asc":return n;case"desc":return-1*n;default:return ye()}},t.prototype.canonicalId=function(){return this.field.j()+this.dir.toString()},t.prototype.toString=function(){return this.field.j()+" ("+this.dir+")"},t.prototype.isEqual=function(t){return this.dir===t.dir&&this.field.isEqual(t.field)},t}(),Nt=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=b.min()),void 0===o&&(o=b.min()),void 0===s&&(s=O.ht),this.target=t,this.targetId=e,this.Te=n,this.sequenceNumber=r,this.Ee=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.Ie=function(e){return new t(this.target,this.targetId,this.Te,e,this.Ee,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.we=function(e,n){return new t(this.target,this.targetId,this.Te,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.Re=function(e){return new t(this.target,this.targetId,this.Te,this.sequenceNumber,this.Ee,e,this.resumeToken)},t}(),Dt=function(t){this.count=t};function Rt(t){switch(t){case h.OK:return ye();case h.CANCELLED:case h.UNKNOWN:case h.DEADLINE_EXCEEDED:case h.RESOURCE_EXHAUSTED:case h.INTERNAL:case h.UNAVAILABLE:case h.UNAUTHENTICATED:return!1;case h.INVALID_ARGUMENT:case h.NOT_FOUND:case h.ALREADY_EXISTS:case h.PERMISSION_DENIED:case h.FAILED_PRECONDITION:case h.ABORTED:case h.OUT_OF_RANGE:case h.UNIMPLEMENTED:case h.DATA_LOSS:return!0;default:return ye()}}function Ct(t){if(void 0===t)return ve("GRPC error has no .code"),h.UNKNOWN;switch(t){case pt.OK:return h.OK;case pt.CANCELLED:return h.CANCELLED;case pt.UNKNOWN:return h.UNKNOWN;case pt.DEADLINE_EXCEEDED:return h.DEADLINE_EXCEEDED;case pt.RESOURCE_EXHAUSTED:return h.RESOURCE_EXHAUSTED;case pt.INTERNAL:return h.INTERNAL;case pt.UNAVAILABLE:return h.UNAVAILABLE;case pt.UNAUTHENTICATED:return h.UNAUTHENTICATED;case pt.INVALID_ARGUMENT:return h.INVALID_ARGUMENT;case pt.NOT_FOUND:return h.NOT_FOUND;case pt.ALREADY_EXISTS:return h.ALREADY_EXISTS;case pt.PERMISSION_DENIED:return h.PERMISSION_DENIED;case pt.FAILED_PRECONDITION:return h.FAILED_PRECONDITION;case pt.ABORTED:return h.ABORTED;case pt.OUT_OF_RANGE:return h.OUT_OF_RANGE;case pt.UNIMPLEMENTED:return h.UNIMPLEMENTED;case pt.DATA_LOSS:return h.DATA_LOSS;default:return ye()}}(vt=pt||(pt={}))[vt.OK=0]="OK",vt[vt.CANCELLED=1]="CANCELLED",vt[vt.UNKNOWN=2]="UNKNOWN",vt[vt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",vt[vt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",vt[vt.NOT_FOUND=5]="NOT_FOUND",vt[vt.ALREADY_EXISTS=6]="ALREADY_EXISTS",vt[vt.PERMISSION_DENIED=7]="PERMISSION_DENIED",vt[vt.UNAUTHENTICATED=16]="UNAUTHENTICATED",vt[vt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",vt[vt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",vt[vt.ABORTED=10]="ABORTED",vt[vt.OUT_OF_RANGE=11]="OUT_OF_RANGE",vt[vt.UNIMPLEMENTED=12]="UNIMPLEMENTED",vt[vt.INTERNAL=13]="INTERNAL",vt[vt.UNAVAILABLE=14]="UNAVAILABLE",vt[vt.DATA_LOSS=15]="DATA_LOSS";
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var Ut=function(){function t(t,e){this.N=t,this.root=e||Lt.EMPTY}return t.prototype.Ae=function(e,n){return new t(this.N,this.root.Ae(e,n,this.N).me(null,null,Lt.Pe,null,null))},t.prototype.remove=function(e){return new t(this.N,this.root.remove(e,this.N).me(null,null,Lt.Pe,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.B();){var n=this.N(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.B();){var r=this.N(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.B=function(){return this.root.B()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!0,configurable:!0}),t.prototype.Ve=function(){return this.root.Ve()},t.prototype.ge=function(){return this.root.ge()},t.prototype.pe=function(t){return this.root.pe(t)},t.prototype.forEach=function(t){this.pe((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.pe((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.ye=function(t){return this.root.ye(t)},t.prototype.be=function(){return new Pt(this.root,null,this.N,!1)},t.prototype.ve=function(t){return new Pt(this.root,t,this.N,!1)},t.prototype.Se=function(){return new Pt(this.root,null,this.N,!0)},t.prototype.De=function(t){return new Pt(this.root,t,this.N,!0)},t}(),Pt=function(){function t(t,e,n,r){this.Ce=r,this.Fe=[];for(var i=1;!t.B();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.Ce?t.left:t.right;else{if(0===i){this.Fe.push(t);break}this.Fe.push(t),t=this.Ce?t.right:t.left}}return t.prototype.Ne=function(){var t=this.Fe.pop(),e={key:t.key,value:t.value};if(this.Ce)for(t=t.left;!t.B();)this.Fe.push(t),t=t.right;else for(t=t.right;!t.B();)this.Fe.push(t),t=t.left;return e},t.prototype.ke=function(){return this.Fe.length>0},t.prototype.Me=function(){if(0===this.Fe.length)return null;var t=this.Fe[this.Fe.length-1];return{key:t.key,value:t.value}},t}(),Lt=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.me=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.B=function(){return!1},t.prototype.pe=function(t){return this.left.pe(t)||t(this.key,this.value)||this.right.pe(t)},t.prototype.ye=function(t){return this.right.ye(t)||t(this.key,this.value)||this.left.ye(t)},t.prototype.min=function(){return this.left.B()?this:this.left.min()},t.prototype.Ve=function(){return this.min().key},t.prototype.ge=function(){return this.right.B()?this.key:this.right.ge()},t.prototype.Ae=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.me(null,null,null,r.left.Ae(t,e,n),null):0===i?r.me(null,e,null,null,null):r.me(null,null,null,null,r.right.Ae(t,e,n))).xe()},t.prototype.$e=function(){if(this.left.B())return t.EMPTY;var e=this;return e.left.Oe()||e.left.left.Oe()||(e=e.Le()),(e=e.me(null,null,null,e.left.$e(),null)).xe()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.B()||i.left.Oe()||i.left.left.Oe()||(i=i.Le()),i=i.me(null,null,null,i.left.remove(e,n),null);else{if(i.left.Oe()&&(i=i.Be()),i.right.B()||i.right.Oe()||i.right.left.Oe()||(i=i.qe()),0===n(e,i.key)){if(i.right.B())return t.EMPTY;r=i.right.min(),i=i.me(r.key,r.value,null,null,i.right.$e())}i=i.me(null,null,null,null,i.right.remove(e,n))}return i.xe()},t.prototype.Oe=function(){return this.color},t.prototype.xe=function(){var t=this;return t.right.Oe()&&!t.left.Oe()&&(t=t.Ue()),t.left.Oe()&&t.left.left.Oe()&&(t=t.Be()),t.left.Oe()&&t.right.Oe()&&(t=t.Qe()),t},t.prototype.Le=function(){var t=this.Qe();return t.right.left.Oe()&&(t=(t=(t=t.me(null,null,null,null,t.right.Be())).Ue()).Qe()),t},t.prototype.qe=function(){var t=this.Qe();return t.left.left.Oe()&&(t=(t=t.Be()).Qe()),t},t.prototype.Ue=function(){var e=this.me(null,null,t.RED,null,this.right.left);return this.right.me(null,null,this.color,e,null)},t.prototype.Be=function(){var e=this.me(null,null,t.RED,this.left.right,null);return this.left.me(null,null,this.color,null,e)},t.prototype.Qe=function(){var t=this.left.me(null,null,!this.left.color,null,null),e=this.right.me(null,null,!this.right.color,null,null);return this.me(null,null,!this.color,t,e)},t.prototype.We=function(){var t=this.je();return Math.pow(2,t)<=this.size+1},t.prototype.je=function(){if(this.Oe()&&this.left.Oe())throw ye();if(this.right.Oe())throw ye();var t=this.left.je();if(t!==this.right.je())throw ye();return t+(this.Oe()?0:1)},t}();Lt.EMPTY=null,Lt.RED=!0,Lt.Pe=!1,Lt.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw ye()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw ye()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw ye()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw ye()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw ye()},enumerable:!0,configurable:!0}),t.prototype.me=function(t,e,n,r,i){return this},t.prototype.Ae=function(t,e,n){return new Lt(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.B=function(){return!0},t.prototype.pe=function(t){return!1},t.prototype.ye=function(t){return!1},t.prototype.Ve=function(){return null},t.prototype.ge=function(){return null},t.prototype.Oe=function(){return!1},t.prototype.We=function(){return!0},t.prototype.je=function(){return 0},t}());
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var jt=function(){function t(t){this.N=t,this.data=new Ut(this.N)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.Ve()},t.prototype.last=function(){return this.data.ge()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!0,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.pe((function(e,n){return t(e),!1}))},t.prototype.Ke=function(t,e){for(var n=this.data.ve(t[0]);n.ke();){var r=n.Ne();if(this.N(r.key,t[1])>=0)return;e(r.key)}},t.prototype.Ge=function(t,e){var n;for(n=void 0!==e?this.data.ve(e):this.data.be();n.ke();)if(!t(n.Ne().key))return},t.prototype.ze=function(t){var e=this.data.ve(t);return e.ke()?e.Ne().key:null},t.prototype.be=function(){return new Mt(this.data.be())},t.prototype.ve=function(t){return new Mt(this.data.ve(t))},t.prototype.add=function(t){return this.me(this.data.remove(t).Ae(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.me(this.data.remove(t)):this},t.prototype.B=function(){return this.data.B()},t.prototype.He=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.be(),r=e.data.be();n.ke();){var i=n.Ne().key,o=r.Ne().key;if(0!==this.N(i,o))return!1}return!0},t.prototype.W=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.me=function(e){var n=new t(this.N);return n.data=e,n},t}(),Mt=function(){function t(t){this.Ye=t}return t.prototype.Ne=function(){return this.Ye.Ne().key},t.prototype.ke=function(){return this.Ye.ke()},t}(),Vt=new Ut(T.N);function Ft(){return Vt}function $t(){return Ft()}var Bt=new Ut(T.N);function Wt(){return Bt}var qt=new Ut(T.N),zt=new jt(T.N);function Ht(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=zt,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Gt=new jt(we);function Yt(){return Gt}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Kt=function(){function t(t){this.N=t?function(e,n){return t(e,n)||T.N(e.key,n.key)}:function(t,e){return T.N(t.key,e.key)},this.Je=Wt(),this.Xe=new Ut(this.N)}return t.Ze=function(e){return new t(e.N)},t.prototype.has=function(t){return null!=this.Je.get(t)},t.prototype.get=function(t){return this.Je.get(t)},t.prototype.first=function(){return this.Xe.Ve()},t.prototype.last=function(){return this.Xe.ge()},t.prototype.B=function(){return this.Xe.B()},t.prototype.indexOf=function(t){var e=this.Je.get(t);return e?this.Xe.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.Xe.size},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t){this.Xe.pe((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.me(e.Je.Ae(t.key,t),e.Xe.Ae(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.me(this.Je.remove(t),this.Xe.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.Xe.be(),r=e.Xe.be();n.ke();){var i=n.Ne().key,o=r.Ne().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.me=function(e,n){var r=new t;return r.N=this.N,r.Je=e,r.Xe=n,r},t}(),Xt=function(){function t(){this.ts=new Ut(T.N)}return t.prototype.track=function(t){var e=t.doc.key,n=this.ts.get(e);n?0!==t.type&&3===n.type?this.ts=this.ts.Ae(e,t):3===t.type&&1!==n.type?this.ts=this.ts.Ae(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.ts=this.ts.Ae(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.ts=this.ts.Ae(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.ts=this.ts.remove(e):1===t.type&&2===n.type?this.ts=this.ts.Ae(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.ts=this.ts.Ae(e,{type:2,doc:t.doc}):ye():this.ts=this.ts.Ae(e,t)},t.prototype.es=function(){var t=[];return this.ts.pe((function(e,n){t.push(n)})),t},t}(),Jt=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.ss=n,this.docChanges=r,this.ns=i,this.fromCache=o,this.rs=s,this.hs=a}return t.os=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,Kt.Ze(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.ns.B()},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.rs===t.rs&&this.ns.isEqual(t.ns)&&this.query.isEqual(t.query)&&this.docs.isEqual(t.docs)&&this.ss.isEqual(t.ss)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),Zt=function(){function t(t,e,n,r,i){this.Ee=t,this.as=e,this.us=n,this.cs=r,this._s=i}return t.ls=function(e,n){var r=new Map;return r.set(e,Qt.ds(e,n)),new t(b.min(),r,Yt(),Ft(),Ht())},t}(),Qt=function(){function t(t,e,n,r,i){this.resumeToken=t,this.fs=e,this.Ts=n,this.Es=r,this.Is=i}return t.ds=function(e,n){return new t(O.ht,n,Ht(),Ht(),Ht())},t}(),te=function(t,e,n,r){this.ws=t,this.removedTargetIds=e,this.key=n,this.Rs=r},ee=function(t,e){this.targetId=t,this.As=e},ne=function(t,e,n,r){void 0===n&&(n=O.ht),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},re=function(){function t(){this.ms=0,this.Ps=se(),this.Vs=O.ht,this.gs=!1,this.ps=!0}return Object.defineProperty(t.prototype,"fs",{get:function(){return this.gs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.Vs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ys",{get:function(){return 0!==this.ms},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bs",{get:function(){return this.ps},enumerable:!0,configurable:!0}),t.prototype.vs=function(t){t.rt()>0&&(this.ps=!0,this.Vs=t)},t.prototype.Ss=function(){var t=Ht(),e=Ht(),n=Ht();return this.Ps.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:ye()}})),new Qt(this.Vs,this.gs,t,e,n)},t.prototype.Ds=function(){this.ps=!1,this.Ps=se()},t.prototype.Cs=function(t,e){this.ps=!0,this.Ps=this.Ps.Ae(t,e)},t.prototype.Fs=function(t){this.ps=!0,this.Ps=this.Ps.remove(t)},t.prototype.Ns=function(){this.ms+=1},t.prototype.ks=function(){this.ms-=1},t.prototype.Ms=function(){this.ps=!0,this.gs=!0},t}(),ie=function(){function t(t){this.xs=t,this.$s=new Map,this.Os=Ft(),this.Ls=oe(),this.Bs=new jt(we)}return t.prototype.qs=function(t){for(var e=0,n=t.ws;e<n.length;e++){var r=n[e];t.Rs instanceof yt?this.Us(r,t.Rs):t.Rs instanceof gt&&this.Qs(r,t.key,t.Rs)}for(var i=0,o=t.removedTargetIds;i<o.length;i++){var s=o[i];this.Qs(s,t.key,t.Rs)}},t.prototype.Ws=function(t){var e=this;this.js(t,(function(n){var r=e.Ks(n);switch(t.state){case 0:e.Gs(n)&&r.vs(t.resumeToken);break;case 1:r.ks(),r.ys||r.Ds(),r.vs(t.resumeToken);break;case 2:r.ks(),r.ys||e.removeTarget(n);break;case 3:e.Gs(n)&&(r.Ms(),r.vs(t.resumeToken));break;case 4:e.Gs(n)&&(e.zs(n),r.vs(t.resumeToken));break;default:ye()}}))},t.prototype.js=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.$s.forEach((function(t,r){n.Gs(r)&&e(r)}))},t.prototype.Hs=function(t){var e=t.targetId,n=t.As.count,r=this.Ys(e);if(r){var i=r.target;if(i.Ot())if(0===n){var o=new T(i.path);this.Qs(e,o,new gt(o,b.min()))}else ge(1===n);else this.Js(e)!==n&&(this.zs(e),this.Bs=this.Bs.add(e))}},t.prototype.Xs=function(t){var e=this,n=new Map;this.$s.forEach((function(r,i){var o=e.Ys(i);if(o){if(r.fs&&o.target.Ot()){var s=new T(o.target.path);null!==e.Os.get(s)||e.Zs(i,s)||e.Qs(i,s,new gt(s,t))}r.bs&&(n.set(i,r.Ss()),r.Ds())}}));var r=Ht();this.Ls.forEach((function(t,n){var i=!0;n.Ge((function(t){var n=e.Ys(t);return!n||2===n.Te||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new Zt(t,n,this.Bs,this.Os,r);return this.Os=Ft(),this.Ls=oe(),this.Bs=new jt(we),i},t.prototype.Us=function(t,e){if(this.Gs(t)){var n=this.Zs(t,e.key)?2:0;this.Ks(t).Cs(e.key,n),this.Os=this.Os.Ae(e.key,e),this.Ls=this.Ls.Ae(e.key,this.ti(e.key).add(t))}},t.prototype.Qs=function(t,e,n){if(this.Gs(t)){var r=this.Ks(t);this.Zs(t,e)?r.Cs(e,1):r.Fs(e),this.Ls=this.Ls.Ae(e,this.ti(e).delete(t)),n&&(this.Os=this.Os.Ae(e,n))}},t.prototype.removeTarget=function(t){this.$s.delete(t)},t.prototype.Js=function(t){var e=this.Ks(t).Ss();return this.xs.ei(t).size+e.Ts.size-e.Is.size},t.prototype.Ns=function(t){this.Ks(t).Ns()},t.prototype.Ks=function(t){var e=this.$s.get(t);return e||(e=new re,this.$s.set(t,e)),e},t.prototype.ti=function(t){var e=this.Ls.get(t);return e||(e=new jt(we),this.Ls=this.Ls.Ae(t,e)),e},t.prototype.Gs=function(t){var e=null!==this.Ys(t);return e||pe("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.Ys=function(t){var e=this.$s.get(t);return e&&e.ys?null:this.xs.si(t)},t.prototype.zs=function(t){var e=this;this.$s.set(t,new re),this.xs.ei(t).forEach((function(n){e.Qs(t,n,null)}))},t.prototype.Zs=function(t,e){return this.xs.ei(t).has(e)},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function oe(){return new Ut(T.N)}function se(){return new Ut(T.N)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var ae={asc:"ASCENDING",desc:"DESCENDING"},ue={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ce=function(){function t(t,e){this.ii=t,this.options=e}return t.prototype.ni=function(t){var e=void 0===t.code?h.UNKNOWN:Ct(t.code);return new f(e,t.message||"")},t.prototype.ri=function(t){return this.options.hi||A(t)?t:{value:t}},t.prototype.oi=function(t){var e;return A(e="object"==typeof t?t.value:t)?null:e},t.prototype._t=function(t){return{integerValue:""+t}},t.prototype.lt=function(t){if(this.options.hi){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:N(t)?"-0":t}},t.prototype.ai=function(t){return D(t)?this._t(t):this.lt(t)},t.prototype.C=function(t){return this.options.hi?new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+t.nanoseconds).slice(-9)+"Z":{seconds:""+t.seconds,nanos:t.nanoseconds}},t.prototype.v=function(t){var e=$(t);return new g(e.seconds,e.nanos)},t.prototype.ui=function(t){return this.options.hi?t.toBase64():t.toUint8Array()},t.prototype.ci=function(t){return this.options.hi?(ge(void 0===t||"string"==typeof t),O.fromBase64String(t||"")):(ge(void 0===t||t instanceof Uint8Array),O.fromUint8Array(t||new Uint8Array))},t.prototype.toVersion=function(t){return this.C(t.C())},t.prototype.fromVersion=function(t){return ge(!!t),b.v(this.v(t))},t.prototype._i=function(t,e){return this.li(e||this.ii).child("documents").child(t).j()},t.prototype.di=function(t){var e=w.K(t);return ge(le(e)),e},t.prototype.fi=function(t){return this._i(t.path)},t.prototype.Z=function(t){var e=this.di(t);return ge(e.get(1)===this.ii.projectId),ge(!e.get(3)&&!this.ii.database||e.get(3)===this.ii.database),new T(this.Ti(e))},t.prototype.Ei=function(t){return this._i(t)},t.prototype.Ii=function(t){var e=this.di(t);return 4===e.length?w.G:this.Ti(e)},Object.defineProperty(t.prototype,"wi",{get:function(){return new w(["projects",this.ii.projectId,"databases",this.ii.database]).j()},enumerable:!0,configurable:!0}),t.prototype.li=function(t){return new w(["projects",t.projectId,"databases",t.database])},t.prototype.Ti=function(t){return ge(t.length>4&&"documents"===t.get(4)),t.M(5)},t.prototype.Ri=function(t,e){return{name:this.fi(t),fields:e.proto.mapValue.fields}},t.prototype.Ai=function(t){return{name:this.fi(t.key),fields:t.xt().mapValue.fields,updateTime:this.C(t.version.C())}},t.prototype.mi=function(t,e){var n=this.Z(t.name),r=this.fromVersion(t.updateTime),i=new ht({mapValue:{fields:t.fields}});return new yt(n,r,i,{hasCommittedMutations:!!e})},t.prototype.Pi=function(t){ge(!!t.found),t.found.name,t.found.updateTime;var e=this.Z(t.found.name),n=this.fromVersion(t.found.updateTime),r=new ht({mapValue:{fields:t.found.fields}});return new yt(e,n,r,{})},t.prototype.Vi=function(t){ge(!!t.missing),ge(!!t.readTime);var e=this.Z(t.missing),n=this.fromVersion(t.readTime);return new gt(e,n)},t.prototype.gi=function(t){return"found"in t?this.Pi(t):"missing"in t?this.Vi(t):ye()},t.prototype.pi=function(t){var e;if("targetChange"in t){t.targetChange;var n=this.yi(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],i=this.ci(t.targetChange.resumeToken),o=t.targetChange.cause,s=o&&this.ni(o);e=new ne(n,r,i,s||null)}else if("documentChange"in t){t.documentChange;var a=t.documentChange;a.document,a.document.name,a.document.updateTime;var u=this.Z(a.document.name),c=this.fromVersion(a.document.updateTime),l=new ht({mapValue:{fields:a.document.fields}}),h=new yt(u,c,l,{}),f=a.targetIds||[],d=a.removedTargetIds||[];e=new te(f,d,h.key,h)}else if("documentDelete"in t){t.documentDelete;var p=t.documentDelete;p.document;var v=this.Z(p.document),m=p.readTime?this.fromVersion(p.readTime):b.min(),y=new gt(v,m),g=p.removedTargetIds||[];e=new te([],g,y.key,y)}else if("documentRemove"in t){t.documentRemove;var _=t.documentRemove;_.document;var w=this.Z(_.document),E=_.removedTargetIds||[];e=new te([],E,w,null)}else{if(!("filter"in t))return ye();t.filter;var I=t.filter;I.targetId;var T=I.count||0,k=new Dt(T),S=I.targetId;e=new ee(S,k)}return e},t.prototype.yi=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:ye()},t.prototype.bi=function(t){if(!("targetChange"in t))return b.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?b.min():e.readTime?this.fromVersion(e.readTime):b.min()},t.prototype.vi=function(t){var e,n=this;if(t instanceof st)e={update:this.Ri(t.key,t.value)};else if(t instanceof ct)e={delete:this.fi(t.key)};else if(t instanceof at)e={update:this.Ri(t.key,t.data),updateMask:this.Si(t.Vt)};else if(t instanceof ut)e={transform:{document:this.fi(t.key),fieldTransforms:t.fieldTransforms.map((function(t){return n.Di(t)}))}};else{if(!(t instanceof lt))return ye();e={verify:this.fi(t.key)}}return t.Rt.Tt||(e.currentDocument=this.Ci(t.Rt)),e},t.prototype.Fi=function(t){var e=this,n=t.currentDocument?this.Ni(t.currentDocument):it.ft();if(t.update){t.update.name;var r=this.Z(t.update.name),i=new ht({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=this.ki(t.updateMask);return new at(r,i,o,n)}return new st(r,i,n)}if(t.delete){var s=this.Z(t.delete);return new ct(s,n)}if(t.transform){var a=this.Z(t.transform.document),u=t.transform.fieldTransforms.map((function(t){return e.Mi(t)}));return ge(!0===n.exists),new ut(a,u)}if(t.verify){var c=this.Z(t.verify);return new lt(c,n)}return ye()},t.prototype.Ci=function(t){return void 0!==t.updateTime?{updateTime:this.toVersion(t.updateTime)}:void 0!==t.exists?{exists:t.exists}:ye()},t.prototype.Ni=function(t){return void 0!==t.updateTime?it.updateTime(this.fromVersion(t.updateTime)):void 0!==t.exists?it.exists(t.exists):it.ft()},t.prototype.xi=function(t,e){var n=t.updateTime?this.fromVersion(t.updateTime):this.fromVersion(e);n.isEqual(b.min())&&(n=this.fromVersion(e));var r=null;return t.transformResults&&t.transformResults.length>0&&(r=t.transformResults),new rt(n,r)},t.prototype.$i=function(t,e){var n=this;return t&&t.length>0?(ge(void 0!==e),t.map((function(t){return n.xi(t,e)}))):[]},t.prototype.Di=function(t){var e=t.transform;if(e instanceof X)return{fieldPath:t.field.j(),setToServerValue:"REQUEST_TIME"};if(e instanceof J)return{fieldPath:t.field.j(),appendMissingElements:{values:e.elements}};if(e instanceof Z)return{fieldPath:t.field.j(),removeAllFromArray:{values:e.elements}};if(e instanceof Q)return{fieldPath:t.field.j(),increment:e.ct};throw ye()},t.prototype.Mi=function(t){var e=null;if("setToServerValue"in t)ge("REQUEST_TIME"===t.setToServerValue),e=X.instance;else if("appendMissingElements"in t){var n=t.appendMissingElements.values||[];e=new J(n)}else if("removeAllFromArray"in t){var r=t.removeAllFromArray.values||[];e=new Z(r)}else"increment"in t?e=new Q(this,t.increment):ye();var i=I.X(t.fieldPath);return new nt(i,e)},t.prototype.Oi=function(t){return{documents:[this.Ei(t.path)]}},t.prototype.Li=function(t){ge(1===t.documents.length);var e=t.documents[0];return wt.Wt(this.Ii(e)).ee()},t.prototype.Bi=function(t){var e={structuredQuery:{}},n=t.path;null!==t.collectionGroup?(e.parent=this.Ei(n),e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(e.parent=this.Ei(n.$()),e.structuredQuery.from=[{collectionId:n.L()}]);var r=this.qi(t.filters);r&&(e.structuredQuery.where=r);var i=this.Ui(t.orderBy);i&&(e.structuredQuery.orderBy=i);var o=this.ri(t.limit);return null!==o&&(e.structuredQuery.limit=o),t.startAt&&(e.structuredQuery.startAt=this.Qi(t.startAt)),t.endAt&&(e.structuredQuery.endAt=this.Qi(t.endAt)),e},t.prototype.Wi=function(t){var e=this.Ii(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){ge(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=this.ji(n.where));var a=[];n.orderBy&&(a=this.Ki(n.orderBy));var u=null;n.limit&&(u=this.oi(n.limit));var c=null;n.startAt&&(c=this.Gi(n.startAt));var l=null;return n.endAt&&(l=this.Gi(n.endAt)),new wt(e,i,a,s,u,"F",c,l).ee()},t.prototype.zi=function(t){var e=this.Hi(t.Te);return null==e?null:{"goog-listen-tags":e}},t.prototype.Hi=function(t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ye()}},t.prototype.ee=function(t){var e,n=t.target;return(e=n.Ot()?{documents:this.Oi(n)}:{query:this.Bi(n)}).targetId=t.targetId,t.resumeToken.rt()>0&&(e.resumeToken=this.ui(t.resumeToken)),e},t.prototype.qi=function(t){var e=this;if(0!==t.length){var n=t.map((function(t){return t instanceof Et?e.Yi(t):ye()}));return 1===n.length?n[0]:{compositeFilter:{op:"AND",filters:n}}}},t.prototype.ji=function(t){var e=this;return t?void 0!==t.unaryFilter?[this.Ji(t)]:void 0!==t.fieldFilter?[this.Xi(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return e.ji(t)})).reduce((function(t,e){return t.concat(e)})):ye():[]},t.prototype.Ui=function(t){var e=this;if(0!==t.length)return t.map((function(t){return e.Zi(t)}))},t.prototype.Ki=function(t){var e=this;return t.map((function(t){return e.tn(t)}))},t.prototype.Qi=function(t){return{before:t.before,values:t.position}},t.prototype.Gi=function(t){var e=!!t.before,n=t.values||[];return new Ot(n,e)},t.prototype.en=function(t){return ae[t]},t.prototype.sn=function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}},t.prototype.nn=function(t){return ue[t]},t.prototype.rn=function(t){switch(t){case"EQUAL":return"==";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return ye()}},t.prototype.hn=function(t){return{fieldPath:t.j()}},t.prototype.on=function(t){return I.X(t.fieldPath)},t.prototype.Zi=function(t){return{field:this.hn(t.field),direction:this.en(t.dir)}},t.prototype.tn=function(t){return new At(this.on(t.field),this.sn(t.direction))},t.prototype.Xi=function(t){return Et.create(this.on(t.fieldFilter.field),this.rn(t.fieldFilter.op),t.fieldFilter.value)},t.prototype.Yi=function(t){if("=="===t.op){if(Y(t.value))return{unaryFilter:{field:this.hn(t.field),op:"IS_NAN"}};if(G(t.value))return{unaryFilter:{field:this.hn(t.field),op:"IS_NULL"}}}return{fieldFilter:{field:this.hn(t.field),op:this.nn(t.op),value:t.value}}},t.prototype.Ji=function(t){switch(t.unaryFilter.op){case"IS_NAN":var e=this.on(t.unaryFilter.field);return Et.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=this.on(t.unaryFilter.field);return Et.create(n,"==",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return ye()}},t.prototype.Si=function(t){var e=[];return t.fields.forEach((function(t){return e.push(t.j())})),{fieldPaths:e}},t.prototype.ki=function(t){var e=t.fieldPaths||[];return new et(e.map((function(t){return I.X(t)})))},t}();function le(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var he=function(){function t(){}return t.an=function(e){t.platform&&ye(),t.platform=e},t.nt=function(){return t.platform||ye(),t.platform},t}(),fe=new o.Logger("@firebase/firestore");
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function de(){return fe.logLevel}function pe(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(fe.logLevel<=o.LogLevel.DEBUG){var i=e.map(me);fe.debug.apply(fe,r.__spreadArrays(["Firestore ("+c+"): "+t],i))}}function ve(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(fe.logLevel<=o.LogLevel.ERROR){var i=e.map(me);fe.error.apply(fe,r.__spreadArrays(["Firestore ("+c+"): "+t],i))}}function me(t){if("string"==typeof t)return t;var e=he.nt();try{return e.un(t)}catch(e){return t}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function ye(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE ("+c+") INTERNAL ASSERTION FAILED: "+t;throw ve(e),new Error(e)}function ge(t,e){t||ye()}function be(t,e){return t}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var _e=function(){function t(){}return t.cn=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=he.nt()._n(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function we(t,e){return t<e?-1:t>e?1:0}function Ee(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function Ie(t){return t+"\0"}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Te=function(t,e,n,r,i){this.ii=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i},ke=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"ln",{get:function(){return"(default)"===this.database},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t.prototype.S=function(t){return we(this.projectId,t.projectId)||we(this.database,t.database)},t}(),Se=function(){function t(t){this.dn=t,this.fn={}}return t.prototype.get=function(t){var e=this.dn(t),n=this.fn[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];if(s.isEqual(t))return a}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.dn(t),r=this.fn[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(r[i][0].isEqual(t))return void(r[i]=[t,e]);r.push([t,e])}else this.fn[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.dn(t),n=this.fn[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(n[r][0].isEqual(t))return 1===n.length?delete this.fn[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){S(this.fn,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];t(s,a)}}))},t.prototype.B=function(){return x(this.fn)},t}(),xe=function(){function t(t,e,n,r){this.batchId=t,this.Tn=e,this.baseMutations=n,this.mutations=r}return t.prototype.at=function(t,e,n){for(var r=n.En,i=0;i<this.mutations.length;i++){var o=this.mutations[i];if(o.key.isEqual(t)){var s=r[i];e=o.at(e,s)}}return e},t.prototype.ot=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++){var i=r[n];i.key.isEqual(t)&&(e=i.ot(e,e,this.Tn))}for(var o=e,s=0,a=this.mutations;s<a.length;s++){var u=a[s];u.key.isEqual(t)&&(e=u.ot(e,o,this.Tn))}return e},t.prototype.In=function(t){var e=this,n=t;return this.mutations.forEach((function(r){var i=e.ot(r.key,t.get(r.key));i&&(n=n.Ae(r.key,i))})),n},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),Ht())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Ee(this.mutations,t.mutations,(function(t,e){return t.isEqual(e)}))&&Ee(this.baseMutations,t.baseMutations,(function(t,e){return t.isEqual(e)}))},t}(),Oe=function(){function t(t,e,n,r){this.batch=t,this.wn=e,this.En=n,this.Rn=r}return t.from=function(e,n,r){ge(e.mutations.length===r.length);for(var i=qt,o=e.mutations,s=0;s<o.length;s++)i=i.Ae(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),Ae=function(){function t(t){var e=this;this.An=null,this.mn=null,this.result=void 0,this.error=void 0,this.Pn=!1,this.Vn=!1,t((function(t){e.Pn=!0,e.result=t,e.An&&e.An(t)}),(function(t){e.Pn=!0,e.error=t,e.mn&&e.mn(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.Vn&&ye(),this.Vn=!0,this.Pn?this.error?this.gn(n,this.error):this.pn(e,this.result):new t((function(t,i){r.An=function(n){r.pn(e,n).next(t,i)},r.mn=function(e){r.gn(n,e).next(t,i)}}))},t.prototype.yn=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.bn=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.pn=function(e,n){return e?this.bn((function(){return e(n)})):t.resolve(n)},t.prototype.gn=function(e,n){return e?this.bn((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.vn=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.Sn=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.vn(r)},t}(),Ne=function(){function t(){this.Dn=new Se((function(t){return t.toString()})),this.Cn=!1}return Object.defineProperty(t.prototype,"readTime",{get:function(){return this.Fn},set:function(t){this.Fn=t},enumerable:!0,configurable:!0}),t.prototype.Nn=function(t,e){this.kn(),this.readTime=e,this.Dn.set(t.key,t)},t.prototype.Mn=function(t,e){this.kn(),e&&(this.readTime=e),this.Dn.set(t,null)},t.prototype.xn=function(t,e){this.kn();var n=this.Dn.get(e);return void 0!==n?Ae.resolve(n):this.$n(t,e)},t.prototype.getEntries=function(t,e){return this.On(t,e)},t.prototype.apply=function(t){return this.kn(),this.Cn=!0,this.Ln(t)},t.prototype.kn=function(){},t}(),De="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Re=function(){function t(){this.Bn=[]}return t.prototype.qn=function(t){this.Bn.push(t)},t.prototype.Un=function(){this.Bn.forEach((function(t){return t()}))},t}(),Ce=function(){function t(t,e,n){this.Qn=t,this.Wn=e,this.jn=n}return t.prototype.Kn=function(t,e){var n=this;return this.Wn.Gn(t,e).next((function(r){return n.zn(t,e,r)}))},t.prototype.zn=function(t,e,n){return this.Qn.xn(t,e).next((function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].ot(e,t);return t}))},t.prototype.Hn=function(t,e,n){var r=$t();return e.forEach((function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].ot(t,e);r=r.Ae(t,e)})),r},t.prototype.Yn=function(t,e){var n=this;return this.Qn.getEntries(t,e).next((function(e){return n.Jn(t,e)}))},t.prototype.Jn=function(t,e){var n=this;return this.Wn.Xn(t,e).next((function(r){var i=n.Hn(t,e,r),o=Ft();return i.forEach((function(t,e){e||(e=new gt(t,b.min())),o=o.Ae(t,e)})),o}))},t.prototype.Zn=function(t,e,n){return e.Ot()?this.tr(t,e.path):e._e()?this.er(t,e,n):this.sr(t,e,n)},t.prototype.tr=function(t,e){return this.Kn(t,new T(e)).next((function(t){var e=Wt();return t instanceof yt&&(e=e.Ae(t.key,t)),e}))},t.prototype.er=function(t,e,n){var r=this,i=e.collectionGroup,o=Wt();return this.jn.ir(t,i).next((function(s){return Ae.forEach(s,(function(s){var a=e.Zt(s.child(i));return r.sr(t,a,n).next((function(t){t.forEach((function(t,e){o=o.Ae(t,e)}))}))})).next((function(){return o}))}))},t.prototype.sr=function(t,e,n){var r,i,o=this;return this.Qn.Zn(t,e,n).next((function(n){return r=n,o.Wn.nr(t,e)})).next((function(e){return i=e,o.rr(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=r.get(c),h=u.ot(l,l,o.Tn);r=h instanceof yt?r.Ae(c,h):r.remove(c)}}))})).next((function(){return r.forEach((function(t,n){e.matches(n)||(r=r.remove(t))})),r}))},t.prototype.rr=function(t,e,n){for(var r=Ht(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof at&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Qn.getEntries(t,r).next((function(t){return t.forEach((function(t,e){null!==e&&e instanceof yt&&(c=c.Ae(t,e))})),c}))},t}(),Ue=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.hr=n,this.or=r}return t.ar=function(e,n){for(var r=Ht(),i=Ht(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Pe=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.ur=function(t){return n.cr(t)},this._r=function(t){return e.lr(t)})}return t.prototype.cr=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this._r&&this._r(t),t},t}();Pe.dr=-1;
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var Le=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},je=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Tr=t,this.Er=e,this.Ir=n,this.wr=r,this.Rr=i,this.Ar=0,this.mr=null,this.Pr=Date.now(),this.reset()}return t.prototype.reset=function(){this.Ar=0},t.prototype.Vr=function(){this.Ar=this.Rr},t.prototype.gr=function(t){var e=this;this.cancel();var n=Math.floor(this.Ar+this.pr()),r=Math.max(0,Date.now()-this.Pr),i=Math.max(0,n-r);i>0&&pe("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.Ar+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.mr=this.Tr.yr(this.Er,i,(function(){return e.Pr=Date.now(),t()})),this.Ar*=this.wr,this.Ar<this.Ir&&(this.Ar=this.Ir),this.Ar>this.Rr&&(this.Ar=this.Rr)},t.prototype.br=function(){null!==this.mr&&(this.mr.vr(),this.mr=null)},t.prototype.cancel=function(){null!==this.mr&&(this.mr.cancel(),this.mr=null)},t.prototype.pr=function(){return(Math.random()-.5)*this.Ar},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Me(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=Fe(e)),e=Ve(t.get(n),e);return Fe(e)}function Ve(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function Fe(t){return t+""}function $e(t){var e=t.length;if(ge(e>=2),2===e)return ge(""===t.charAt(0)&&""===t.charAt(1)),w.G;for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("",o);switch((s<0||s>n)&&ye(),t.charAt(s+1)){case"":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:ye()}o=s+2}return new w(r)}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Be=function(){function t(){this.Sr=new We}return t.prototype.Dr=function(t,e){return this.Sr.add(e),Ae.resolve()},t.prototype.ir=function(t,e){return Ae.resolve(this.Sr.getEntries(e))},t}(),We=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.L(),n=t.$(),r=this.index[e]||new jt(w.N),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.L(),n=t.$(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new jt(w.N)).W()},t}(),qe=function(){function t(){this.Cr=new We}return t.prototype.Dr=function(t,e){var n=this;if(!this.Cr.has(e)){var r=e.L(),i=e.$();t.qn((function(){n.Cr.add(e)}));var o={collectionId:r,parent:Me(i)};return ze(t).put(o)}return Ae.resolve()},t.prototype.ir=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Ie(e),""],!1,!0);return ze(t).Fr(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push($e(o.parent))}return n}))},t}();function ze(t){return sn.Nr(t,Dn.store)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var He=function(){function t(t,e){this.serializer=t,this.jn=e}return t.prototype.Nn=function(t,e,n){return Ye(t).put(Ke(e),n)},t.prototype.Mn=function(t,e){var n=Ye(t),r=Ke(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.kr(t,r)}))},t.prototype.xn=function(t,e){var n=this;return Ye(t).get(Ke(e)).next((function(t){return n.Mr(t)}))},t.prototype.xr=function(t,e){var n=this;return Ye(t).get(Ke(e)).next((function(t){var e=n.Mr(t);return e?{$r:e,size:Xe(t)}:null}))},t.prototype.getEntries=function(t,e){var n=this,r=$t();return this.Or(t,e,(function(t,e){var i=n.Mr(e);r=r.Ae(t,i)})).next((function(){return r}))},t.prototype.Lr=function(t,e){var n=this,r=$t(),i=new Ut(T.N);return this.Or(t,e,(function(t,e){var o=n.Mr(e);o?(r=r.Ae(t,o),i=i.Ae(t,Xe(e))):(r=r.Ae(t,null),i=i.Ae(t,0))})).next((function(){return{Br:r,qr:i}}))},t.prototype.Or=function(t,e,n){if(e.B())return Ae.resolve();var r=IDBKeyRange.bound(e.first().path.W(),e.last().path.W()),i=e.be(),o=i.Ne();return Ye(t).Ur({range:r},(function(t,e,r){for(var s=T.st(t);o&&T.N(o,s)<0;)n(o,null),o=i.Ne();o&&o.isEqual(s)&&(n(o,e),o=i.ke()?i.Ne():null),o?r.Qr(o.path.W()):r.done()})).next((function(){for(;o;)n(o,null),o=i.ke()?i.Ne():null}))},t.prototype.Zn=function(t,e,n){var r=this,i=Wt(),o=e.path.length+1,s={};if(n.isEqual(b.min())){var a=e.path.W();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.W(),c=this.serializer.Wr(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=Sn.collectionReadTimeIndex}return Ye(t).Ur(s,(function(t,n,s){if(t.length===o){var a=r.serializer.jr(n);e.path.q(a.key.path)?a instanceof yt&&e.matches(a)&&(i=i.Ae(a.key,a)):s.done()}})).next((function(){return i}))},t.prototype.Kr=function(t,e){var n=this,r=Ft(),i=this.serializer.Wr(e),o=Ye(t),s=IDBKeyRange.lowerBound(i,!0);return o.Ur({index:Sn.readTimeIndex,range:s},(function(t,e){var o=n.serializer.jr(e);r=r.Ae(o.key,o),i=e.readTime})).next((function(){return{Gr:r,readTime:n.serializer.zr(i)}}))},t.prototype.Hr=function(t){var e=this,n=Ye(t),r=b.min();return n.Ur({index:Sn.readTimeIndex,reverse:!0},(function(t,n,i){n.readTime&&(r=e.serializer.zr(n.readTime)),i.done()})).next((function(){return r}))},t.prototype.Yr=function(e){return new t.Jr(this,!!e&&e.Xr)},t.prototype.Zr=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return Ge(t).get(xn.key).next((function(t){return ge(!!t),t}))},t.prototype.kr=function(t,e){return Ge(t).put(xn.key,e)},t.prototype.Mr=function(t){if(t){var e=this.serializer.jr(t);return e instanceof gt&&e.version.isEqual(b.min())?null:e}return null},t}();function Ge(t){return sn.Nr(t,xn.store)}function Ye(t){return sn.Nr(t,Sn.store)}function Ke(t){return t.path.W()}function Xe(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw ye();e=t.noDocument}return JSON.stringify(e).length}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */He.Jr=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).th=e,r.Xr=n,r.eh=new Se((function(t){return t.toString()})),r}return r.__extends(e,t),e.prototype.Ln=function(t){var e=this,n=[],r=0,i=new jt((function(t,e){return we(t.j(),e.j())}));return this.Dn.forEach((function(o,s){var a=e.eh.get(o);if(s){var u=e.th.serializer.sh(s,e.readTime);i=i.add(o.path.$());var c=Xe(u);r+=c-a,n.push(e.th.Nn(t,o,u))}else if(r-=a,e.Xr){var l=e.th.serializer.sh(new gt(o,b.min()),e.readTime);n.push(e.th.Nn(t,o,l))}else n.push(e.th.Mn(t,o))})),i.forEach((function(r){n.push(e.th.jn.Dr(t,r))})),n.push(this.th.updateMetadata(t,r)),Ae.vn(n)},e.prototype.$n=function(t,e){var n=this;return this.th.xr(t,e).next((function(t){return null===t?(n.eh.set(e,0),null):(n.eh.set(e,t.size),t.$r)}))},e.prototype.On=function(t,e){var n=this;return this.th.Lr(t,e).next((function(t){var e=t.Br;return t.qr.forEach((function(t,e){n.eh.set(t,e)})),e}))},e}(Ne);var Je=function(){function t(t){this.ih=t}return t.prototype.next=function(){return this.ih+=2,this.ih},t.nh=function(){return new t(0)},t.rh=function(){return new t(-1)},t}(),Ze=function(){function t(t,e){this.hh=t,this.serializer=e}return t.prototype.oh=function(t){var e=this;return this.ah(t).next((function(n){var r=new Je(n.highestTargetId);return n.highestTargetId=r.next(),e.uh(t,n).next((function(){return n.highestTargetId}))}))},t.prototype._h=function(t){return this.ah(t).next((function(t){return b.v(new g(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.lh=function(t){return this.ah(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.dh=function(t,e,n){var r=this;return this.ah(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.C()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.uh(t,i)}))},t.prototype.fh=function(t,e){var n=this;return this.Th(t,e).next((function(){return n.ah(t).next((function(r){return r.targetCount+=1,n.Eh(e,r),n.uh(t,r)}))}))},t.prototype.Ih=function(t,e){return this.Th(t,e)},t.prototype.wh=function(t,e){var n=this;return this.Rh(t,e.targetId).next((function(){return Qe(t).delete(e.targetId)})).next((function(){return n.ah(t)})).next((function(e){return ge(e.targetCount>0),e.targetCount-=1,n.uh(t,e)}))},t.prototype.Ah=function(t,e,n){var r=this,i=0,o=[];return Qe(t).Ur((function(s,a){var u=r.serializer.mh(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.wh(t,u)))})).next((function(){return Ae.vn(o)})).next((function(){return i}))},t.prototype.js=function(t,e){var n=this;return Qe(t).Ur((function(t,r){var i=n.serializer.mh(r);e(i)}))},t.prototype.ah=function(t){return tn(t).get(Nn.key).next((function(t){return ge(null!==t),t}))},t.prototype.uh=function(t,e){return tn(t).put(Nn.key,e)},t.prototype.Th=function(t,e){return Qe(t).put(this.serializer.Ph(e))},t.prototype.Eh=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.Vh=function(t){return this.ah(t).next((function(t){return t.targetCount}))},t.prototype.gh=function(t,e){var n=this,r=e.canonicalId(),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return Qe(t).Ur({range:i,index:On.queryTargetsIndexName},(function(t,r,i){var s=n.serializer.mh(r);e.isEqual(s.target)&&(o=s,i.done())})).next((function(){return o}))},t.prototype.ph=function(t,e,n){var r=this,i=[],o=en(t);return e.forEach((function(e){var s=Me(e.path);i.push(o.put(new An(n,s))),i.push(r.hh.yh(t,n,e))})),Ae.vn(i)},t.prototype.bh=function(t,e,n){var r=this,i=en(t);return Ae.forEach(e,(function(e){var o=Me(e.path);return Ae.vn([i.delete([n,o]),r.hh.vh(t,n,e)])}))},t.prototype.Rh=function(t,e){var n=en(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.Sh=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=en(t),i=Ht();return r.Ur({range:n,Dh:!0},(function(t,e,n){var r=$e(t[1]),o=new T(r);i=i.add(o)})).next((function(){return i}))},t.prototype.Ch=function(t,e){var n=Me(e.path),r=IDBKeyRange.bound([n],[Ie(n)],!1,!0),i=0;return en(t).Ur({index:An.documentTargetsIndex,Dh:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.si=function(t,e){var n=this;return Qe(t).get(e).next((function(t){return t?n.serializer.mh(t):null}))},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Qe(t){return sn.Nr(t,On.store)}function tn(t){return sn.Nr(t,Nn.store)}function en(t){return sn.Nr(t,An.store)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var nn=function(){function t(t){this.Fh=t}return t.prototype.jr=function(t){if(t.document)return this.Fh.mi(t.document,!!t.hasCommittedMutations);if(t.noDocument){var e=T.st(t.noDocument.path),n=this.Nh(t.noDocument.readTime);return new gt(e,n,{hasCommittedMutations:!!t.hasCommittedMutations})}if(t.unknownDocument){var r=T.st(t.unknownDocument.path),i=this.Nh(t.unknownDocument.version);return new bt(r,i)}return ye()},t.prototype.sh=function(t,e){var n=this.Wr(e),r=t.key.path.$().W();if(t instanceof yt){var i=this.Fh.Ai(t),o=t.hasCommittedMutations;return new Sn(null,null,i,o,n,r)}if(t instanceof gt){var s=t.key.path.W(),a=this.kh(t.version),u=t.hasCommittedMutations;return new Sn(null,new Tn(s,a),null,u,n,r)}if(t instanceof bt){var c=t.key.path.W(),l=this.kh(t.version);return new Sn(new kn(c,l),null,null,!0,n,r)}return ye()},t.prototype.Wr=function(t){var e=t.C();return[e.seconds,e.nanoseconds]},t.prototype.zr=function(t){var e=new g(t[0],t[1]);return b.v(e)},t.prototype.kh=function(t){var e=t.C();return new bn(e.seconds,e.nanoseconds)},t.prototype.Nh=function(t){var e=new g(t.seconds,t.nanoseconds);return b.v(e)},t.prototype.Mh=function(t,e){var n=this,r=e.baseMutations.map((function(t){return n.Fh.vi(t)})),i=e.mutations.map((function(t){return n.Fh.vi(t)}));return new En(t,e.batchId,e.Tn.toMillis(),r,i)},t.prototype.xh=function(t){var e=this,n=(t.baseMutations||[]).map((function(t){return e.Fh.Fi(t)})),r=t.mutations.map((function(t){return e.Fh.Fi(t)})),i=g.fromMillis(t.localWriteTimeMs);return new xe(t.batchId,i,n,r)},t.prototype.mh=function(t){var e,n=this.Nh(t.readTime),r=void 0!==t.lastLimboFreeSnapshotVersion?this.Nh(t.lastLimboFreeSnapshotVersion):b.min();return e=void 0!==t.query.documents?this.Fh.Li(t.query):this.Fh.Wi(t.query),new Nt(e,t.targetId,0,t.lastListenSequenceNumber,n,r,O.fromBase64String(t.resumeToken))},t.prototype.Ph=function(t){var e,n=this.kh(t.Ee),r=this.kh(t.lastLimboFreeSnapshotVersion);e=t.target.Ot()?this.Fh.Oi(t.target):this.Fh.Bi(t.target);var i=t.resumeToken.toBase64();return new On(t.targetId,t.target.canonicalId(),n,i,t.sequenceNumber,r,e)},t}(),rn="Failed to obtain exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",on=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).$h=e,r.Oh=n,r}return r.__extends(e,t),e}(Re),sn=function(){function t(e,n,r,i,o,s,a,u,c){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Tr=s,this.Lh=u,this.Bh=c,this.qh=null,this.Uh=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Qh=null,this.inForeground=!1,this.Wh=null,this.jh=null,this.Kh=Number.NEGATIVE_INFINITY,this.Gh=function(t){return Promise.resolve()},!t.zh())throw new f(h.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.hh=new cn(this,o),this.Hh=n+t.Yh,this.serializer=new nn(a),this.document=i.document,this.Jh=new Ze(this.hh,this.serializer),this.jn=new qe,this.Qn=new He(this.serializer,this.jn),this.window=i.window,i.window&&i.window.localStorage?this.Xh=i.window.localStorage:(this.Xh=null,!1===c&&ve("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.Nr=function(t,e){if(t instanceof on)return Pn.Nr(t.$h,e);throw ye()},t.prototype.start=function(){var t=this;return Pn.Zh(this.Hh,yn,new gn(this.serializer)).then((function(e){return t.to=e,t.eo()})).then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new f(h.FAILED_PRECONDITION,rn);return t.so(),t.io(),t.no(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.Jh.lh(e)}))})).then((function(e){t.qh=new Pe(e,t.Lh)})).then((function(){t.Uh=!0})).catch((function(e){return t.to&&t.to.close(),Promise.reject(e)}))},t.prototype.ro=function(t){var e=this;return this.Gh=function(n){return r.__awaiter(e,void 0,void 0,(function(){return r.__generator(this,(function(e){return this.ho?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.oo=function(t){var e=this;this.to.ao((function(n){return r.__awaiter(e,void 0,void 0,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.uo=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Tr.co((function(){return r.__awaiter(e,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return this.ho?[4,this.eo()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.eo=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return un(e).put(new Cn(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t._o(e).next((function(e){e||(t.isPrimary=!1,t.Tr.lo((function(){return t.Gh(!1)})))}))})).next((function(){return t.do(e)})).next((function(n){return t.isPrimary&&!n?t.fo(e).next((function(){return!1})):!!n&&t.To(e).next((function(){return!0}))}))})).catch((function(e){if(Mn(e))return pe("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return pe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.Tr.lo((function(){return t.Gh(e)})),t.isPrimary=e}))},t.prototype._o=function(t){var e=this;return an(t).get(_n.key).next((function(t){return Ae.resolve(e.Eo(t))}))},t.prototype.Io=function(t){return un(t).delete(this.clientId)},t.prototype.wo=function(){return r.__awaiter(this,void 0,void 0,(function(){var e,n,i,o,s=this;return r.__generator(this,(function(r){switch(r.label){case 0:return!this.isPrimary||this.Ro(this.Kh,18e5)?[3,2]:(this.Kh=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var n=t.Nr(e,Cn.store);return n.Fr().next((function(t){var e=s.Ao(t,18e5),r=t.filter((function(t){return-1===e.indexOf(t)}));return Ae.forEach(r,(function(t){return n.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(e=r.sent(),this.Xh)for(n=0,i=e;n<i.length;n++)o=i[n],this.Xh.removeItem(this.mo(o.clientId));r.label=2;case 2:return[2]}}))}))},t.prototype.no=function(){var t=this;this.jh=this.Tr.yr("client_metadata_refresh",4e3,(function(){return t.eo().then((function(){return t.wo()})).then((function(){return t.no()}))}))},t.prototype.Eo=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.do=function(t){var e=this;return this.Bh?Ae.resolve(!0):an(t).get(_n.key).next((function(n){if(null!==n&&e.Ro(n.leaseTimestampMs,5e3)&&!e.Po(n.ownerId)){if(e.Eo(n)&&e.networkEnabled)return!0;if(!e.Eo(n)){if(!n.allowTabSynchronization)throw new f(h.FAILED_PRECONDITION,rn);return!1}}return!(!e.networkEnabled||!e.inForeground)||un(t).Fr().next((function(t){return void 0===e.Ao(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&pe("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.Vo=function(){return r.__awaiter(this,void 0,void 0,(function(){var t=this;return r.__generator(this,(function(e){switch(e.label){case 0:return this.Uh=!1,this.po(),this.jh&&(this.jh.cancel(),this.jh=null),this.yo(),this.bo(),[4,this.runTransaction("shutdown","readwrite",(function(e){return t.fo(e).next((function(){return t.Io(e)}))})).catch((function(t){pe("IndexedDbPersistence","Proceeding with shutdown despite failure: ",t)}))];case 1:return e.sent(),this.to.close(),this.vo(),[2]}}))}))},t.prototype.Ao=function(t,e){var n=this;return t.filter((function(t){return n.Ro(t.updateTimeMs,e)&&!n.Po(t.clientId)}))},t.prototype.So=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return un(e).Fr().next((function(e){return t.Ao(e,18e5).map((function(t){return t.clientId}))}))}))},t.clearPersistence=function(e){return r.__awaiter(this,void 0,void 0,(function(){var n;return r.__generator(this,(function(r){switch(r.label){case 0:return t.zh()?(n=e+t.Yh,[4,Pn.delete(n)]):[2,Promise.resolve()];case 1:return r.sent(),[2]}}))}))},Object.defineProperty(t.prototype,"ho",{get:function(){return this.Uh},enumerable:!0,configurable:!0}),t.prototype.Do=function(t){return hn.Co(t,this.serializer,this.jn,this.hh)},t.prototype.Fo=function(){return this.Jh},t.prototype.No=function(){return this.Qn},t.prototype.ko=function(){return this.jn},t.prototype.runTransaction=function(t,e,n){var r=this;pe("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.to.runTransaction(o,Un,(function(o){return i=new on(o,r.qh?r.qh.next():Pe.dr),"readwrite-primary"===e?r._o(i).next((function(t){return!!t||r.do(i)})).next((function(e){if(!e)throw ve("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.Tr.lo((function(){return r.Gh(!1)})),new f(h.FAILED_PRECONDITION,De);return n(i)})).next((function(t){return r.To(i).next((function(){return t}))})):r.Mo(i).next((function(){return n(i)}))})).then((function(t){return i.Un(),t}))},t.prototype.Mo=function(t){var e=this;return an(t).get(_n.key).next((function(t){if(null!==t&&e.Ro(t.leaseTimestampMs,5e3)&&!e.Po(t.ownerId)&&!e.Eo(t)&&!(e.Bh||e.allowTabSynchronization&&t.allowTabSynchronization))throw new f(h.FAILED_PRECONDITION,rn)}))},t.prototype.To=function(t){var e=new _n(this.clientId,this.allowTabSynchronization,Date.now());return an(t).put(_n.key,e)},t.zh=function(){return Pn.zh()},t.xo=function(t){var e=t.ii.projectId;return t.ii.ln||(e+="."+t.ii.database),"firestore/"+t.persistenceKey+"/"+e+"/"},t.prototype.fo=function(t){var e=this,n=an(t);return n.get(_n.key).next((function(t){return e.Eo(t)?(pe("IndexedDbPersistence","Releasing primary lease."),n.delete(_n.key)):Ae.resolve()}))},t.prototype.Ro=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(ve("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.so=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Wh=function(){t.Tr.co((function(){return t.inForeground="visible"===t.document.visibilityState,t.eo()}))},this.document.addEventListener("visibilitychange",this.Wh),this.inForeground="visible"===this.document.visibilityState)},t.prototype.yo=function(){this.Wh&&(this.document.removeEventListener("visibilitychange",this.Wh),this.Wh=null)},t.prototype.io=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Qh=function(){e.po(),e.Tr.co((function(){return e.Vo()}))},this.window.addEventListener("unload",this.Qh))},t.prototype.bo=function(){this.Qh&&(this.window.removeEventListener("unload",this.Qh),this.Qh=null)},t.prototype.Po=function(t){var e;try{var n=null!==(null===(e=this.Xh)||void 0===e?void 0:e.getItem(this.mo(t)));return pe("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return ve("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.po=function(){if(this.Xh)try{this.Xh.setItem(this.mo(this.clientId),String(Date.now()))}catch(t){ve("Failed to set zombie client id.",t)}},t.prototype.vo=function(){if(this.Xh)try{this.Xh.removeItem(this.mo(this.clientId))}catch(t){}},t.prototype.mo=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function an(t){return sn.Nr(t,_n.store)}function un(t){return sn.Nr(t,Cn.store)}sn.Yh="main";var cn=function(){function t(t,e){this.db=t,this.$o=new Zn(this,e)}return t.prototype.Oo=function(t){var e=this.Lo(t);return this.db.Fo().Vh(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.Lo=function(t){var e=0;return this.Bo(t,(function(t){e++})).next((function(){return e}))},t.prototype.js=function(t,e){return this.db.Fo().js(t,e)},t.prototype.Bo=function(t,e){return this.qo(t,(function(t,n){return e(n)}))},t.prototype.yh=function(t,e,n){return ln(t,n)},t.prototype.vh=function(t,e,n){return ln(t,n)},t.prototype.Ah=function(t,e,n){return this.db.Fo().Ah(t,e,n)},t.prototype.Uo=function(t,e){return ln(t,e)},t.prototype.Qo=function(t,e){return function(t,e){var n=!1;return mn(t).Wo((function(r){return fn(t,r,e).next((function(t){return t&&(n=!0),Ae.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.jo=function(t,e){var n=this,r=this.db.No().Yr(),i=[],o=0;return this.qo(t,(function(s,a){if(a<=e){var u=n.Qo(t,s).next((function(e){if(!e)return o++,r.xn(t,s).next((function(){return r.Mn(s),en(t).delete([0,Me(s.path)])}))}));i.push(u)}})).next((function(){return Ae.vn(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.Ie(t.Oh);return this.db.Fo().Ih(t,n)},t.prototype.Ko=function(t,e){return ln(t,e)},t.prototype.qo=function(t,e){var n,r=en(t),i=Pe.dr;return r.Ur({index:An.documentTargetsIndex},(function(t,r){var o=t[0],s=(t[1],r.path),a=r.sequenceNumber;0===o?(i!==Pe.dr&&e(new T($e(n)),i),i=a,n=s):i=Pe.dr})).next((function(){i!==Pe.dr&&e(new T($e(n)),i)}))},t.prototype.Go=function(t){return this.db.No().Zr(t)},t}();function ln(t,e){return en(t).put(function(t,e){return new An(0,Me(t.path),e)}(e,t.Oh))}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var hn=function(){function t(t,e,n,r){this.userId=t,this.serializer=e,this.jn=n,this.hh=r,this.zo={}}return t.Co=function(e,n,r,i){return ge(""!==e.uid),new t(e.t()?e.uid:"",n,r,i)},t.prototype.Ho=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return pn(t).Ur({index:En.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.Yo=function(t,e,n,r){var i=this,o=vn(t),s=pn(t);return s.add({}).next((function(a){ge("number"==typeof a);for(var u=new xe(a,e,n,r),c=i.serializer.Mh(i.userId,u),l=[],h=new jt((function(t,e){return we(t.j(),e.j())})),f=0,d=r;f<d.length;f++){var p=d[f],v=In.key(i.userId,p.key.path,a);h=h.add(p.key.path.$()),l.push(s.put(c)),l.push(o.put(v,In.PLACEHOLDER))}return h.forEach((function(e){l.push(i.jn.Dr(t,e))})),t.qn((function(){i.zo[a]=u.keys()})),Ae.vn(l).next((function(){return u}))}))},t.prototype.Jo=function(t,e){var n=this;return pn(t).get(e).next((function(t){return t?(ge(t.userId===n.userId),n.serializer.xh(t)):null}))},t.prototype.Xo=function(t,e){var n=this;return this.zo[e]?Ae.resolve(this.zo[e]):this.Jo(t,e).next((function(t){if(t){var r=t.keys();return n.zo[e]=r,r}return null}))},t.prototype.Zo=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return pn(t).Ur({index:En.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(ge(e.batchId>=r),o=n.serializer.xh(e)),i.done()})).next((function(){return o}))},t.prototype.ta=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return pn(t).Ur({index:En.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.ea=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return pn(t).Fr(En.userMutationsIndex,n).next((function(t){return t.map((function(t){return e.serializer.xh(t)}))}))},t.prototype.Gn=function(t,e){var n=this,r=In.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return vn(t).Ur({range:i},(function(r,i,s){var a=r[0],u=r[1],c=r[2],l=$e(u);if(a===n.userId&&e.path.isEqual(l))return pn(t).get(c).next((function(t){if(!t)throw ye();ge(t.userId===n.userId),o.push(n.serializer.xh(t))}));s.done()})).next((function(){return o}))},t.prototype.Xn=function(t,e){var n=this,r=new jt(we),i=[];return e.forEach((function(e){var o=In.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=vn(t).Ur({range:s},(function(t,i,o){var s=t[0],a=t[1],u=t[2],c=$e(a);s===n.userId&&e.path.isEqual(c)?r=r.add(u):o.done()}));i.push(a)})),Ae.vn(i).next((function(){return n.sa(t,r)}))},t.prototype.nr=function(t,e){var n=this,r=e.path,i=r.length+1,o=In.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new jt(we);return vn(t).Ur({range:s},(function(t,e,o){var s=t[0],u=t[1],c=t[2],l=$e(u);s===n.userId&&r.q(l)?l.length===i&&(a=a.add(c)):o.done()})).next((function(){return n.sa(t,a)}))},t.prototype.sa=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(pn(t).get(e).next((function(t){if(null===t)throw ye();ge(t.userId===n.userId),r.push(n.serializer.xh(t))})))})),Ae.vn(i).next((function(){return r}))},t.prototype.ia=function(t,e){var n=this;return dn(t.$h,this.userId,e).next((function(r){return t.qn((function(){n.na(e.batchId)})),Ae.forEach(r,(function(e){return n.hh.Uo(t,e)}))}))},t.prototype.na=function(t){delete this.zo[t]},t.prototype.ra=function(t){var e=this;return this.Ho(t).next((function(n){if(!n)return Ae.resolve();var r=IDBKeyRange.lowerBound(In.prefixForUser(e.userId)),i=[];return vn(t).Ur({range:r},(function(t,n,r){if(t[0]===e.userId){var o=$e(t[1]);i.push(o)}else r.done()})).next((function(){ge(0===i.length)}))}))},t.prototype.Ch=function(t,e){return fn(t,this.userId,e)},t.prototype.ha=function(t){var e=this;return mn(t).get(this.userId).next((function(t){return t||new wn(e.userId,-1,"")}))},t}();function fn(t,e,n){var r=In.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return vn(t).Ur({range:o,Dh:!0},(function(t,n,r){var o=t[0],a=t[1];t[2],o===e&&a===i&&(s=!0),r.done()})).next((function(){return s}))}function dn(t,e,n){var r=t.store(En.store),i=t.store(In.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.Ur({range:s},(function(t,e,n){return a++,n.delete()}));o.push(u.next((function(){ge(1===a)})));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],d=In.key(e,f.key.path,n.batchId);o.push(i.delete(d)),c.push(f.key)}return Ae.vn(o).next((function(){return c}))}function pn(t){return sn.Nr(t,En.store)}function vn(t){return sn.Nr(t,In.store)}function mn(t){return sn.Nr(t,wn.store)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var yn=10,gn=function(){function t(t){this.serializer=t}return t.prototype.createOrUpgrade=function(t,e,n,r){var i=this;ge(n<r&&n>=0&&r<=yn);var o=new Vn(e);n<1&&r>=1&&(function(t){t.createObjectStore(_n.store)}(t),function(t){t.createObjectStore(wn.store,{keyPath:wn.keyPath}),t.createObjectStore(En.store,{keyPath:En.keyPath,autoIncrement:!0}).createIndex(En.userMutationsIndex,En.userMutationsKeyPath,{unique:!0}),t.createObjectStore(In.store)}(t),Rn(t),function(t){t.createObjectStore(Sn.store)}(t));var s=Ae.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(An.store),t.deleteObjectStore(On.store),t.deleteObjectStore(Nn.store)}(t),Rn(t)),s=s.next((function(){return function(t){var e=t.store(Nn.store),n=new Nn(0,0,b.min().C(),0);return e.put(Nn.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(s=s.next((function(){return function(t,e){return e.store(En.store).Fr().next((function(n){t.deleteObjectStore(En.store),t.createObjectStore(En.store,{keyPath:En.keyPath,autoIncrement:!0}).createIndex(En.userMutationsIndex,En.userMutationsKeyPath,{unique:!0});var r=e.store(En.store),i=n.map((function(t){return r.put(t)}));return Ae.vn(i)}))}(t,o)}))),s=s.next((function(){!function(t){t.createObjectStore(Cn.store,{keyPath:Cn.keyPath})}(t)}))),n<5&&r>=5&&(s=s.next((function(){return i.removeAcknowledgedMutations(o)}))),n<6&&r>=6&&(s=s.next((function(){return function(t){t.createObjectStore(xn.store)}(t),i.addDocumentGlobal(o)}))),n<7&&r>=7&&(s=s.next((function(){return i.ensureSequenceNumbers(o)}))),n<8&&r>=8&&(s=s.next((function(){return i.createCollectionParentIndex(t,o)}))),n<9&&r>=9&&(s=s.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(Sn.store);e.createIndex(Sn.readTimeIndex,Sn.readTimeIndexPath,{unique:!1}),e.createIndex(Sn.collectionReadTimeIndex,Sn.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(s=s.next((function(){return i.rewriteCanonicalIds(o)}))),s},t.prototype.addDocumentGlobal=function(t){var e=0;return t.store(Sn.store).Ur((function(t,n){e+=Xe(n)})).next((function(){var n=new xn(e);return t.store(xn.store).put(xn.key,n)}))},t.prototype.removeAcknowledgedMutations=function(t){var e=this,n=t.store(wn.store),r=t.store(En.store);return n.Fr().next((function(n){return Ae.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Fr(En.userMutationsIndex,i).next((function(r){return Ae.forEach(r,(function(r){ge(r.userId===n.userId);var i=e.serializer.xh(r);return dn(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ensureSequenceNumbers=function(t){var e=t.store(An.store),n=t.store(Sn.store);return t.store(Nn.store).get(Nn.key).next((function(t){var r=[];return n.Ur((function(n,i){var o=new w(n),s=function(t){return[0,Me(t)]}(o);r.push(e.get(s).next((function(n){return n?Ae.resolve():function(n){return e.put(new An(0,Me(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return Ae.vn(r)}))}))},t.prototype.createCollectionParentIndex=function(t,e){t.createObjectStore(Dn.store,{keyPath:Dn.keyPath});var n=e.store(Dn.store),r=new We,i=function(t){if(r.add(t)){var e=t.L(),i=t.$();return n.put({collectionId:e,parent:Me(i)})}};return e.store(Sn.store).Ur({Dh:!0},(function(t,e){var n=new w(t);return i(n.$())})).next((function(){return e.store(In.store).Ur({Dh:!0},(function(t,e){t[0];var n=t[1],r=(t[2],$e(n));return i(r.$())}))}))},t.prototype.rewriteCanonicalIds=function(t){var e=this,n=t.store(On.store);return n.Ur((function(t,r){var i=e.serializer.mh(r),o=e.serializer.Ph(i);return n.put(o)}))},t}(),bn=function(t,e){this.seconds=t,this.nanoseconds=e},_n=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};_n.store="owner",_n.key="owner";var wn=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};wn.store="mutationQueues",wn.keyPath="userId";var En=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};En.store="mutations",En.keyPath="batchId",En.userMutationsIndex="userMutationsIndex",En.userMutationsKeyPath=["userId","batchId"];var In=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Me(e)]},t.key=function(t,e,n){return[t,Me(e),n]},t}();In.store="documentMutations",In.PLACEHOLDER=new In;var Tn=function(t,e){this.path=t,this.readTime=e},kn=function(t,e){this.path=t,this.version=e},Sn=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};Sn.store="remoteDocuments",Sn.readTimeIndex="readTimeIndex",Sn.readTimeIndexPath="readTime",Sn.collectionReadTimeIndex="collectionReadTimeIndex",Sn.collectionReadTimeIndexPath=["parentPath","readTime"];var xn=function(t){this.byteSize=t};xn.store="remoteDocumentGlobal",xn.key="remoteDocumentGlobalKey";var On=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};On.store="targets",On.keyPath="targetId",On.queryTargetsIndexName="queryTargetsIndex",On.queryTargetsKeyPath=["canonicalId","targetId"];var An=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};An.store="targetDocuments",An.keyPath=["targetId","path"],An.documentTargetsIndex="documentTargetsIndex",An.documentTargetsKeyPath=["path","targetId"];var Nn=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Nn.key="targetGlobalKey",Nn.store="targetGlobal";var Dn=function(t,e){this.collectionId=t,this.parent=e};function Rn(t){t.createObjectStore(An.store,{keyPath:An.keyPath}).createIndex(An.documentTargetsIndex,An.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(On.store,{keyPath:On.keyPath}).createIndex(On.queryTargetsIndexName,On.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Nn.store)}Dn.store="collectionParents",Dn.keyPath=["collectionId","parent"];var Cn=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Cn.store="clientMetadata",Cn.keyPath="clientId";var Un=r.__spreadArrays(r.__spreadArrays(r.__spreadArrays([wn.store,En.store,In.store,Sn.store,On.store,_n.store,Nn.store,An.store],[Cn.store]),[xn.store]),[Dn.store]),Pn=function(){function t(e){this.db=e,12.2===t.oa(s.getUA())&&ve("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.Zh=function(e,n,r){return pe("SimpleDb","Opening database:",e),new Ae((function(i,o){var s=indexedDB.open(e,n);s.onsuccess=function(e){var n=e.target.result;i(new t(n))},s.onblocked=function(){o(new f(h.FAILED_PRECONDITION,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=function(t){var e=t.target.error;"VersionError"===e.name?o(new f(h.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o(e)},s.onupgradeneeded=function(t){pe("SimpleDb",'Database "'+e+'" requires upgrade from version:',t.oldVersion);var n=t.target.result;r.createOrUpgrade(n,s.transaction,t.oldVersion,yn).next((function(){pe("SimpleDb","Database upgrade to version "+yn+" complete")}))}})).yn()},t.delete=function(t){return pe("SimpleDb","Removing database:",t),$n(window.indexedDB.deleteDatabase(t)).yn()},t.zh=function(){if("undefined"==typeof indexedDB)return!1;if(t.aa())return!0;var e=s.getUA(),n=t.oa(e),r=0<n&&n<10,i=t.ua(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.aa=function(){var t;return"undefined"!=typeof __PRIVATE_process&&"YES"===(null===(t=__PRIVATE_process.__PRIVATE_env)||void 0===t?void 0:t.ca)},t.Nr=function(t,e){return t.store(e)},t.oa=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.ua=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.ao=function(t){this.db.onversionchange=function(e){return t(e)}},t.prototype.runTransaction=function(t,e,n){return r.__awaiter(this,void 0,void 0,(function(){var i,o,s,a,u;return r.__generator(this,(function(c){switch(c.label){case 0:i="readonly"===t,o=0,s=function(){var t,s,u,c,l;return r.__generator(this,(function(r){switch(r.label){case 0:++o,t=Vn.open(a.db,i?"readonly":"readwrite",e),r.label=1;case 1:return r.trys.push([1,3,,4]),s=n(t).catch((function(e){return t.abort(e),Ae.reject(e)})).yn(),u={},s.catch((function(){})),[4,t._a];case 2:return[2,(u.value=(r.sent(),s),u)];case 3:return c=r.sent(),l="FirebaseError"!==c.name&&o<3,pe("SimpleDb","Transaction failed with error: %s. Retrying: %s.",c.message,l),l?[3,4]:[2,{value:Promise.reject(c)}];case 4:return[2]}}))},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db.close()},t}(),Ln=function(){function t(t){this.la=t,this.da=!1,this.fa=null}return Object.defineProperty(t.prototype,"Pn",{get:function(){return this.da},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Ta",{get:function(){return this.fa},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.la=t},enumerable:!0,configurable:!0}),t.prototype.done=function(){this.da=!0},t.prototype.Qr=function(t){this.fa=t},t.prototype.delete=function(){return $n(this.la.delete())},t}(),jn=function(t){function e(e){var n=this;return(n=t.call(this,h.UNAVAILABLE,"IndexedDB transaction failed: "+e)||this).name="IndexedDbTransactionError",n}return r.__extends(e,t),e}(f);function Mn(t){return"IndexedDbTransactionError"===t.name}var Vn=function(){function t(t){var e=this;this.transaction=t,this.aborted=!1,this.Ea=new Le,this.transaction.oncomplete=function(){e.Ea.resolve()},this.transaction.onabort=function(){t.error?e.Ea.reject(new jn(t.error)):e.Ea.resolve()},this.transaction.onerror=function(t){var n=Wn(t.target.error);e.Ea.reject(new jn(n))}}return t.open=function(e,n,r){return new t(e.transaction(r,n))},Object.defineProperty(t.prototype,"_a",{get:function(){return this.Ea.promise},enumerable:!0,configurable:!0}),t.prototype.abort=function(t){t&&this.Ea.reject(t),this.aborted||(pe("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new Fn(e)},t}(),Fn=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(pe("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(pe("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),$n(n)},t.prototype.add=function(t){return pe("SimpleDb","ADD",this.store.name,t,t),$n(this.store.add(t))},t.prototype.get=function(t){var e=this;return $n(this.store.get(t)).next((function(n){return void 0===n&&(n=null),pe("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return pe("SimpleDb","DELETE",this.store.name,t),$n(this.store.delete(t))},t.prototype.count=function(){return pe("SimpleDb","COUNT",this.store.name),$n(this.store.count())},t.prototype.Fr=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.Ia(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.wa=function(t,e){pe("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.Dh=!1;var r=this.cursor(n);return this.Ia(r,(function(t,e,n){return n.delete()}))},t.prototype.Ur=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.Ia(r,e)},t.prototype.Wo=function(t){var e=this.cursor({});return new Ae((function(n,r){e.onerror=function(t){var e=Wn(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.Ia=function(t,e){var n=[];return new Ae((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new Ln(i),s=e(i.primaryKey,i.value,o);if(s instanceof Ae){var a=s.catch((function(t){return o.done(),Ae.reject(t)}));n.push(a)}o.Pn?r():null===o.Ta?i.continue():i.continue(o.Ta)}else r()}})).next((function(){return Ae.vn(n)}))},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.Dh?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function $n(t){return new Ae((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=Wn(t.target.error);n(e)}}))}var Bn=!1;function Wn(t){var e=Pn.oa(s.getUA());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new f("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Bn||(Bn=!0,setTimeout((function(){throw r}),0)),r}}return t}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var qn=function(){function t(t,e,n,r,i){this.Ra=t,this.Er=e,this.Aa=n,this.op=r,this.ma=i,this.Pa=new Le,this.then=this.Pa.promise.then.bind(this.Pa.promise),this.Pa.promise.catch((function(t){}))}return t.Va=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.ga=setTimeout((function(){return e.pa()}),t)},t.prototype.vr=function(){return this.pa()},t.prototype.cancel=function(t){null!==this.ga&&(this.clearTimeout(),this.Pa.reject(new f(h.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.pa=function(){var t=this;this.Ra.co((function(){return null!==t.ga?(t.clearTimeout(),t.op().then((function(e){return t.Pa.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.ga&&(this.ma(this),clearTimeout(this.ga),this.ga=null)},t}(),zn=function(){function t(){var t=this;this.ya=Promise.resolve(),this.ba=Promise.resolve(),this.va=!1,this.Sa=[],this.Da=null,this.Ca=!1,this.Fa=[],this.Na=new je(this,"async_queue_retry"),this.ka=function(){return t.Na.br()};var e=he.nt().window;e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.ka)}return Object.defineProperty(t.prototype,"Ma",{get:function(){return this.va},enumerable:!0,configurable:!0}),t.prototype.co=function(t){this.enqueue(t)},t.prototype.xa=function(t){this.$a(),this.Oa(t)},t.prototype.La=function(t){return this.$a(),this.Oa(t)},t.prototype.Ba=function(t){return r.__awaiter(this,void 0,void 0,(function(){var e;return r.__generator(this,(function(n){switch(n.label){case 0:return this.$a(),this.va?[3,2]:(this.va=!0,(e=he.nt().window)&&e.removeEventListener("visibilitychange",this.ka),[4,this.La(t)]);case 1:n.sent(),n.label=2;case 2:return[2]}}))}))},t.prototype.enqueue=function(t){return this.$a(),this.va?new Promise((function(t){})):this.Oa(t)},t.prototype.lo=function(t){var e=this;this.$a(),this.va||(this.ba=this.ba.then((function(){var n=new Le,i=function(){return r.__awaiter(e,void 0,void 0,(function(){var e;return r.__generator(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,t()];case 1:return r.sent(),n.resolve(),this.Na.reset(),[3,3];case 2:if(!Mn(e=r.sent()))throw n.resolve(),e;return pe("AsyncQueue","Operation failed with retryable error: "+e),this.Na.gr(i),[3,3];case 3:return[2]}}))}))};return e.co(i),n.promise})))},t.prototype.Oa=function(t){var e=this,n=this.ya.then((function(){return e.Ca=!0,t().catch((function(t){throw e.Da=t,e.Ca=!1,ve("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.Ca=!1,t}))}));return this.ya=n,n},t.prototype.yr=function(t,e,n){var r=this;this.$a(),this.Fa.indexOf(t)>-1&&(e=0);var i=qn.Va(this,t,e,n,(function(t){return r.qa(t)}));return this.Sa.push(i),i},t.prototype.$a=function(){this.Da&&ye()},t.prototype.Ua=function(){},t.prototype.Qa=function(){return r.__awaiter(this,void 0,void 0,(function(){var t;return r.__generator(this,(function(e){switch(e.label){case 0:return[4,t=this.ya];case 1:e.sent(),e.label=2;case 2:if(t!==this.ya)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.Wa=function(t){for(var e=0,n=this.Sa;e<n.length;e++)if(n[e].Er===t)return!0;return!1},t.prototype.ja=function(t){var e=this;return this.Qa().then((function(){e.Sa.sort((function(t,e){return t.Aa-e.Aa}));for(var n=0,r=e.Sa;n<r.length;n++){var i=r[n];if(i.vr(),"all"!==t&&i.Er===t)break}return e.Qa()}))},t.prototype.Ka=function(t){this.Fa.push(t)},t.prototype.qa=function(t){var e=this.Sa.indexOf(t);this.Sa.splice(e,1)},t}();function Hn(t,e){if(ve("AsyncQueue",e+": "+t),Mn(t))return new f(h.UNAVAILABLE,e+": "+t);throw t}function Gn(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],s=we(n,i);return 0===s?we(r,o):s}var Yn=function(){function t(t){this.Ga=t,this.buffer=new jt(Gn),this.za=0}return t.prototype.Ha=function(){return++this.za},t.prototype.Ya=function(t){var e=[t,this.Ha()];if(this.buffer.size<this.Ga)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Gn(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!0,configurable:!0}),t}(),Kn={Ja:!1,Xa:0,Za:0,tu:0},Xn=function(){function t(t,e,n){this.eu=t,this.su=e,this.iu=n}return t.nu=function(e){return new t(e,t.ru,t.hu)},t}();Xn.ou=-1,Xn.au=1048576,Xn.uu=41943040,Xn.ru=10,Xn.hu=1e3,Xn.cu=new Xn(Xn.uu,Xn.ru,Xn.hu),Xn.DISABLED=new Xn(Xn.ou,0,0);var Jn=function(){function t(t,e){this.$o=t,this.Ra=e,this._u=!1,this.lu=null}return t.prototype.start=function(t){this.$o.du.eu!==Xn.ou&&this.fu(t)},t.prototype.stop=function(){this.lu&&(this.lu.cancel(),this.lu=null)},Object.defineProperty(t.prototype,"ho",{get:function(){return null!==this.lu},enumerable:!0,configurable:!0}),t.prototype.fu=function(t){var e=this,n=this._u?3e5:6e4;pe("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.lu=this.Ra.yr("lru_garbage_collection",n,(function(){return r.__awaiter(e,void 0,void 0,(function(){var e;return r.__generator(this,(function(n){switch(n.label){case 0:this.lu=null,this._u=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.Tu(this.$o)];case 2:return n.sent(),[3,7];case 3:return Mn(e=n.sent())?(pe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,er(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.fu(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),Zn=function(){function t(t,e){this.Eu=t,this.du=e}return t.prototype.Iu=function(t,e){return this.Eu.Oo(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.wu=function(t,e){var n=this;if(0===e)return Ae.resolve(Pe.dr);var r=new Yn(e);return this.Eu.js(t,(function(t){return r.Ya(t.sequenceNumber)})).next((function(){return n.Eu.Bo(t,(function(t){return r.Ya(t)}))})).next((function(){return r.maxValue}))},t.prototype.Ah=function(t,e,n){return this.Eu.Ah(t,e,n)},t.prototype.jo=function(t,e){return this.Eu.jo(t,e)},t.prototype.Ru=function(t,e){var n=this;return this.du.eu===Xn.ou?(pe("LruGarbageCollector","Garbage collection skipped; disabled"),Ae.resolve(Kn)):this.Go(t).next((function(r){return r<n.du.eu?(pe("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.du.eu),Kn):n.Au(t,e)}))},t.prototype.Go=function(t){return this.Eu.Go(t)},t.prototype.Au=function(t,e){var n,r,i,s,a,u,c,l=this,h=Date.now();return this.Iu(t,this.du.su).next((function(e){return e>l.du.iu?(pe("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+l.du.iu+" from "+e),r=l.du.iu):r=e,s=Date.now(),l.wu(t,r)})).next((function(r){return n=r,a=Date.now(),l.Ah(t,n,e)})).next((function(e){return i=e,u=Date.now(),l.jo(t,n)})).next((function(t){return c=Date.now(),de()<=o.LogLevel.DEBUG&&pe("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(s-h)+"ms\n\tDetermined least recently used "+r+" in "+(a-s)+"ms\n\tRemoved "+i+" targets in "+(u-a)+"ms\n\tRemoved "+t+" documents in "+(c-u)+"ms\nTotal Duration: "+(c-h)+"ms"),Ae.resolve({Ja:!0,Xa:r,Za:i,tu:t})}))},t}(),Qn=function(){function t(t,e,n){this.persistence=t,this.mu=e,this.Pu=new Ut(we),this.Vu=new Se((function(t){return t.canonicalId()})),this.gu=b.min(),this.Wn=t.Do(n),this.pu=t.No(),this.Jh=t.Fo(),this.yu=new Ce(this.pu,this.Wn,this.persistence.ko()),this.mu.bu(this.yu)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.vu=function(t){return r.__awaiter(this,void 0,void 0,(function(){var e,n,i,o=this;return r.__generator(this,(function(r){switch(r.label){case 0:return e=this.Wn,n=this.yu,[4,this.persistence.runTransaction("Handle user change","readonly",(function(r){var i;return o.Wn.ea(r).next((function(s){return i=s,e=o.persistence.Do(t),n=new Ce(o.pu,e,o.persistence.ko()),e.ea(r)})).next((function(t){for(var e=[],o=[],s=Ht(),a=0,u=i;a<u.length;a++){var c=u[a];e.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++){var f=h[l];s=s.add(f.key)}}for(var d=0,p=t;d<p.length;d++){var v=p[d];o.push(v.batchId);for(var m=0,y=v.mutations;m<y.length;m++){var g=y[m];s=s.add(g.key)}}return n.Yn(r,s).next((function(t){return{Su:t,Du:e,Cu:o}}))}))}))];case 1:return i=r.sent(),[2,(this.Wn=e,this.yu=n,this.mu.bu(this.yu),i)]}}))}))},t.prototype.Fu=function(t){var e,n=this,r=g.now(),i=t.reduce((function(t,e){return t.add(e.key)}),Ht());return this.persistence.runTransaction("Locally write mutations","readwrite",(function(o){return n.yu.Yn(o,i).next((function(i){e=i;for(var s=[],a=0,u=t;a<u.length;a++){var c=u[a],l=c.Pt(e.get(c.key));null!=l&&s.push(new at(c.key,l,dt(l.proto.mapValue),it.exists(!0)))}return n.Wn.Yo(o,r,s,t)}))})).then((function(t){var n=t.In(e);return{batchId:t.batchId,Dn:n}}))},t.prototype.Nu=function(t){var e=this;return this.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(n){var r=t.batch.keys(),i=e.pu.Yr({Xr:!0});return e.ku(n,t,i).next((function(){return i.apply(n)})).next((function(){return e.Wn.ra(n)})).next((function(){return e.yu.Yn(n,r)}))}))},t.prototype.Mu=function(t){var e=this;return this.persistence.runTransaction("Reject batch","readwrite-primary",(function(n){var r;return e.Wn.Jo(n,t).next((function(t){return ge(null!==t),r=t.keys(),e.Wn.ia(n,t)})).next((function(){return e.Wn.ra(n)})).next((function(){return e.yu.Yn(n,r)}))}))},t.prototype.ta=function(){var t=this;return this.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.Wn.ta(e)}))},t.prototype._h=function(){var t=this;return this.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Jh._h(e)}))},t.prototype.xu=function(e){var n=this,r=e.Ee,i=this.Pu;return this.persistence.runTransaction("Apply remote event","readwrite-primary",(function(o){var s=n.pu.Yr({Xr:!0});i=n.Pu;var a=[];e.as.forEach((function(e,s){var u=i.get(s);if(u){a.push(n.Jh.bh(o,e.Is,s).next((function(){return n.Jh.ph(o,e.Ts,s)})));var c=e.resumeToken;if(c.rt()>0){var l=u.we(c,r).Ie(o.Oh);i=i.Ae(s,l),t.$u(u,l,e)&&a.push(n.Jh.Ih(o,l))}}}));var u=Ft(),c=Ht();if(e.cs.forEach((function(t,e){c=c.add(t)})),a.push(s.getEntries(o,c).next((function(t){e.cs.forEach((function(i,c){var l=t.get(i);c instanceof gt&&c.version.isEqual(b.min())?(s.Mn(i,r),u=u.Ae(i,c)):null==l||c.version.S(l.version)>0||0===c.version.S(l.version)&&l.hasPendingWrites?(s.Nn(c,r),u=u.Ae(i,c)):pe("LocalStore","Ignoring outdated watch update for ",i,". Current version:",l.version," Watch version:",c.version),e._s.has(i)&&a.push(n.persistence.hh.Ko(o,i))}))}))),!r.isEqual(b.min())){var l=n.Jh._h(o).next((function(t){return n.Jh.dh(o,o.Oh,r)}));a.push(l)}return Ae.vn(a).next((function(){return s.apply(o)})).next((function(){return n.yu.Jn(o,u)}))})).then((function(t){return n.Pu=i,t}))},t.$u=function(t,e,n){return ge(e.resumeToken.rt()>0),0===t.resumeToken.rt()||e.Ee.D()-t.Ee.D()>=this.Ou||n.Ts.size+n.Es.size+n.Is.size>0},t.prototype.Lu=function(t){return r.__awaiter(this,void 0,void 0,(function(){var e,n,i,o,s,a,u,c,l=this;return r.__generator(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return Ae.forEach(t,(function(t){return Ae.forEach(t.hr,(function(n){return l.persistence.hh.yh(e,t.targetId,n)})).next((function(){return Ae.forEach(t.or,(function(n){return l.persistence.hh.vh(e,t.targetId,n)}))}))}))}))];case 1:return r.sent(),[3,3];case 2:if(!Mn(e=r.sent()))throw e;return pe("LocalStore","Failed to update sequence numbers: "+e),[3,3];case 3:for(n=0,i=t;n<i.length;n++)o=i[n],s=o.targetId,o.fromCache||(a=this.Pu.get(s),u=a.Ee,c=a.Re(u),this.Pu=this.Pu.Ae(s,c));return[2]}}))}))},t.prototype.Bu=function(t){var e=this;return this.persistence.runTransaction("Get next mutation batch","readonly",(function(n){return void 0===t&&(t=-1),e.Wn.Zo(n,t)}))},t.prototype.qu=function(t){var e=this;return this.persistence.runTransaction("read document","readonly",(function(n){return e.yu.Kn(n,t)}))},t.prototype.Uu=function(t){var e=this;return this.persistence.runTransaction("Allocate target","readwrite",(function(n){var r;return e.Jh.gh(n,t).next((function(i){return i?(r=i,Ae.resolve(r)):e.Jh.oh(n).next((function(i){return r=new Nt(t,i,0,n.Oh),e.Jh.fh(n,r).next((function(){return r}))}))}))})).then((function(n){var r=e.Pu.get(n.targetId);return(null===r||n.Ee.S(r.Ee)>0)&&(e.Pu=e.Pu.Ae(n.targetId,n),e.Vu.set(t,n.targetId)),n}))},t.prototype.gh=function(t,e){var n=this.Vu.get(e);return void 0!==n?Ae.resolve(this.Pu.get(n)):this.Jh.gh(t,e)},t.prototype.Qu=function(t,e){var n=this,r=this.Pu.get(t),i=e?"readwrite":"readwrite-primary";return this.persistence.runTransaction("Release target",i,(function(t){return e?Ae.resolve():n.persistence.hh.removeTarget(t,r)})).then((function(){n.Pu=n.Pu.remove(t),n.Vu.delete(r.target)}))},t.prototype.Wu=function(t,e){var n=this,r=b.min(),i=Ht();return this.persistence.runTransaction("Execute query","readonly",(function(o){return n.gh(o,t.ee()).next((function(t){if(t)return r=t.lastLimboFreeSnapshotVersion,n.Jh.Sh(o,t.targetId).next((function(t){i=t}))})).next((function(){return n.mu.Zn(o,t,e?r:b.min(),e?i:Ht())})).next((function(t){return{documents:t,ju:i}}))}))},t.prototype.ku=function(t,e,n){var r=this,i=e.batch,o=i.keys(),s=Ae.resolve();return o.forEach((function(r){s=s.next((function(){return n.xn(t,r)})).next((function(t){var o=t,s=e.Rn.get(r);ge(null!==s),(!o||o.version.S(s)<0)&&(o=i.at(r,o,e))&&n.Nn(o,e.wn)}))})),s.next((function(){return r.Wn.ia(t,i)}))},t.prototype.Tu=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.Ru(n,e.Pu)}))},t}();Qn.Ou=3e8;var tr=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).persistence=e,i.Wn=e.Do(r),i.pu=e.No(),i.Jh=e.Fo(),i}return r.__extends(e,t),e.prototype.start=function(){return this.Ku()},e.prototype.Gu=function(t){var e=this;return this.persistence.runTransaction("Lookup mutation documents","readonly",(function(n){return e.Wn.Xo(n,t).next((function(t){return t?e.yu.Yn(n,t):Ae.resolve(null)}))}))},e.prototype.zu=function(t){this.Wn.na(t)},e.prototype.uo=function(t){this.persistence.uo(t)},e.prototype.So=function(){return this.persistence.So()},e.prototype.Hu=function(t){var e=this,n=this.Pu.get(t);return n?Promise.resolve(n.target):this.persistence.runTransaction("Get target data","readonly",(function(n){return e.Jh.si(n,t).next((function(t){return t?t.target:null}))}))},e.prototype.Kr=function(){var t=this;return this.persistence.runTransaction("Get new document changes","readonly",(function(e){return t.pu.Kr(e,t.gu)})).then((function(e){var n=e.Gr,r=e.readTime;return t.gu=r,n}))},e.prototype.Ku=function(){return r.__awaiter(this,void 0,void 0,(function(){var t,e=this;return r.__generator(this,(function(n){switch(n.label){case 0:return t=this,[4,this.persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return e.pu.Hr(t)}))];case 1:return t.gu=n.sent(),[2]}}))}))},e}(Qn);function er(t){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){if(t.code!==h.FAILED_PRECONDITION||t.message!==De)throw t;return pe("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var nr=function(){function t(){this.Yu=new jt(rr.Ju),this.Xu=new jt(rr.Zu)}return t.prototype.B=function(){return this.Yu.B()},t.prototype.yh=function(t,e){var n=new rr(t,e);this.Yu=this.Yu.add(n),this.Xu=this.Xu.add(n)},t.prototype.tc=function(t,e){var n=this;t.forEach((function(t){return n.yh(t,e)}))},t.prototype.vh=function(t,e){this.ec(new rr(t,e))},t.prototype.sc=function(t,e){var n=this;t.forEach((function(t){return n.vh(t,e)}))},t.prototype.ic=function(t){var e=this,n=T.EMPTY,r=new rr(n,t),i=new rr(n,t+1),o=[];return this.Xu.Ke([r,i],(function(t){e.ec(t),o.push(t.key)})),o},t.prototype.nc=function(){var t=this;this.Yu.forEach((function(e){return t.ec(e)}))},t.prototype.ec=function(t){this.Yu=this.Yu.delete(t),this.Xu=this.Xu.delete(t)},t.prototype.rc=function(t){var e=T.EMPTY,n=new rr(e,t),r=new rr(e,t+1),i=Ht();return this.Xu.Ke([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.Ch=function(t){var e=new rr(t,0),n=this.Yu.ze(e);return null!==n&&t.isEqual(n.key)},t}(),rr=function(){function t(t,e){this.key=t,this.hc=e}return t.Ju=function(t,e){return T.N(t.key,e.key)||we(t.hc,e.hc)},t.Zu=function(t,e){return we(t.hc,e.hc)||T.N(t.key,e.key)},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function ir(t,e){if(0!==e.length)throw new f(h.INVALID_ARGUMENT,"Function "+t+"() does not support arguments, but was called with "+Er(e.length,"argument")+".")}function or(t,e,n){if(e.length!==n)throw new f(h.INVALID_ARGUMENT,"Function "+t+"() requires "+Er(n,"argument")+", but was called with "+Er(e.length,"argument")+".")}function sr(t,e,n){if(e.length<n)throw new f(h.INVALID_ARGUMENT,"Function "+t+"() requires at least "+Er(n,"argument")+", but was called with "+Er(e.length,"argument")+".")}function ar(t,e,n,r){if(e.length<n||e.length>r)throw new f(h.INVALID_ARGUMENT,"Function "+t+"() requires between "+n+" and "+r+" arguments, but was called with "+Er(e.length,"argument")+".")}function ur(t,e,n,r){pr(t,e,wr(n)+" argument",r)}function cr(t,e,n,r){void 0!==r&&ur(t,e,n,r)}function lr(t,e,n,r){pr(t,e,n+" option",r)}function hr(t,e,n,r){void 0!==r&&lr(t,e,n,r)}function fr(t,e,n,r,i){void 0!==r&&function(t,e,n,r,i){for(var o=[],s=0,a=i;s<a.length;s++){var u=a[s];if(u===r)return;o.push(mr(u))}var c=mr(r);throw new f(h.INVALID_ARGUMENT,"Invalid value "+c+" provided to function "+t+'() for option "'+n+'". Acceptable values: '+o.join(", "))}(t,0,n,r,i)}function dr(t,e,n,r){if(!e.some((function(t){return t===r})))throw new f(h.INVALID_ARGUMENT,"Invalid value "+mr(r)+" provided to function "+t+"() for its "+wr(n)+" argument. Acceptable values: "+e.join(", "));return r}function pr(t,e,n,r){if(!("object"===e?vr(r):"non-empty string"===e?"string"==typeof r&&""!==r:typeof r===e)){var i=mr(r);throw new f(h.INVALID_ARGUMENT,"Function "+t+"() requires its "+n+" to be of type "+e+", but it was: "+i)}}function vr(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}function mr(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":ye()}function yr(t,e,n){if(void 0===n)throw new f(h.INVALID_ARGUMENT,"Function "+t+"() requires a valid "+wr(e)+" argument, but it was undefined.")}function gr(t,e,n){S(e,(function(e,r){if(n.indexOf(e)<0)throw new f(h.INVALID_ARGUMENT,"Unknown option '"+e+"' passed to function "+t+"(). Available options: "+n.join(", "))}))}function br(t,e,n,r){var i=mr(r);return new f(h.INVALID_ARGUMENT,"Function "+t+"() requires its "+wr(n)+" argument to be a "+e+", but it was: "+i)}function _r(t,e,n){if(n<=0)throw new f(h.INVALID_ARGUMENT,"Function "+t+"() requires its "+wr(e)+" argument to be a positive number, but it was: "+n+".")}function wr(t){switch(t){case 1:return"first";case 2:return"second";case 3:return"third";default:return t+"th"}}function Er(t,e){return t+" "+e+(1===t?"":"s")}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Ir(){if("undefined"==typeof Uint8Array)throw new f(h.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Tr(){if(!he.nt().oc)throw new f(h.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var kr=function(){function t(t){Tr(),this.ac=t}return t.fromBase64String=function(e){or("Blob.fromBase64String",arguments,1),ur("Blob.fromBase64String","string",1,e),Tr();try{return new t(O.fromBase64String(e))}catch(e){throw new f(h.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+e)}},t.fromUint8Array=function(e){if(or("Blob.fromUint8Array",arguments,1),Ir(),!(e instanceof Uint8Array))throw br("Blob.fromUint8Array","Uint8Array",1,e);return new t(O.fromUint8Array(e))},t.prototype.toBase64=function(){return or("Blob.toBase64",arguments,0),Tr(),this.ac.toBase64()},t.prototype.toUint8Array=function(){return or("Blob.toUint8Array",arguments,0),Ir(),this.ac.toUint8Array()},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this.ac.isEqual(t.ac)},t}(),Sr=function(t){!function(t,e,n,r){if(!(e instanceof Array)||e.length<1)throw new f(h.INVALID_ARGUMENT,"Function FieldPath() requires its fieldNames argument to be an array with at least "+Er(1,"element")+".")}(0,t);for(var e=0;e<t.length;++e)if(ur("FieldPath","string",e,t[e]),0===t[e].length)throw new f(h.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.uc=new I(t)},xr=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.call(this,e)||this}return r.__extends(e,t),e.documentId=function(){return e.cc},e.prototype.isEqual=function(t){if(!(t instanceof e))throw br("isEqual","FieldPath",1,t);return this.uc.isEqual(t.uc)},e}(Sr);
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */xr.cc=new xr(I.J().j());var Or=new RegExp("[~\\*/\\[\\]]"),Ar=function(){this._c=this},Nr=function(t){function e(e){var n=this;return(n=t.call(this)||this).lc=e,n}return r.__extends(e,t),e.prototype.dc=function(t){if(2!==t.fc)throw 1===t.fc?t.Tc(this.lc+"() can only appear at the top level of your update data"):t.Tc(this.lc+"() cannot be used with set() unless you pass {merge:true}");return t.Vt.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(Ar),Dr=function(t){function e(e){var n=this;return(n=t.call(this)||this).lc=e,n}return r.__extends(e,t),e.prototype.dc=function(t){return new nt(t.path,X.instance)},e.prototype.isEqual=function(t){return t instanceof e},e}(Ar),Rr=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).lc=e,r.Ec=n,r}return r.__extends(e,t),e.prototype.dc=function(t){var e=new Wr({fc:3,methodName:this.lc,Ic:!0},t.ii,t.serializer,t.ignoreUndefinedProperties),n=this.Ec.map((function(t){return zr(t,e)})),r=new J(n);return new nt(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Ar),Cr=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).lc=e,r.Ec=n,r}return r.__extends(e,t),e.prototype.dc=function(t){var e=new Wr({fc:3,methodName:this.lc,Ic:!0},t.ii,t.serializer,t.ignoreUndefinedProperties),n=this.Ec.map((function(t){return zr(t,e)})),r=new Z(n);return new nt(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Ar),Ur=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).lc=e,r.wc=n,r}return r.__extends(e,t),e.prototype.dc=function(t){var e=new Wr({fc:3,methodName:this.lc},t.ii,t.serializer,t.ignoreUndefinedProperties),n=zr(this.wc,e),r=new Q(t.serializer,n);return new nt(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Ar),Pr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e.delete=function(){return ir("FieldValue.delete",arguments),new Lr(new Nr("FieldValue.delete"))},e.serverTimestamp=function(){return ir("FieldValue.serverTimestamp",arguments),new Lr(new Dr("FieldValue.serverTimestamp"))},e.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return sr("FieldValue.arrayUnion",arguments,1),new Lr(new Rr("FieldValue.arrayUnion",t))},e.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return sr("FieldValue.arrayRemove",arguments,1),new Lr(new Cr("FieldValue.arrayRemove",t))},e.increment=function(t){return ur("FieldValue.increment","number",1,t),or("FieldValue.increment",arguments,1),new Lr(new Ur("FieldValue.increment",t))},e}(Ar),Lr=function(t){function e(e){var n=this;return(n=t.call(this)||this)._c=e,n.lc=e.lc,n}return r.__extends(e,t),e.prototype.dc=function(t){return this._c.dc(t)},e.prototype.isEqual=function(t){return t instanceof e&&this._c.isEqual(t._c)},e}(Pr),jr=function(){function t(t,e){if(or("GeoPoint",arguments,2),ur("GeoPoint","number",1,t),ur("GeoPoint","number",2,e),!isFinite(t)||t<-90||t>90)throw new f(h.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new f(h.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.Rc=t,this.Ac=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this.Rc},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.Ac},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(t){return this.Rc===t.Rc&&this.Ac===t.Ac},t.prototype.p=function(t){return we(this.Rc,t.Rc)||we(this.Ac,t.Ac)},t}(),Mr=/^__.*__$/,Vr=function(t,e,n){this.mc=t,this.Pc=e,this.Vc=n},Fr=function(){function t(t,e,n){this.data=t,this.Vt=e,this.fieldTransforms=n}return t.prototype.gc=function(t,e){var n=[];return null!==this.Vt?n.push(new at(t,this.data,this.Vt,e)):n.push(new st(t,this.data,e)),this.fieldTransforms.length>0&&n.push(new ut(t,this.fieldTransforms)),n},t}(),$r=function(){function t(t,e,n){this.data=t,this.Vt=e,this.fieldTransforms=n}return t.prototype.gc=function(t,e){var n=[new at(t,this.data,this.Vt,e)];return this.fieldTransforms.length>0&&n.push(new ut(t,this.fieldTransforms)),n},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Br(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ye()}}var Wr=function(){function t(t,e,n,r,i,o){this.settings=t,this.ii=e,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.pc(),this.fieldTransforms=i||[],this.Vt=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fc",{get:function(){return this.settings.fc},enumerable:!0,configurable:!0}),t.prototype.yc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.ii,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.Vt)},t.prototype.bc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.yc({path:n,Ic:!1});return r.vc(t),r},t.prototype.Sc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.yc({path:n,Ic:!1});return r.pc(),r},t.prototype.Dc=function(t){return this.yc({path:void 0,Ic:!0})},t.prototype.Tc=function(t){var e=!this.path||this.path.B()?"":" (found in field "+this.path.toString()+")";return new f(h.INVALID_ARGUMENT,"Function "+this.settings.methodName+"() called with invalid data. "+t+e)},t.prototype.contains=function(t){return void 0!==this.Vt.find((function(e){return t.q(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.q(e.field)}))},t.prototype.pc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.vc(this.path.get(t))},t.prototype.vc=function(t){if(0===t.length)throw this.Tc("Document fields must not be empty");if(Br(this.fc)&&Mr.test(t))throw this.Tc('Document fields cannot begin and end with "__"')},t}(),qr=function(){function t(t,e,n){this.ii=t,this.ignoreUndefinedProperties=e,this.serializer=n||he.nt().Cc(t)}return t.prototype.Fc=function(t,e,n){void 0===n&&(n={});var r=this.Nc(n.merge||n.mergeFields?2:0,t);Yr("Data must be an object, but it was:",r,e);var i,o,s=Hr(e,r);if(n.merge)i=new et(r.Vt),o=r.fieldTransforms;else if(n.mergeFields){for(var a=[],u=0,c=n.mergeFields;u<c.length;u++){var l=c[u],d=void 0;if(l instanceof Sr)d=l.uc;else{if("string"!=typeof l)throw ye();d=Xr(t,l)}if(!r.contains(d))throw new f(h.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");Jr(a,d)||a.push(d)}i=new et(a),o=r.fieldTransforms.filter((function(t){return i.dt(t.field)}))}else i=null,o=r.fieldTransforms;return new Fr(new ht(s),i,o)},t.prototype.kc=function(t,e){var n=this.Nc(1,t);Yr("Data must be an object, but it was:",n,e);var r=[],i=new ft;S(e,(function(e,o){var s=Xr(t,e),a=n.Sc(s);if(o instanceof Ar&&o._c instanceof Nr)r.push(s);else{var u=zr(o,a);null!=u&&(r.push(s),i.set(s,u))}}));var o=new et(r);return new $r(i.yt(),o,n.fieldTransforms)},t.prototype.Mc=function(t,e,n,r){var i=this.Nc(1,t),o=[Kr(t,e)],s=[n];if(r.length%2!=0)throw new f(h.INVALID_ARGUMENT,"Function "+t+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var a=0;a<r.length;a+=2)o.push(Kr(t,r[a])),s.push(r[a+1]);for(var u=[],c=new ft,l=o.length-1;l>=0;--l)if(!Jr(u,o[l])){var d=o[l],p=s[l],v=i.Sc(d);if(p instanceof Ar&&p._c instanceof Nr)u.push(d);else{var m=zr(p,v);null!=m&&(u.push(d),c.set(d,m))}}var y=new et(u);return new $r(c.yt(),y,i.fieldTransforms)},t.prototype.Nc=function(t,e){return new Wr({fc:t,methodName:e,path:I.G,Ic:!1},this.ii,this.serializer,this.ignoreUndefinedProperties)},t.prototype.xc=function(t,e,n){return void 0===n&&(n=!1),zr(e,this.Nc(n?4:3,t))},t}();function zr(t,e){if(Gr(t))return Yr("Unsupported field value:",e,t),Hr(t,e);if(t instanceof Ar)return function(t,e){if(!Br(e.fc))throw e.Tc(t.lc+"() can only be used with update() and set()");if(!e.path)throw e.Tc(t.lc+"() is not currently supported inside arrays");var n=t.dc(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(e.path&&e.Vt.push(e.path),t instanceof Array){if(e.settings.Ic&&4!==e.fc)throw e.Tc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=zr(o[i],e.Dc(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return e.serializer.ai(t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=g.fromDate(t);return{timestampValue:e.serializer.C(n)}}if(t instanceof g){var r=new g(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:e.serializer.C(r)}}if(t instanceof jr)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof kr)return{bytesValue:e.serializer.ui(t)};if(t instanceof Vr){var i=e.ii,o=t.mc;if(!o.isEqual(i))throw e.Tc("Document reference is for database "+o.projectId+"/"+o.database+" but should be for database "+i.projectId+"/"+i.database);return{referenceValue:e.serializer._i(t.Pc.path,t.mc)}}if(void 0===t&&e.ignoreUndefinedProperties)return null;throw e.Tc("Unsupported field value: "+mr(t))}(t,e)}function Hr(t,e){var n={};return x(t)?e.path&&e.path.length>0&&e.Vt.push(e.path):S(t,(function(t,r){var i=zr(r,e.bc(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function Gr(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof g||t instanceof jr||t instanceof kr||t instanceof Vr||t instanceof Ar)}function Yr(t,e,n){if(!Gr(n)||!vr(n)){var r=mr(n);throw"an object"===r?e.Tc(t+" a custom object"):e.Tc(t+" "+r)}}function Kr(t,e){if(e instanceof Sr)return e.uc;if("string"==typeof e)return Xr(t,e);throw new f(h.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. Field path arguments must be of type string or FieldPath.")}function Xr(t,e){try{return function(t){if(t.search(Or)>=0)throw new f(h.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(xr.bind.apply(xr,r.__spreadArrays([void 0],t.split("."))))}catch(e){throw new f(h.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(e).uc}catch(e){var n=(i=e)instanceof Error?i.message:i.toString();throw new f(h.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. "+n)}var i}function Jr(t,e){return t.some((function(t){return t.isEqual(e)}))}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Zr=function(){function t(t,e,n,r,i,o){this.Tr=t,this.$c=n,this.Oc=r,this.Lc=i,this.listener=o,this.state=0,this.Bc=0,this.qc=null,this.stream=null,this.Na=new je(t,e)}return t.prototype.Uc=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.Qc=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.Wc()},t.prototype.stop=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return this.Uc()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.jc=function(){this.state=0,this.Na.reset()},t.prototype.Kc=function(){var t=this;this.Qc()&&null===this.qc&&(this.qc=this.Tr.yr(this.$c,6e4,(function(){return t.Gc()})))},t.prototype.zc=function(t){this.Hc(),this.stream.send(t)},t.prototype.Gc=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){return this.Qc()?[2,this.close(0)]:[2]}))}))},t.prototype.Hc=function(){this.qc&&(this.qc.cancel(),this.qc=null)},t.prototype.close=function(t,e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(n){switch(n.label){case 0:return this.Hc(),this.Na.cancel(),this.Bc++,3!==t?this.Na.reset():e&&e.code===h.RESOURCE_EXHAUSTED?(ve(e.toString()),ve("Using maximum backoff delay to prevent overloading the backend."),this.Na.Vr()):e&&e.code===h.UNAUTHENTICATED&&this.Lc._(),null!==this.stream&&(this.Yc(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Jc(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.Yc=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.Xc(this.Bc),n=this.Bc;this.Lc.getToken().then((function(e){t.Bc===n&&t.Zc(e)}),(function(n){e((function(){var e=new f(h.UNKNOWN,"Fetching auth token failed: "+n.message);return t.t_(e)}))}))},t.prototype.Zc=function(t){var e=this,n=this.Xc(this.Bc);this.stream=this.e_(t),this.stream.s_((function(){n((function(){return e.state=2,e.listener.s_()}))})),this.stream.Jc((function(t){n((function(){return e.t_(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.Wc=function(){var t=this;this.state=4,this.Na.gr((function(){return r.__awaiter(t,void 0,void 0,(function(){return r.__generator(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.t_=function(t){return pe("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.Xc=function(t){var e=this;return function(n){e.Tr.co((function(){return e.Bc===t?n():(pe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),Qr=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).serializer=i,s}return r.__extends(e,t),e.prototype.e_=function(t){return this.Oc.i_("Listen",t)},e.prototype.onMessage=function(t){this.Na.reset();var e=this.serializer.pi(t),n=this.serializer.bi(t);return this.listener.n_(e,n)},e.prototype.r_=function(t){var e={};e.database=this.serializer.wi,e.addTarget=this.serializer.ee(t);var n=this.serializer.zi(t);n&&(e.labels=n),this.zc(e)},e.prototype.h_=function(t){var e={};e.database=this.serializer.wi,e.removeTarget=t,this.zc(e)},e}(Zr),ti=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).serializer=i,s.o_=!1,s.lastStreamToken=O.ht,s}return r.__extends(e,t),Object.defineProperty(e.prototype,"a_",{get:function(){return this.o_},enumerable:!0,configurable:!0}),e.prototype.start=function(){this.o_=!1,this.lastStreamToken=O.ht,t.prototype.start.call(this)},e.prototype.Yc=function(){this.o_&&this.u_([])},e.prototype.e_=function(t){return this.Oc.i_("Write",t)},e.prototype.onMessage=function(t){if(ge(!!t.streamToken),this.lastStreamToken=this.serializer.ci(t.streamToken),this.o_){this.Na.reset();var e=this.serializer.$i(t.writeResults,t.commitTime),n=this.serializer.fromVersion(t.commitTime);return this.listener.c_(n,e)}return ge(!t.writeResults||0===t.writeResults.length),this.o_=!0,this.listener.__()},e.prototype.l_=function(){var t={};t.database=this.serializer.wi,this.zc(t)},e.prototype.u_=function(t){var e=this,n={streamToken:this.serializer.ui(this.lastStreamToken),writes:t.map((function(t){return e.serializer.vi(t)}))};this.zc(n)},e}(Zr),ei=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Oc=e,i.credentials=n,i.serializer=r,i.f_=!1,i}return r.__extends(e,t),e.prototype.T_=function(){if(this.f_)throw new f(h.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.E_=function(t,e){var n=this;return this.T_(),this.credentials.getToken().then((function(r){return n.Oc.E_(t,e,r)})).catch((function(t){throw t.code===h.UNAUTHENTICATED&&n.credentials._(),t}))},e.prototype.I_=function(t,e){var n=this;return this.T_(),this.credentials.getToken().then((function(r){return n.Oc.I_(t,e,r)})).catch((function(t){throw t.code===h.UNAUTHENTICATED&&n.credentials._(),t}))},e}((function(){this.d_=void 0})),ni=function(){function t(t){this.w_=t,this.R_=new Map,this.mutations=[],this.A_=!1,this.m_=null,this.P_=new Set}return t.prototype.V_=function(t){return r.__awaiter(this,void 0,void 0,(function(){var e,n=this;return r.__generator(this,(function(i){switch(i.label){case 0:if(this.g_(),this.mutations.length>0)throw new f(h.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o,s,a;return r.__generator(this,(function(r){switch(r.label){case 0:return n=be(t),i={database:n.serializer.wi,documents:e.map((function(t){return n.serializer.fi(t)}))},[4,n.I_("BatchGetDocuments",i)];case 1:return o=r.sent(),s=new Map,o.forEach((function(t){var e=n.serializer.gi(t);s.set(e.key.toString(),e)})),a=[],[2,(e.forEach((function(t){var e=s.get(t.toString());ge(!!e),a.push(e)})),a)]}}))}))}(this.w_,t)];case 1:return[2,((e=i.sent()).forEach((function(t){t instanceof gt||t instanceof yt?n.p_(t):ye()})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.gc(t,this.Rt(t))),this.P_.add(t)},t.prototype.update=function(t,e){try{this.write(e.gc(t,this.y_(t)))}catch(t){this.m_=t}this.P_.add(t)},t.prototype.delete=function(t){this.write([new ct(t,this.Rt(t))]),this.P_.add(t)},t.prototype.commit=function(){return r.__awaiter(this,void 0,void 0,(function(){var t,e=this;return r.__generator(this,(function(n){switch(n.label){case 0:if(this.g_(),this.m_)throw this.m_;return t=this.R_,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=new T(w.K(n));e.mutations.push(new lt(r,e.Rt(r)))})),[4,function(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n,i;return r.__generator(this,(function(r){switch(r.label){case 0:return n=be(t),i={database:n.serializer.wi,writes:e.map((function(t){return n.serializer.vi(t)}))},[4,n.E_("Commit",i)];case 1:return r.sent(),[2]}}))}))}(this.w_,this.mutations)];case 1:return n.sent(),this.A_=!0,[2]}}))}))},t.prototype.p_=function(t){var e;if(t instanceof yt)e=t.version;else{if(!(t instanceof gt))throw ye();e=b.min()}var n=this.R_.get(t.key.toString());if(n){if(!e.isEqual(n))throw new f(h.ABORTED,"Document version changed between two reads.")}else this.R_.set(t.key.toString(),e)},t.prototype.Rt=function(t){var e=this.R_.get(t.toString());return!this.P_.has(t)&&e?it.updateTime(e):it.ft()},t.prototype.y_=function(t){var e=this.R_.get(t.toString());if(!this.P_.has(t)&&e){if(e.isEqual(b.min()))throw new f(h.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return it.updateTime(e)}return it.exists(!0)},t.prototype.write=function(t){this.g_(),this.mutations=this.mutations.concat(t)},t.prototype.g_=function(){},t}(),ri=function(){function t(t,e){this.Ra=t,this.b_=e,this.state="Unknown",this.v_=0,this.S_=null,this.D_=!0}return t.prototype.C_=function(){var t=this;0===this.v_&&(this.F_("Unknown"),this.S_=this.Ra.yr("online_state_timeout",1e4,(function(){return t.S_=null,t.N_("Backend didn't respond within 10 seconds."),t.F_("Offline"),Promise.resolve()})))},t.prototype.k_=function(t){"Online"===this.state?this.F_("Unknown"):(this.v_++,this.v_>=1&&(this.M_(),this.N_("Connection failed 1 times. Most recent error: "+t.toString()),this.F_("Offline")))},t.prototype.set=function(t){this.M_(),this.v_=0,"Online"===t&&(this.D_=!1),this.F_(t)},t.prototype.F_=function(t){t!==this.state&&(this.state=t,this.b_(t))},t.prototype.N_=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.D_?(ve(e),this.D_=!1):pe("OnlineStateTracker",e)},t.prototype.M_=function(){null!==this.S_&&(this.S_.cancel(),this.S_=null)},t}(),ii=function(){function t(t,e,n,i,o){var s=this;this.x_=t,this.w_=e,this.Ra=n,this.O_=[],this.L_=new Map,this.B_=null,this.networkEnabled=!1,this.isPrimary=!1,this.q_=!1,this.U_=o,this.U_.Q_((function(t){n.co((function(){return r.__awaiter(s,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return this.W_()?(pe("RemoteStore","Restarting streams for network reachability change."),[4,this.j_()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.K_=new ri(n,i),this.G_=function(t,e,n){var r=be(t);return new Qr(e,r.Oc,r.credentials,r.serializer,n)}(this.w_,n,{s_:this.z_.bind(this),Jc:this.H_.bind(this),n_:this.Y_.bind(this)}),this.J_=function(t,e,n){var r=be(t);return new ti(e,r.Oc,r.credentials,r.serializer,n)}(this.w_,n,{s_:this.X_.bind(this),Jc:this.Z_.bind(this),__:this.tl.bind(this),c_:this.c_.bind(this)})}return t.prototype.start=function(){return this.enableNetwork()},t.prototype.enableNetwork=function(){return this.networkEnabled=!0,this.el()},t.prototype.el=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return this.W_()?(this.sl()?this.il():this.K_.set("Unknown"),[4,this.nl()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.disableNetwork=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return this.networkEnabled=!1,[4,this.rl()];case 1:return t.sent(),this.K_.set("Offline"),[2]}}))}))},t.prototype.rl=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return[4,this.J_.stop()];case 1:return t.sent(),[4,this.G_.stop()];case 2:return t.sent(),this.O_.length>0&&(pe("RemoteStore","Stopping write stream with "+this.O_.length+" pending writes"),this.O_=[]),this.hl(),[2]}}))}))},t.prototype.Vo=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return pe("RemoteStore","RemoteStore shutting down."),this.networkEnabled=!1,[4,this.rl()];case 1:return t.sent(),this.U_.Vo(),this.K_.set("Unknown"),[2]}}))}))},t.prototype.listen=function(t){this.L_.has(t.targetId)||(this.L_.set(t.targetId,t),this.sl()?this.il():this.G_.Qc()&&this.ol(t))},t.prototype.al=function(t){this.L_.delete(t),this.G_.Qc()&&this.ul(t),0===this.L_.size&&(this.G_.Qc()?this.G_.Kc():this.W_()&&this.K_.set("Unknown"))},t.prototype.si=function(t){return this.L_.get(t)||null},t.prototype.ei=function(t){return this.cl.ei(t)},t.prototype.ol=function(t){this.B_.Ns(t.targetId),this.G_.r_(t)},t.prototype.ul=function(t){this.B_.Ns(t),this.G_.h_(t)},t.prototype.il=function(){this.B_=new ie(this),this.G_.start(),this.K_.C_()},t.prototype.sl=function(){return this.W_()&&!this.G_.Uc()&&this.L_.size>0},t.prototype.W_=function(){return!this.q_&&this.isPrimary&&this.networkEnabled},t.prototype.hl=function(){this.B_=null},t.prototype.z_=function(){return r.__awaiter(this,void 0,void 0,(function(){var t=this;return r.__generator(this,(function(e){return this.L_.forEach((function(e,n){t.ol(e)})),[2]}))}))},t.prototype.H_=function(t){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){return this.hl(),this.sl()?(this.K_.k_(t),this.il()):this.K_.set("Unknown"),[2]}))}))},t.prototype.Y_=function(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o;return r.__generator(this,(function(r){switch(r.label){case 0:if(this.K_.set("Online"),!(t instanceof ne&&2===t.state&&t.cause))return[3,6];r.label=1;case 1:return r.trys.push([1,3,,5]),[4,this._l(t)];case 2:return r.sent(),[3,5];case 3:return n=r.sent(),pe("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),[4,this.ll(n)];case 4:return r.sent(),[3,5];case 5:return[3,13];case 6:if(t instanceof te?this.B_.qs(t):t instanceof ee?this.B_.Hs(t):this.B_.Ws(t),e.isEqual(b.min()))return[3,13];r.label=7;case 7:return r.trys.push([7,11,,13]),[4,this.x_._h()];case 8:return i=r.sent(),e.S(i)>=0?[4,this.dl(e)]:[3,10];case 9:r.sent(),r.label=10;case 10:return[3,13];case 11:return pe("RemoteStore","Failed to raise snapshot:",o=r.sent()),[4,this.ll(o)];case 12:return r.sent(),[3,13];case 13:return[2]}}))}))},t.prototype.ll=function(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n=this;return r.__generator(this,(function(i){switch(i.label){case 0:if(!Mn(t))throw t;return this.q_=!0,[4,this.rl()];case 1:return i.sent(),this.K_.set("Offline"),e||(e=function(){return n.x_._h()}),this.Ra.lo((function(){return r.__awaiter(n,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return pe("RemoteStore","Retrying IndexedDB access"),[4,e()];case 1:return t.sent(),this.q_=!1,[4,this.el()];case 2:return t.sent(),[2]}}))}))})),[2]}}))}))},t.prototype.fl=function(t){var e=this;return t().catch((function(n){return e.ll(n,t)}))},t.prototype.dl=function(t){var e=this,n=this.B_.Xs(t);return n.as.forEach((function(n,r){if(n.resumeToken.rt()>0){var i=e.L_.get(r);i&&e.L_.set(r,i.we(n.resumeToken,t))}})),n.us.forEach((function(t){var n=e.L_.get(t);if(n){e.L_.set(t,n.we(O.ht,n.Ee)),e.ul(t);var r=new Nt(n.target,t,1,n.sequenceNumber);e.ol(r)}})),this.cl.xu(n)},t.prototype._l=function(t){return r.__awaiter(this,void 0,void 0,(function(){var e,n,i,o;return r.__generator(this,(function(r){switch(r.label){case 0:e=t.cause,n=0,i=t.targetIds,r.label=1;case 1:return n<i.length?(o=i[n],this.L_.has(o)?[4,this.cl.Tl(o,e)]:[3,3]):[3,5];case 2:r.sent(),this.L_.delete(o),this.B_.removeTarget(o),r.label=3;case 3:r.label=4;case 4:return n++,[3,1];case 5:return[2]}}))}))},t.prototype.nl=function(){return r.__awaiter(this,void 0,void 0,(function(){var t,e,n;return r.__generator(this,(function(r){switch(r.label){case 0:t=this.O_.length>0?this.O_[this.O_.length-1].batchId:-1,r.label=1;case 1:if(!this.El())return[3,7];r.label=2;case 2:return r.trys.push([2,4,,6]),[4,this.x_.Bu(t)];case 3:return null===(e=r.sent())?(0===this.O_.length&&this.J_.Kc(),[3,7]):(t=e.batchId,this.Il(e),[3,6]);case 4:return n=r.sent(),[4,this.ll(n)];case 5:return r.sent(),[3,6];case 6:return[3,1];case 7:return this.wl()&&this.Rl(),[2]}}))}))},t.prototype.El=function(){return this.W_()&&this.O_.length<10},t.prototype.Al=function(){return this.O_.length},t.prototype.Il=function(t){this.O_.push(t),this.J_.Qc()&&this.J_.a_&&this.J_.u_(t.mutations)},t.prototype.wl=function(){return this.W_()&&!this.J_.Uc()&&this.O_.length>0},t.prototype.Rl=function(){this.J_.start()},t.prototype.X_=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){return this.J_.l_(),[2]}))}))},t.prototype.tl=function(){return r.__awaiter(this,void 0,void 0,(function(){var t,e,n;return r.__generator(this,(function(r){for(t=0,e=this.O_;t<e.length;t++)n=e[t],this.J_.u_(n.mutations);return[2]}))}))},t.prototype.c_=function(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o=this;return r.__generator(this,(function(r){switch(r.label){case 0:return n=this.O_.shift(),i=Oe.from(n,t,e),[4,this.fl((function(){return o.cl.ml(i)}))];case 1:return r.sent(),[4,this.nl()];case 2:return r.sent(),[2]}}))}))},t.prototype.Z_=function(t){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return t&&this.J_.a_?[4,this.Pl(t)]:[3,2];case 1:e.sent(),e.label=2;case 2:return this.wl()&&this.Rl(),[2]}}))}))},t.prototype.Pl=function(t){return r.__awaiter(this,void 0,void 0,(function(){var e,n,i=this;return r.__generator(this,(function(r){switch(r.label){case 0:return Rt(n=t.code)&&n!==h.ABORTED?(e=this.O_.shift(),this.J_.jc(),[4,this.fl((function(){return i.cl.Vl(e.batchId,t)}))]):[3,3];case 1:return r.sent(),[4,this.nl()];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))},t.prototype.gl=function(){return new ni(this.w_)},t.prototype.j_=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return this.networkEnabled=!1,[4,this.rl()];case 1:return t.sent(),this.K_.set("Unknown"),[4,this.enableNetwork()];case 2:return t.sent(),[2]}}))}))},t.prototype.pl=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return this.W_()?(pe("RemoteStore","RemoteStore restarting streams for new credential"),[4,this.j_()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.yl=function(t){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return this.isPrimary=t,t&&this.networkEnabled?[4,this.enableNetwork()]:[3,2];case 1:return e.sent(),[3,5];case 2:return t?[3,4]:[4,this.rl()];case 3:e.sent(),this.K_.set("Unknown"),e.label=4;case 4:e.label=5;case 5:return[2]}}))}))},t}();
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function oi(t,e){return"firestore_clients_"+t+"_"+e}function si(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.t()&&(r+="_"+e.uid),r}function ai(t,e){return"firestore_targets_"+t+"_"+e}var ui=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.bl=function(e,n,r){var i=JSON.parse(r),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),s=void 0;return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(s=new f(i.error.code,i.error.message)),o?new t(e,n,i.state,s):(ve("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.vl=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),ci=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.bl=function(e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new f(r.error.code,r.error.message)),i?new t(e,r.state,o):(ve("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.vl=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),li=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.bl=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Yt(),s=0;i&&s<r.activeTargetIds.length;++s)i=D(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(ve("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),hi=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.bl=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(ve("SharedClientState","Failed to parse online state: "+e),null)},t}(),fi=function(){function t(){this.activeTargetIds=Yt()}return t.prototype.Sl=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Dl=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.vl=function(){var t={activeTargetIds:this.activeTargetIds.W(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),di=function(){function t(e,n,r,i,o){if(this.Tr=e,this.platform=n,this.persistenceKey=r,this.Cl=i,this.cl=null,this.b_=null,this.ur=null,this.Fl=this.Nl.bind(this),this.kl=new Ut(we),this.ho=!1,this.Ml=[],!t.zh(this.platform))throw new f(h.UNIMPLEMENTED,"LocalStorage is not available on this platform.");var s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.platform.window.localStorage,this.currentUser=o,this.xl=oi(this.persistenceKey,this.Cl),this.$l=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.kl=this.kl.Ae(this.Cl,new fi),this.Ol=new RegExp("^firestore_clients_"+s+"_([^_]*)$"),this.Ll=new RegExp("^firestore_mutations_"+s+"_(\\d+)(?:_(.*))?$"),this.Bl=new RegExp("^firestore_targets_"+s+"_(\\d+)$"),this.ql=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.platform.window.addEventListener("storage",this.Fl)}return t.zh=function(t){return!(!t.window||null==t.window.localStorage)},t.prototype.start=function(){return r.__awaiter(this,void 0,void 0,(function(){var t,e,n,i,o,s,a,u,c,l,h,f=this;return r.__generator(this,(function(r){switch(r.label){case 0:return[4,this.cl.So()];case 1:for(t=r.sent(),e=0,n=t;e<n.length;e++)(i=n[e])!==this.Cl&&(o=this.getItem(oi(this.persistenceKey,i)))&&(s=li.bl(i,o))&&(this.kl=this.kl.Ae(s.clientId,s));for(this.Ul(),(a=this.storage.getItem(this.ql))&&(u=this.Ql(a))&&this.Wl(u),c=0,l=this.Ml;c<l.length;c++)h=l[c],this.Nl(h);return this.Ml=[],this.platform.window.addEventListener("unload",(function(){return f.Vo()})),this.ho=!0,[2]}}))}))},t.prototype.lr=function(t){this.setItem(this.$l,JSON.stringify(t))},t.prototype.jl=function(){return this.Kl(this.kl)},t.prototype.Gl=function(t){var e=!1;return this.kl.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.zl=function(t){this.Hl(t,"pending")},t.prototype.Yl=function(t,e,n){this.Hl(t,e,n),this.Jl(t)},t.prototype.Xl=function(t){var e="not-current";if(this.Gl(t)){var n=this.storage.getItem(ai(this.persistenceKey,t));if(n){var r=ci.bl(t,n);r&&(e=r.state)}}return this.Zl.Sl(t),this.Ul(),e},t.prototype.td=function(t){this.Zl.Dl(t),this.Ul()},t.prototype.ed=function(t){return this.Zl.activeTargetIds.has(t)},t.prototype.sd=function(t){this.removeItem(ai(this.persistenceKey,t))},t.prototype.nd=function(t,e,n){this.rd(t,e,n)},t.prototype.vu=function(t,e,n){var r=this;e.forEach((function(t){r.Jl(t)})),this.currentUser=t,n.forEach((function(t){r.zl(t)}))},t.prototype.hd=function(t){this.od(t)},t.prototype.Vo=function(){this.ho&&(this.platform.window.removeEventListener("storage",this.Fl),this.removeItem(this.xl),this.ho=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return pe("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){pe("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){pe("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Nl=function(t){var e=this;if(t.storageArea===this.storage){if(pe("SharedClientState","EVENT",t.key,t.newValue),t.key===this.xl)return void ve("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Tr.lo((function(){return r.__awaiter(e,void 0,void 0,(function(){var e,n,i,o,s,a;return r.__generator(this,(function(r){if(this.ho){if(null!==t.key)if(this.Ol.test(t.key)){if(null==t.newValue)return e=this.ad(t.key),[2,this.ud(e,null)];if(n=this._d(t.key,t.newValue))return[2,this.ud(n.clientId,n)]}else if(this.Ll.test(t.key)){if(null!==t.newValue&&(i=this.ld(t.key,t.newValue)))return[2,this.dd(i)]}else if(this.Bl.test(t.key)){if(null!==t.newValue&&(o=this.fd(t.key,t.newValue)))return[2,this.Td(o)]}else if(t.key===this.ql){if(null!==t.newValue&&(s=this.Ql(t.newValue)))return[2,this.Wl(s)]}else t.key===this.$l&&(a=function(t){var e=Pe.dr;if(null!=t)try{var n=JSON.parse(t);ge("number"==typeof n),e=n}catch(t){ve("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(t.newValue))!==Pe.dr&&this.ur(a)}else this.Ml.push(t);return[2]}))}))}))}},Object.defineProperty(t.prototype,"Zl",{get:function(){return this.kl.get(this.Cl)},enumerable:!0,configurable:!0}),t.prototype.Ul=function(){this.setItem(this.xl,this.Zl.vl())},t.prototype.Hl=function(t,e,n){var r=new ui(this.currentUser,t,e,n),i=si(this.persistenceKey,this.currentUser,t);this.setItem(i,r.vl())},t.prototype.Jl=function(t){var e=si(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.od=function(t){var e={clientId:this.Cl,onlineState:t};this.storage.setItem(this.ql,JSON.stringify(e))},t.prototype.rd=function(t,e,n){var r=ai(this.persistenceKey,t),i=new ci(t,e,n);this.setItem(r,i.vl())},t.prototype.ad=function(t){var e=this.Ol.exec(t);return e?e[1]:null},t.prototype._d=function(t,e){var n=this.ad(t);return li.bl(n,e)},t.prototype.ld=function(t,e){var n=this.Ll.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return ui.bl(new l(i),r,e)},t.prototype.fd=function(t,e){var n=this.Bl.exec(t),r=Number(n[1]);return ci.bl(r,e)},t.prototype.Ql=function(t){return hi.bl(t)},t.prototype.dd=function(t){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.cl.Ed(t.batchId,t.state,t.error)]:(pe("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.Td=function(t){return this.cl.Id(t.targetId,t.state,t.error)},t.prototype.ud=function(t,e){var n=this,r=e?this.kl.Ae(t,e):this.kl.remove(t),i=this.Kl(this.kl),o=this.Kl(r),s=[],a=[];return o.forEach((function(t){i.has(t)||s.push(t)})),i.forEach((function(t){o.has(t)||a.push(t)})),this.cl.wd(s,a).then((function(){n.kl=r}))},t.prototype.Wl=function(t){this.kl.get(t.clientId)&&this.b_(t.onlineState)},t.prototype.Kl=function(t){var e=Yt();return t.forEach((function(t,n){e=e.He(n.activeTargetIds)})),e},t}(),pi=function(){function t(){this.Rd=new fi,this.Ad={},this.cl=null,this.b_=null,this.ur=null}return t.prototype.zl=function(t){},t.prototype.Yl=function(t,e,n){},t.prototype.Xl=function(t){return this.Rd.Sl(t),this.Ad[t]||"not-current"},t.prototype.nd=function(t,e,n){this.Ad[t]=e},t.prototype.td=function(t){this.Rd.Dl(t)},t.prototype.ed=function(t){return this.Rd.activeTargetIds.has(t)},t.prototype.sd=function(t){delete this.Ad[t]},t.prototype.jl=function(){return this.Rd.activeTargetIds},t.prototype.Gl=function(t){return this.Rd.activeTargetIds.has(t)},t.prototype.start=function(){return this.Rd=new fi,Promise.resolve()},t.prototype.vu=function(t,e,n){},t.prototype.hd=function(t){},t.prototype.Vo=function(){},t.prototype.lr=function(t){},t}(),vi=function(t){this.key=t},mi=function(t){this.key=t},yi=function(){function t(t,e){this.query=t,this.md=e,this.Pd=null,this.fs=!1,this.Vd=Ht(),this.ns=Ht(),this.gd=new Kt(t.se.bind(t))}return Object.defineProperty(t.prototype,"pd",{get:function(){return this.md},enumerable:!0,configurable:!0}),t.prototype.yd=function(t,e){var n=this,r=e?e.bd:new Xt,i=e?e.gd:this.gd,o=e?e.ns:this.ns,s=i,a=!1,u=this.query.oe()&&i.size===this.query.limit?i.last():null,c=this.query.ae()&&i.size===this.query.limit?i.first():null;if(t.pe((function(t,e){var l=i.get(t),h=e instanceof yt?e:null;h&&(h=n.query.matches(h)?h:null);var f=!!l&&n.ns.has(l.key),d=!!h&&(h.At||n.ns.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data().isEqual(h.data())?f!==d&&(r.track({type:3,doc:h}),p=!0):n.vd(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.query.se(h,u)>0||c&&n.query.se(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(a=!0)),p&&(h?(s=s.add(h),o=d?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))})),this.query.oe()||this.query.ae())for(;s.size>this.query.limit;){var l=this.query.oe()?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{gd:s,bd:r,Sd:a,ns:o}},t.prototype.vd=function(t,e){return t.At&&e.hasCommittedMutations&&!e.At},t.prototype.Ln=function(t,e,n){var r=this,i=this.gd;this.gd=t.gd,this.ns=t.ns;var o=t.bd.es();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ye()}};return n(t)-n(e)}(t.type,e.type)||r.query.se(t.doc,e.doc)})),this.Dd(n);var s=e?this.Cd():[],a=0===this.Vd.size&&this.fs?1:0,u=a!==this.Pd;return this.Pd=a,0!==o.length||u?{snapshot:new Jt(this.query,t.gd,i,o,t.ns,0===a,u,!1),Fd:s}:{Fd:s}},t.prototype.Nd=function(t){return this.fs&&"Offline"===t?(this.fs=!1,this.Ln({gd:this.gd,bd:new Xt,ns:this.ns,Sd:!1},!1)):{Fd:[]}},t.prototype.kd=function(t){return!this.md.has(t)&&!!this.gd.has(t)&&!this.gd.get(t).At},t.prototype.Dd=function(t){var e=this;t&&(t.Ts.forEach((function(t){return e.md=e.md.add(t)})),t.Es.forEach((function(t){})),t.Is.forEach((function(t){return e.md=e.md.delete(t)})),this.fs=t.fs)},t.prototype.Cd=function(){var t=this;if(!this.fs)return[];var e=this.Vd;this.Vd=Ht(),this.gd.forEach((function(e){t.kd(e.key)&&(t.Vd=t.Vd.add(e.key))}));var n=[];return e.forEach((function(e){t.Vd.has(e)||n.push(new mi(e))})),this.Vd.forEach((function(t){e.has(t)||n.push(new vi(t))})),n},t.prototype.Md=function(t){this.md=t.ju,this.Vd=Ht();var e=this.yd(t.documents);return this.Ln(e,!0)},t.prototype.xd=function(){return Jt.os(this.query,this.gd,this.ns,0===this.Pd)},t}(),gi=function(){function t(t,e,n,r){this.Ra=t,this.w_=e,this.updateFunction=n,this.Pa=r,this.$d=5,this.Na=new je(this.Ra,"transaction_retry")}return t.prototype.Od=function(){this.Ld()},t.prototype.Ld=function(){var t=this;this.Na.gr((function(){return r.__awaiter(t,void 0,void 0,(function(){var t,e,n=this;return r.__generator(this,(function(r){return t=new ni(this.w_),(e=this.Bd(t))&&e.then((function(e){n.Ra.co((function(){return t.commit().then((function(){n.Pa.resolve(e)})).catch((function(t){n.qd(t)}))}))})).catch((function(t){n.qd(t)})),[2]}))}))}))},t.prototype.Bd=function(t){try{var e=this.updateFunction(t);return!A(e)&&e.catch&&e.then?e:(this.Pa.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.Pa.reject(t),null}},t.prototype.qd=function(t){var e=this;this.$d>0&&this.Ud(t)?(this.$d-=1,this.Ra.co((function(){return e.Ld(),Promise.resolve()}))):this.Pa.reject(t)},t.prototype.Ud=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!Rt(e)}return!1},t}(),bi=function(t,e,n){this.query=t,this.targetId=e,this.view=n},wi=function(t){this.key=t,this.Qd=!1},Ei=function(){function t(t,e,n,r,i,o){this.x_=t,this.Wd=e,this.w_=n,this.jd=r,this.currentUser=i,this.Kd=o,this.Gd=null,this.zd=new Se((function(t){return t.canonicalId()})),this.Hd=new Map,this.Yd=[],this.Jd=new Ut(T.N),this.Xd=new Map,this.Zd=new nr,this.tf={},this.ef=new Map,this.sf=Je.rh(),this.onlineState="Unknown"}return Object.defineProperty(t.prototype,"if",{get:function(){return!0},enumerable:!0,configurable:!0}),t.prototype.subscribe=function(t){this.Gd=t},t.prototype.listen=function(t){return r.__awaiter(this,void 0,void 0,(function(){var e,n,i,o,s;return r.__generator(this,(function(r){switch(r.label){case 0:return this.nf("listen()"),(i=this.zd.get(t))?(e=i.targetId,this.jd.Xl(e),n=i.view.xd(),[3,4]):[3,1];case 1:return[4,this.x_.Uu(t.ee())];case 2:return o=r.sent(),s=this.jd.Xl(o.targetId),e=o.targetId,[4,this.rf(t,e,"current"===s)];case 3:n=r.sent(),this.if&&this.Wd.listen(o),r.label=4;case 4:return[2,n]}}))}))},t.prototype.rf=function(t,e,n){return r.__awaiter(this,void 0,void 0,(function(){var i,o,s,a,u,c;return r.__generator(this,(function(r){switch(r.label){case 0:return[4,this.x_.Wu(t,!0)];case 1:return i=r.sent(),o=new yi(t,i.ju),s=o.yd(i.documents),a=Qt.ds(e,n&&"Offline"!==this.onlineState),u=o.Ln(s,this.if,a),this.hf(e,u.Fd),c=new bi(t,e,o),[2,(this.zd.set(t,c),this.Hd.has(e)?this.Hd.get(e).push(t):this.Hd.set(e,[t]),u.snapshot)]}}))}))},t.prototype.al=function(t){return r.__awaiter(this,void 0,void 0,(function(){var e,n,i=this;return r.__generator(this,(function(r){switch(r.label){case 0:return this.nf("unlisten()"),e=this.zd.get(t),(n=this.Hd.get(e.targetId)).length>1?[2,(this.Hd.set(e.targetId,n.filter((function(e){return!e.isEqual(t)}))),void this.zd.delete(t))]:this.if?(this.jd.td(e.targetId),this.jd.Gl(e.targetId)?[3,2]:[4,this.x_.Qu(e.targetId,!1).then((function(){i.jd.sd(e.targetId),i.Wd.al(e.targetId),i.af(e.targetId)})).catch(er)]):[3,3];case 1:r.sent(),r.label=2;case 2:return[3,5];case 3:return this.af(e.targetId),[4,this.x_.Qu(e.targetId,!0)];case 4:r.sent(),r.label=5;case 5:return[2]}}))}))},t.prototype.write=function(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o;return r.__generator(this,(function(r){switch(r.label){case 0:this.nf("write()"),r.label=1;case 1:return r.trys.push([1,5,,6]),[4,this.x_.Fu(t)];case 2:return n=r.sent(),this.jd.zl(n.batchId),this.uf(n.batchId,e),[4,this.cf(n.Dn)];case 3:return r.sent(),[4,this.Wd.nl()];case 4:return r.sent(),[3,6];case 5:return i=r.sent(),o=Hn(i,"Failed to persist write"),e.reject(o),[3,6];case 6:return[2]}}))}))},t.prototype.runTransaction=function(t,e,n){new gi(t,this.w_,e,n).Od()},t.prototype.xu=function(t){return r.__awaiter(this,void 0,void 0,(function(){var e,n=this;return r.__generator(this,(function(r){switch(r.label){case 0:this.nf("applyRemoteEvent()"),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.x_.xu(t)];case 2:return e=r.sent(),t.as.forEach((function(t,e){var r=n.Xd.get(e);r&&(ge(t.Ts.size+t.Es.size+t.Is.size<=1),t.Ts.size>0?r.Qd=!0:t.Es.size>0?ge(r.Qd):t.Is.size>0&&(ge(r.Qd),r.Qd=!1))})),[4,this.cf(e,t)];case 3:return r.sent(),[3,6];case 4:return[4,er(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},t.prototype.Nd=function(t,e){this.nf("applyOnlineStateChange()");var n=[];this.zd.forEach((function(e,r){var i=r.view.Nd(t);i.snapshot&&n.push(i.snapshot)})),this.Gd._f(t),this.Gd.n_(n),this.onlineState=t},t.prototype.Tl=function(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o,s,a,u=this;return r.__generator(this,(function(r){switch(r.label){case 0:return this.nf("rejectListens()"),this.jd.nd(t,"rejected",e),n=this.Xd.get(t),(i=n&&n.key)?(o=(o=new Ut(T.N)).Ae(i,new gt(i,b.min())),s=Ht().add(i),a=new Zt(b.min(),new Map,new jt(we),o,s),[4,this.xu(a)]):[3,2];case 1:return r.sent(),this.Jd=this.Jd.remove(i),this.Xd.delete(t),this.lf(),[3,4];case 2:return[4,this.x_.Qu(t,!1).then((function(){return u.af(t,e)})).catch(er)];case 3:r.sent(),r.label=4;case 4:return[2]}}))}))},t.prototype.ml=function(t){return r.__awaiter(this,void 0,void 0,(function(){var e,n;return r.__generator(this,(function(r){switch(r.label){case 0:this.nf("applySuccessfulWrite()"),e=t.batch.batchId,r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.x_.Nu(t)];case 2:return n=r.sent(),this.df(e,null),this.ff(e),this.jd.Yl(e,"acknowledged"),[4,this.cf(n)];case 3:return r.sent(),[3,6];case 4:return[4,er(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},t.prototype.Vl=function(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n;return r.__generator(this,(function(r){switch(r.label){case 0:this.nf("rejectFailedWrite()"),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.x_.Mu(t)];case 2:return n=r.sent(),this.df(t,e),this.ff(t),this.jd.Yl(t,"rejected",e),[4,this.cf(n)];case 3:return r.sent(),[3,6];case 4:return[4,er(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},t.prototype.Tf=function(t){return r.__awaiter(this,void 0,void 0,(function(){var e,n,i,o;return r.__generator(this,(function(r){switch(r.label){case 0:this.Wd.W_()||pe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.x_.ta()];case 2:return-1===(e=r.sent())?[2,void t.resolve()]:((n=this.ef.get(e)||[]).push(t),this.ef.set(e,n),[3,4]);case 3:return i=r.sent(),o=Hn(i,"Initialization of waitForPendingWrites() operation failed"),t.reject(o),[3,4];case 4:return[2]}}))}))},t.prototype.ff=function(t){(this.ef.get(t)||[]).forEach((function(t){t.resolve()})),this.ef.delete(t)},t.prototype.Ef=function(t){this.ef.forEach((function(e){e.forEach((function(e){e.reject(new f(h.CANCELLED,t))}))})),this.ef.clear()},t.prototype.uf=function(t,e){var n=this.tf[this.currentUser.s()];n||(n=new Ut(we)),n=n.Ae(t,e),this.tf[this.currentUser.s()]=n},t.prototype.df=function(t,e){var n=this.tf[this.currentUser.s()];if(n){var r=n.get(t);r&&(e?r.reject(e):r.resolve(),n=n.remove(t)),this.tf[this.currentUser.s()]=n}},t.prototype.af=function(t,e){var n=this;void 0===e&&(e=null),this.jd.td(t);for(var r=0,i=this.Hd.get(t);r<i.length;r++){var o=i[r];this.zd.delete(o),e&&this.Gd.If(o,e)}this.Hd.delete(t),this.if&&this.Zd.ic(t).forEach((function(t){n.Zd.Ch(t)||n.wf(t)}))},t.prototype.wf=function(t){var e=this.Jd.get(t);null!==e&&(this.Wd.al(e),this.Jd=this.Jd.remove(t),this.Xd.delete(e),this.lf())},t.prototype.hf=function(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n];i instanceof vi?(this.Zd.yh(i.key,t),this.Rf(i)):i instanceof mi?(pe("SyncEngine","Document no longer in limbo: "+i.key),this.Zd.vh(i.key,t),this.Zd.Ch(i.key)||this.wf(i.key)):ye()}},t.prototype.Rf=function(t){var e=t.key;this.Jd.get(e)||(pe("SyncEngine","New document in limbo: "+e),this.Yd.push(e),this.lf())},t.prototype.lf=function(){for(;this.Yd.length>0&&this.Jd.size<this.Kd;){var t=this.Yd.shift(),e=this.sf.next();this.Xd.set(e,new wi(t)),this.Jd=this.Jd.Ae(t,e),this.Wd.listen(new Nt(wt.Wt(t.path).ee(),e,2,Pe.dr))}},t.prototype.Af=function(){return this.Jd},t.prototype.mf=function(){return this.Yd},t.prototype.cf=function(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o,s=this;return r.__generator(this,(function(r){switch(r.label){case 0:return n=[],i=[],o=[],this.zd.forEach((function(r,a){o.push(Promise.resolve().then((function(){var e=a.view.yd(t);return e.Sd?s.x_.Wu(a.query,!1).then((function(t){var n=t.documents;return a.view.yd(n,e)})):e})).then((function(t){var r=e&&e.as.get(a.targetId),o=a.view.Ln(t,s.if,r);if(s.hf(a.targetId,o.Fd),o.snapshot){s.if&&s.jd.nd(a.targetId,o.snapshot.fromCache?"not-current":"current"),n.push(o.snapshot);var u=Ue.ar(a.targetId,o.snapshot);i.push(u)}})))})),[4,Promise.all(o)];case 1:return r.sent(),this.Gd.n_(n),[4,this.x_.Lu(i)];case 2:return r.sent(),[2]}}))}))},t.prototype.nf=function(t){},t.prototype.pl=function(t){return r.__awaiter(this,void 0,void 0,(function(){var e;return r.__generator(this,(function(n){switch(n.label){case 0:return this.currentUser.isEqual(t)?[3,3]:[4,this.x_.vu(t)];case 1:return e=n.sent(),this.currentUser=t,this.Ef("'waitForPendingWrites' promise is rejected due to a user change."),this.jd.vu(t,e.Du,e.Cu),[4,this.cf(e.Su)];case 2:n.sent(),n.label=3;case 3:return[4,this.Wd.pl()];case 4:return n.sent(),[2]}}))}))},t.prototype.enableNetwork=function(){return this.Wd.enableNetwork()},t.prototype.disableNetwork=function(){return this.Wd.disableNetwork()},t.prototype.ei=function(t){var e=this.Xd.get(t);if(e&&e.Qd)return Ht().add(e.key);var n=Ht(),r=this.Hd.get(t);if(!r)return n;for(var i=0,o=r;i<o.length;i++){var s=o[i],a=this.zd.get(s);n=n.He(a.view.pd)}return n},t}(),Ii=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,o,s)||this).x_=e,a.Pf=void 0,a}return r.__extends(e,t),Object.defineProperty(e.prototype,"if",{get:function(){return!0===this.Pf},enumerable:!0,configurable:!0}),e.prototype.enableNetwork=function(){return this.x_.uo(!0),t.prototype.enableNetwork.call(this)},e.prototype.disableNetwork=function(){return this.x_.uo(!1),t.prototype.disableNetwork.call(this)},e.prototype.Vf=function(t){return r.__awaiter(this,void 0,void 0,(function(){var e,n;return r.__generator(this,(function(r){switch(r.label){case 0:return[4,this.x_.Wu(t.query,!0)];case 1:return e=r.sent(),n=t.view.Md(e),[2,(this.Pf&&this.hf(t.targetId,n.Fd),n)]}}))}))},e.prototype.Nd=function(e,n){this.if&&0===n&&(t.prototype.Nd.call(this,e,n),this.jd.hd(e)),this.if||1!==n||t.prototype.Nd.call(this,e,n)},e.prototype.Ed=function(t,e,n){return r.__awaiter(this,void 0,void 0,(function(){var i;return r.__generator(this,(function(r){switch(r.label){case 0:return this.nf("applyBatchState()"),[4,this.x_.Gu(t)];case 1:return null===(i=r.sent())?[3,6]:"pending"!==e?[3,3]:[4,this.Wd.nl()];case 2:return r.sent(),[3,4];case 3:"acknowledged"===e||"rejected"===e?(this.df(t,n||null),this.x_.zu(t)):ye(),r.label=4;case 4:return[4,this.cf(i)];case 5:return r.sent(),[3,7];case 6:pe("SyncEngine","Cannot apply mutation batch with id: "+t),r.label=7;case 7:return[2]}}))}))},e.prototype.yl=function(t){return r.__awaiter(this,void 0,void 0,(function(){var e,n,i,o,s,a,u,c=this;return r.__generator(this,(function(r){switch(r.label){case 0:return!0!==t||!0===this.Pf?[3,3]:(e=this.jd.jl(),[4,this.gf(e.W(),!0)]);case 1:return n=r.sent(),this.Pf=!0,[4,this.Wd.yl(!0)];case 2:for(r.sent(),i=0,o=n;i<o.length;i++)s=o[i],this.Wd.listen(s);return[3,7];case 3:return!1!==t||!1===this.Pf?[3,7]:(a=[],u=Promise.resolve(),this.Hd.forEach((function(t,e){c.jd.ed(e)?a.push(e):u=u.then((function(){return c.af(e),c.x_.Qu(e,!0)})),c.Wd.al(e)})),[4,u]);case 4:return r.sent(),[4,this.gf(a,!1)];case 5:return r.sent(),this.pf(),this.Pf=!1,[4,this.Wd.yl(!1)];case 6:r.sent(),r.label=7;case 7:return[2]}}))}))},e.prototype.pf=function(){var t=this;this.Xd.forEach((function(e,n){t.Wd.al(n)})),this.Zd.nc(),this.Xd=new Map,this.Jd=new Ut(T.N)},e.prototype.gf=function(t,e){return r.__awaiter(this,void 0,void 0,(function(){var e,n,i,o,s,a,u,c,l,h,f,d,p;return r.__generator(this,(function(r){switch(r.label){case 0:e=[],n=[],i=0,o=t,r.label=1;case 1:return i<o.length?(s=o[i],a=void 0,(u=this.Hd.get(s))&&0!==u.length?[4,this.x_.Uu(u[0].ee())]:[3,7]):[3,13];case 2:a=r.sent(),c=0,l=u,r.label=3;case 3:return c<l.length?(h=l[c],f=this.zd.get(h),[4,this.Vf(f)]):[3,6];case 4:(d=r.sent()).snapshot&&n.push(d.snapshot),r.label=5;case 5:return c++,[3,3];case 6:return[3,11];case 7:return[4,this.x_.Hu(s)];case 8:return p=r.sent(),[4,this.x_.Uu(p)];case 9:return a=r.sent(),[4,this.rf(this.yf(p),s,!1)];case 10:r.sent(),r.label=11;case 11:e.push(a),r.label=12;case 12:return i++,[3,1];case 13:return[2,(this.Gd.n_(n),e)]}}))}))},e.prototype.yf=function(t){return new wt(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)},e.prototype.So=function(){return this.x_.So()},e.prototype.Id=function(t,e,n){return r.__awaiter(this,void 0,void 0,(function(){var i,o;return r.__generator(this,(function(r){switch(r.label){case 0:return this.Pf?(pe("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!this.Hd.has(t))return[3,8];switch(e){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,this.x_.Kr()];case 3:return i=r.sent(),o=Zt.ls(t,"current"===e),[4,this.cf(i,o)];case 4:return r.sent(),[3,8];case 5:return[4,this.x_.Qu(t,!0)];case 6:return r.sent(),this.af(t,n),[3,8];case 7:ye(),r.label=8;case 8:return[2]}}))}))},e.prototype.wd=function(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o,s,a,u,c,l,h,f,d=this;return r.__generator(this,(function(p){switch(p.label){case 0:if(!this.Pf)return[3,10];n=0,i=t,p.label=1;case 1:return n<i.length?(o=i[n],this.Hd.has(o)?(pe("SyncEngine","Adding an already active target "+o),[3,5]):[4,this.x_.Hu(o)]):[3,6];case 2:return s=p.sent(),[4,this.x_.Uu(s)];case 3:return a=p.sent(),[4,this.rf(this.yf(s),a.targetId,!1)];case 4:p.sent(),this.Wd.listen(a),p.label=5;case 5:return n++,[3,1];case 6:u=function(t){return r.__generator(this,(function(e){switch(e.label){case 0:return c.Hd.has(t)?[4,c.x_.Qu(t,!1).then((function(){d.Wd.al(t),d.af(t)})).catch(er)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},c=this,l=0,h=e,p.label=7;case 7:return l<h.length?(f=h[l],[5,u(f)]):[3,10];case 8:p.sent(),p.label=9;case 9:return l++,[3,7];case 10:return[2]}}))}))},e}(Ei),Ti=function(){this.bf=void 0,this.vf=[]},ki=function(){function t(t){this.cl=t,this.Sf=new Se((function(t){return t.canonicalId()})),this.onlineState="Unknown",this.Df=new Set,this.cl.subscribe(this)}return t.prototype.listen=function(t){return r.__awaiter(this,void 0,void 0,(function(){var e,n,i,o,s,a;return r.__generator(this,(function(r){switch(r.label){case 0:if(e=t.query,n=!1,(i=this.Sf.get(e))||(n=!0,i=new Ti),!n)return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),o=i,[4,this.cl.listen(e)];case 2:return o.bf=r.sent(),[3,4];case 3:return s=r.sent(),a=Hn(s,"Initialization of query '"+t.query+"' failed"),[2,void t.onError(a)];case 4:return this.Sf.set(e,i),i.vf.push(t),t.Nd(this.onlineState),i.bf&&t.Cf(i.bf)&&this.Ff(),[2]}}))}))},t.prototype.al=function(t){return r.__awaiter(this,void 0,void 0,(function(){var e,n,i,o;return r.__generator(this,(function(r){return e=t.query,n=!1,(i=this.Sf.get(e))&&(o=i.vf.indexOf(t))>=0&&(i.vf.splice(o,1),n=0===i.vf.length),n?[2,(this.Sf.delete(e),this.cl.al(e))]:[2]}))}))},t.prototype.n_=function(t){for(var e=!1,n=0,r=t;n<r.length;n++){var i=r[n],o=i.query,s=this.Sf.get(o);if(s){for(var a=0,u=s.vf;a<u.length;a++)u[a].Cf(i)&&(e=!0);s.bf=i}}e&&this.Ff()},t.prototype.If=function(t,e){var n=this.Sf.get(t);if(n)for(var r=0,i=n.vf;r<i.length;r++)i[r].onError(e);this.Sf.delete(t)},t.prototype._f=function(t){this.onlineState=t;var e=!1;this.Sf.forEach((function(n,r){for(var i=0,o=r.vf;i<o.length;i++)o[i].Nd(t)&&(e=!0)})),e&&this.Ff()},t.prototype.Nf=function(t){this.Df.add(t),t.next()},t.prototype.kf=function(t){this.Df.delete(t)},t.prototype.Ff=function(){this.Df.forEach((function(t){t.next()}))},t}(),Si=function(){function t(t,e,n){this.query=t,this.Mf=e,this.xf=!1,this.$f=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Cf=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Jt(t.query,t.docs,t.ss,e,t.ns,t.fromCache,t.rs,!0)}var o=!1;return this.xf?this.Of(t)&&(this.Mf.next(t),o=!0):this.Lf(t,this.onlineState)&&(this.Bf(t),o=!0),this.$f=t,o},t.prototype.onError=function(t){this.Mf.error(t)},t.prototype.Nd=function(t){this.onlineState=t;var e=!1;return this.$f&&!this.xf&&this.Lf(this.$f,t)&&(this.Bf(this.$f),e=!0),e},t.prototype.Lf=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.qf&&n||t.docs.B()&&"Offline"!==e)},t.prototype.Of=function(t){if(t.docChanges.length>0)return!0;var e=this.$f&&this.$f.hasPendingWrites!==t.hasPendingWrites;return!(!t.rs&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.Bf=function(t){t=Jt.os(t.query,t.docs,t.ns,t.fromCache),this.xf=!0,this.Mf.next(t)},t}(),xi=function(){function t(){}return t.prototype.bu=function(t){this.Uf=t},t.prototype.Zn=function(t,e,n,r){var i=this;return e.te()||n.isEqual(b.min())?this.Qf(t,e):this.Uf.Yn(t,r).next((function(s){var a=i.Wf(e,s);return(e.oe()||e.ae())&&i.Sd(e.Bt,a,r,n)?i.Qf(t,e):(de()<=o.LogLevel.DEBUG&&pe("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),e.toString()),i.Uf.Zn(t,e,n).next((function(t){return a.forEach((function(e){t=t.Ae(e.key,e)})),t})))}))},t.prototype.Wf=function(t,e){var n=new jt((function(e,n){return t.se(e,n)}));return e.forEach((function(e,r){r instanceof yt&&t.matches(r)&&(n=n.add(r))})),n},t.prototype.Sd=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.S(r)>0)},t.prototype.Qf=function(t,e){return de()<=o.LogLevel.DEBUG&&pe("IndexFreeQueryEngine","Using full collection scan to execute query:",e.toString()),this.Uf.Zn(t,e,b.min())},t}(),Oi=function(){function t(t,e){this.jn=t,this.hh=e,this.Wn=[],this.jf=1,this.Kf=new jt(rr.Ju)}return t.prototype.Ho=function(t){return Ae.resolve(0===this.Wn.length)},t.prototype.Yo=function(t,e,n,r){var i=this.jf;this.jf++,this.Wn.length>0&&this.Wn[this.Wn.length-1];var o=new xe(i,e,n,r);this.Wn.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.Kf=this.Kf.add(new rr(u.key,i)),this.jn.Dr(t,u.key.path.$())}return Ae.resolve(o)},t.prototype.Jo=function(t,e){return Ae.resolve(this.Gf(e))},t.prototype.Zo=function(t,e){var n=e+1,r=this.zf(n),i=r<0?0:r;return Ae.resolve(this.Wn.length>i?this.Wn[i]:null)},t.prototype.ta=function(){return Ae.resolve(0===this.Wn.length?-1:this.jf-1)},t.prototype.ea=function(t){return Ae.resolve(this.Wn.slice())},t.prototype.Gn=function(t,e){var n=this,r=new rr(e,0),i=new rr(e,Number.POSITIVE_INFINITY),o=[];return this.Kf.Ke([r,i],(function(t){var e=n.Gf(t.hc);o.push(e)})),Ae.resolve(o)},t.prototype.Xn=function(t,e){var n=this,r=new jt(we);return e.forEach((function(t){var e=new rr(t,0),i=new rr(t,Number.POSITIVE_INFINITY);n.Kf.Ke([e,i],(function(t){r=r.add(t.hc)}))})),Ae.resolve(this.Hf(r))},t.prototype.nr=function(t,e){var n=e.path,r=n.length+1,i=n;T.et(i)||(i=i.child(""));var o=new rr(new T(i),0),s=new jt(we);return this.Kf.Ge((function(t){var e=t.key.path;return!!n.q(e)&&(e.length===r&&(s=s.add(t.hc)),!0)}),o),Ae.resolve(this.Hf(s))},t.prototype.Hf=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.Gf(t);null!==r&&n.push(r)})),n},t.prototype.ia=function(t,e){var n=this;ge(0===this.Yf(e.batchId,"removed")),this.Wn.shift();var r=this.Kf;return Ae.forEach(e.mutations,(function(i){var o=new rr(i.key,e.batchId);return r=r.delete(o),n.hh.Uo(t,i.key)})).next((function(){n.Kf=r}))},t.prototype.na=function(t){},t.prototype.Ch=function(t,e){var n=new rr(e,0),r=this.Kf.ze(n);return Ae.resolve(e.isEqual(r&&r.key))},t.prototype.ra=function(t){return this.Wn.length,Ae.resolve()},t.prototype.Yf=function(t,e){return this.zf(t)},t.prototype.zf=function(t){return 0===this.Wn.length?0:t-this.Wn[0].batchId},t.prototype.Gf=function(t){var e=this.zf(t);return e<0||e>=this.Wn.length?null:this.Wn[e]},t}(),Ai=function(){function t(t,e){this.jn=t,this.Jf=e,this.docs=new Ut(T.N),this.size=0}return t.prototype.Nn=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.Jf(e);return this.docs=this.docs.Ae(r,{$r:e,size:s,readTime:n}),this.size+=s-o,this.jn.Dr(t,r.path.$())},t.prototype.Mn=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.xn=function(t,e){var n=this.docs.get(e);return Ae.resolve(n?n.$r:null)},t.prototype.getEntries=function(t,e){var n=this,r=$t();return e.forEach((function(t){var e=n.docs.get(t);r=r.Ae(t,e?e.$r:null)})),Ae.resolve(r)},t.prototype.Zn=function(t,e,n){for(var r=Wt(),i=new T(e.path.child("")),o=this.docs.ve(i);o.ke();){var s=o.Ne(),a=s.key,u=s.value,c=u.$r,l=u.readTime;if(!e.path.q(a.path))break;l.S(n)<=0||c instanceof yt&&e.matches(c)&&(r=r.Ae(c.key,c))}return Ae.resolve(r)},t.prototype.Xf=function(t,e){return Ae.forEach(this.docs,(function(t){return e(t)}))},t.prototype.Yr=function(e){return new t.Jr(this)},t.prototype.Zr=function(t){return Ae.resolve(this.size)},t}();Ai.Jr=function(t){function e(e){var n=this;return(n=t.call(this)||this).th=e,n}return r.__extends(e,t),e.prototype.Ln=function(t){var e=this,n=[];return this.Dn.forEach((function(r,i){i?n.push(e.th.Nn(t,i,e.readTime)):e.th.Mn(r)})),Ae.vn(n)},e.prototype.$n=function(t,e){return this.th.xn(t,e)},e.prototype.On=function(t,e){return this.th.getEntries(t,e)},e}(Ne);
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var Ni=function(){function t(t){this.persistence=t,this.Zf=new Se((function(t){return t.canonicalId()})),this.lastRemoteSnapshotVersion=b.min(),this.highestTargetId=0,this.tT=0,this.eT=new nr,this.targetCount=0,this.sT=Je.nh()}return t.prototype.js=function(t,e){return this.Zf.forEach((function(t,n){return e(n)})),Ae.resolve()},t.prototype._h=function(t){return Ae.resolve(this.lastRemoteSnapshotVersion)},t.prototype.lh=function(t){return Ae.resolve(this.tT)},t.prototype.oh=function(t){return this.highestTargetId=this.sT.next(),Ae.resolve(this.highestTargetId)},t.prototype.dh=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.tT&&(this.tT=e),Ae.resolve()},t.prototype.Th=function(t){this.Zf.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.sT=new Je(e),this.highestTargetId=e),t.sequenceNumber>this.tT&&(this.tT=t.sequenceNumber)},t.prototype.fh=function(t,e){return this.Th(e),this.targetCount+=1,Ae.resolve()},t.prototype.Ih=function(t,e){return this.Th(e),Ae.resolve()},t.prototype.wh=function(t,e){return this.Zf.delete(e.target),this.eT.ic(e.targetId),this.targetCount-=1,Ae.resolve()},t.prototype.Ah=function(t,e,n){var r=this,i=0,o=[];return this.Zf.forEach((function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.Zf.delete(s),o.push(r.Rh(t,a.targetId)),i++)})),Ae.vn(o).next((function(){return i}))},t.prototype.Vh=function(t){return Ae.resolve(this.targetCount)},t.prototype.gh=function(t,e){var n=this.Zf.get(e)||null;return Ae.resolve(n)},t.prototype.ph=function(t,e,n){return this.eT.tc(e,n),Ae.resolve()},t.prototype.bh=function(t,e,n){this.eT.sc(e,n);var r=this.persistence.hh,i=[];return r&&e.forEach((function(e){i.push(r.Uo(t,e))})),Ae.vn(i)},t.prototype.Rh=function(t,e){return this.eT.ic(e),Ae.resolve()},t.prototype.Sh=function(t,e){var n=this.eT.rc(e);return Ae.resolve(n)},t.prototype.Ch=function(t,e){return Ae.resolve(this.eT.Ch(e))},t}(),Di=function(){function t(t){var e=this;this.iT={},this.qh=new Pe(0),this.Uh=!1,this.Uh=!0,this.hh=t(this),this.Jh=new Ni(this),this.jn=new Be,this.Qn=new Ai(this.jn,(function(t){return e.hh.nT(t)}))}return t.prototype.start=function(){return Promise.resolve()},t.prototype.Vo=function(){return this.Uh=!1,Promise.resolve()},Object.defineProperty(t.prototype,"ho",{get:function(){return this.Uh},enumerable:!0,configurable:!0}),t.prototype.oo=function(){},t.prototype.ko=function(){return this.jn},t.prototype.Do=function(t){var e=this.iT[t.s()];return e||(e=new Oi(this.jn,this.hh),this.iT[t.s()]=e),e},t.prototype.Fo=function(){return this.Jh},t.prototype.No=function(){return this.Qn},t.prototype.runTransaction=function(t,e,n){var r=this;pe("MemoryPersistence","Starting transaction:",t);var i=new Ri(this.qh.next());return this.hh.rT(),n(i).next((function(t){return r.hh.hT(i).next((function(){return t}))})).yn().then((function(t){return i.Un(),t}))},t.prototype.oT=function(t,e){return Ae.Sn(Object.values(this.iT).map((function(n){return function(){return n.Ch(t,e)}})))},t}(),Ri=function(t){function e(e){var n=this;return(n=t.call(this)||this).Oh=e,n}return r.__extends(e,t),e}(Re),Ci=function(){function t(t){this.persistence=t,this.aT=new nr,this.uT=null}return t.cT=function(e){return new t(e)},Object.defineProperty(t.prototype,"_T",{get:function(){if(this.uT)return this.uT;throw ye()},enumerable:!0,configurable:!0}),t.prototype.yh=function(t,e,n){return this.aT.yh(n,e),this._T.delete(n),Ae.resolve()},t.prototype.vh=function(t,e,n){return this.aT.vh(n,e),this._T.add(n),Ae.resolve()},t.prototype.Uo=function(t,e){return this._T.add(e),Ae.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.aT.ic(e.targetId).forEach((function(t){return n._T.add(t)}));var r=this.persistence.Fo();return r.Sh(t,e.targetId).next((function(t){t.forEach((function(t){return n._T.add(t)}))})).next((function(){return r.wh(t,e)}))},t.prototype.rT=function(){this.uT=new Set},t.prototype.hT=function(t){var e=this,n=this.persistence.No().Yr();return Ae.forEach(this._T,(function(r){return e.lT(t,r).next((function(t){t||n.Mn(r)}))})).next((function(){return e.uT=null,n.apply(t)}))},t.prototype.Ko=function(t,e){var n=this;return this.lT(t,e).next((function(t){t?n._T.delete(e):n._T.add(e)}))},t.prototype.nT=function(t){return 0},t.prototype.lT=function(t,e){var n=this;return Ae.Sn([function(){return Ae.resolve(n.aT.Ch(e))},function(){return n.persistence.Fo().Ch(t,e)},function(){return n.persistence.oT(t,e)}])},t}(),Ui="You are using the memory-only build of Firestore. Persistence support is only available via the @firebase/firestore bundle or the firebase-firestore.js build.",Pi=function(){function t(){}return t.prototype.initialize=function(t){return r.__awaiter(this,void 0,void 0,(function(){var e=this;return r.__generator(this,(function(n){switch(n.label){case 0:return this.jd=this.dT(t),this.persistence=this.fT(t),[4,this.persistence.start()];case 1:return n.sent(),this.TT=this.ET(t),this.x_=this.IT(t),this.Wd=this.wT(t),this.cl=this.RT(t),this.AT=this.mT(t),this.jd.b_=function(t){return e.cl.Nd(t,1)},this.Wd.cl=this.cl,[4,this.x_.start()];case 2:return n.sent(),[4,this.jd.start()];case 3:return n.sent(),[4,this.Wd.start()];case 4:return n.sent(),[4,this.Wd.yl(this.cl.if)];case 5:return n.sent(),[2]}}))}))},t.prototype.mT=function(t){return new ki(this.cl)},t.prototype.ET=function(t){return null},t.prototype.IT=function(t){return new Qn(this.persistence,new xi,t.PT)},t.prototype.fT=function(t){if(t.gT.VT)throw new f(h.FAILED_PRECONDITION,Ui);return new Di(Ci.cT)},t.prototype.wT=function(t){var e=this;return new ii(this.x_,t.w_,t.Ra,(function(t){return e.cl.Nd(t,0)}),t.platform.pT())},t.prototype.dT=function(t){return new pi},t.prototype.RT=function(t){return new Ei(this.x_,this.Wd,t.w_,this.jd,t.PT,t.Kd)},t.prototype.clearPersistence=function(t){throw new f(h.FAILED_PRECONDITION,Ui)},t}(),Li=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e.prototype.initialize=function(e){return r.__awaiter(this,void 0,void 0,(function(){var n=this;return r.__generator(this,(function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),[4,this.persistence.ro((function(t){return r.__awaiter(n,void 0,void 0,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return[4,this.cl.yl(t)];case 1:return e.sent(),this.TT&&(t&&!this.TT.ho?this.TT.start(this.x_):t||this.TT.stop()),[2]}}))}))}))];case 2:return i.sent(),[2]}}))}))},e.prototype.IT=function(t){return new tr(this.persistence,new xi,t.PT)},e.prototype.RT=function(t){var e=new Ii(this.x_,this.Wd,t.w_,this.jd,t.PT,t.Kd);return this.jd instanceof di&&(this.jd.cl=e),e},e.prototype.ET=function(t){var e=this.persistence.hh.$o;return new Jn(e,t.Ra)},e.prototype.fT=function(t){var e=sn.xo(t.yT),n=t.platform.Cc(t.yT.ii);return new sn(t.gT.synchronizeTabs,e,t.clientId,t.platform,Xn.nu(t.gT.cacheSizeBytes),t.Ra,n,this.jd,t.gT.Bh)},e.prototype.dT=function(t){if(t.gT.VT&&t.gT.synchronizeTabs){if(!di.zh(t.platform))throw new f(h.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var e=sn.xo(t.yT);return new di(t.Ra,t.platform,e,t.clientId,t.PT)}return new pi},e.prototype.clearPersistence=function(t){var e=sn.xo(t);return sn.clearPersistence(e)},e}(Pi),ji=function(){function t(t,e,n,r){this.platform=t,this.yT=e,this.credentials=n,this.Ra=r,this.clientId=_e.cn()}return t.prototype.start=function(t,e){var n=this;this.T_();var r=new Le,i=new Le,o=!1;return this.credentials.l((function(s){if(!o)return o=!0,pe("FirestoreClient","Initializing. user=",s.uid),n.bT(t,e,s,i).then(r.resolve,r.reject);n.Ra.lo((function(){return n.pl(s)}))})),this.Ra.co((function(){return r.promise})),i.promise},t.prototype.enableNetwork=function(){var t=this;return this.T_(),this.Ra.enqueue((function(){return t.cl.enableNetwork()}))},t.prototype.bT=function(t,e,n,i){return r.__awaiter(this,void 0,void 0,(function(){var o,s,a,u,c=this;return r.__generator(this,(function(l){switch(l.label){case 0:return l.trys.push([0,3,,4]),[4,this.platform.vT(this.yT)];case 1:return o=l.sent(),s=this.platform.Cc(this.yT.ii),a=function(t,e,n){return new ei(t,e,n)}(o,this.credentials,s),[4,t.initialize({Ra:this.Ra,yT:this.yT,platform:this.platform,w_:a,clientId:this.clientId,PT:n,Kd:100,gT:e})];case 2:return l.sent(),this.persistence=t.persistence,this.jd=t.jd,this.x_=t.x_,this.Wd=t.Wd,this.cl=t.cl,this.TT=t.TT,this.ST=t.AT,this.persistence.oo((function(){return r.__awaiter(c,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return[4,this.terminate()];case 1:return t.sent(),[2]}}))}))})),i.resolve(),[3,4];case 3:if(u=l.sent(),i.reject(u),!this.DT(u))throw u;return[2,(console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+u),this.bT(new Pi,{VT:!1},n,i))];case 4:return[2]}}))}))},t.prototype.DT=function(t){return"FirebaseError"===t.name?t.code===h.FAILED_PRECONDITION||t.code===h.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code},t.prototype.T_=function(){if(this.Ra.Ma)throw new f(h.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.pl=function(t){return this.Ra.Ua(),pe("FirestoreClient","Credential Changed. Current user: "+t.uid),this.cl.pl(t)},t.prototype.disableNetwork=function(){var t=this;return this.T_(),this.Ra.enqueue((function(){return t.cl.disableNetwork()}))},t.prototype.terminate=function(){var t=this;return this.Ra.Ba((function(){return r.__awaiter(t,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return this.TT&&this.TT.stop(),[4,this.Wd.Vo()];case 1:return t.sent(),[4,this.jd.Vo()];case 2:return t.sent(),[4,this.persistence.Vo()];case 3:return t.sent(),this.credentials.T(),[2]}}))}))}))},t.prototype.waitForPendingWrites=function(){var t=this;this.T_();var e=new Le;return this.Ra.co((function(){return t.cl.Tf(e)})),e.promise},t.prototype.listen=function(t,e,n){var r=this;this.T_();var i=new Si(t,e,n);return this.Ra.co((function(){return r.ST.listen(i)})),i},t.prototype.al=function(t){var e=this;this.CT||this.Ra.co((function(){return e.ST.al(t)}))},t.prototype.FT=function(t){return r.__awaiter(this,void 0,void 0,(function(){var e,n=this;return r.__generator(this,(function(i){switch(i.label){case 0:return this.T_(),e=new Le,[4,this.Ra.enqueue((function(){return r.__awaiter(n,void 0,void 0,(function(){var n,i,o;return r.__generator(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.x_.qu(t)];case 1:return(n=r.sent())instanceof yt?e.resolve(n):n instanceof gt?e.resolve(null):e.reject(new f(h.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return i=r.sent(),o=Hn(i,"Failed to get document '"+t+" from cache"),e.reject(o),[3,3];case 3:return[2]}}))}))}))];case 1:return[2,(i.sent(),e.promise)]}}))}))},t.prototype.NT=function(t){return r.__awaiter(this,void 0,void 0,(function(){var e,n=this;return r.__generator(this,(function(i){switch(i.label){case 0:return this.T_(),e=new Le,[4,this.Ra.enqueue((function(){return r.__awaiter(n,void 0,void 0,(function(){var n,i,o,s,a,u;return r.__generator(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.x_.Wu(t,!0)];case 1:return n=r.sent(),i=new yi(t,n.ju),o=i.yd(n.documents),s=i.Ln(o,!1),e.resolve(s.snapshot),[3,3];case 2:return a=r.sent(),u=Hn(a,"Failed to execute query '"+t+" against cache"),e.reject(u),[3,3];case 3:return[2]}}))}))}))];case 1:return[2,(i.sent(),e.promise)]}}))}))},t.prototype.write=function(t){var e=this;this.T_();var n=new Le;return this.Ra.co((function(){return e.cl.write(t,n)})),n.promise},t.prototype.ii=function(){return this.yT.ii},t.prototype.Nf=function(t){var e=this;this.T_(),this.Ra.co((function(){return e.ST.Nf(t),Promise.resolve()}))},t.prototype.kf=function(t){var e=this;this.CT||this.Ra.co((function(){return e.ST.kf(t),Promise.resolve()}))},Object.defineProperty(t.prototype,"CT",{get:function(){return this.Ra.Ma},enumerable:!0,configurable:!0}),t.prototype.transaction=function(t){var e=this;this.T_();var n=new Le;return this.Ra.co((function(){return e.cl.runTransaction(e.Ra,t,n),Promise.resolve()})),n.promise},t}(),Mi=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.kT(this.observer.next,t)},t.prototype.error=function(t){this.kT(this.observer.error,t)},t.prototype.MT=function(){this.muted=!0},t.prototype.kT=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Vi(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var Fi=function(){function t(t,e,n,r){this.ii=t,this.timestampsInSnapshots=e,this.xT=n,this.$T=r}return t.prototype.OT=function(t){switch(P(t)){case 0:return null;case 1:return t.booleanValue;case 2:return B(t.integerValue||t.doubleValue);case 3:return this.LT(t.timestampValue);case 4:return this.BT(t);case 5:return t.stringValue;case 6:return new kr(W(t.bytesValue));case 7:return this.qT(t.referenceValue);case 8:return this.UT(t.geoPointValue);case 9:return this.QT(t.arrayValue);case 10:return this.WT(t.mapValue);default:throw ye()}},t.prototype.WT=function(t){var e=this,n={};return S(t.fields||{},(function(t,r){n[t]=e.OT(r)})),n},t.prototype.UT=function(t){return new jr(B(t.latitude),B(t.longitude))},t.prototype.QT=function(t){var e=this;return(t.values||[]).map((function(t){return e.OT(t)}))},t.prototype.BT=function(t){switch(this.xT){case"previous":var e=function t(e){var n=e.mapValue.fields.__previous_value__;return R(n)?t(n):n}(t);return null==e?null:this.OT(e);case"estimate":return this.LT(C(t));default:return null}},t.prototype.LT=function(t){var e=$(t),n=new g(e.seconds,e.nanos);return this.timestampsInSnapshots?n:n.toDate()},t.prototype.qT=function(t){var e=w.K(t);ge(le(e));var n=new ke(e.get(1),e.get(3)),r=new T(e.M(5));return n.isEqual(this.ii)||ve("Document "+r+" contains a document reference within a different database ("+n.projectId+"/"+n.database+") which is not supported. It will be treated as a reference in the current database ("+this.ii.projectId+"/"+this.ii.database+") instead."),this.$T(r)},t}(),$i=Xn.ou,Bi=function(){function t(t){var e,n,r,i;if(void 0===t.host){if(void 0!==t.ssl)throw new f(h.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else lr("settings","non-empty string","host",t.host),this.host=t.host,hr("settings","boolean","ssl",t.ssl),this.ssl=null===(e=t.ssl)||void 0===e||e;if(gr("settings",t,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling","ignoreUndefinedProperties"]),hr("settings","object","credentials",t.credentials),this.credentials=t.credentials,hr("settings","boolean","timestampsInSnapshots",t.timestampsInSnapshots),hr("settings","boolean","ignoreUndefinedProperties",t.ignoreUndefinedProperties),!0===t.timestampsInSnapshots?ve("The setting 'timestampsInSnapshots: true' is no longer required and should be removed."):!1===t.timestampsInSnapshots&&ve("Support for 'timestampsInSnapshots: false' will be removed soon. You must update your code to handle Timestamp objects."),this.timestampsInSnapshots=null===(n=t.timestampsInSnapshots)||void 0===n||n,this.ignoreUndefinedProperties=null!==(r=t.ignoreUndefinedProperties)&&void 0!==r&&r,hr("settings","number","cacheSizeBytes",t.cacheSizeBytes),void 0===t.cacheSizeBytes)this.cacheSizeBytes=Xn.uu;else{if(t.cacheSizeBytes!==$i&&t.cacheSizeBytes<Xn.au)throw new f(h.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+Xn.au);this.cacheSizeBytes=t.cacheSizeBytes}hr("settings","boolean","experimentalForceLongPolling",t.experimentalForceLongPolling),this.forceLongPolling=null!==(i=t.experimentalForceLongPolling)&&void 0!==i&&i}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.timestampsInSnapshots===t.timestampsInSnapshots&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.forceLongPolling===t.forceLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),Wi=function(){function t(e,n,i){var o=this;if(void 0===i&&(i=new Pi),this.jT=null,this.KT=new zn,this.INTERNAL={delete:function(){return r.__awaiter(o,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return this.GT(),[4,this.zT.terminate()];case 1:return t.sent(),[2]}}))}))}},"object"==typeof e.options){var s=e;this.jT=s,this.mc=t.HT(s),this.YT=s.name,this.JT=new v(n)}else{var a=e;if(!a.projectId)throw new f(h.INVALID_ARGUMENT,"Must provide projectId");this.mc=new ke(a.projectId,a.database),this.YT="[DEFAULT]",this.JT=new p}this.XT=i,this.ZT=new Bi({})}return Object.defineProperty(t.prototype,"tE",{get:function(){return this.eE||(this.eE=new qr(this.mc,this.ZT.ignoreUndefinedProperties)),this.eE},enumerable:!0,configurable:!0}),t.prototype.settings=function(t){or("Firestore.settings",arguments,1),ur("Firestore.settings","object",1,t);var e=new Bi(t);if(this.zT&&!this.ZT.isEqual(e))throw new f(h.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");this.ZT=e,void 0!==e.credentials&&(this.JT=function(t){if(!t)return new p;switch(t.type){case"gapi":var e=t.sE;return ge(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new y(e,t.V||"0");case"provider":return t.sE;default:throw new f(h.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))},t.prototype.enableNetwork=function(){return this.GT(),this.zT.enableNetwork()},t.prototype.disableNetwork=function(){return this.GT(),this.zT.disableNetwork()},t.prototype.enablePersistence=function(t){var e,n;if(this.zT)throw new f(h.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var r=!1,i=!1;if(t&&(void 0!==t.experimentalTabSynchronization&&ve("The 'experimentalTabSynchronization' setting will be removed. Use 'synchronizeTabs' instead."),r=null!==(n=null!==(e=t.synchronizeTabs)&&void 0!==e?e:t.experimentalTabSynchronization)&&void 0!==n&&n,i=!!t.experimentalForceOwningTab&&t.experimentalForceOwningTab,r&&i))throw new f(h.INVALID_ARGUMENT,"The 'experimentalForceOwningTab' setting cannot be used with 'synchronizeTabs'.");return this.iE(this.XT,{VT:!0,cacheSizeBytes:this.ZT.cacheSizeBytes,synchronizeTabs:r,Bh:i})},t.prototype.clearPersistence=function(){return r.__awaiter(this,void 0,void 0,(function(){var t,e=this;return r.__generator(this,(function(n){if(void 0!==this.zT&&!this.zT.CT)throw new f(h.FAILED_PRECONDITION,"Persistence cannot be cleared after this Firestore instance is initialized.");return t=new Le,[2,(this.KT.xa((function(){return r.__awaiter(e,void 0,void 0,(function(){var e,n;return r.__generator(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),e=this.nE(),[4,this.XT.clearPersistence(e)];case 1:return r.sent(),t.resolve(),[3,3];case 2:return n=r.sent(),t.reject(n),[3,3];case 3:return[2]}}))}))})),t.promise)]}))}))},t.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(t.prototype,"rE",{get:function(){return this.GT(),this.zT.CT},enumerable:!0,configurable:!0}),t.prototype.waitForPendingWrites=function(){return this.GT(),this.zT.waitForPendingWrites()},t.prototype.onSnapshotsInSync=function(t){if(this.GT(),Vi(t))return this.hE(t);ur("Firestore.onSnapshotsInSync","function",1,t);var e={next:t};return this.hE(e)},t.prototype.hE=function(t){var e=this,n=new Mi({next:function(){t.next&&t.next()},error:function(t){throw ye()}});return this.zT.Nf(n),function(){n.MT(),e.zT.kf(n)}},t.prototype.GT=function(){return this.zT||this.iE(new Pi,{VT:!1}),this.zT},t.prototype.nE=function(){return new Te(this.mc,this.YT,this.ZT.host,this.ZT.ssl,this.ZT.forceLongPolling)},t.prototype.iE=function(t,e){var n=this.nE();return this.zT=new ji(he.nt(),n,this.JT,this.KT),this.zT.start(t,e)},t.HT=function(t){if(e=t.options,!Object.prototype.hasOwnProperty.call(e,"projectId"))throw new f(h.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var e,n=t.options.projectId;
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */if(!n||"string"!=typeof n)throw new f(h.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new ke(n)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.jT)throw new f(h.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.jT},enumerable:!0,configurable:!0}),t.prototype.collection=function(t){return or("Firestore.collection",arguments,1),ur("Firestore.collection","non-empty string",1,t),this.GT(),new Zi(w.K(t),this,null)},t.prototype.doc=function(t){return or("Firestore.doc",arguments,1),ur("Firestore.doc","non-empty string",1,t),this.GT(),Hi.oE(w.K(t),this,null)},t.prototype.collectionGroup=function(t){if(or("Firestore.collectionGroup",arguments,1),ur("Firestore.collectionGroup","non-empty string",1,t),t.indexOf("/")>=0)throw new f(h.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.GT(),new Xi(new wt(w.G,t),this,null)},t.prototype.runTransaction=function(t){var e=this;return or("Firestore.runTransaction",arguments,1),ur("Firestore.runTransaction","function",1,t),this.GT().transaction((function(n){return t(new qi(e,n))}))},t.prototype.batch=function(){return this.GT(),new zi(this)},Object.defineProperty(t,"logLevel",{get:function(){switch(de()){case o.LogLevel.DEBUG:return"debug";case o.LogLevel.ERROR:return"error";case o.LogLevel.SILENT:return"silent";case o.LogLevel.WARN:return"warn";case o.LogLevel.INFO:return"info";case o.LogLevel.VERBOSE:return"verbose";default:return"error"}},enumerable:!0,configurable:!0}),t.setLogLevel=function(t){var e;or("Firestore.setLogLevel",arguments,1),dr("setLogLevel",["debug","error","silent","warn","info","verbose"],1,t),e=t,fe.setLogLevel(e)},t.prototype.aE=function(){return this.ZT.timestampsInSnapshots},t}(),qi=function(){function t(t,e){this.uE=t,this.cE=e}return t.prototype.get=function(t){var e=this;or("Transaction.get",arguments,1);var n=no("Transaction.get",t,this.uE);return this.cE.V_([n.Pc]).then((function(t){if(!t||1!==t.length)return ye();var r=t[0];if(r instanceof gt)return new Yi(e.uE,n.Pc,null,!1,!1,n.Vc);if(r instanceof yt)return new Yi(e.uE,n.Pc,r,!1,!1,n.Vc);throw ye()}))},t.prototype.set=function(t,e,n){ar("Transaction.set",arguments,2,3);var r=no("Transaction.set",t,this.uE);n=Qi("Transaction.set",n);var i=io(r.Vc,e,"Transaction.set"),o=i[0],s=i[1],a=this.uE.tE.Fc(s,o,n);return this.cE.set(r.Pc,a),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return"string"==typeof e||e instanceof xr?(sr("Transaction.update",arguments,3),r=no("Transaction.update",t,this.uE),i=this.uE.tE.Mc("Transaction.update",e,n,o)):(or("Transaction.update",arguments,2),r=no("Transaction.update",t,this.uE),i=this.uE.tE.kc("Transaction.update",e)),this.cE.update(r.Pc,i),this},t.prototype.delete=function(t){or("Transaction.delete",arguments,1);var e=no("Transaction.delete",t,this.uE);return this.cE.delete(e.Pc),this},t}(),zi=function(){function t(t){this.uE=t,this._E=[],this.lE=!1}return t.prototype.set=function(t,e,n){ar("WriteBatch.set",arguments,2,3),this.dE();var r=no("WriteBatch.set",t,this.uE);n=Qi("WriteBatch.set",n);var i=io(r.Vc,e,"WriteBatch.set"),o=i[0],s=i[1],a=this.uE.tE.Fc(s,o,n);return this._E=this._E.concat(a.gc(r.Pc,it.ft())),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return this.dE(),"string"==typeof e||e instanceof xr?(sr("WriteBatch.update",arguments,3),r=no("WriteBatch.update",t,this.uE),i=this.uE.tE.Mc("WriteBatch.update",e,n,o)):(or("WriteBatch.update",arguments,2),r=no("WriteBatch.update",t,this.uE),i=this.uE.tE.kc("WriteBatch.update",e)),this._E=this._E.concat(i.gc(r.Pc,it.exists(!0))),this},t.prototype.delete=function(t){or("WriteBatch.delete",arguments,1),this.dE();var e=no("WriteBatch.delete",t,this.uE);return this._E=this._E.concat(new ct(e.Pc,it.ft())),this},t.prototype.commit=function(){return this.dE(),this.lE=!0,this._E.length>0?this.uE.GT().write(this._E):Promise.resolve()},t.prototype.dE=function(){if(this.lE)throw new f(h.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}(),Hi=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n.mc,e,r)||this).Pc=e,i.firestore=n,i.Vc=r,i.zT=i.firestore.GT(),i}return r.__extends(e,t),e.oE=function(t,n,r){if(t.length%2!=0)throw new f(h.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.j()+" has "+t.length);return new e(new T(t),n,r)},Object.defineProperty(e.prototype,"id",{get:function(){return this.Pc.path.L()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new Zi(this.Pc.path.$(),this.firestore,this.Vc)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.Pc.path.j()},enumerable:!0,configurable:!0}),e.prototype.collection=function(t){if(or("DocumentReference.collection",arguments,1),ur("DocumentReference.collection","non-empty string",1,t),!t)throw new f(h.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var e=w.K(t);return new Zi(this.Pc.path.child(e),this.firestore,null)},e.prototype.isEqual=function(t){if(!(t instanceof e))throw br("isEqual","DocumentReference",1,t);return this.firestore===t.firestore&&this.Pc.isEqual(t.Pc)&&this.Vc===t.Vc},e.prototype.set=function(t,e){ar("DocumentReference.set",arguments,1,2),e=Qi("DocumentReference.set",e);var n=io(this.Vc,t,"DocumentReference.set"),r=n[0],i=n[1],o=this.firestore.tE.Fc(i,r,e);return this.zT.write(o.gc(this.Pc,it.ft()))},e.prototype.update=function(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return"string"==typeof t||t instanceof xr?(sr("DocumentReference.update",arguments,2),n=this.firestore.tE.Mc("DocumentReference.update",t,e,r)):(or("DocumentReference.update",arguments,1),n=this.firestore.tE.kc("DocumentReference.update",t)),this.zT.write(n.gc(this.Pc,it.exists(!0)))},e.prototype.delete=function(){return or("DocumentReference.delete",arguments,0),this.zT.write([new ct(this.Pc,it.ft())])},e.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];ar("DocumentReference.onSnapshot",arguments,1,4);var n,r={includeMetadataChanges:!1},i=0;"object"!=typeof t[i]||Vi(t[i])||(gr("DocumentReference.onSnapshot",r=t[i],["includeMetadataChanges"]),hr("DocumentReference.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++);var o={includeMetadataChanges:r.includeMetadataChanges};return Vi(t[i])?n=t[i]:(ur("DocumentReference.onSnapshot","function",i,t[i]),cr("DocumentReference.onSnapshot","function",i+1,t[i+1]),cr("DocumentReference.onSnapshot","function",i+2,t[i+2]),n={next:t[i],error:t[i+1],complete:t[i+2]}),this.fE(o,n)},e.prototype.fE=function(t,e){var n=this,r=function(t){console.error("Uncaught Error in onSnapshot:",t)};e.error&&(r=e.error.bind(e));var i=new Mi({next:function(t){if(e.next){var r=t.docs.get(n.Pc);e.next(new Yi(n.firestore,n.Pc,r,t.fromCache,t.hasPendingWrites,n.Vc))}},error:r}),o=this.zT.listen(wt.Wt(this.Pc.path),i,t);return function(){i.MT(),n.zT.al(o)}},e.prototype.get=function(t){var e=this;return ar("DocumentReference.get",arguments,0,1),eo("DocumentReference.get",t),new Promise((function(n,r){t&&"cache"===t.source?e.firestore.GT().FT(e.Pc).then((function(t){n(new Yi(e.firestore,e.Pc,t,!0,t instanceof yt&&t.At,e.Vc))}),r):e.TE(n,r,t)}))},e.prototype.TE=function(t,e,n){var r=this.fE({includeMetadataChanges:!0,qf:!0},{next:function(i){r(),!i.exists&&i.metadata.fromCache?e(new f(h.UNAVAILABLE,"Failed to get document because the client is offline.")):i.exists&&i.metadata.fromCache&&n&&"server"===n.source?e(new f(h.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):t(i)},error:e})},e.prototype.withConverter=function(t){return new e(this.Pc,this.firestore,t)},e}(Vr),Gi=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Yi=function(){function t(t,e,n,r,i,o){this.uE=t,this.Pc=e,this.EE=n,this.IE=r,this.wE=i,this.Vc=o}return t.prototype.data=function(t){var e=this;if(ar("DocumentSnapshot.data",arguments,0,1),t=to("DocumentSnapshot.data",t),this.EE){if(this.Vc){var n=new Ki(this.uE,this.Pc,this.EE,this.IE,this.wE,null);return this.Vc.fromFirestore(n,t)}return new Fi(this.uE.mc,this.uE.aE(),t.serverTimestamps||"none",(function(t){return new Hi(t,e.uE,null)})).OT(this.EE.xt())}},t.prototype.get=function(t,e){var n=this;if(ar("DocumentSnapshot.get",arguments,1,2),e=to("DocumentSnapshot.get",e),this.EE){var r=this.EE.data().field(Kr("DocumentSnapshot.get",t));if(null!==r)return new Fi(this.uE.mc,this.uE.aE(),e.serverTimestamps||"none",(function(t){return new Hi(t,n.uE,n.Vc)})).OT(r)}},Object.defineProperty(t.prototype,"id",{get:function(){return this.Pc.path.L()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Hi(this.Pc,this.uE,this.Vc)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return null!==this.EE},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return new Gi(this.wE,this.IE)},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){if(!(e instanceof t))throw br("isEqual","DocumentSnapshot",1,e);return this.uE===e.uE&&this.IE===e.IE&&this.Pc.isEqual(e.Pc)&&(null===this.EE?null===e.EE:this.EE.isEqual(e.EE))&&this.Vc===e.Vc},t}(),Ki=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e.prototype.data=function(e){return t.prototype.data.call(this,e)},e}(Yi),Xi=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n.mc,n.tE,e)||this).RE=e,i.firestore=n,i.Vc=r,i}return r.__extends(e,t),e.prototype.where=function(t,n,r){or("Query.where",arguments,3),yr("Query.where",3,r);var i=dr("Query.where",["<","<=","==",">=",">","array-contains","in","array-contains-any"],2,n),o=Kr("Query.where",t),s=this.AE(o,i,r);return new e(this.RE.Gt(s),this.firestore,this.Vc)},e.prototype.orderBy=function(t,n){var r;if(ar("Query.orderBy",arguments,1,2),cr("Query.orderBy","non-empty string",2,n),void 0===n||"asc"===n)r="asc";else{if("desc"!==n)throw new f(h.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+n+"', expected 'asc' or 'desc'.");r="desc"}var i=Kr("Query.orderBy",t),o=this.gE(i,r);return new e(this.RE.zt(o),this.firestore,this.Vc)},e.prototype.limit=function(t){return or("Query.limit",arguments,1),ur("Query.limit","number",1,t),_r("Query.limit",1,t),new e(this.RE.Ht(t),this.firestore,this.Vc)},e.prototype.limitToLast=function(t){return or("Query.limitToLast",arguments,1),ur("Query.limitToLast","number",1,t),_r("Query.limitToLast",1,t),new e(this.RE.Yt(t),this.firestore,this.Vc)},e.prototype.startAt=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];sr("Query.startAt",arguments,1);var i=this.DE("Query.startAt",t,n,!0);return new e(this.RE.Jt(i),this.firestore,this.Vc)},e.prototype.startAfter=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];sr("Query.startAfter",arguments,1);var i=this.DE("Query.startAfter",t,n,!1);return new e(this.RE.Jt(i),this.firestore,this.Vc)},e.prototype.endBefore=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];sr("Query.endBefore",arguments,1);var i=this.DE("Query.endBefore",t,n,!0);return new e(this.RE.Xt(i),this.firestore,this.Vc)},e.prototype.endAt=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];sr("Query.endAt",arguments,1);var i=this.DE("Query.endAt",t,n,!1);return new e(this.RE.Xt(i),this.firestore,this.Vc)},e.prototype.isEqual=function(t){if(!(t instanceof e))throw br("isEqual","Query",1,t);return this.firestore===t.firestore&&this.RE.isEqual(t.RE)&&this.Vc===t.Vc},e.prototype.withConverter=function(t){return new e(this.RE,this.firestore,t)},e.prototype.DE=function(t,e,n,i){if(yr(t,1,e),e instanceof Yi)return or(t,r.__spreadArrays([e],n),1),this.yE(t,e.EE,i);var o=[e].concat(n);return this.bE(t,o,i)},e.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];ar("Query.onSnapshot",arguments,1,4);var n,r={},i=0;return"object"!=typeof t[i]||Vi(t[i])||(gr("Query.onSnapshot",r=t[i],["includeMetadataChanges"]),hr("Query.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++),Vi(t[i])?n=t[i]:(ur("Query.onSnapshot","function",i,t[i]),cr("Query.onSnapshot","function",i+1,t[i+1]),cr("Query.onSnapshot","function",i+2,t[i+2]),n={next:t[i],error:t[i+1],complete:t[i+2]}),this.vE(this.RE),this.fE(r,n)},e.prototype.fE=function(t,e){var n=this,r=function(t){console.error("Uncaught Error in onSnapshot:",t)};e.error&&(r=e.error.bind(e));var i=new Mi({next:function(t){e.next&&e.next(new Ji(n.firestore,n.RE,t,n.Vc))},error:r}),o=this.firestore.GT(),s=o.listen(this.RE,i,t);return function(){i.MT(),o.al(s)}},e.prototype.get=function(t){var e=this;return ar("Query.get",arguments,0,1),eo("Query.get",t),this.vE(this.RE),new Promise((function(n,r){t&&"cache"===t.source?e.firestore.GT().NT(e.RE).then((function(t){n(new Ji(e.firestore,e.RE,t,e.Vc))}),r):e.TE(n,r,t)}))},e.prototype.TE=function(t,e,n){var r=this.fE({includeMetadataChanges:!0,qf:!0},{next:function(i){r(),i.metadata.fromCache&&n&&"server"===n.source?e(new f(h.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):t(i)},error:e})},e}(function(){function t(t,e,n){this.mc=t,this.tE=e,this.RE=n}return t.prototype.AE=function(t,e,n){var r;if(t.Y()){if("array-contains"===e||"array-contains-any"===e)throw new f(h.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+e+"' queries on FieldPath.documentId().");if("in"===e){this.mE(n,e);for(var i=[],o=0,s=n;o<s.length;o++){var a=s[o];i.push(this.PE(a))}r={arrayValue:{values:i}}}else r=this.PE(n)}else"in"!==e&&"array-contains-any"!==e||this.mE(n,e),r=this.tE.xc("Query.where",n,"in"===e);var u=Et.create(t,e,r);return this.VE(u),u},t.prototype.gE=function(t,e){if(null!==this.RE.startAt)throw new f(h.INVALID_ARGUMENT,"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().");if(null!==this.RE.endAt)throw new f(h.INVALID_ARGUMENT,"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().");var n=new At(t,e);return this.pE(n),n},t.prototype.yE=function(t,e,n){if(!e)throw new f(h.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+t+"().");for(var r=[],i=0,o=this.RE.orderBy;i<o.length;i++){var s=o[i];if(s.field.Y())r.push(q(this.mc,e.key));else{var a=e.field(s.field);if(R(a))throw new f(h.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===a){var u=s.field.j();throw new f(h.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+u+"' (used as the orderBy) does not exist.")}r.push(a)}}return new Ot(r,n)},t.prototype.bE=function(t,e,n){var r=this.RE.Lt;if(e.length>r.length)throw new f(h.INVALID_ARGUMENT,"Too many arguments provided to "+t+"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses");for(var i=[],o=0;o<e.length;o++){var s=e[o];if(r[o].field.Y()){if("string"!=typeof s)throw new f(h.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+t+"(), but got a "+typeof s);if(!this.RE._e()&&-1!==s.indexOf("/"))throw new f(h.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+t+"() must be a plain document ID, but '"+s+"' contains a slash.");var a=this.RE.path.child(w.K(s));if(!T.et(a))throw new f(h.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+t+"() must result in a valid document path, but '"+a+"' is not because it contains an odd number of segments.");var u=new T(a);i.push(q(this.mc,u))}else{var c=this.tE.xc(t,s);i.push(c)}}return new Ot(i,n)},t.prototype.vE=function(t){if(t.ae()&&0===t.Lt.length)throw new f(h.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")},t.prototype.PE=function(t){if("string"==typeof t){if(""===t)throw new f(h.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!this.RE._e()&&-1!==t.indexOf("/"))throw new f(h.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+t+"' contains a '/' character.");var e=this.RE.path.child(w.K(t));if(!T.et(e))throw new f(h.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+e+"' is not because it has an odd number of segments ("+e.length+").");return q(this.mc,new T(e))}if(t instanceof Vr)return q(this.mc,t.Pc);throw new f(h.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+mr(t)+".")},t.prototype.mE=function(t,e){if(!Array.isArray(t)||0===t.length)throw new f(h.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new f(h.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.");if(t.indexOf(null)>=0)throw new f(h.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'null' in the value array.");if(t.filter((function(t){return Number.isNaN(t)})).length>0)throw new f(h.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'NaN' in the value array.")},t.prototype.VE=function(t){if(t instanceof Et){var e=["array-contains","array-contains-any"],n=["in","array-contains-any"],r=e.indexOf(t.op)>=0,i=n.indexOf(t.op)>=0;if(t.ue()){var o=this.RE.jt();if(null!==o&&!o.isEqual(t.field))throw new f(h.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+o.toString()+"' and '"+t.field.toString()+"'");var s=this.RE.Kt();null!==s&&this.SE(t.field,s)}else if(i||r){var a=null;if(i&&(a=this.RE.ce(n)),null===a&&r&&(a=this.RE.ce(e)),null!=a)throw a===t.op?new f(h.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+t.op.toString()+"' filter."):new f(h.INVALID_ARGUMENT,"Invalid query. You cannot use '"+t.op.toString()+"' filters with '"+a.toString()+"' filters.")}}},t.prototype.pE=function(t){if(null===this.RE.Kt()){var e=this.RE.jt();null!==e&&this.SE(e,t.field)}},t.prototype.SE=function(t,e){if(!e.isEqual(t))throw new f(h.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first Query.orderBy(), but your first Query.orderBy() is on field '"+e.toString()+"' instead.")},t}()),Ji=function(){function t(t,e,n,r){this.uE=t,this.CE=e,this.FE=n,this.Vc=r,this.NE=null,this.kE=null,this.metadata=new Gi(n.hasPendingWrites,n.fromCache)}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this.FE.docs.B()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.FE.docs.size},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;ar("QuerySnapshot.forEach",arguments,1,2),ur("QuerySnapshot.forEach","function",1,t),this.FE.docs.forEach((function(r){t.call(e,n.ME(r))}))},Object.defineProperty(t.prototype,"query",{get:function(){return new Xi(this.CE,this.uE,this.Vc)},enumerable:!0,configurable:!0}),t.prototype.docChanges=function(t){t&&(gr("QuerySnapshot.docChanges",t,["includeMetadataChanges"]),hr("QuerySnapshot.docChanges","boolean","includeMetadataChanges",t.includeMetadataChanges));var e=!(!t||!t.includeMetadataChanges);if(e&&this.FE.hs)throw new f(h.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.NE&&this.kE===e||(this.NE=function(t,e,n,r){if(n.ss.B()){var i=0;return n.docChanges.map((function(e){var o=new Ki(t,e.doc.key,e.doc,n.fromCache,n.ns.has(e.doc.key),r);return e.doc,{type:"added",doc:o,oldIndex:-1,newIndex:i++}}))}var o=n.ss;return n.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var i=new Ki(t,e.doc.key,e.doc,n.fromCache,n.ns.has(e.doc.key),r),s=-1,a=-1;return 0!==e.type&&(s=o.indexOf(e.doc.key),o=o.delete(e.doc.key)),1!==e.type&&(a=(o=o.add(e.doc)).indexOf(e.doc.key)),{type:ro(e.type),doc:i,oldIndex:s,newIndex:a}}))}(this.uE,e,this.FE,this.Vc),this.kE=e),this.NE},t.prototype.isEqual=function(e){if(!(e instanceof t))throw br("isEqual","QuerySnapshot",1,e);return this.uE===e.uE&&this.CE.isEqual(e.CE)&&this.FE.isEqual(e.FE)&&this.Vc===e.Vc},t.prototype.ME=function(t){return new Ki(this.uE,t.key,t,this.metadata.fromCache,this.FE.ns.has(t.key),this.Vc)},t}(),Zi=function(t){function e(e,n,r){var i=this;if((i=t.call(this,wt.Wt(e),n,r)||this).xE=e,e.length%2!=1)throw new f(h.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e.j()+" has "+e.length);return i}return r.__extends(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.RE.path.L()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.RE.path.$();return t.B()?null:new Hi(new T(t),this.firestore,null)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.RE.path.j()},enumerable:!0,configurable:!0}),e.prototype.doc=function(t){ar("CollectionReference.doc",arguments,0,1),0===arguments.length&&(t=_e.cn()),ur("CollectionReference.doc","non-empty string",1,t);var e=w.K(t);return Hi.oE(this.RE.path.child(e),this.firestore,this.Vc)},e.prototype.add=function(t){or("CollectionReference.add",arguments,1),ur("CollectionReference.add","object",1,this.Vc?this.Vc.toFirestore(t):t);var e=this.doc();return e.set(t).then((function(){return e}))},e.prototype.withConverter=function(t){return new e(this.xE,this.firestore,t)},e}(Xi);
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Qi(t,e){if(void 0===e)return{merge:!1};if(gr(t,e,["merge","mergeFields"]),hr(t,"boolean","merge",e.merge),function(t,e,n,r,i){void 0!==r&&function(t,e,n,r,i){if(!(r instanceof Array))throw new f(h.INVALID_ARGUMENT,"Function "+t+"() requires its "+e+" option to be an array, but it was: "+mr(r));for(var o=0;o<r.length;++o)if(!i(r[o]))throw new f(h.INVALID_ARGUMENT,"Function "+t+"() requires all "+e+" elements to be a string or a FieldPath, but the value at index "+o+" was: "+mr(r[o]))}(t,"mergeFields",0,r,(function(t){return"string"==typeof t||t instanceof xr}))}(t,0,0,e.mergeFields),void 0!==e.mergeFields&&void 0!==e.merge)throw new f(h.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function to(t,e){return void 0===e?{}:(gr(t,e,["serverTimestamps"]),fr(t,0,"serverTimestamps",e.serverTimestamps,["estimate","previous","none"]),e)}function eo(t,e){cr(t,"object",1,e),e&&(gr(t,e,["source"]),fr(t,0,"source",e.source,["default","server","cache"]))}function no(t,e,n){if(e instanceof Vr){if(e.firestore!==n)throw new f(h.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}throw br(t,"DocumentReference",1,e)}function ro(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ye()}}function io(t,e,n){var r;return t?(r=t.toFirestore(e),n="toFirestore() in "+n):r=e,[r,n]}function oo(t,e){function n(){var t="This constructor is private.";throw e&&(t+=" ",t+=e),new f(h.INVALID_ARGUMENT,t)}return n.prototype=t.prototype,Object.assign(n,t),n}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var so=oo(Wi,"Use firebase.firestore() instead."),ao=oo(qi,"Use firebase.firestore().runTransaction() instead."),uo=oo(zi,"Use firebase.firestore().batch() instead."),co=oo(Hi,"Use firebase.firestore().doc() instead."),lo=oo(Yi),ho=oo(Ki),fo=oo(Xi),po=oo(Ji),vo=oo(Zi,"Use firebase.firestore().collection() instead."),mo=oo(Pr,"Use FieldValue.<field>() instead."),yo=oo(kr,"Use Blob.fromUint8Array() or Blob.fromBase64String() instead."),go={Firestore:so,GeoPoint:jr,Timestamp:g,Blob:yo,Transaction:ao,WriteBatch:uo,DocumentReference:co,DocumentSnapshot:lo,Query:fo,QueryDocumentSnapshot:ho,QuerySnapshot:po,CollectionReference:vo,FieldPath:xr,FieldValue:mo,setLogLevel:Wi.setLogLevel,CACHE_SIZE_UNLIMITED:$i},bo=function(){function t(){}return t.prototype.Q_=function(t){},t.prototype.Vo=function(){},t}(),_o=function(){function t(){var t=this;this.$E=function(){return t.OE()},this.LE=function(){return t.BE()},this.qE=[],this.UE()}return t.prototype.Q_=function(t){this.qE.push(t)},t.prototype.Vo=function(){window.removeEventListener("online",this.$E),window.removeEventListener("offline",this.LE)},t.prototype.UE=function(){window.addEventListener("online",this.$E),window.addEventListener("offline",this.LE)},t.prototype.OE=function(){pe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.qE;t<e.length;t++)(0,e[t])(0)},t.prototype.BE=function(){pe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.qE;t<e.length;t++)(0,e[t])(1)},t.zh=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),wo=function(){function t(t){this.QE=t.QE,this.WE=t.WE}return t.prototype.s_=function(t){this.jE=t},t.prototype.Jc=function(t){this.KE=t},t.prototype.onMessage=function(t){this.GE=t},t.prototype.close=function(){this.WE()},t.prototype.send=function(t){this.QE(t)},t.prototype.zE=function(){this.jE()},t.prototype.HE=function(t){this.KE(t)},t.prototype.YE=function(t){this.GE(t)},t}(),Eo={BatchGetDocuments:"batchGet",Commit:"commit"},Io="gl-js/ fire/"+c,To=function(){function t(t){this.ii=t.ii;var e=t.ssl?"https":"http";this.JE=e+"://"+t.host,this.forceLongPolling=t.forceLongPolling}return t.prototype.XE=function(t,e){if(e)for(var n in e.o)e.o.hasOwnProperty(n)&&(t[n]=e.o[n]);t["X-Goog-Api-Client"]=Io},t.prototype.E_=function(t,e,n){var r=this,i=this.ZE(t);return new Promise((function(o,s){var a=new u.XhrIo;a.listenOnce(u.EventType.COMPLETE,(function(){try{switch(a.getLastErrorCode()){case u.ErrorCode.NO_ERROR:var e=a.getResponseJson();pe("Connection","XHR received:",JSON.stringify(e)),o(e);break;case u.ErrorCode.TIMEOUT:pe("Connection",'RPC "'+t+'" timed out'),s(new f(h.DEADLINE_EXCEEDED,"Request time out"));break;case u.ErrorCode.HTTP_ERROR:var n=a.getStatus();if(pe("Connection",'RPC "'+t+'" failed with status:',n,"response text:",a.getResponseText()),n>0){var r=a.getResponseJson().error;if(r&&r.status&&r.message){var i=function(t){var e=t.toLowerCase().replace("_","-");return Object.values(h).indexOf(e)>=0?e:h.UNKNOWN}(r.status);s(new f(i,r.message))}else s(new f(h.UNKNOWN,"Server responded with status "+a.getStatus()))}else pe("Connection",'RPC "'+t+'" failed'),s(new f(h.UNAVAILABLE,"Connection failed."));break;default:ye()}}finally{pe("Connection",'RPC "'+t+'" completed.')}}));var c=Object.assign({},e);delete c.database;var l=JSON.stringify(c);pe("Connection","XHR sending: ",i+" "+l);var d={"Content-Type":"text/plain"};r.XE(d,n),a.send(i,"POST",l,d,15)}))},t.prototype.I_=function(t,e,n){return this.E_(t,e,n)},t.prototype.i_=function(t,e){var n=[this.JE,"/","google.firestore.v1.Firestore","/",t,"/channel"],i=u.createWebChannelTransport(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.ii.projectId+"/databases/"+this.ii.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling};this.XE(a.initMessageHeaders,e),s.isMobileCordova()||s.isReactNative()||s.isElectron()||s.isIE()||s.isUWP()||s.isBrowserExtension()||(a.httpHeadersOverwriteParam="$httpHeaders");var l=n.join("");pe("Connection","Creating WebChannel: "+l+" "+a);var d=i.createWebChannel(l,a),p=!1,v=!1,m=new wo({QE:function(t){v?pe("Connection","Not sending because WebChannel is closed:",t):(p||(pe("Connection","Opening WebChannel transport."),d.open(),p=!0),pe("Connection","WebChannel sending:",t),d.send(t))},WE:function(){return d.close()}}),y=function(t,e){d.listen(t,(function(t){try{e(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return y(u.WebChannel.EventType.OPEN,(function(){v||pe("Connection","WebChannel transport opened.")})),y(u.WebChannel.EventType.CLOSE,(function(){v||(v=!0,pe("Connection","WebChannel transport closed"),m.HE())})),y(u.WebChannel.EventType.ERROR,(function(t){v||(v=!0,function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(fe.logLevel<=o.LogLevel.WARN){var i=e.map(me);fe.warn.apply(fe,r.__spreadArrays(["Firestore ("+c+"): "+t],i))}}("Connection","WebChannel transport errored:",t),m.HE(new f(h.UNAVAILABLE,"The operation could not be completed")))})),y(u.WebChannel.EventType.MESSAGE,(function(t){var e;if(!v){var n=t.data[0];ge(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){pe("Connection","WebChannel received error:",i);var o=i.status,s=function(t){var e=pt[t];if(void 0!==e)return Ct(e)}(o),a=i.message;void 0===s&&(s=h.INTERNAL,a="Unknown error status: "+o+" with message "+i.message),v=!0,m.HE(new f(s,a)),d.close()}else pe("Connection","WebChannel received:",n),m.YE(n)}})),setTimeout((function(){m.zE()}),0),m},t.prototype.ZE=function(t){var e=Eo[t];return this.JE+"/v1/projects/"+this.ii.projectId+"/databases/"+this.ii.database+"/documents:"+e},t}();
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function ko(t){!function(t,e){t.INTERNAL.registerComponent(new a.Component("firestore",(function(t){return function(t,e){return new Wi(t,e,new Li)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},go)))}(t),t.registerVersion("@firebase/firestore","1.15.4")
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */}he.an(new(function(){function t(){this.oc="undefined"!=typeof atob}return Object.defineProperty(t.prototype,"document",{get:function(){return"undefined"!=typeof document?document:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"window",{get:function(){return"undefined"!=typeof window?window:null},enumerable:!0,configurable:!0}),t.prototype.vT=function(t){return Promise.resolve(new To(t))},t.prototype.pT=function(){return _o.zh()?new _o:new bo},t.prototype.Cc=function(t){return new ce(t,{hi:!0})},t.prototype.un=function(t){return JSON.stringify(t)},t.prototype.atob=function(t){return atob(t)},t.prototype.btoa=function(t){return btoa(t)},t.prototype._n=function(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n},t}())),ko(i),e.__PRIVATE_registerFirestore=ko}));Dt(iy);iy.__PRIVATE_registerFirestore;
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var oy=function(){function t(t,e){this.code_=Ty(t),this.message_="Firebase Storage: "+e,this.serverResponse_=null,this.name_="FirebaseError"}return t.prototype.codeProp=function(){return this.code},t.prototype.codeEquals=function(t){return Ty(t)===this.codeProp()},t.prototype.serverResponseProp=function(){return this.serverResponse_},t.prototype.setServerResponseProp=function(t){this.serverResponse_=t},Object.defineProperty(t.prototype,"name",{get:function(){return this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"code",{get:function(){return this.code_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"message",{get:function(){return this.message_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"serverResponse",{get:function(){return this.serverResponse_},enumerable:!0,configurable:!0}),t}(),sy="unknown",ay="object-not-found",uy="quota-exceeded",cy="unauthenticated",ly="unauthorized",hy="retry-limit-exceeded",fy="canceled",dy="invalid-url",py="invalid-default-bucket",vy="cannot-slice-blob",my="server-file-wrong-size",yy="no-download-url",gy="invalid-argument",by="invalid-argument-count",_y="app-deleted",wy="invalid-root-operation",Ey="invalid-format",Iy="internal-error";function Ty(t){return"storage/"+t}function ky(){return new oy(sy,"An unknown error occurred, please check the error payload for server response.")}function Sy(){return new oy(fy,"User canceled the upload/download.")}function xy(){return new oy(vy,"Cannot slice blob for upload. Please retry the upload.")}function Oy(){return new oy(yy,"The given file does not have any download URLs.")}function Ay(t,e,n){return new oy(gy,"Invalid argument in `"+e+"` at index "+t+": "+n)}function Ny(){return new oy(_y,"The Firebase app was deleted.")}function Dy(t,e){return new oy(Ey,"String does not match format '"+t+"': "+e)}function Ry(t){throw new oy(Iy,"Internal error: "+t)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Cy={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};function Uy(t){switch(t){case Cy.RAW:case Cy.BASE64:case Cy.BASE64URL:case Cy.DATA_URL:return;default:throw"Expected one of the event types: ["+Cy.RAW+", "+Cy.BASE64+", "+Cy.BASE64URL+", "+Cy.DATA_URL+"]."}}var Py=function(t,e){this.data=t,this.contentType=e||null};function Ly(t,e){switch(t){case Cy.RAW:return new Py(jy(e));case Cy.BASE64:case Cy.BASE64URL:return new Py(My(t,e));case Cy.DATA_URL:return new Py((n=new Vy(e)).base64?My(Cy.BASE64,n.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(t){throw Dy(Cy.DATA_URL,"Malformed data URL.")}return jy(e)}(n.rest),function(t){return new Vy(t).contentType}(e))}var n;throw ky()}function jy(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296==(64512&r))if(n<t.length-1&&56320==(64512&t.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&t.charCodeAt(++n),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else e.push(239,191,189);else 56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function My(t,e){switch(t){case Cy.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw Dy(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case Cy.BASE64URL:var i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw Dy(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var s;try{s=atob(e)}catch(e){throw Dy(t,"Invalid character found")}for(var a=new Uint8Array(s.length),u=0;u<s.length;u++)a[u]=s.charCodeAt(u);return a}var Vy=function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw Dy(Cy.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n=e[1]||null;null!=n&&(this.base64=(r=n,i=";base64",r.length>=i.length&&r.substring(r.length-i.length)===i),this.contentType=this.base64?n.substring(0,n.length-";base64".length):n),this.rest=t.substring(t.indexOf(",")+1);var r,i;
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */};var Fy,$y={STATE_CHANGED:"state_changed"},By="running",Wy="pausing",qy="paused",zy="success",Hy="canceling",Gy="canceled",Yy="error",Ky={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Xy(t){switch(t){case By:case Wy:case Hy:return Ky.RUNNING;case qy:return Ky.PAUSED;case zy:return Ky.SUCCESS;case Gy:return Ky.CANCELED;case Yy:default:return Ky.ERROR}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Jy(t){return null!=t}function Zy(t){return void 0!==t}function Qy(t){return"function"==typeof t}function tg(t){return"object"==typeof t}function eg(t){return tg(t)&&null!==t}function ng(t){return"string"==typeof t||t instanceof String}function rg(t){return ig(t)&&Number.isInteger(t)}function ig(t){return"number"==typeof t||t instanceof Number}function og(t){return sg()&&t instanceof Blob}function sg(){return"undefined"!=typeof Blob}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */!function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"}(Fy||(Fy={}));
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var ag=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=Fy.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=Fy.ABORT,e(t)})),t.xhr_.addEventListener("error",(function(){t.errorCode_=Fy.NETWORK_ERROR,e(t)})),t.xhr_.addEventListener("load",(function(){e(t)}))}))}return t.prototype.send=function(t,e,n,r){if(this.sent_)throw Ry("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),Jy(r))for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return Jy(n)?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw Ry("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw Ry("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw Ry("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){Jy(this.xhr_.upload)&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){Jy(this.xhr_.upload)&&this.xhr_.upload.removeEventListener("progress",t)},t}(),ug=function(){function t(){}return t.prototype.createXhrIo=function(){return new ag},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function cg(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function lg(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=cg();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(sg())return new Blob(t);throw Error("This browser doesn't seem to support creating Blobs")}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var hg=function(){function t(t,e){var n=0,r="";og(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(og(this.data_)){var r=function(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}(this.data_,e,n);return null===r?null:new t(r)}return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(sg()){var r=e.map((function(e){return e instanceof t?e.data_:e}));return new t(lg.apply(null,r))}var i=e.map((function(t){return ng(t)?Ly(Cy.RAW,t).data:t.data_})),o=0;i.forEach((function(t){o+=t.byteLength}));var s=new Uint8Array(o),a=0;return i.forEach((function(t){for(var e=0;e<t.length;e++)s[a++]=t[e]})),new t(s,!0)},t.prototype.uploadData=function(){return this.data_},t}(),fg=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!0,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e){var n;try{n=t.makeFromUrl(e)}catch(n){return new t(e,"")}if(""===n.path)return n;throw new oy(py,"Invalid default bucket '"+e+"'.")},t.makeFromUrl=function(e){var n=null;var r=new RegExp("^gs://([A-Za-z0-9.\\-_]+)(/(.*))?$","i");function i(t){t.path_=decodeURIComponent(t.path)}for(var o="firebasestorage.googleapis.com".replace(/[.]/g,"\\."),s=[{regex:r,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+o+"/v[A-Za-z0-9_]+/b/([A-Za-z0-9.\\-_]+)/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:i},{regex:new RegExp("^https?://(?:storage.googleapis.com|storage.cloud.google.com)/([A-Za-z0-9.\\-_]+)/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:i}],a=0;a<s.length;a++){var u=s[a],c=u.regex.exec(e);if(c){var l=c[u.indices.bucket],h=c[u.indices.path];h||(h=""),n=new t(l,h),u.postModify(n);break}}if(null==n)throw function(t){return new oy(dy,"Invalid URL '"+t+"'.")}(e);return n},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function dg(t){var e,n;try{e=JSON.parse(t)}catch(t){return null}return tg(n=e)&&!Array.isArray(n)?e:null}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function pg(t,e){var n=e.split("/").filter((function(t){return t.length>0})).join("/");return 0===t.length?n:t+"/"+n}function vg(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function mg(t){return"https://firebasestorage.googleapis.com/v0"+t}function yg(t){var e=encodeURIComponent,n="?";for(var r in t){if(t.hasOwnProperty(r))n=n+(e(r)+"="+e(t[r]))+"&"}return n=n.slice(0,-1)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function gg(t,e){return e}var bg=function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||gg},_g=null;function wg(){if(_g)return _g;var t=[];t.push(new bg("bucket")),t.push(new bg("generation")),t.push(new bg("metageneration")),t.push(new bg("name","fullPath",!0));var e=new bg("name");e.xform=function(t,e){return function(t){return!ng(t)||t.length<2?t:vg(t)}(e)},t.push(e);var n=new bg("size");return n.xform=function(t,e){return Jy(e)?Number(e):e},t.push(n),t.push(new bg("timeCreated")),t.push(new bg("updated")),t.push(new bg("md5Hash",null,!0)),t.push(new bg("cacheControl",null,!0)),t.push(new bg("contentDisposition",null,!0)),t.push(new bg("contentEncoding",null,!0)),t.push(new bg("contentLanguage",null,!0)),t.push(new bg("contentType",null,!0)),t.push(new bg("metadata","customMetadata",!0)),_g=t}function Eg(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var s=n[o];r[s.local]=s.xform(r,e[s.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=t.bucket,r=t.fullPath,i=new fg(n,r);return e.makeStorageReference(i)}})}(r,t),r}function Ig(t,e,n){var r=dg(e);return null===r?null:Eg(t,r,n)}function Tg(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}function kg(t){if(!tg(t)||!t)throw"Expected Metadata object.";for(var e in t)if(t.hasOwnProperty(e)){var n=t[e];if("customMetadata"===e){if(!tg(n))throw"Expected object for 'customMetadata' mapping."}else if(eg(n))throw"Mapping for '"+e+"' cannot be an object."}}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Sg(t,e,n){var r=dg(n);return null===r?null:function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var i=0,o=n.prefixes;i<o.length;i++){var s=o[i].replace(/\/$/,""),a=t.makeStorageReference(new fg(e,s));r.prefixes.push(a)}if(n.items)for(var u=0,c=n.items;u<c.length;u++){var l=c[u];a=t.makeStorageReference(new fg(e,l.name));r.items.push(a)}return r}(t,e,r)}function xg(t){if(!tg(t)||!t)throw"Expected ListOptions object.";for(var e in t)if("maxResults"===e){if(!rg(t.maxResults)||t.maxResults<=0)throw"Expected maxResults to be a positive number.";if(t.maxResults>1e3)throw"Expected maxResults to be less than or equal to 1000."}else{if("pageToken"!==e)throw"Unknown option: "+e;if(t.pageToken&&!ng(t.pageToken))throw"Expected pageToken to be string."}}var Og=function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Ag(t){if(!t)throw ky()}function Ng(t,e){return function(n,r){var i=Ig(t,r,e);return Ag(null!==i),i}}function Dg(t,e){return function(n,r){var i=Ig(t,r,e);return Ag(null!==i),function(t,e){var n=dg(e);if(null===n)return null;if(!ng(n.downloadTokens))return null;var r=n.downloadTokens;if(0===r.length)return null;var i=encodeURIComponent;return r.split(",").map((function(e){var n=t.bucket,r=t.fullPath;return mg("/b/"+i(n)+"/o/"+i(r))+yg({alt:"media",token:e})}))[0]}(i,r)}}function Rg(t){return function(e,n){var r,i;return 401===e.getStatus()?r=new oy(cy,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?(i=t.bucket,r=new oy(uy,"Quota for bucket '"+i+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):r=403===e.getStatus()?function(t){return new oy(ly,"User does not have permission to access '"+t+"'.")}(t.path):n,r.setServerResponseProp(n.serverResponseProp()),r}}function Cg(t){var e=Rg(t);return function(n,r){var i=e(n,r);return 404===n.getStatus()&&(i=function(t){return new oy(ay,"Object '"+t+"' does not exist.")}(t.path)),i.setServerResponseProp(r.serverResponseProp()),i}}function Ug(t,e,n){var r=mg(e.fullServerUrl()),i=t.maxOperationRetryTime(),o=new Og(r,"GET",Ng(t,n),i);return o.errorHandler=Cg(e),o}function Pg(t,e,n,r,i){var o={};e.isRoot?o.prefix="":o.prefix=e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var s=mg(e.bucketOnlyServerUrl()),a=t.maxOperationRetryTime(),u=new Og(s,"GET",function(t,e){return function(n,r){var i=Sg(t,e,r);return Ag(null!==i),i}}(t,e.bucket),a);return u.urlParams=o,u.errorHandler=Rg(e),u}function Lg(t,e,n){var r=mg(e.fullServerUrl()),i=t.maxOperationRetryTime(),o=new Og(r,"GET",Dg(t,n),i);return o.errorHandler=Cg(e),o}function jg(t,e,n,r){var i=mg(e.fullServerUrl()),o=Tg(n,r),s=t.maxOperationRetryTime(),a=new Og(i,"PATCH",Ng(t,r),s);return a.headers={"Content-Type":"application/json; charset=utf-8"},a.body=o,a.errorHandler=Cg(e),a}function Mg(t,e){var n=mg(e.fullServerUrl()),r=t.maxOperationRetryTime();var i=new Og(n,"DELETE",(function(t,e){}),r);return i.successCodes=[200,204],i.errorHandler=Cg(e),i}function Vg(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}var Fg=function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null};function $g(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(t){Ag(!1)}return Ag(!!n&&-1!==(e||["active"]).indexOf(n)),n}function Bg(t,e,n,r,i,o,s,a){var u=new Fg(0,0);if(s?(u.current=s.current,u.total=s.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new oy(my,"Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,l=c;i>0&&(l=Math.min(l,i));var h=u.current,f=h+l,d={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":u.current},p=r.slice(h,f);if(null===p)throw xy();var v=e.maxUploadRetryTime(),m=new Og(n,"POST",(function(t,n){var i,s=$g(t,["active","final"]),a=u.current+l,c=r.size();return i="final"===s?Ng(e,o)(t,n):null,new Fg(a,c,"final"===s,i)}),v);return m.headers=d,m.body=p.uploadData(),m.progressCallback=a||null,m.errorHandler=Rg(t),m}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Wg=function(t,e,n){if(Qy(t)||Jy(e)||Jy(n))this.next=t,this.error=e||null,this.complete=n||null;else{var r=t;this.next=r.next||null,this.error=r.error||null,this.complete=r.complete||null}},qg=function(t,e,n,r,i,o){this.bytesTransferred=t,this.totalBytes=e,this.state=n,this.metadata=r,this.task=i,this.ref=o};
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function zg(t,e,n){for(var r=e.length,i=e.length,o=0;o<e.length;o++)if(e[o].optional){r=o;break}var s,a,u,c,l,h;if(!(r<=n.length&&n.length<=i))throw s=r,a=i,u=t,c=n.length,s===a?(l=s,h=1===s?"argument":"arguments"):(l="between "+s+" and "+a,h="arguments"),new oy(by,"Invalid argument count in `"+u+"`: Expected "+l+" "+h+", received "+c+".");for(o=0;o<n.length;o++)try{e[o].validator(n[o])}catch(e){throw e instanceof Error?Ay(o,t,e.message):Ay(o,t,e)}}var Hg=function(t,e){var n=this;this.validator=function(e){n.optional&&!Zy(e)||t(e)},this.optional=!!e};function Gg(t,e){function n(t){if(!ng(t))throw"Expected string."}var r,i,o;return t?(i=n,o=t,r=function(t){i(t),o(t)}):r=n,new Hg(r,e)}function Yg(){return new Hg((function(t){if(!(t instanceof Uint8Array||t instanceof ArrayBuffer||sg()&&t instanceof Blob))throw"Expected Blob or File."}))}function Kg(t){return new Hg(kg,t)}function Xg(t){return new Hg(xg,t)}function Jg(){return new Hg((function(t){if(!(ig(t)&&t>=0))throw"Expected a number 0 or greater."}))}function Zg(t,e){return new Hg((function(e){if(!(null===e||Jy(e)&&e instanceof Object))throw"Expected an Object.";null!=t&&t(e)}),e)}function Qg(t){return new Hg((function(t){if(!(null===t||Qy(t)))throw"Expected a Function."}),t)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function tb(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then((function(){return t.apply(void 0,e)}))}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var eb=function(){function t(t,e,n,r,i,o){var s=this;void 0===o&&(o=null),this.transferred_=0,this.needToFetchStatus_=!1,this.needToFetchMetadata_=!1,this.observers_=[],this.error_=null,this.uploadUrl_=null,this.request_=null,this.chunkMultiplier_=1,this.resolve_=null,this.reject_=null,this.ref_=t,this.authWrapper_=e,this.location_=n,this.blob_=i,this.metadata_=o,this.mappings_=r,this.resumable_=this.shouldDoResumable_(this.blob_),this.state_=By,this.errorHandler_=function(t){s.request_=null,s.chunkMultiplier_=1,t.codeEquals(fy)?(s.needToFetchStatus_=!0,s.completeTransitions_()):(s.error_=t,s.transition_(Yy))},this.metadataErrorHandler_=function(t){s.request_=null,t.codeEquals(fy)?s.completeTransitions_():(s.error_=t,s.transition_(Yy))},this.promise_=new Promise((function(t,e){s.resolve_=t,s.reject_=e,s.start_()})),this.promise_.then(null,(function(){}))}return t.prototype.makeProgressCallback_=function(){var t=this,e=this.transferred_;return function(n){return t.updateProgress_(e+n)}},t.prototype.shouldDoResumable_=function(t){return t.size()>262144},t.prototype.start_=function(){this.state_===By&&null===this.request_&&(this.resumable_?null===this.uploadUrl_?this.createResumable_():this.needToFetchStatus_?this.fetchStatus_():this.needToFetchMetadata_?this.fetchMetadata_():this.continueUpload_():this.oneShotUpload_())},t.prototype.resolveToken_=function(t){var e=this;this.authWrapper_.getAuthToken().then((function(n){switch(e.state_){case By:t(n);break;case Hy:e.transition_(Gy);break;case Wy:e.transition_(qy)}}))},t.prototype.createResumable_=function(){var t=this;this.resolveToken_((function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s=Vg(e,r,i),a={name:s.fullPath},u=mg(o),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},l=Tg(s,n),h=t.maxUploadRetryTime(),f=new Og(u,"POST",(function(t){var e;$g(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(t){Ag(!1)}return Ag(ng(e)),e}),h);return f.urlParams=a,f.headers=c,f.body=l,f.errorHandler=Rg(e),f}(t.authWrapper_,t.location_,t.mappings_,t.blob_,t.metadata_),r=t.authWrapper_.makeRequest(n,e);t.request_=r,r.getPromise().then((function(e){t.request_=null,t.uploadUrl_=e,t.needToFetchStatus_=!1,t.completeTransitions_()}),t.errorHandler_)}))},t.prototype.fetchStatus_=function(){var t=this,e=this.uploadUrl_;this.resolveToken_((function(n){var r=function(t,e,n,r){var i=t.maxUploadRetryTime(),o=new Og(n,"POST",(function(t){var e=$g(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(t){Ag(!1)}n||Ag(!1);var i=Number(n);return Ag(!isNaN(i)),new Fg(i,r.size(),"final"===e)}),i);return o.headers={"X-Goog-Upload-Command":"query"},o.errorHandler=Rg(e),o}(t.authWrapper_,t.location_,e,t.blob_),i=t.authWrapper_.makeRequest(r,n);t.request_=i,i.getPromise().then((function(e){e=e,t.request_=null,t.updateProgress_(e.current),t.needToFetchStatus_=!1,e.finalized&&(t.needToFetchMetadata_=!0),t.completeTransitions_()}),t.errorHandler_)}))},t.prototype.continueUpload_=function(){var t=this,e=262144*this.chunkMultiplier_,n=new Fg(this.transferred_,this.blob_.size()),r=this.uploadUrl_;this.resolveToken_((function(i){var o;try{o=Bg(t.location_,t.authWrapper_,r,t.blob_,e,t.mappings_,n,t.makeProgressCallback_())}catch(e){return t.error_=e,void t.transition_(Yy)}var s=t.authWrapper_.makeRequest(o,i);t.request_=s,s.getPromise().then((function(e){t.increaseMultiplier_(),t.request_=null,t.updateProgress_(e.current),e.finalized?(t.metadata_=e.metadata,t.transition_(zy)):t.completeTransitions_()}),t.errorHandler_)}))},t.prototype.increaseMultiplier_=function(){262144*this.chunkMultiplier_<33554432&&(this.chunkMultiplier_*=2)},t.prototype.fetchMetadata_=function(){var t=this;this.resolveToken_((function(e){var n=Ug(t.authWrapper_,t.location_,t.mappings_),r=t.authWrapper_.makeRequest(n,e);t.request_=r,r.getPromise().then((function(e){t.request_=null,t.metadata_=e,t.transition_(zy)}),t.metadataErrorHandler_)}))},t.prototype.oneShotUpload_=function(){var t=this;this.resolveToken_((function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"},a=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();s["Content-Type"]="multipart/related; boundary="+a;var u=Vg(e,r,i),c="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Tg(u,n)+"\r\n--"+a+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",l="\r\n--"+a+"--",h=hg.getBlob(c,r,l);if(null===h)throw xy();var f={name:u.fullPath},d=mg(o),p=t.maxUploadRetryTime(),v=new Og(d,"POST",Ng(t,n),p);return v.urlParams=f,v.headers=s,v.body=h.uploadData(),v.errorHandler=Rg(e),v}(t.authWrapper_,t.location_,t.mappings_,t.blob_,t.metadata_),r=t.authWrapper_.makeRequest(n,e);t.request_=r,r.getPromise().then((function(e){t.request_=null,t.metadata_=e,t.updateProgress_(t.blob_.size()),t.transition_(zy)}),t.errorHandler_)}))},t.prototype.updateProgress_=function(t){var e=this.transferred_;this.transferred_=t,this.transferred_!==e&&this.notifyObservers_()},t.prototype.transition_=function(t){if(this.state_!==t)switch(t){case Hy:case Wy:this.state_=t,null!==this.request_&&this.request_.cancel();break;case By:var e=this.state_===qy;this.state_=t,e&&(this.notifyObservers_(),this.start_());break;case qy:this.state_=t,this.notifyObservers_();break;case Gy:this.error_=Sy(),this.state_=t,this.notifyObservers_();break;case Yy:case zy:this.state_=t,this.notifyObservers_()}},t.prototype.completeTransitions_=function(){switch(this.state_){case Wy:this.transition_(qy);break;case Hy:this.transition_(Gy);break;case By:this.start_()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=Xy(this.state_);return new qg(this.transferred_,this.blob_.size(),t,this.metadata_,this,this.ref_)},enumerable:!0,configurable:!0}),t.prototype.on=function(t,e,n,r){function i(){if(t!==$y.STATE_CHANGED)throw"Expected one of the event types: ["+$y.STATE_CHANGED+"]."}var o="Expected a function or an Object with one of `next`, `error`, `complete` properties.",s=Qg(!0).validator,a=Zg(null,!0).validator;function u(t){try{return void s(t)}catch(t){}try{if(a(t),!(Zy(t.next)||Zy(t.error)||Zy(t.complete)))throw"";return}catch(t){throw o}}var c=[Gg(i),Zg(u,!0),Qg(!0),Qg(!0)];zg("on",c,arguments);var l=this;function h(t){return function(e,n,i){null!==t&&zg("on",t,arguments);var o=new Wg(e,n,r);return l.addObserver_(o),function(){l.removeObserver_(o)}}}function f(t){if(null===t)throw o;u(t)}var d=[Zg(f),Qg(!0),Qg(!0)],p=!(Zy(e)||Zy(n)||Zy(r));return p?h(d):h(null)(e,n,r)},t.prototype.then=function(t,e){return this.promise_.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype.addObserver_=function(t){this.observers_.push(t),this.notifyObserver_(t)},t.prototype.removeObserver_=function(t){var e=this.observers_.indexOf(t);-1!==e&&this.observers_.splice(e,1)},t.prototype.notifyObservers_=function(){var t=this;this.finishPromise_(),this.observers_.slice().forEach((function(e){t.notifyObserver_(e)}))},t.prototype.finishPromise_=function(){if(null!==this.resolve_){var t=!0;switch(Xy(this.state_)){case Ky.SUCCESS:tb(this.resolve_.bind(null,this.snapshot))();break;case Ky.CANCELED:case Ky.ERROR:tb(this.reject_.bind(null,this.error_))();break;default:t=!1}t&&(this.resolve_=null,this.reject_=null)}},t.prototype.notifyObserver_=function(t){switch(Xy(this.state_)){case Ky.RUNNING:case Ky.PAUSED:t.next&&tb(t.next.bind(t,this.snapshot))();break;case Ky.SUCCESS:t.complete&&tb(t.complete.bind(t))();break;case Ky.CANCELED:case Ky.ERROR:t.error&&tb(t.error.bind(t,this.error_))();break;default:t.error&&tb(t.error.bind(t,this.error_))()}},t.prototype.resume=function(){zg("resume",[],arguments);var t=this.state_===qy||this.state_===Wy;return t&&this.transition_(By),t},t.prototype.pause=function(){zg("pause",[],arguments);var t=this.state_===By;return t&&this.transition_(Wy),t},t.prototype.cancel=function(){zg("cancel",[],arguments);var t=this.state_===By||this.state_===Wy;return t&&this.transition_(Hy),t},t}(),nb=function(){function t(t,e){this.authWrapper=t,this.location=e instanceof fg?e:fg.makeFromUrl(e)}return t.prototype.toString=function(){return zg("toString",[],arguments),"gs://"+this.location.bucket+"/"+this.location.path},t.prototype.newRef=function(e,n){return new t(e,n)},t.prototype.mappings=function(){return wg()},t.prototype.child=function(t){zg("child",[Gg()],arguments);var e=pg(this.location.path,t),n=new fg(this.location.bucket,e);return this.newRef(this.authWrapper,n)},Object.defineProperty(t.prototype,"parent",{get:function(){var t=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this.location.path);if(null===t)return null;var e=new fg(this.location.bucket,t);return this.newRef(this.authWrapper,e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){var t=new fg(this.location.bucket,"");return this.newRef(this.authWrapper,t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this.location.bucket},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this.location.path},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return vg(this.location.path)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this.authWrapper.service()},enumerable:!0,configurable:!0}),t.prototype.put=function(t,e){return void 0===e&&(e=null),zg("put",[Yg(),Kg(!0)],arguments),this.throwIfRoot_("put"),new eb(this,this.authWrapper,this.location,this.mappings(),new hg(t),e)},t.prototype.putString=function(t,e,n){void 0===e&&(e=Cy.RAW),zg("putString",[Gg(),Gg(Uy,!0),Kg(!0)],arguments),this.throwIfRoot_("putString");var r=Ly(e,t),i=Object.assign({},n);return!Jy(i.contentType)&&Jy(r.contentType)&&(i.contentType=r.contentType),new eb(this,this.authWrapper,this.location,this.mappings(),new hg(r.data,!0),i)},t.prototype.delete=function(){var t=this;return zg("delete",[],arguments),this.throwIfRoot_("delete"),this.authWrapper.getAuthToken().then((function(e){var n=Mg(t.authWrapper,t.location);return t.authWrapper.makeRequest(n,e).getPromise()}))},t.prototype.listAll=function(){zg("listAll",[],arguments);var t={prefixes:[],items:[]};return this.listAllHelper(t).then((function(){return t}))},t.prototype.listAllHelper=function(t,e){return pi(this,void 0,void 0,(function(){var n,r,i,o;return vi(this,(function(s){switch(s.label){case 0:return n={pageToken:e},[4,this.list(n)];case 1:return r=s.sent(),(i=t.prefixes).push.apply(i,r.prefixes),(o=t.items).push.apply(o,r.items),null==r.nextPageToken?[3,3]:[4,this.listAllHelper(t,r.nextPageToken)];case 2:s.sent(),s.label=3;case 3:return[2]}}))}))},t.prototype.list=function(t){zg("list",[Xg(!0)],arguments);var e=this;return this.authWrapper.getAuthToken().then((function(n){var r=t||{},i=Pg(e.authWrapper,e.location,"/",r.pageToken,r.maxResults);return e.authWrapper.makeRequest(i,n).getPromise()}))},t.prototype.getMetadata=function(){var t=this;return zg("getMetadata",[],arguments),this.throwIfRoot_("getMetadata"),this.authWrapper.getAuthToken().then((function(e){var n=Ug(t.authWrapper,t.location,t.mappings());return t.authWrapper.makeRequest(n,e).getPromise()}))},t.prototype.updateMetadata=function(t){var e=this;return zg("updateMetadata",[Kg()],arguments),this.throwIfRoot_("updateMetadata"),this.authWrapper.getAuthToken().then((function(n){var r=jg(e.authWrapper,e.location,t,e.mappings());return e.authWrapper.makeRequest(r,n).getPromise()}))},t.prototype.getDownloadURL=function(){var t=this;return zg("getDownloadURL",[],arguments),this.throwIfRoot_("getDownloadURL"),this.authWrapper.getAuthToken().then((function(e){var n=Lg(t.authWrapper,t.location,t.mappings());return t.authWrapper.makeRequest(n,e).getPromise().then((function(t){if(null===t)throw Oy();return t}))}))},t.prototype.throwIfRoot_=function(t){if(""===this.location.path)throw function(t){return new oy(wy,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(t)},t}(),rb=function(){function t(t){this.promise_=Promise.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){},t}(),ib=function(){function t(){this.map=new Map,this.id=-9007199254740991}return t.prototype.addRequest=function(t){var e=this,n=this.id;this.id++,this.map.set(n,t),t.getPromise().then((function(){return e.map.delete(n)}),(function(){return e.map.delete(n)}))},t.prototype.clear=function(){this.map.forEach((function(t){t&&t.cancel(!0)})),this.map.clear()},t}(),ob=function(){function t(e,n,r,i,o,s){var a;if(this.bucket_=null,this.appId_=null,this.deleted_=!1,this.app_=e,null!==this.app_){var u=this.app_.options;Jy(u)&&(this.bucket_=t.extractBucket_(u),this.appId_=null!==(a=u.appId)&&void 0!==a?a:null)}this.authProvider_=n,this.storageRefMaker_=r,this.requestMaker_=i,this.pool_=s,this.service_=o,this.maxOperationRetryTime_=12e4,this.maxUploadRetryTime_=6e5,this.requestMap_=new ib}return t.extractBucket_=function(t){var e=t.storageBucket||null;return null==e?null:fg.makeFromBucketSpec(e).bucket},t.prototype.getAuthToken=function(){var t=this.authProvider_.getImmediate({optional:!0});return t?t.getToken().then((function(t){return null!==t?t.accessToken:null}),(function(){return null})):Promise.resolve(null)},t.prototype.bucket=function(){if(this.deleted_)throw Ny();return this.bucket_},t.prototype.service=function(){return this.service_},t.prototype.makeStorageReference=function(t){return this.storageRefMaker_(this,t)},t.prototype.makeRequest=function(t,e){if(this.deleted_)return new rb(Ny());var n=this.requestMaker_(t,this.appId_,e,this.pool_);return this.requestMap_.addRequest(n),n},t.prototype.deleteApp=function(){this.deleted_=!0,this.app_=null,this.requestMap_.clear()},t.prototype.maxUploadRetryTime=function(){return this.maxUploadRetryTime_},t.prototype.setMaxUploadRetryTime=function(t){this.maxUploadRetryTime_=t},t.prototype.maxOperationRetryTime=function(){return this.maxOperationRetryTime_},t.prototype.setMaxOperationRetryTime=function(t){this.maxOperationRetryTime_=t},t}();
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var sb=function(){function t(t,e,n,r,i,o,s,a,u,c,l){var h=this;this.pendingXhr_=null,this.backoffId_=null,this.resolve_=null,this.reject_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=s,this.errorCallback_=a,this.progressCallback_=c,this.timeout_=u,this.pool_=l,this.promise_=new Promise((function(t,e){h.resolve_=t,h.reject_=e,h.start_()}))}return t.prototype.start_=function(){var t=this;function e(e,n){var r,i=t.resolve_,o=t.reject_,s=n.xhr;if(n.wasSuccessCode)try{var a=t.callback_(s,s.getResponseText());Zy(a)?i(a):i()}catch(t){o(t)}else null!==s?((r=ky()).setServerResponseProp(s.getResponseText()),t.errorCallback_?o(t.errorCallback_(s,r)):o(r)):n.canceled?o(r=t.appDelete_?Ny():Sy()):o(r=new oy(hy,"Max retry time for operation exceeded, please try again."))}this.canceled_?e(0,new ab(!1,null,!0)):this.backoffId_=
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function(t,e,n){var r=1,i=null,o=!1,s=0;function a(){return 2===s}var u=!1;function c(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];u||(u=!0,e.apply(null,t))}function l(e){i=setTimeout((function(){i=null,t(h,a())}),e)}function h(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!u)if(t)c.call.apply(c,gi([null,t],e));else{var i,h=a()||o;if(h)c.call.apply(c,gi([null,t],e));else r<64&&(r*=2),1===s?(s=2,i=0):i=1e3*(r+Math.random()),l(i)}}var f=!1;function d(t){f||(f=!0,u||(null!==i?(t||(s=2),clearTimeout(i),l(0)):t||(s=1)))}return l(0),setTimeout((function(){o=!0,d(!0)}),n),d}((function(e,n){if(n)e(!1,new ab(!1,null,!0));else{var r=t.pool_.createXhrIo();t.pendingXhr_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then((function(n){null!==t.progressCallback_&&n.removeUploadProgressListener(i),t.pendingXhr_=null;var r=(n=n).getErrorCode()===Fy.NO_ERROR,o=n.getStatus();if(r&&!t.isRetryStatusCode_(o)){var s=-1!==t.successCodes_.indexOf(o);e(!0,new ab(s,n))}else{var a=n.getErrorCode()===Fy.ABORT;e(!1,new ab(!1,null,a))}}))}function i(e){var n=e.loaded,r=e.lengthComputable?e.total:-1;null!==t.progressCallback_&&t.progressCallback_(n,r)}}),e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&function(t){t(!1)}(this.backoffId_),null!==this.pendingXhr_&&this.pendingXhr_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},t}(),ab=function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n};function ub(t,e,n,r){var i=yg(t.urlParams),o=t.url+i,s=Object.assign({},t.headers);return function(t,e){e&&(t["X-Firebase-GMPID"]=e)}(s,e),function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(s,n),function(t){var e=void 0!==ud?ud.SDK_VERSION:"AppManager";t["X-Firebase-Storage-Version"]="webjs/"+e}(s),new sb(o,t.method,s,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var cb=function(){function t(t,e,n,r){if(this.bucket_=null,this.authWrapper_=new ob(t,e,(function(t,e){return new nb(t,e)}),ub,this,n),this.app_=t,null!=r)this.bucket_=fg.makeFromBucketSpec(r);else{var i=this.authWrapper_.bucket();null!=i&&(this.bucket_=new fg(i,""))}this.internals_=new lb(this)}return t.prototype.ref=function(t){function e(t){if("string"!=typeof t)throw"Path is not a string.";if(/^[A-Za-z]+:\/\//.test(t))throw"Expected child path but got a URL, use refFromURL instead."}if(zg("ref",[Gg(e,!0)],arguments),null==this.bucket_)throw new Error("No Storage Bucket defined in Firebase Options.");var n=new nb(this.authWrapper_,this.bucket_);return null!=t?n.child(t):n},t.prototype.refFromURL=function(t){function e(t){if("string"!=typeof t)throw"Path is not a string.";if(!/^[A-Za-z]+:\/\//.test(t))throw"Expected full URL but got a child path, use ref instead.";try{fg.makeFromUrl(t)}catch(t){throw"Expected valid full URL but got an invalid one."}}return zg("refFromURL",[Gg(e,!1)],arguments),new nb(this.authWrapper_,t)},Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this.authWrapper_.maxUploadRetryTime()},enumerable:!0,configurable:!0}),t.prototype.setMaxUploadRetryTime=function(t){zg("setMaxUploadRetryTime",[Jg()],arguments),this.authWrapper_.setMaxUploadRetryTime(t)},t.prototype.setMaxOperationRetryTime=function(t){zg("setMaxOperationRetryTime",[Jg()],arguments),this.authWrapper_.setMaxOperationRetryTime(t)},Object.defineProperty(t.prototype,"app",{get:function(){return this.app_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"INTERNAL",{get:function(){return this.internals_},enumerable:!0,configurable:!0}),t}(),lb=function(){function t(t){this.service_=t}return t.prototype.delete=function(){return this.service_.authWrapper_.deleteApp(),Promise.resolve()},t}();function hb(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return new cb(n,r,new ug,e)}!function(t){var e={TaskState:Ky,TaskEvent:$y,StringFormat:Cy,Storage:cb,Reference:nb};t.INTERNAL.registerComponent(new Jf("storage",hb,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion("@firebase/storage","0.3.36")}(ud);var fb=hd.initializeApp({apiKey:"AIzaSyBIvPqmwwT3UA4nkocy9NF9HsoOINT49bo",authDomain:"mcbcloud33.firebaseapp.com",databaseURL:"https://mcbcloud33.firebaseio.com",projectId:"mcbcloud33",storageBucket:"mcbcloud33.appspot.com",messagingSenderId:"1002033675315",appId:"1:1002033675315:web:55b4e8492878267e"});fb.firestore();const db=fb.storage(),pb=(fb.auth(),t=>{let e="";nn.subscribe(t=>e=t);let n="";rn.subscribe(t=>n=t);let r="";on.subscribe(t=>r=t);const i=cl.session({database:e});return i.run(`   USE ${e}.${n}\n                    \n            CALL \n            apoc.mongodb.find('mongodb://mcbenner:mcbenner15@104.198.131.90:27017', 'realFlow', 'details', {uuid:$uuid},{_id:0},{},  false, 0,0,false, true) yield value\n            return value\n            `,{userID:r,clientDB:n,fabricDB:e,uuid:t}).then(t=>(i.close(),t.records[0]?t.records[0].toObject().value:null)).catch(t=>(i.close(),console.log(t),t))});function vb(e){return{c:t,m:t,p:t,i:t,o:t,d:t}}function mb(t){let e,n,r,s,a,u,c,l,h,f,d,p,v,m,y,g,b=1==!!t[3]?"Atualizar":"Salvar";const _=[gb,yb],T=[];function O(t,e){return t[4]?0:1}function C(...e){return t[13](t[21],...e)}return r=O(t),s=T[r]=_[r](t),{c(){e=k("form"),n=k("div"),s.c(),a=x(),u=k("hr"),c=x(),l=k("div"),h=k("button"),f=S(b),d=x(),p=k("button"),p.textContent="Cancelar",D(n,"class","fields svelte-1vfwpbj"),D(u,"class","svelte-1vfwpbj"),D(h,"class","btn btn-primary svelte-1vfwpbj"),D(h,"type","submit"),D(p,"class","svelte-1vfwpbj"),D(e,"class","svelte-1vfwpbj")},m(i,s){E(i,e,s),w(e,n),T[r].m(n,null),w(e,a),w(e,u),w(e,c),w(e,l),w(l,h),w(h,f),w(l,d),w(l,p),m=!0,y||(g=[A(h,"click",C),A(p,"click",(function(){o(t[1])&&t[1].apply(this,arguments)})),A(e,"submit",N(wb))],y=!0)},p(e,i){let o=r;r=O(t=e),r===o?T[r].p(t,i):(ut(),ht(T[o],1,1,()=>{T[o]=null}),ct(),s=T[r],s||(s=T[r]=_[r](t),s.c()),lt(s,1),s.m(n,null)),(!m||8&i)&&b!==(b=1==!!t[3]?"Atualizar":"Salvar")&&R(f,b)},i(t){m||(lt(s),v||Z(()=>{v=dt(e,Ze,{y:-20,duration:300,delay:0}),v.start()}),m=!0)},o(t){ht(s),m=!1},d(t){t&&I(e),T[r].d(),y=!1,i(g)}}}function yb(t){let e,n;return e=new Gf({props:{fields:t[21].fields,uuid:t[0],accounts:t[6],listOfPersonas:t[5],groups:t[7]}}),{c(){_t(e.$$.fragment)},m(t,r){wt(e,t,r),n=!0},p(t,n){const r={};4&n&&(r.fields=t[21].fields),1&n&&(r.uuid=t[0]),64&n&&(r.accounts=t[6]),32&n&&(r.listOfPersonas=t[5]),128&n&&(r.groups=t[7]),e.$set(r)},i(t){n||(lt(e.$$.fragment,t),n=!0)},o(t){ht(e.$$.fragment,t),n=!1},d(t){Et(e,t)}}}function gb(t){let e,n;return e=new Gf({props:{fields:t[4],uuid:t[0],accounts:t[6],groups:t[7],listOfPersonas:t[5]}}),{c(){_t(e.$$.fragment)},m(t,r){wt(e,t,r),n=!0},p(t,n){const r={};16&n&&(r.fields=t[4]),1&n&&(r.uuid=t[0]),64&n&&(r.accounts=t[6]),128&n&&(r.groups=t[7]),32&n&&(r.listOfPersonas=t[5]),e.$set(r)},i(t){n||(lt(e.$$.fragment,t),n=!0)},o(t){ht(e.$$.fragment,t),n=!1},d(t){Et(e,t)}}}function bb(e){let n;return{c(){n=S("Carregando Formulario")},m(t,e){E(t,n,e)},p:t,i:t,o:t,d(t){t&&I(n)}}}function _b(t){let e,n,r,i={ctx:t,current:null,token:null,pending:bb,then:mb,catch:vb,value:21,blocks:[,,,]};return mt(n=Rl(t[2]),i),{c(){e=k("div"),i.block.c(),D(e,"class","wrapper svelte-1vfwpbj")},m(t,n){E(t,e,n),i.block.m(e,i.anchor=null),i.mount=()=>e,i.anchor=null,r=!0},p(e,[r]){if(t=e,i.ctx=t,4&r&&n!==(n=Rl(t[2]))&&mt(n,i));else{const e=t.slice();e[21]=i.resolved,i.block.p(e,r)}},i(t){r||(lt(i.block),r=!0)},o(t){for(let t=0;t<3;t+=1){ht(i.blocks[t])}r=!1},d(t){t&&I(e),i.block.d(),i.token=null,i=null}}}const wb=()=>{};function Eb(t,e,n){let{onSubmit:r}=e,{parentUUID:i}=e,{uuid:o}=e,{cancelFn:s}=e,{type:a}=e,{onUpdate:c}=e,l=db.ref(),h={},f=null,d=null,p=[],v=[],m=[];const y=async t=>{n(3,f=await pb(t)),f&&(n(4,d=f.contents),n(4,d=await Promise.all(d.map(async t=>{if("file"===t.type&&t.value.length>0){let e=await Promise.all(t.value.map(async t=>{const e=await(async t=>await fetch(t,{mode:"cors"}).then(t=>t.blob()))(t.url);console.log(t);const n=new File([e],t.filename);return n.url=t.url,n}));return{...t,value:[...e]}}return t}))))};q(()=>{o&&y(o),yl().then(t=>n(7,m=[...t].filter(t=>!!t.value))).catch(t=>console.log(t)),(()=>{let t="";nn.subscribe(e=>t=e);let e="";rn.subscribe(t=>e=t);let n="";on.subscribe(t=>n=t);const r=cl.session({database:t});return r.run(`USE ${t}.${e}\n      match (n:Account)\n      Return collect({title:n.rubrica,value:n.uuid}) as accounts `,{userID:n,clientDB:e,fabricDB:t}).then(t=>(r.close(),t.records[0].toObject().accounts)).catch(t=>(r.close(),console.log(t),t))})().then(t=>n(6,v=[...t].filter(t=>!!t.value))).catch(t=>console.log(t)),(()=>{let t="";nn.subscribe(e=>t=e);let e="";rn.subscribe(t=>e=t);let n="";on.subscribe(t=>n=t);const r=cl.session({database:t});return r.run(`USE ${t}.${e}\n      MATCH (n:Persona)\n      CALL \n      apoc.mongodb.find('mongodb://mcbenner:mcbenner15@104.198.131.90:27017', \n      'realFlow', 'details', {uuid:n.uuid},{_id:0, uuid:0},{},  \n      false, 0,0,false, true) yield value as detail\n      return collect(apoc.map.mergeList([properties(n), {contents: detail.contents}])) as data`,{userID:n,clientDB:e,fabricDB:t}).then(t=>(r.close(),t.records[0].toObject().data)).catch(t=>(r.close(),console.log(t),t))})().then(t=>n(5,p=[...t])).catch(t=>console.log(t))});const g=async t=>{const e="/teste-neo4j-mongo/sistema-contabil/"+t.name;await l.child(e).put(t,{});return await l.child(e).getDownloadURL()},b=async t=>{const e=u(Fl);e&&e[o]&&e[o].isValidForm&&(h=e[o].values);let s=await(async t=>{let e=t.fields.map(async t=>{if("file"===t.type&&t.value.length>0){let e=t.value.map(async t=>({filename:t.name,url:t.url?t.url:await g(t)}));return e=await Promise.all(e),{...t,value:[...e]}}return{...t}});return e=await Promise.all(e),e})(t);r({fields:s,values:h,type:t.type,parentUUID:i}).then(async()=>{n(3,f=await pb(o))}).catch(t=>console.log("error onSubmit"))},_=async(t,e,n)=>{console.log(t,e,n),((t,e,n)=>{let r="";nn.subscribe(t=>r=t);let i="";rn.subscribe(t=>i=t);let o="";on.subscribe(t=>o=t);const s=cl.session({database:r});return s.run(`   USE ${r}.${i}\n            WITH {\n                node:'Natural',\n                title: $values.title,\n                contents: $fields\n            }\n            as o\n            MATCH (n {uuid:$oldUUID})\n            SET n.title = o.title\n            WITH n, o\n            CALL \n            apoc.mongodb.delete('mongodb://mcbenner:mcbenner15@104.198.131.90:27017', 'realFlow', 'details',{uuid: n.uuid}) yield value\n            WITH n, o\n            CALL \n            apoc.mongodb.insert('mongodb://mcbenner:mcbenner15@104.198.131.90:27017', 'realFlow', 'details', [{uuid:n.uuid, title:o.title, contents:o.contents}]) \n            return n\n            `,{userID:o,clientDB:i,fabricDB:r,fields:t,values:e,oldUUID:n}).then(t=>(en.set(Math.random()),s.close(),t.records.entries)).catch(t=>(s.close(),console.log(t),t))})(t,e,o).then(()=>console.log("updated")).catch(t=>console.log("erro ao update",t))},w=async()=>{const t=u(Fl);t&&t[o]&&t[o].isValidForm&&(h=t[o].values);let e=d.map(async t=>{if("file"===t.type&&t.value.length>0){let e=t.value.map(async t=>({filename:t.name,url:await g(t)}));return e=await Promise.all(e),{...t,value:[...e]}}return{...t}});e=await Promise.all(e),console.log(e),console.log(h),c?c({fields:e,values:h,uuid:o,parentUUID:i,type:a}):_(e,h,o)};return t.$set=t=>{"onSubmit"in t&&n(10,r=t.onSubmit),"parentUUID"in t&&n(11,i=t.parentUUID),"uuid"in t&&n(0,o=t.uuid),"cancelFn"in t&&n(1,s=t.cancelFn),"type"in t&&n(2,a=t.type),"onUpdate"in t&&n(12,c=t.onUpdate)},t.$$.update=()=>{8&t.$$.dirty&&console.log("[retrieved]",f),128&t.$$.dirty&&console.log("[groups]",m)},[o,s,a,f,d,p,v,m,b,w,r,i,c,t=>{f?w():b(t)}]}class Ib extends kt{constructor(t){super(),Tt(this,t,Eb,_b,s,{onSubmit:10,parentUUID:11,uuid:0,cancelFn:1,type:2,onUpdate:12})}}const Tb=function(){const{subscribe:t,set:e,update:n}=Ot({forms:[]});return{subscribe:t,setForms:t=>n(e=>({...e,forms:[...t]})),addForm:({type:t,frontendUUID:e,title:r,onSubmit:i,onUpdate:o,onDelete:s,parentUUID:a,rootUUID:u})=>n(n=>({...n,forms:[...n.forms,{type:t,frontendUUID:e,title:r,onSubmit:i,onUpdate:o,onDelete:s,parentUUID:a,rootUUID:u}]})),removeForm:t=>n(e=>({forms:[...e.forms.filter(e=>e.frontendUUID!==t)]})),reset:()=>e({forms:[]})}}();function kb(t,e,n){const r=t.slice();return r[6]=e[n],r}function Sb(t,e){let n,r,i,o,s,a,u,c,l=e[6].text+"";function h(...t){return e[5](e[6],...t)}return{key:t,first:null,c(){n=k("div"),r=k("div"),i=S(l),o=x(),s=k("hr"),a=x(),D(s,"class","svelte-rb51us"),D(n,"class","menu__item svelte-rb51us"),this.first=n},m(t,e){E(t,n,e),w(n,r),w(r,i),w(n,o),w(n,s),w(n,a),u||(c=A(r,"click",h),u=!0)},p(t,n){e=t,1&n&&l!==(l=e[6].text+"")&&R(i,l)},d(t){t&&I(n),u=!1,c()}}}function xb(t){let e,n,r,i,o,s=[],a=new Map,u=t[0];const c=t=>t[6].id;for(let e=0;e<u.length;e+=1){let n=kb(t,u,e),r=c(n);a.set(r,s[e]=Sb(r,n))}return{c(){e=k("div"),n=k("div");for(let t=0;t<s.length;t+=1)s[t].c();D(n,"class","grid svelte-rb51us"),D(e,"class","main svelte-rb51us")},m(t,r){E(t,e,r),w(e,n);for(let t=0;t<s.length;t+=1)s[t].m(n,null);o=!0},p(t,[e]){if(3&e){const r=t[0];s=bt(s,e,c,1,t,r,a,n,yt,Sb,null,kb)}},i(t){o||(Z(()=>{i&&i.end(1),r||(r=dt(e,Ze,{y:20,opacity:.2,duration:300})),r.start()}),o=!0)},o(t){r&&r.invalidate(),i=pt(e,Ze,{y:-20,opacity:.2,duration:300}),o=!1},d(t){t&&I(e);for(let t=0;t<s.length;t+=1)s[t].d();t&&i&&i.end()}}}function Ob(t,e,n){let{hideActions:r}=e,{actions:i}=e,{parentUUID:o}=e,{rootUUID:s}=e;Tb.subscribe(t=>console.log("[intentStore]",t));const a=t=>{Tb.addForm({type:t.intent,title:t.title,onSubmit:t.onSubmit,onDelete:t.onDelete,onUpdate:t.onUpdate,parentUUID:o,frontendUUID:fn(),rootUUID:s}),r()};return t.$set=t=>{"hideActions"in t&&n(2,r=t.hideActions),"actions"in t&&n(0,i=t.actions),"parentUUID"in t&&n(3,o=t.parentUUID),"rootUUID"in t&&n(4,s=t.rootUUID)},[i,a,r,o,s,t=>a({...t})]}class Ab extends kt{constructor(t){super(),Tt(this,t,Ob,xb,s,{hideActions:2,actions:0,parentUUID:3,rootUUID:4})}}function Nb(t,e,n){const r=t.slice();return r[4]=e[n],r}function Db(e,n){let r,i,o,s,a,u,c,l,h=n[4].text+"";return{key:e,first:null,c(){r=k("div"),i=k("div"),o=S(h),s=x(),a=k("hr"),u=x(),D(a,"class","svelte-18lmtc2"),D(r,"class","menu__item svelte-18lmtc2"),this.first=r},m(t,e){E(t,r,e),w(r,i),w(i,o),w(r,s),w(r,a),w(r,u),c||(l=A(r,"click",n[3]),c=!0)},p:t,d(t){t&&I(r),c=!1,l()}}}function Rb(t){let e,n,r,i,o,s=[],a=new Map,u=t[2];const c=t=>t[4].text;for(let e=0;e<u.length;e+=1){let n=Nb(t,u,e),r=c(n);a.set(r,s[e]=Db(r,n))}return{c(){e=k("div"),n=k("div");for(let t=0;t<s.length;t+=1)s[t].c();D(n,"class","grid svelte-18lmtc2"),D(e,"class","main svelte-18lmtc2")},m(t,r){E(t,e,r),w(e,n);for(let t=0;t<s.length;t+=1)s[t].m(n,null);o=!0},p(t,[e]){if(7&e){const r=t[2];s=bt(s,e,c,1,t,r,a,n,yt,Db,null,Nb)}},i(t){o||(Z(()=>{i&&i.end(1),r||(r=dt(e,Ze,{y:-20,opacity:.2,duration:300})),r.start()}),o=!0)},o(t){r&&r.invalidate(),i=pt(e,Ze,{y:20,opacity:.2,duration:300}),o=!1},d(t){t&&I(e);for(let t=0;t<s.length;t+=1)s[t].d();t&&i&&i.end()}}}function Cb(t,e,n){let{uuid:r}=e,{onDelete:i}=e;return t.$set=t=>{"uuid"in t&&n(0,r=t.uuid),"onDelete"in t&&n(1,i=t.onDelete)},[r,i,[{text:"Deletar"}],()=>i(r)]}class Ub extends kt{constructor(t){super(),Tt(this,t,Cb,Rb,s,{uuid:0,onDelete:1})}}const Pb=({selfUUID:t,rootUUID:e,otherUUID:n,relationship:r,parentUUID:i,values:o,type:s,title:a,fields:u})=>{const c=o.amount,l=o.unit,h=o["Data de competência"],f=o["Data de vencimento"];console.log(c,l,h,f);let d="",p=cl.session({database:d});nn.subscribe(t=>{d=t,p=cl.session({database:d})});let v="";rn.subscribe(t=>v=t);let m="";return on.subscribe(t=>m=t),p.run(`USE ${d}.${v}\n      WITH {\n        node: 'Value',\n        amount: apoc.number.parseFloat($amount),\n        unit:  $unit,\n        \`Data de competência\`: $dataCompetencia,\n        \`Data de vencimento\`: $dataVencimento,\n        contents:$fields\n    } AS o\n    CREATE (v {created_at: TIMESTAMP(), uuid:$selfUUID, amount:o.amount, unit:o.unit,\`Data de competência\`:o.\`Data de competência\`,\`Data de vencimento\`: o.\`Data de vencimento\`})\n    WITH v, o\n    CALL apoc.create.addLabels( [v], [o.node]) yield node\n    WITH v, o\n    CALL \n    apoc.mongodb.insert('mongodb://mcbenner:mcbenner15@104.198.131.90:27017', 'realFlow', 'details', [{rootUUID:$rootUUID,title:$title,parentUUID:$parentUUID,uuid:v.uuid, type:$type, amount:o.amount, unit:o.unit,\`Data de competência\`:v.\`Data de competência\`,\`Data de vencimento\`: v.\`Data de vencimento\`, contents:o.contents}])\n    WITH {\n        otherNode:$otherUUID,\n        relationship: $relationship, \n        selfNode:$selfUUID,\n        details: {since:timestamp(), uuid:$selfUUID}\n        } AS a,v\n        MATCH (self {uuid:a.selfNode}), (other {uuid:a.otherNode})\n        CALL apoc.create.relationship(other,toUpper(a.relationship),a.details,self) yield rel\n        RETURN rel\n \n        `,{clientDB:v,fabricDB:d,selfUUID:t,otherUUID:n,relationship:r,unit:l,amount:c,dataCompetencia:h,dataVencimento:f,parentUUID:i,rootUUID:e,fields:u,title:a,type:s}).then(t=>(p.close(),console.log(t.records[0].toObject().rel),t.records[0].toObject().value)).catch(t=>(p.close(),console.log(t),t))},Lb=({selfUUID:t,parentUUID:e,values:n,title:r,rootUUID:i,type:o,fields:s})=>{const a=n.amount,u=n.unit,c=n["Data de competência"],l=n["Data de vencimento"];console.log(a,u,c,l);let h="",f=cl.session({database:h});nn.subscribe(t=>{h=t,f=cl.session({database:h})});let d="";rn.subscribe(t=>d=t);let p="";return on.subscribe(t=>p=t),f.run(`USE ${h}.${d}\n      WITH {\n        node: 'Value',\n        amount: apoc.number.parseFloat($amount),\n        unit:  $unit,\n        \`Data de competência\`: $dataCompetencia,\n        \`Data de vencimento\`: $dataVencimento,\n        contents:$fields\n    } AS o\n    MATCH (v {uuid:$selfUUID})\n    SET v = {uuid:$selfUUID,amount:o.amount, unit:o.unit,\`Data de competência\`:o.\`Data de competência\`,\`Data de vencimento\`: o.\`Data de vencimento\`}\n    WITH v,o\n    CALL apoc.mongodb.delete('mongodb://mcbenner:mcbenner15@104.198.131.90:27017', 'realFlow', 'details',{uuid: $selfUUID}) YIELD value\n    WITH v,o\n    CALL apoc.mongodb.insert('mongodb://mcbenner:mcbenner15@104.198.131.90:27017', 'realFlow', 'details', [{rootUUID:$rootUUID,title:$title,type:$type,parentUUID:$parentUUID,uuid:$selfUUID,  amount:o.amount, unit:o.unit,\`Data de competência\`:v.\`Data de competência\`,\`Data de vencimento\`: v.\`Data de vencimento\`, contents:$fields}])\n    RETURN v\n    `,{clientDB:d,fabricDB:h,selfUUID:t,unit:u,amount:a,dataCompetencia:c,dataVencimento:l,parentUUID:e,fields:s,rootUUID:i,title:r,type:o}).then(t=>(f.close(),console.log(t.records[0].toObject()),"ok")).catch(t=>(f.close(),console.log(t),t))},jb=t=>{let e="",n=cl.session({database:e});nn.subscribe(t=>{e=t,n=cl.session({database:e})});let r="";rn.subscribe(t=>r=t);let i="";return on.subscribe(t=>i=t),n.run(`USE ${e}.${r}\n       CALL apoc.mongodb.find('mongodb://mcbenner:mcbenner15@104.198.131.90:27017', 'realFlow', 'details', {uuid:$uuid},{_id:0},{},  false, 0,0,false, true) yield value\n       WITH value as form\n       WITH apoc.map.setKey(form,'until',timestamp()) as form\n       WITH apoc.map.setKey(form,'deleted',true) as form, timestamp() as time\n       MATCH (n)-[r{uuid:form.uuid}]-(a{uuid:form.uuid}) \n       SET r.until = time\n       SET a.until = time\n       WITH form\n       CALL apoc.mongodb.delete('mongodb://mcbenner:mcbenner15@104.198.131.90:27017', 'realFlow', 'details',{uuid: $uuid}) YIELD value\n       WITH form\n       CALL apoc.mongodb.insert('mongodb://mcbenner:mcbenner15@104.198.131.90:27017', 'realFlow', 'details', [form])\n       RETURN 'ok' as response\n    \n        `,{clientDB:r,fabricDB:e,uuid:t}).then(t=>(n.close(),console.log(t.records[0].toObject().rel),t.records[0].toObject().value)).catch(t=>(n.close(),console.log(t),t))},Mb=[{id:0,text:"Contabilizar Tendência",intent:"JournalWithoutAmount",relationship:"TENDS_TO",title:"Tendência Contábil",onUpdate:function(t){const e=t.frontendUUID,n=(t.parentUUID,this.parentUUID),r=this.rootUUID,i=t.fields,o=(t.values,t.type),s=this.title;let a=i.find(t=>"journalwithoutamount"===t.name).value;return(({title:t,tendencias:e,uuid:n,rootUUID:r,fields:i,parentUUID:o,type:s})=>{let a="",u=cl.session({database:a});nn.subscribe(t=>{a=t,u=cl.session({database:a})});let c="";rn.subscribe(t=>c=t);let l="";return on.subscribe(t=>l=t),u.run(`USE ${a}.${c}\n      MATCH (v{uuid:$parentUUID})-[r{uuid:$uuid}]-(a)\n      DELETE r\n      WITH v, collect(r) as rels\n       UNWIND $tendencias as tendencia\n       MATCH (n{uuid:$parentUUID}), (a{uuid:tendencia.account}) \n       CREATE (n)-[rel:TENDS_TO]->(a)\n       SET rel = { nature:tendencia.nature, uuid:$uuid,since:timestamp()}\n       WITH collect(rel) as relationships\n       CALL apoc.mongodb.delete('mongodb://mcbenner:mcbenner15@104.198.131.90:27017', 'realFlow', 'details',{uuid: $uuid}) YIELD value\n       WITH 'preciso fazer esse with por que o cypher exige' as flag\n       CALL apoc.mongodb.insert('mongodb://mcbenner:mcbenner15@104.198.131.90:27017', 'realFlow', 'details', [{uuid:$uuid, rootUUID:$rootUUID, parentUUID:$parentUUID,title:$title,type:$type, contents:$fields}])\n       RETURN 'ok' as response\n            `,{userID:l,tendencias:e,parentUUID:o,rootUUID:r,title:t,type:s,fields:i,clientDB:c,fabricDB:a,uuid:n}).then(t=>(u.close(),console.log(t.records[0].toObject()),t.records[0].toObject())).catch(t=>(u.close(),console.log(t),t))})({uuid:e,parentUUID:n,fields:i,type:o,rootUUID:r,title:s,tendencias:a})},onDelete:t=>(t=>{let e="",n=cl.session({database:e});nn.subscribe(t=>{e=t,n=cl.session({database:e})});let r="";rn.subscribe(t=>r=t);let i="";return on.subscribe(t=>i=t),n.run(`USE ${e}.${r}\n       CALL apoc.mongodb.find('mongodb://mcbenner:mcbenner15@104.198.131.90:27017', 'realFlow', 'details', {uuid:$uuid},{_id:0},{},  false, 0,0,false, true) yield value\n\n       WITH value as form, value.contents[0].value as tendencias\n       WITH apoc.map.setKey(form,'until',timestamp()) as form, tendencias\n       WITH apoc.map.setKey(form,'deleted',true) as form, tendencias  \n       MATCH (n)-[r{uuid:$uuid}]-(a) \n       SET r.until=timestamp()\n       WITH form\n       CALL apoc.mongodb.delete('mongodb://mcbenner:mcbenner15@104.198.131.90:27017', 'realFlow', 'details',{uuid: $uuid}) YIELD value\n       WITH form\n       CALL apoc.mongodb.insert('mongodb://mcbenner:mcbenner15@104.198.131.90:27017', 'realFlow', 'details', [form])\n       RETURN 'ok' as response\n            `,{userID:i,clientDB:r,fabricDB:e,uuid:t}).then(t=>(n.close(),console.log(t.records[0].toObject()),t.records[0].toObject())).catch(t=>(n.close(),console.log(t),t))})(t),onSubmit:function({fields:t,values:e,type:n,parentUUID:r,frontendUUID:i}){const o=this.rootUUID;return console.log(this,this.rootUUID),(({title:t,tendencias:e,frontendUUID:n,rootUUID:r,fields:i,parentUUID:o,type:s})=>{let a="",u=cl.session({database:a});nn.subscribe(t=>{a=t,u=cl.session({database:a})});let c="";rn.subscribe(t=>c=t);let l="";return on.subscribe(t=>l=t),u.run(`  USE ${a}.${c}\n       CALL apoc.mongodb.insert('mongodb://mcbenner:mcbenner15@104.198.131.90:27017', 'realFlow', 'details', [{uuid:$uuid, rootUUID:$rootUUID, parentUUID:$parentUUID,title:$title,type:$type, contents:$fields}])\n       UNWIND $tendencias as tendencia\n       MATCH (n{uuid:$parentUUID}), (a{uuid:tendencia.account}) \n       CREATE (n)-[rel:TENDS_TO]->(a)\n       SET rel = { nature:tendencia.nature, uuid:$uuid,since:timestamp()}\n       RETURN collect(rel) as value\n       \n            `,{userID:l,clientDB:c,fabricDB:a,fields:i,title:t,tendencias:e,uuid:n,parentUUID:o,rootUUID:r,type:s}).then(t=>(u.close(),console.log(t.records[0].toObject().value),t.records[0].toObject().value)).catch(t=>(u.close(),console.log(t),t))})({title:"Tendência Contábil",parentUUID:r,rootUUID:o,tendencias:t.find(t=>"journalwithoutamount"===t.name).value,type:n,frontendUUID:i,fields:t})}},{id:1,text:"Atribuir Tags",intent:"Tags",relationship:"JOURNAL",title:"Atribuir Tags",onDelete:function(t){return(t=>{let e="",n=cl.session({database:e});nn.subscribe(t=>{e=t,n=cl.session({database:e})});let r="";rn.subscribe(t=>r=t);let i="";return on.subscribe(t=>i=t),n.run(`USE ${e}.${r}\n       CALL apoc.mongodb.find('mongodb://mcbenner:mcbenner15@104.198.131.90:27017', 'realFlow', 'details', {uuid:$uuid},{_id:0},{},  false, 0,0,false, true) yield value\n       WITH value as form\n       WITH apoc.map.setKey(form,'until',timestamp()) as form\n       WITH apoc.map.setKey(form,'deleted',true) as form\n       MATCH (n)-[r{uuid:form.uuid}]-(a) \n       SET r.until=timestamp()\n       WITH form\n       CALL apoc.mongodb.delete('mongodb://mcbenner:mcbenner15@104.198.131.90:27017', 'realFlow', 'details',{uuid: $uuid}) YIELD value\n       WITH form\n       CALL apoc.mongodb.insert('mongodb://mcbenner:mcbenner15@104.198.131.90:27017', 'realFlow', 'details', [form])\n       RETURN 'ok' as response\n            `,{userID:i,clientDB:r,fabricDB:e,uuid:t}).then(t=>(n.close(),console.log(t.records[0].toObject()),t.records[0].toObject())).catch(t=>(n.close(),console.log(t),t))})(t)},onUpdate:function(t){const e=t.frontendUUID,n=t.parentUUID,r=this.parentUUID,i=this.rootUUID,o=t.fields;t.values;return(({selfUUID:t,relationship:e,parentUUID:n,rootUUID:r,type:i,title:o,tags:s,fields:a})=>{let u="",c=cl.session({database:u});nn.subscribe(t=>{u=t,c=cl.session({database:u})});let l="";rn.subscribe(t=>l=t);let h="";return on.subscribe(t=>h=t),c.run(`USE ${u}.${l}\n    MATCH (v{uuid:$parentUUID})-[r{uuid:$selfUUID}]-(a)\n    DELETE r\n    WITH v, collect(r) as rels\n    CALL apoc.mongodb.delete('mongodb://mcbenner:mcbenner15@104.198.131.90:27017', 'realFlow', 'details',{uuid: $selfUUID}) YIELD value\n    WITH v\n    CALL apoc.mongodb.insert('mongodb://mcbenner:mcbenner15@104.198.131.90:27017', 'realFlow', 'details', [{uuid:$selfUUID,type:$type,rootUUID:$rootUUID,parentUUID:$parentUUID,title:$title,contents:$fields}]) \n    UNWIND $tags as tag\n    MATCH (t:Tag {tagName:tag.tagUUID})\n    CALL apoc.create.relationship(v,toUpper($relationship),{portion:apoc.number.parseFloat(tag.amount), unit:'absolute', since:timestamp(), uuid:$selfUUID},t) yield rel\n    RETURN rel \n    \n    \n        `,{clientDB:l,rootUUID:r,fabricDB:u,selfUUID:t,parentUUID:n,tags:s,type:i,relationship:e,title:o,fields:a}).then(t=>(c.close(),console.log("ok"),"ok")).catch(t=>(c.close(),console.log(t),t))})({rootUUID:i,selfUUID:e,otherUUID:n,parentUUID:r,fields:o,title:this.title,relationship:"TAGS",type:t.type,tags:t.values?t.values.tags:[]})},onSubmit:function(t){const e=t.frontendUUID,n=t.parentUUID,r=this.parentUUID,i=this.rootUUID,o=t.fields;t.values;return(({selfUUID:t,relationship:e,parentUUID:n,rootUUID:r,type:i,title:o,tags:s,fields:a})=>{let u="",c=cl.session({database:u});nn.subscribe(t=>{u=t,c=cl.session({database:u})});let l="";rn.subscribe(t=>l=t);let h="";return on.subscribe(t=>h=t),c.run(`USE ${u}.${l}\n    MATCH (value {uuid:$parentUUID})\n    CALL apoc.mongodb.insert('mongodb://mcbenner:mcbenner15@104.198.131.90:27017', 'realFlow', 'details', [{uuid:$selfUUID,type:$type,rootUUID:$rootUUID,parentUUID:$parentUUID,title:$title,contents:$fields}]) \n    UNWIND $tags as tag\n    MATCH (t:Tag {tagName:tag.tagUUID})\n    CALL apoc.create.relationship(value,toUpper($relationship),{portion:apoc.number.parseFloat(tag.amount), unit:'absolute', since:timestamp(), uuid:$selfUUID},t) yield rel\n    RETURN rel \n    \n    \n        `,{clientDB:l,rootUUID:r,fabricDB:u,selfUUID:t,parentUUID:n,tags:s,type:i,relationship:e,title:o,fields:a}).then(t=>(c.close(),console.log("ok"),"ok")).catch(t=>(c.close(),console.log(t),t))})({rootUUID:i,selfUUID:e,otherUUID:n,parentUUID:r,fields:o,title:this.title,relationship:"TAGS",type:t.type,tags:t.values?t.values.tags:[]})}},{id:2,text:"Atribuir Persona",intent:"Persona",relationship:"VALUE",title:"Atribuir Persona",onDelete:function(t){return(t=>{let e="",n=cl.session({database:e});nn.subscribe(t=>{e=t,n=cl.session({database:e})});let r="";rn.subscribe(t=>r=t);let i="";return on.subscribe(t=>i=t),n.run(`USE ${e}.${r}\n       CALL apoc.mongodb.find('mongodb://mcbenner:mcbenner15@104.198.131.90:27017', 'realFlow', 'details', {uuid:$uuid},{_id:0},{},  false, 0,0,false, true) yield value\n       WITH value as form\n       WITH apoc.map.setKey(form,'until',timestamp()) as form\n       WITH apoc.map.setKey(form,'deleted',true) as form\n       MATCH (n)-[r{uuid:form.uuid}]-(a) \n       SET r.until=timestamp()\n       WITH form\n       CALL apoc.mongodb.delete('mongodb://mcbenner:mcbenner15@104.198.131.90:27017', 'realFlow', 'details',{uuid: $uuid}) YIELD value\n       WITH form\n       CALL apoc.mongodb.insert('mongodb://mcbenner:mcbenner15@104.198.131.90:27017', 'realFlow', 'details', [form])\n       RETURN 'ok' as response\n            `,{userID:i,clientDB:r,fabricDB:e,uuid:t}).then(t=>(n.close(),console.log(t.records[0].toObject()),t.records[0].toObject())).catch(t=>(n.close(),console.log(t),t))})(t)},onUpdate:function(t){const e=t.frontendUUID,n=t.parentUUID,r=this.parentUUID;return(({selfUUID:t,relationship:e,parentUUID:n,rootUUID:r,type:i,title:o,personas:s,fields:a})=>{let u="",c=cl.session({database:u});nn.subscribe(t=>{u=t,c=cl.session({database:u})});let l="";rn.subscribe(t=>l=t);let h="";return on.subscribe(t=>h=t),c.run(`USE ${u}.${l}\n    MATCH (v{uuid:$parentUUID})-[r{uuid:$selfUUID}]-(a)\n    DELETE r\n    WITH v, collect(r) as rels\n    CALL apoc.mongodb.delete('mongodb://mcbenner:mcbenner15@104.198.131.90:27017', 'realFlow', 'details',{uuid: $selfUUID}) YIELD value\n    WITH v\n    CALL apoc.mongodb.insert('mongodb://mcbenner:mcbenner15@104.198.131.90:27017', 'realFlow', 'details', [{uuid:$selfUUID,type:$type,rootUUID:$rootUUID,parentUUID:$parentUUID,title:$title,contents:$fields}]) \n    UNWIND $personas as persona\n    MATCH (t:Persona {uuid:persona.personaUUID})\n    CALL apoc.create.relationship(v,toUpper($relationship),{portion:apoc.number.parseFloat(persona.amount), unit:'absolute', since:timestamp(), uuid:$selfUUID},t) yield rel\n    RETURN rel \n    \n    \n        `,{clientDB:l,rootUUID:r,fabricDB:u,selfUUID:t,parentUUID:n,personas:s,type:i,relationship:e,title:o,fields:a}).then(t=>(c.close(),console.log("ok"),"ok")).catch(t=>(c.close(),console.log(t),t))})({rootUUID:this.rootUUID,selfUUID:e,otherUUID:n,parentUUID:r,fields:t.fields,title:this.title,relationship:"TAGS",type:t.type,personas:t.values?t.values.persona:[]})},onSubmit:function(t){const e=t.frontendUUID,n=t.parentUUID,r=this.parentUUID;return(({selfUUID:t,parentUUID:e,rootUUID:n,personas:r,type:i,title:o,fields:s})=>{let a="",u=cl.session({database:a});nn.subscribe(t=>{a=t,u=cl.session({database:a})});let c="";rn.subscribe(t=>c=t);let l="";return on.subscribe(t=>l=t),u.run(`USE ${a}.${c}\n\n    MATCH (value {uuid:$parentUUID})\n    CALL apoc.mongodb.insert('mongodb://mcbenner:mcbenner15@104.198.131.90:27017', 'realFlow', 'details', [{uuid:$selfUUID,type:$type,rootUUID:$rootUUID,parentUUID:$parentUUID, title:$title,contents:$fields}]) \n    WITH value\n    UNWIND $personas as persona\n    MATCH (p:Persona {uuid:persona.personaUUID})\n    WITH {portion:  apoc.number.parseFloat(persona.amount), unit:'absolute', since:timestamp(), uuid:$selfUUID} as details,p,value,persona\n    CALL apoc.create.relationship(value,toUpper(persona.tipo),details,p) yield rel\n    with collect(rel) as rels\n    RETURN rels\n    \n        `,{clientDB:c,fabricDB:a,selfUUID:t,parentUUID:e,rootUUID:n,personas:r,type:i,title:o,fields:s}).then(t=>(u.close(),console.log(t.records[0].toObject().rel),t.records[0].toObject().value)).catch(t=>(u.close(),console.log(t),t))})({rootUUID:this.rootUUID,selfUUID:e,otherUUID:n,parentUUID:r,fields:t.fields,title:this.title,type:t.type,personas:t.values?t.values.persona:[]})}},{id:3,text:"Atribuir Valor",intent:"Value",relationship:"COMES_FROM",title:"Valor",onDelete:function(t){return jb(t)},onUpdate:function(t){const e=t.frontendUUID,n=(t.parentUUID,this.rootUUID),r=this.parentUUID,i=t.fields,o=t.values,s=t.type;Lb({rootUUID:n,selfUUID:e,parentUUID:r,values:o,title:"Valor",type:s,fields:i}).then(()=>console.log("updated")).catch(t=>console.log("erro",t))},onSubmit:function(t){const e=this.rootUUID,n=t.frontendUUID,r=t.parentUUID,i=this.parentUUID,o=t.fields,s=t.values,a=t.type;return Pb({values:s,rootUUID:e,selfUUID:n,otherUUID:r,fields:o,title:"Valor",type:a,relationship:"COMES_FROM",parentUUID:i})}},{id:4,text:"Contabilizar Valor",intent:"Journal",relationship:"JOURNAL",title:"Contabilização",onDelete:function(t){return(t=>{let e="",n=cl.session({database:e});nn.subscribe(t=>{e=t,n=cl.session({database:e})});let r="";rn.subscribe(t=>r=t);let i="";return on.subscribe(t=>i=t),n.run(`USE ${e}.${r}\n       CALL apoc.mongodb.find('mongodb://mcbenner:mcbenner15@104.198.131.90:27017', 'realFlow', 'details', {uuid:$uuid},{_id:0},{},  false, 0,0,false, true) yield value\n\n       WITH value as form\n       WITH apoc.map.setKey(form,'until',timestamp()) as form\n       WITH apoc.map.setKey(form,'deleted',true) as form\n       \n       MATCH (n)-[r{uuid:form.uuid}]-(a) \n       SET r.until=timestamp()\n       WITH form\n       CALL apoc.mongodb.delete('mongodb://mcbenner:mcbenner15@104.198.131.90:27017', 'realFlow', 'details',{uuid: $uuid}) YIELD value\n       WITH form\n       CALL apoc.mongodb.insert('mongodb://mcbenner:mcbenner15@104.198.131.90:27017', 'realFlow', 'details', [form])\n       RETURN 'ok' as response\n            `,{userID:i,clientDB:r,fabricDB:e,uuid:t}).then(t=>(n.close(),console.log(t.records[0].toObject()),t.records[0].toObject())).catch(t=>(n.close(),console.log(t),t))})(t)},onUpdate:function(t){const e=t.frontendUUID,n=(t.parentUUID,this.parentUUID),r=this.rootUUID,i=t.fields,o=t.values,s=t.type,a=t.values?t.values.journal:[];return console.log(a),(({selfUUID:t,relationship:e,parentUUID:n,rootUUID:r,type:i,title:o,journals:s,fields:a})=>{let u="",c=cl.session({database:u});nn.subscribe(t=>{u=t,c=cl.session({database:u})});let l="";rn.subscribe(t=>l=t);let h="";return on.subscribe(t=>h=t),c.run(`USE ${u}.${l}\n      MATCH (v{uuid:$parentUUID})-[r{uuid:$selfUUID}]-(a)\n      DELETE r\n      WITH v, collect(r) as rels\n      CALL apoc.mongodb.delete('mongodb://mcbenner:mcbenner15@104.198.131.90:27017', 'realFlow', 'details',{uuid: $selfUUID}) YIELD value\n      WITH v\n    UNWIND $journals as journal\n    MATCH (account:Account {uuid:journal.account})\n    WITH {portion:  apoc.number.parseFloat(journal.amount), unit:'absolute', nature:journal.nature, since:timestamp(), uuid:$selfUUID} as details,account,v\n    CALL apoc.create.relationship(v,toUpper($relationship),details,account) yield rel\n    with collect(rel) as rels\n    CALL apoc.mongodb.insert('mongodb://mcbenner:mcbenner15@104.198.131.90:27017', 'realFlow', 'details', [{uuid:$selfUUID,type:$type,rootUUID:$rootUUID,parentUUID:$parentUUID, title:$title,contents:$fields}]) \n    \n    RETURN rels\n    \n        `,{clientDB:l,fabricDB:u,selfUUID:t,parentUUID:n,rootUUID:r,journals:s,type:i,relationship:e,title:o,fields:a}).then(t=>(c.close(),console.log(t.records[0].toObject().rel),t.records[0].toObject().value)).catch(t=>(c.close(),console.log(t),t))})({rootUUID:r,selfUUID:e,relationship:"JOURNAL",parentUUID:n,values:o,journals:a,type:s,title:"Contabilização",fields:i})},onSubmit:function(t){const e=t.frontendUUID,n=(t.parentUUID,this.parentUUID),r=this.rootUUID,i=t.fields,o=t.values,s=t.type,a=t.values?t.values.journal:[];return console.log(a),(({selfUUID:t,relationship:e,parentUUID:n,rootUUID:r,values:i,type:o,title:s,journals:a,fields:u})=>{let c="",l=cl.session({database:c});nn.subscribe(t=>{c=t,l=cl.session({database:c})});let h="";rn.subscribe(t=>h=t);let f="";return on.subscribe(t=>f=t),l.run(`USE ${c}.${h}\n\n    MATCH (value {uuid:$parentUUID})\n    CALL apoc.mongodb.insert('mongodb://mcbenner:mcbenner15@104.198.131.90:27017', 'realFlow', 'details', [{uuid:$selfUUID,type:$type,rootUUID:$rootUUID,parentUUID:$parentUUID, title:$title,contents:$fields}]) \n    WITH value\n    UNWIND $journals as journal\n    MATCH (account:Account {uuid:journal.account})\n    WITH {portion:  apoc.number.parseFloat(journal.amount), unit:'absolute', nature:journal.nature, since:timestamp(), uuid:$selfUUID} as details,account,value\n    CALL apoc.create.relationship(value,toUpper($relationship),details,account) yield rel\n    with collect(rel) as rels\n    RETURN rels\n    \n        `,{clientDB:h,fabricDB:c,selfUUID:t,parentUUID:n,rootUUID:r,journals:a,type:o,relationship:e,title:s,fields:u}).then(t=>(l.close(),console.log(t.records[0].toObject().rel),t.records[0].toObject().value)).catch(t=>(l.close(),console.log(t),t))})({rootUUID:r,selfUUID:e,relationship:"JOURNAL",parentUUID:n,values:o,journals:a,type:s,title:"Contabilização",fields:i})}},{id:5,text:"Atribuir Valor",intent:"Value",relationship:"COMES_FROM",title:"Valor",onDelete:function(t){return jb(t)},onUpdate:function(t){const e=t.frontendUUID,n=(t.parentUUID,this.rootUUID),r=this.parentUUID,i=t.fields,o=t.values,s=t.type;Lb({rootUUID:n,selfUUID:e,parentUUID:r,values:o,title:"Valor",type:s,fields:i}).then(()=>console.log("updated")).catch(t=>console.log("erro",t))},onSubmit:function(t){const e=this.rootUUID,n=t.frontendUUID,r=t.parentUUID,i=this.parentUUID,o=t.fields,s=t.values,a=t.type;return Pb({values:s,rootUUID:e,selfUUID:n,otherUUID:r,fields:o,title:"Valor",type:a,relationship:"COMES_FROM",parentUUID:i})}},{id:6,text:"Atribuir Natural",intent:"Natural",relationship:"COMES_FROM",title:"Atribuir Natural",onDelete:function(t){},onUpdate:function(t){t.frontendUUID,t.parentUUID,this.parentUUID,this.rootUUID,t.fields,t.values,t.type,t.values&&t.values.journal},onSubmit:function(t){const e=t.frontendUUID,n=t.parentUUID,r=this.parentUUID,i=this.rootUUID,o=t.fields,s=t.values,a=t.type;return console.log(t),(({rootUUID:t,selfUUID:e,otherUUID:n,relationship:r,parentUUID:i,values:o,type:s,title:a,fields:u})=>{let c="";nn.subscribe(t=>c=t);let l="";rn.subscribe(t=>l=t);let h="";on.subscribe(t=>h=t);const f=cl.session({database:c});return f.run(`   USE ${c}.${l}\n            WITH {\n                title: $values.title,\n                contents: $fields\n            }\n            as o\n            CREATE (n:Natural {created_at: TIMESTAMP(),uuid:$selfUUID, title:o.title})\n            WITH n, o   \n         \n            CALL \n            apoc.mongodb.insert('mongodb://mcbenner:mcbenner15@104.198.131.90:27017', 'realFlow', 'details', [{rootUUID:$rootUUID,title:$title,parentUUID:$parentUUID,uuid:n.uuid, type:$type,  contents:o.contents}])\n            WITH {\n                otherNode:$otherUUID,\n                relationship: $relationship, \n                selfNode:$selfUUID,\n                details: {since:timestamp(), uuid:$selfUUID}\n                } AS a,n\n                MATCH (self {uuid:a.selfNode}), (other {uuid:a.otherNode})\n                CALL apoc.create.relationship(other,toUpper(a.relationship),a.details,self) yield rel\n                RETURN rel \n            `,{clientDB:l,fabricDB:c,selfUUID:e,values:o,otherUUID:n,relationship:r,parentUUID:i,rootUUID:t,fields:u,title:a,type:s}).then(t=>(f.close(),t.records.entries)).catch(t=>(f.close(),console.log(t),t))})({rootUUID:i,selfUUID:e,relationship:"COMES_FORM",otherUUID:n,parentUUID:r,values:s,type:a,title:"Atribuir Natural",fields:o})}}],Vb=Ot();function Fb(t,e,n){const r=t.slice();return r[8]=e[n],r}function $b(t,e){let n,r,i,o,s,a,u,c,l,h,f=e[8].msg+"";function d(...t){return e[4](e[8],...t)}return{key:t,first:null,c(){n=k("li"),r=k("div"),i=S(f),o=x(),s=k("div"),a=x(),D(r,"class","content svelte-1ggskci"),D(s,"class","progress svelte-1ggskci"),U(s,"animation-duration",e[8].timeout+"ms"),D(n,"class","toast svelte-1ggskci"),U(n,"background",e[8].background),this.first=n},m(t,e){E(t,n,e),w(n,r),w(r,i),w(n,o),w(n,s),w(n,a),c=!0,l||(h=A(s,"animationend",d),l=!0)},p(t,r){e=t,(!c||1&r)&&f!==(f=e[8].msg+"")&&R(i,f),(!c||1&r)&&U(s,"animation-duration",e[8].timeout+"ms"),(!c||1&r)&&U(n,"background",e[8].background)},i(t){c||(u&&u.end(1),c=!0)},o(t){u=pt(n,Wb,{}),c=!1},d(t){t&&I(n),t&&u&&u.end(),l=!1,h()}}}function Bb(t){let e,n,r=[],i=new Map,o=t[0];const s=t=>t[8].id;for(let e=0;e<o.length;e+=1){let n=Fb(t,o,e),a=s(n);i.set(a,r[e]=$b(a,n))}return{c(){e=k("ul");for(let t=0;t<r.length;t+=1)r[t].c();D(e,"class","toasts svelte-1ggskci")},m(t,i){E(t,e,i);for(let t=0;t<r.length;t+=1)r[t].m(e,null);n=!0},p(t,[n]){if(3&n){const o=t[0];ut(),r=bt(r,n,s,1,t,o,i,e,gt,$b,null,Fb),ct()}},i(t){if(!n){for(let t=0;t<o.length;t+=1)lt(r[t]);n=!0}},o(t){for(let t=0;t<r.length;t+=1)ht(r[t]);n=!1},d(t){t&&I(e);for(let t=0;t<r.length;t+=1)r[t].d()}}}function Wb(t,{delay:e=0,duration:n=300}){return{delay:e,duration:n,css:t=>`opacity: ${1*(t-.5)}; transform-origin: top right; transform: scaleX(${1*(t-.5)});`}}function qb(t,e,n){let r,{themes:i={danger:"#bb2124",success:"#22bb33",warning:"#f0ad4e",info:"#5bc0de",default:"#aaaaaa"}}=e,{timeout:o=3e3}=e,s=0,a=[];var u;function c(t){n(0,a=a.filter(e=>e.id!=t))}r=Vb.subscribe(t=>{t&&(!function(t,e,r){const u=i[e]||i.default;n(0,a=[{id:s,msg:t,background:u,timeout:r||o,width:"100%"},...a]),s+=1}(t.message,t.type,t.timeout),Vb.set())}),u=r,W().$$.on_destroy.push(u);return t.$set=t=>{"themes"in t&&n(2,i=t.themes),"timeout"in t&&n(3,o=t.timeout)},[a,c,i,o,t=>c(t.id)]}class zb extends kt{constructor(t){super(),Tt(this,t,qb,Bb,s,{themes:2,timeout:3})}}function Hb(t,e="default",n){Vb.set({type:e,message:t,timeout:n})}function Gb(t,e){Hb(t,"danger",e)}function Yb(t,e){Hb(t,"info",e)}function Kb(t,e){Hb(t,"success",e)}function Xb(t,e,n){const r=t.slice();return r[23]=e[n],r}function Jb(e){let n,r;return n=new Ab({props:{parentUUID:e[3],rootUUID:e[3],actions:Mb,hideActions:e[13]}}),{c(){_t(n.$$.fragment)},m(t,e){wt(n,t,e),r=!0},p:t,i(t){r||(lt(n.$$.fragment,t),r=!0)},o(t){ht(n.$$.fragment,t),r=!1},d(t){Et(n,t)}}}function Zb(e){let n,r;return n=new Ub({props:{uuid:e[3],onDelete:e[14]}}),{c(){_t(n.$$.fragment)},m(t,e){wt(n,t,e),r=!0},p:t,i(t){r||(lt(n.$$.fragment,t),r=!0)},o(t){ht(n.$$.fragment,t),r=!1},d(t){Et(n,t)}}}function Qb(t){let e,n;function r(...e){return t[20](t[23],...e)}return e=new Ab({props:{parentUUID:t[23].frontendUUID,actions:Mb,rootUUID:t[3],hideActions:r}}),{c(){_t(e.$$.fragment)},m(t,r){wt(e,t,r),n=!0},p(n,i){t=n;const o={};4&i&&(o.parentUUID=t[23].frontendUUID),4&i&&(o.hideActions=r),e.$set(o)},i(t){n||(lt(e.$$.fragment,t),n=!0)},o(t){ht(e.$$.fragment,t),n=!1},d(t){Et(e,t)}}}function t_(t){let e,n;function r(...e){return t[21](t[23],...e)}return e=new Ub({props:{uuid:t[23].frontendUUID,onDelete:r}}),{c(){_t(e.$$.fragment)},m(t,r){wt(e,t,r),n=!0},p(n,i){t=n;const o={};4&i&&(o.uuid=t[23].frontendUUID),4&i&&(o.onDelete=r),e.$set(o)},i(t){n||(lt(e.$$.fragment,t),n=!0)},o(t){ht(e.$$.fragment,t),n=!1},d(t){Et(e,t)}}}function e_(t,e){let n,r,o,s,a,u,c,l,h,f,d,p,v,m,y,g,b=e[23].title+"";function _(...t){return e[15](e[23],...t)}function T(...t){return e[16](e[23],...t)}function O(...t){return e[17](e[23],...t)}function N(...t){return e[18](e[23],...t)}function C(...t){return e[19](e[23],...t)}u=new Ib({props:{type:e[23].type,onUpdate:T,onSubmit:O,parentUUID:e[23].parentUUID?e[23].parentUUID:e[3],uuid:e[23].frontendUUID,cancelFn:N,addForm:i_}});let U=!0===e[0][e[23].frontendUUID]&&Qb(e),P=!0===e[1][e[23].frontendUUID]&&t_(e);return{key:t,first:null,c(){n=k("div"),r=k("div"),o=S(b),s=x(),a=k("div"),_t(u.$$.fragment),c=x(),l=k("div"),l.textContent="⌘ Mais ações",h=x(),U&&U.c(),f=x(),P&&P.c(),d=x(),D(r,"class","item__title svelte-dhnag0"),D(a,"class","item__content svelte-dhnag0"),D(l,"class","item__footer svelte-dhnag0"),D(n,"class","item svelte-dhnag0"),this.first=n},m(t,e){E(t,n,e),w(n,r),w(r,o),w(n,s),w(n,a),wt(u,a,null),w(n,c),w(n,l),w(n,h),U&&U.m(n,null),w(n,f),P&&P.m(n,null),w(n,d),m=!0,y||(g=[A(r,"click",_),A(l,"click",C)],y=!0)},p(t,r){e=t,(!m||4&r)&&b!==(b=e[23].title+"")&&R(o,b);const i={};4&r&&(i.type=e[23].type),4&r&&(i.onUpdate=T),4&r&&(i.onSubmit=O),4&r&&(i.parentUUID=e[23].parentUUID?e[23].parentUUID:e[3]),4&r&&(i.uuid=e[23].frontendUUID),4&r&&(i.cancelFn=N),u.$set(i),!0===e[0][e[23].frontendUUID]?U?(U.p(e,r),5&r&&lt(U,1)):(U=Qb(e),U.c(),lt(U,1),U.m(n,f)):U&&(ut(),ht(U,1,1,()=>{U=null}),ct()),!0===e[1][e[23].frontendUUID]?P?(P.p(e,r),6&r&&lt(P,1)):(P=t_(e),P.c(),lt(P,1),P.m(n,d)):P&&(ut(),ht(P,1,1,()=>{P=null}),ct())},i(t){m||(lt(u.$$.fragment,t),lt(U),lt(P),Z(()=>{v&&v.end(1),p||(p=dt(n,Ze,{x:200,duration:700,delay:600})),p.start()}),m=!0)},o(t){ht(u.$$.fragment,t),ht(U),ht(P),p&&p.invalidate(),v=pt(n,Ze,{x:200,duration:700}),m=!1},d(t){t&&I(n),Et(u),U&&U.d(),P&&P.d(),t&&v&&v.end(),y=!1,i(g)}}}function n_(t){let e,n,r,o,s,a,u,c,l,h,f,d,v,m,y,g,b,_,T=[],S=new Map;n=new zb({}),c=new Ib({props:{type:"Natural",onSubmit:t[10],uuid:t[3],cancelFn:t[11],addForm:r_}});let O=!0===t[0][t[3]]&&Jb(t),N=!0===t[1][t[3]]&&Zb(t),R=t[2].forms;const C=t=>t[23].frontendUUID;for(let e=0;e<R.length;e+=1){let n=Xb(t,R,e),r=C(n);S.set(r,T[e]=e_(r,n))}return{c(){e=k("main"),_t(n.$$.fragment),r=x(),o=k("div"),s=k("div"),s.textContent="Lançamento Natural",a=x(),u=k("div"),_t(c.$$.fragment),l=x(),h=k("div"),h.textContent="⌘ Mais ações",f=x(),O&&O.c(),d=x(),N&&N.c(),m=x();for(let t=0;t<T.length;t+=1)T[t].c();D(s,"class","item__title svelte-dhnag0"),D(u,"class","item__content svelte-dhnag0"),D(h,"class","item__footer svelte-dhnag0"),D(o,"class","item svelte-dhnag0"),D(e,"class","svelte-dhnag0")},m(i,v){E(i,e,v),wt(n,e,null),w(e,r),w(e,o),w(o,s),w(o,a),w(o,u),wt(c,u,null),w(o,l),w(o,h),w(o,f),O&&O.m(o,null),w(o,d),N&&N.m(o,null),w(e,m);for(let t=0;t<T.length;t+=1)T[t].m(e,null);g=!0,b||(_=[A(s,"click",t[9]),A(h,"click",t[12]),p(y=t[7].call(null,e))],b=!0)},p(t,[n]){if(!0===t[0][t[3]]?O?(O.p(t,n),1&n&&lt(O,1)):(O=Jb(t),O.c(),lt(O,1),O.m(o,d)):O&&(ut(),ht(O,1,1,()=>{O=null}),ct()),!0===t[1][t[3]]?N?(N.p(t,n),2&n&&lt(N,1)):(N=Zb(t),N.c(),lt(N,1),N.m(o,null)):N&&(ut(),ht(N,1,1,()=>{N=null}),ct()),31&n){const r=t[2].forms;ut(),T=bt(T,n,C,1,t,r,S,e,gt,e_,null,Xb),ct()}},i(t){if(!g){lt(n.$$.fragment,t),lt(c.$$.fragment,t),lt(O),lt(N),v||Z(()=>{v=dt(o,Ze,{x:200,duration:700,delay:600}),v.start()});for(let t=0;t<R.length;t+=1)lt(T[t]);g=!0}},o(t){ht(n.$$.fragment,t),ht(c.$$.fragment,t),ht(O),ht(N);for(let t=0;t<T.length;t+=1)ht(T[t]);g=!1},d(t){t&&I(e),Et(n),Et(c),O&&O.d(),N&&N.d();for(let t=0;t<T.length;t+=1)T[t].d();b=!1,i(_)}}}const r_=()=>{},i_=()=>{};function o_(t,e,n){let r;c(t,Tb,t=>n(2,r=t));let i={},o={},{currentRoute:s}=e,a=s.namedParams.id;const u=t=>n(0,i[t]=!1,i),l=({fields:t,values:e,type:n,parentUUID:r})=>((t,e,n,r)=>{let i="";nn.subscribe(t=>i=t);let o="";rn.subscribe(t=>o=t);let s="";on.subscribe(t=>s=t);const a=cl.session({database:i});return a.run(`   USE ${i}.${o}\n            WITH {\n                title: $values.title,\n                amount: $values.amount,\n                contents: $fields\n            }\n            as o\n            CREATE (n {created_at: TIMESTAMP(),uuid:$uuid, title:o.title, amount:o.amount})\n            WITH n, o   \n            CALL apoc.create.addLabels([n], [$label]) yield node\n            WITH n, o\n            CALL \n            apoc.mongodb.insert('mongodb://mcbenner:mcbenner15@104.198.131.90:27017', 'realFlow', 'details', [{uuid:n.uuid, title:o.title, contents:o.contents}]) \n            return n\n            `,{userID:s,clientDB:o,fabricDB:i,fields:t,values:e,label:n,uuid:r}).then(t=>(a.close(),en.set(JSON.stringify(t)),t.records.entries)).catch(t=>(a.close(),console.log(t),t))})(t,e,n,a).then(()=>{Kb("Natural Criado")}).catch(t=>console.log("err created",t)),h=()=>{Ye("/"),Tb.reset()},f=async t=>{const e=(await(t=>{let e="";nn.subscribe(t=>e=t);let n="";rn.subscribe(t=>n=t);let r="";on.subscribe(t=>r=t);const i=cl.session({database:e});return i.run(`USE ${e}.${n}\n     CALL apoc.mongodb.find('mongodb://mcbenner:mcbenner15@104.198.131.90:27017', 'realFlow', 'details', {rootUUID:$naturalUUID},{_id:0},{},  false, 0,0,false, true) yield value\n     WHERE NOT exists (value.deleted)\n      return collect( DISTINCT value) as forms\n            `,{userID:r,clientDB:n,fabricDB:e,naturalUUID:t}).then(t=>(i.close(),console.log(t.records[0].toObject().forms),t.records[0].toObject().forms)).catch(t=>(i.close(),console.log(t),t))})(t)).map(t=>{const e=Mb.find(e=>e.intent===t.type)||{},n=()=>console.log("empty");return{...t,frontendUUID:t.uuid,onSubmit:e.onSubmit||n,onUpdate:e.onUpdate||n,onDelete:e.onDelete||n}});Tb.setForms(e),console.log(e)};q(()=>{f(a)});return t.$set=t=>{"currentRoute"in t&&n(8,s=t.currentRoute)},t.$$.update=()=>{256&t.$$.dirty&&console.log("[currentRoute]",s)},[i,o,r,a,u,l,h,t=>{const e=t;t.addEventListener("mousewheel",t=>{var n=Math.max(-1,Math.min(1,t.wheelDelta||-t.detail));e.scrollLeft-=80*n,t.preventDefault()},!1)},s,()=>n(1,o[a]=!o[a],o),t=>l(t).then(()=>{console.log("ok")}).catch(t=>console.log("error",t)),()=>h(),()=>n(0,i[a]=!i[a],i),()=>u(a),t=>(t=>{let e="",n=cl.session({database:e});nn.subscribe(t=>{e=t,n=cl.session({database:e})});let r="";rn.subscribe(t=>r=t);let i="";return on.subscribe(t=>i=t),n.run(`USE ${e}.${r}\n      MATCH (n:Natural{uuid:$naturalUUID})\n      SET n.until = timestamp()\n      WITH n\n      CALL apoc.mongodb.find('mongodb://mcbenner:mcbenner15@104.198.131.90:27017', 'realFlow', 'details', {rootUUID:$naturalUUID},{_id:0},{},  false, 0,0,false, true) yield value\n        OPTIONAL MATCH (n{uuid:value.uuid})\n        OPTIONAL MATCH ()-[r{uuid:value.uuid}]-()\n        SET n.until = timestamp()\n        SET r.until = timestamp()\n       RETURN properties(n), properties(r)\n            `,{naturalUUID:t,userID:i,clientDB:r,fabricDB:e}).then(t=>(n.close(),console.log(t.records[0].toObject()),t.records[0].toObject())).catch(t=>(n.close(),console.log(t),t))})(t).then(()=>{Yb("Deletado"),Ye("/")}).catch(t=>console.log("erro ao apagar")),t=>n(1,o[t.frontendUUID]=!o[t.frontendUUID],o),(t,{fields:e,values:n,type:r,parentUUID:i})=>t.onUpdate({fields:e,values:n,type:r,parentUUID:i,frontendUUID:t.frontendUUID}).then(e=>{console.log("ok",e),Kb(t.title+" Atualizado")}),(t,{fields:e,values:n,type:r,parentUUID:i})=>t.onSubmit({fields:e,values:n,type:r,parentUUID:i,frontendUUID:t.frontendUUID}).then(e=>{console.log("ok",e),Kb(t.title+" executado")}).catch(e=>Gb("Erro:"+t.title)),t=>Tb.removeForm(t.frontendUUID),t=>n(0,i[t.frontendUUID]=!i[t.frontendUUID],i),t=>u(t.frontendUUID),(t,e)=>t.onDelete(e).then(()=>{Tb.removeForm(t.frontendUUID),Yb("Deletado")}).catch(t=>console.log("erro ao apagar"))]}class s_ extends kt{constructor(t){super(),Tt(this,t,o_,n_,s,{currentRoute:8})}}function a_(t,e,n){const r=t.slice();return r[10]=e[n],r}function u_(t,e,n){const r=t.slice();return r[10]=e[n],r}function c_(t,e,n){const r=t.slice();return r[7]=e[n],r}function l_(t){let e,n,r,i,o=t[10].title+"",s=t[10].value+"";return{c(){e=k("div"),n=S(o),r=S(": "),i=S(s)},m(t,o){E(t,e,o),w(e,n),w(e,r),w(e,i)},p(t,e){1&e&&o!==(o=t[10].title+"")&&R(n,o),1&e&&s!==(s=t[10].value+"")&&R(i,s)},d(t){t&&I(e)}}}function h_(t){let e,n,r,i,o=t[10].title+"",s=t[10].value+"";return{c(){e=k("div"),n=S(o),r=S(": "),i=S(s)},m(t,o){E(t,e,o),w(e,n),w(e,r),w(e,i)},p(t,e){1&e&&o!==(o=t[10].title+"")&&R(n,o),1&e&&s!==(s=t[10].value+"")&&R(i,s)},d(t){t&&I(e)}}}function f_(t){let e,n,r,i,o,s,a,u,c,l,h,f,d,p,v,m,y,g,b,_,O,N,C,U,P,L=t[7].title+"",j=t[7].text+"",M=t[7].file+"",V=t[1].format(t[7].amount)+"",F=t[7].splitted?" de "+t[1].format(t[7].amountTotal):"",$=t[7]["journal.balanço"]+" | "+t[7]["journal.grupo"]+" | "+t[7]["journal.rubrica"],B=t[7]["journal.tags"].filter(p_),W=[];for(let e=0;e<B.length;e+=1)W[e]=l_(u_(t,B,e));let q=t[7]["journal.tags"].filter(v_),z=[];for(let e=0;e<q.length;e+=1)z[e]=h_(a_(t,q,e));function H(...e){return t[4](t[7],...e)}return{c(){e=k("div"),n=k("div"),r=S(L),i=x(),o=k("div"),s=S(j),a=x(),u=k("div"),c=S(M),l=x(),h=k("div"),f=S(V),d=x(),p=k("span"),v=S(F),m=x(),y=k("div"),g=S($),b=x(),_=k("div");for(let t=0;t<W.length;t+=1)W[t].c();O=x(),N=k("div");for(let t=0;t<z.length;t+=1)z[t].c();C=x(),D(n,"class","journal__title"),D(o,"class","journal__text"),D(u,"class","journal__file"),D(p,"class","tagAmount svelte-1injl19"),D(h,"class","journal__value"),D(y,"class","journal__accounting svelte-1injl19"),D(_,"class","journal__tags svelte-1injl19"),D(N,"class","journal__persona svelte-1injl19"),D(e,"class","natural-table__content svelte-1injl19")},m(t,I){E(t,e,I),w(e,n),w(n,r),w(e,i),w(e,o),w(o,s),w(e,a),w(e,u),w(u,c),w(e,l),w(e,h),w(h,f),w(h,d),w(h,p),w(p,v),w(e,m),w(e,y),w(y,g),w(e,b),w(e,_);for(let t=0;t<W.length;t+=1)W[t].m(_,null);w(e,O),w(e,N);for(let t=0;t<z.length;t+=1)z[t].m(N,null);w(e,C),U||(P=A(e,"click",H),U=!0)},p(e,n){if(t=e,1&n&&L!==(L=t[7].title+"")&&R(r,L),1&n&&j!==(j=t[7].text+"")&&R(s,j),1&n&&M!==(M=t[7].file+"")&&R(c,M),1&n&&V!==(V=t[1].format(t[7].amount)+"")&&R(f,V),1&n&&F!==(F=t[7].splitted?" de "+t[1].format(t[7].amountTotal):"")&&R(v,F),1&n&&$!==($=t[7]["journal.balanço"]+" | "+t[7]["journal.grupo"]+" | "+t[7]["journal.rubrica"])&&R(g,$),1&n){let e;for(B=t[7]["journal.tags"].filter(p_),e=0;e<B.length;e+=1){const r=u_(t,B,e);W[e]?W[e].p(r,n):(W[e]=l_(r),W[e].c(),W[e].m(_,null))}for(;e<W.length;e+=1)W[e].d(1);W.length=B.length}if(1&n){let e;for(q=t[7]["journal.tags"].filter(v_),e=0;e<q.length;e+=1){const r=a_(t,q,e);z[e]?z[e].p(r,n):(z[e]=h_(r),z[e].c(),z[e].m(N,null))}for(;e<z.length;e+=1)z[e].d(1);z.length=q.length}},d(t){t&&I(e),T(W,t),T(z,t),U=!1,P()}}}function d_(e){let n,r,i,o,s,a,u,c,l,h=e[0],f=[];for(let t=0;t<h.length;t+=1)f[t]=f_(c_(e,h,t));return{c(){n=k("main"),r=k("div"),i=k("button"),i.textContent="VOLTAR",o=x(),s=k("div"),a=k("div"),a.innerHTML='<div class="svelte-1injl19">Title</div> \n      <div class="svelte-1injl19">Description</div> \n      <div class="svelte-1injl19">Docs</div> \n      <div class="svelte-1injl19">Value</div> \n      <div class="svelte-1injl19">Accounting</div> \n      <div class="svelte-1injl19">Tags</div> \n      <div class="svelte-1injl19">Persona</div>',u=x();for(let t=0;t<f.length;t+=1)f[t].c();D(i,"class","svelte-1injl19"),D(r,"class","buttons svelte-1injl19"),D(a,"class","title svelte-1injl19"),D(s,"class","natural-table svelte-1injl19"),D(n,"class","svelte-1injl19")},m(t,h){E(t,n,h),w(n,r),w(r,i),w(n,o),w(n,s),w(s,a),w(s,u);for(let t=0;t<f.length;t+=1)f[t].m(s,null);c||(l=A(i,"click",e[3]),c=!0)},p(t,[e]){if(7&e){let n;for(h=t[0],n=0;n<h.length;n+=1){const r=c_(t,h,n);f[n]?f[n].p(r,e):(f[n]=f_(r),f[n].c(),f[n].m(s,null))}for(;n<f.length;n+=1)f[n].d(1);f.length=h.length}},i:t,o:t,d(t){t&&I(n),T(f,t),c=!1,l()}}}const p_=t=>!!t.value&&"Persona"!==t.title,v_=t=>!!t.value&&"Persona"==t.title;function m_(t,e,n){let r;c(t,fl,t=>n(5,r=t));let i=[];const o=new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"});q(()=>{(async()=>{console.log(r);const t=(r.data?r.data:[]).map(t=>{const e=t["journal.natural"].contents,n=e.find(t=>"title"===t.id)?e.find(t=>"title"===t.id).value:"",r=e.find(t=>"text"===t.id)?e.find(t=>"text"===t.id).value:"",i=e.find(t=>"file"===t.id)?e.find(t=>"file"===t.id).value:"";return{...t,title:n,text:r,file:i}});n(0,i=[...t]),console.log("[data]",i)})()});const s=t=>{console.log("editNatural",t),Ye(`natural/${t}/edit`)};return[i,o,s,()=>{Ye("/")},t=>s(t["journal.natural"].uuid)]}function y_(t,e,n){const r=t.slice();return r[9]=e[n],r}function g_(t,e,n){const r=t.slice();return r[9]=e[n],r}function b_(t,e,n){const r=t.slice();return r[14]=e[n],r}function __(t,e,n){const r=t.slice();return r[17]=e[n],r}function w_(t,e,n){const r=t.slice();return r[6]=e[n],r}function E_(t){let e,n,r,i,o,s,a,u,c,l,h,f,d,p,v=t[1].format(t[17].amount)+"",m=t[17]["Data de vencimento"]+"",y=t[17]["Data de competência"]+"",g=t[17].unit+"";return{c(){e=k("div"),n=S("| Valor:\r\n              "),r=k("strong"),i=S(v),o=S("\r\n              - Data de Vencimento :\r\n              "),s=k("strong"),a=S(m),u=S("\r\n              - Data de Competência :\r\n              "),c=k("strong"),l=S(y),h=S("\r\n              - Unidade :\r\n              "),f=k("strong"),d=S(g),p=S("\r\n              |\r\n            ")},m(t,v){E(t,e,v),w(e,n),w(e,r),w(r,i),w(e,o),w(e,s),w(s,a),w(e,u),w(e,c),w(c,l),w(e,h),w(e,f),w(f,d),w(e,p)},p(t,e){1&e&&v!==(v=t[1].format(t[17].amount)+"")&&R(i,v),1&e&&m!==(m=t[17]["Data de vencimento"]+"")&&R(a,m),1&e&&y!==(y=t[17]["Data de competência"]+"")&&R(l,y),1&e&&g!==(g=t[17].unit+"")&&R(d,g)},d(t){t&&I(e)}}}function I_(t){let e,n,r,i,o,s,a,u,c,l,h,f,d,p,v=t[1].format(t[14].journal.portion)+"",m=t[14].account+"",y=t[14].journal.nature+"";return{c(){e=k("div"),n=S("| Valor:\r\n              "),r=k("strong"),i=S(v),o=S("\r\n              Conta\r\n              "),s=k("strong"),a=S(":"),u=S(m),c=S(" -"),l=S("\r\n              Nat.:\r\n              "),h=k("strong"),f=S(y),d=S(" |"),p=x()},m(t,v){E(t,e,v),w(e,n),w(e,r),w(r,i),w(e,o),w(e,s),w(s,a),w(s,u),w(s,c),w(e,l),w(e,h),w(h,f),w(h,d),w(e,p)},p(t,e){1&e&&v!==(v=t[1].format(t[14].journal.portion)+"")&&R(i,v),1&e&&m!==(m=t[14].account+"")&&R(u,m),1&e&&y!==(y=t[14].journal.nature+"")&&R(f,y)},d(t){t&&I(e)}}}function T_(t){let e,n,r,i,o=t[9].tagGroup+"",s=t[9].tagName+"";return{c(){e=k("div"),n=S(o),r=S(": "),i=S(s)},m(t,o){E(t,e,o),w(e,n),w(e,r),w(e,i)},p(t,e){1&e&&o!==(o=t[9].tagGroup+"")&&R(n,o),1&e&&s!==(s=t[9].tagName+"")&&R(i,s)},d(t){t&&I(e)}}}function k_(t){let e,n,r,i,o,s=t[9].name+"";return{c(){e=k("div"),n=S("Persona:\r\n              "),r=k("strong"),i=S(s),o=x()},m(t,s){E(t,e,s),w(e,n),w(e,r),w(r,i),w(e,o)},p(t,e){1&e&&s!==(s=t[9].name+"")&&R(i,s)},d(t){t&&I(e)}}}function S_(t){let e,n,r,i,o,s,a,u,c,l,h,f,d,p,v,m,y=t[6].title+"",g=t[6].values.filter(O_),b=[];for(let e=0;e<g.length;e+=1)b[e]=E_(__(t,g,e));let _=t[6].journals.filter(A_),O=[];for(let e=0;e<_.length;e+=1)O[e]=I_(b_(t,_,e));let N=t[6].tags.filter(N_),C=[];for(let e=0;e<N.length;e+=1)C[e]=T_(g_(t,N,e));let U=t[6].personas.filter(D_),P=[];for(let e=0;e<U.length;e+=1)P[e]=k_(y_(t,U,e));function L(...e){return t[4](t[6],...e)}return{c(){e=k("div"),n=k("div"),r=S(y),i=x(),o=k("div"),o.textContent="",s=x(),a=k("div");for(let t=0;t<b.length;t+=1)b[t].c();u=x(),c=k("div");for(let t=0;t<O.length;t+=1)O[t].c();l=x(),h=k("div");for(let t=0;t<C.length;t+=1)C[t].c();f=x(),d=k("div");for(let t=0;t<P.length;t+=1)P[t].c();p=x(),D(n,"class","journal__title"),D(o,"class","journal__text"),D(a,"class","journal__value svelte-1fzwdga"),D(c,"class","journal__accounting svelte-1fzwdga"),D(h,"class","journal__tags svelte-1fzwdga"),D(d,"class","journal__persona svelte-1fzwdga"),D(e,"class","natural-table__content svelte-1fzwdga")},m(t,y){E(t,e,y),w(e,n),w(n,r),w(e,i),w(e,o),w(e,s),w(e,a);for(let t=0;t<b.length;t+=1)b[t].m(a,null);w(e,u),w(e,c);for(let t=0;t<O.length;t+=1)O[t].m(c,null);w(e,l),w(e,h);for(let t=0;t<C.length;t+=1)C[t].m(h,null);w(e,f),w(e,d);for(let t=0;t<P.length;t+=1)P[t].m(d,null);w(e,p),v||(m=A(e,"click",L),v=!0)},p(e,n){if(t=e,1&n&&y!==(y=t[6].title+"")&&R(r,y),3&n){let e;for(g=t[6].values.filter(O_),e=0;e<g.length;e+=1){const r=__(t,g,e);b[e]?b[e].p(r,n):(b[e]=E_(r),b[e].c(),b[e].m(a,null))}for(;e<b.length;e+=1)b[e].d(1);b.length=g.length}if(3&n){let e;for(_=t[6].journals.filter(A_),e=0;e<_.length;e+=1){const r=b_(t,_,e);O[e]?O[e].p(r,n):(O[e]=I_(r),O[e].c(),O[e].m(c,null))}for(;e<O.length;e+=1)O[e].d(1);O.length=_.length}if(1&n){let e;for(N=t[6].tags.filter(N_),e=0;e<N.length;e+=1){const r=g_(t,N,e);C[e]?C[e].p(r,n):(C[e]=T_(r),C[e].c(),C[e].m(h,null))}for(;e<C.length;e+=1)C[e].d(1);C.length=N.length}if(1&n){let e;for(U=t[6].personas.filter(D_),e=0;e<U.length;e+=1){const r=y_(t,U,e);P[e]?P[e].p(r,n):(P[e]=k_(r),P[e].c(),P[e].m(d,null))}for(;e<P.length;e+=1)P[e].d(1);P.length=U.length}},d(t){t&&I(e),T(b,t),T(O,t),T(C,t),T(P,t),v=!1,m()}}}function x_(e){let n,r,i,o,s,a,u,c,l,h=e[0],f=[];for(let t=0;t<h.length;t+=1)f[t]=S_(w_(e,h,t));return{c(){n=k("main"),r=k("div"),i=k("button"),i.textContent="VOLTAR",o=x(),s=k("div"),a=k("div"),a.innerHTML='<div class="svelte-1fzwdga">Title</div> \n      <div class="svelte-1fzwdga">Description</div> \n      <div class="svelte-1fzwdga">Value</div> \n      <div class="svelte-1fzwdga">Accounting</div> \n      <div class="svelte-1fzwdga">Tags</div> \n      <div class="svelte-1fzwdga">Persona</div>',u=x();for(let t=0;t<f.length;t+=1)f[t].c();D(i,"class","svelte-1fzwdga"),D(r,"class","buttons svelte-1fzwdga"),D(a,"class","title svelte-1fzwdga"),D(s,"class","natural-table svelte-1fzwdga"),D(n,"class","svelte-1fzwdga")},m(t,h){E(t,n,h),w(n,r),w(r,i),w(n,o),w(n,s),w(s,a),w(s,u);for(let t=0;t<f.length;t+=1)f[t].m(s,null);c||(l=A(i,"click",e[3]),c=!0)},p(t,[e]){if(7&e){let n;for(h=t[0],n=0;n<h.length;n+=1){const r=w_(t,h,n);f[n]?f[n].p(r,e):(f[n]=S_(r),f[n].c(),f[n].m(s,null))}for(;n<f.length;n+=1)f[n].d(1);f.length=h.length}},i:t,o:t,d(t){t&&I(n),T(f,t),c=!1,l()}}}const O_=t=>!!t,A_=t=>!!t.journal,N_=t=>!!t,D_=t=>!!t;function R_(t,e,n){let r=[];const i=new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}),o=async()=>{const t=await(()=>{let t="";nn.subscribe(e=>t=e);let e="";rn.subscribe(t=>e=t);let n="";on.subscribe(t=>n=t);const r=cl.session({database:t});return r.run(` USE ${t}.${e}\n      MATCH (n:Natural)\n      WHERE NOT EXISTS(n.until)\nOPTIONAL MATCH (v:Value)<-[:COMES_FROM]-(n)\nOPTIONAL MATCH (a:Account)<-[jour:JOURNAL]-(v)\nOPTIONAL MATCH (v)-[tags:TAGS]->(t:Tag)\nOPTIONAL MATCH (v)-[valueR]->(p:Persona)\nOPTIONAL MATCH (v)<-[:COMES_FROM]-(n:Natural)\nWITH {natural:properties(n),values:collect(DISTINCT properties( v)), accounts:collect(DISTINCT properties(a)), journals:collect(DISTINCT {journal:properties(jour), account:a.rubrica}),tags:collect(DISTINCT properties(t)), personas:collect(DISTINCT properties(p))} as natural ,n\nWITH natural order by n.created_at DESC\nreturn collect(natural) as natural`,{userID:n,clientDB:e,fabricDB:t}).then(t=>{r.close();const e=t.records.map(t=>t.toObject().natural);return console.log(e[0]),e[0]}).catch(t=>(r.close(),console.log(t),[]))})();console.log(t);const e=t.map(t=>{const e=t.natural;return{...t,title:e.title}});n(0,r=[...e]),console.log("[data]",r)};q(()=>{o()});const s=t=>{console.log("editNatural",t),Ye(`natural/${t}/edit`)};return[r,i,s,()=>{Ye("/")},t=>s(t.natural.uuid)]}function C_(t){let e,n,r,i,o,s,a;return e=new zb({}),s=new Ib({props:{type:"NovaPersona",onSubmit:t[2],uuid:t[1],cancelFn:t[0],addForm:U_}}),{c(){_t(e.$$.fragment),n=x(),r=k("main"),i=k("h1"),i.textContent="Cadastro de Persona",o=x(),_t(s.$$.fragment),D(r,"class","svelte-8r5pjh")},m(t,u){wt(e,t,u),E(t,n,u),E(t,r,u),w(r,i),w(r,o),wt(s,r,null),a=!0},p(t,[e]){const n={};1&e&&(n.onSubmit=t[2]),2&e&&(n.uuid=t[1]),1&e&&(n.cancelFn=t[0]),s.$set(n)},i(t){a||(lt(e.$$.fragment,t),lt(s.$$.fragment,t),a=!0)},o(t){ht(e.$$.fragment,t),ht(s.$$.fragment,t),a=!1},d(t){Et(e,t),t&&I(n),t&&I(r),Et(s)}}}const U_=()=>{};function P_(t,e,n){let{hidePersona:r}=e,i="";q(()=>{n(1,i=fn())});return t.$set=t=>{"hidePersona"in t&&n(0,r=t.hidePersona)},[r,i,t=>{const e={...t.values},n={...t.fields};(({name:t,taxId:e,uuid:n,desc:r,fields:i})=>{let o="";nn.subscribe(t=>o=t);let s="";rn.subscribe(t=>s=t);let a="";on.subscribe(t=>a=t);const u=cl.session({database:o});return u.run(`   USE ${o}.${s}\n      WITH {fields: $fields, uuid:$uuid} as o\n            CREATE (n:Persona {created_at: TIMESTAMP(),name:$name,taxId: $taxId, uuid:$uuid, desc:$desc})\n            WITH o,n\n            CALL apoc.mongodb.insert('mongodb://mcbenner:mcbenner15@104.198.131.90:27017', 'realFlow', 'details', [{uuid:o.uuid, contents:o.fields}]) \n            return n\n            `,{userID:a,clientDB:s,fabricDB:o,name:t,taxId:e,uuid:n,desc:r,fields:i}).then(t=>(u.close(),en.set(JSON.stringify(t)),t.records.entries)).catch(t=>(u.close(),console.log(t),t))})({...e,uuid:fn(),fields:n}).then(()=>{Kb("Persona Criada"),r()}).catch(()=>{(void 0)("Erro!")})}]}class L_ extends kt{constructor(t){super(),Tt(this,t,P_,C_,s,{hidePersona:0})}}function j_(t){let e,n,r,i,o,s,a;return e=new zb({}),s=new Ib({props:{type:"NovaTag",onSubmit:t[2],uuid:t[1],cancelFn:t[0],addForm:M_}}),{c(){_t(e.$$.fragment),n=x(),r=k("main"),i=k("h1"),i.textContent="Cadastro de Tags",o=x(),_t(s.$$.fragment),D(r,"class","svelte-8r5pjh")},m(t,u){wt(e,t,u),E(t,n,u),E(t,r,u),w(r,i),w(r,o),wt(s,r,null),a=!0},p(t,[e]){const n={};1&e&&(n.onSubmit=t[2]),2&e&&(n.uuid=t[1]),1&e&&(n.cancelFn=t[0]),s.$set(n)},i(t){a||(lt(e.$$.fragment,t),lt(s.$$.fragment,t),a=!0)},o(t){ht(e.$$.fragment,t),ht(s.$$.fragment,t),a=!1},d(t){Et(e,t),t&&I(n),t&&I(r),Et(s)}}}const M_=()=>{};function V_(t,e,n){let{hideTag:r}=e,i="";q(()=>{n(1,i=fn())});return t.$set=t=>{"hideTag"in t&&n(0,r=t.hideTag)},[r,i,t=>(({tagName:t,tagGroup:e})=>{let n="";nn.subscribe(t=>n=t);let r="";rn.subscribe(t=>r=t);let i="";on.subscribe(t=>i=t);const o=cl.session({database:n});return o.run(`   USE ${n}.${r}\n            CREATE (n:Tag {created_at: TIMESTAMP(),tagName:$tagName,tagGroup: $tagGroup})\n            return n\n            `,{userID:i,clientDB:r,fabricDB:n,tagName:t,tagGroup:e}).then(t=>(o.close(),en.set(JSON.stringify(t)),t.records.entries)).catch(t=>(o.close(),console.log(t),t))})({...t.values}).then(()=>{Kb("Tag Criada"),setTimeout(()=>r(),1500)}).catch(t=>{(void 0)("Erro!")})]}class F_ extends kt{constructor(t){super(),Tt(this,t,V_,j_,s,{hideTag:0})}}function $_(e){let n,r;return n=new L_({props:{hidePersona:e[4]}}),{c(){_t(n.$$.fragment)},m(t,e){wt(n,t,e),r=!0},p:t,i(t){r||(lt(n.$$.fragment,t),r=!0)},o(t){ht(n.$$.fragment,t),r=!1},d(t){Et(n,t)}}}function B_(e){let n,r;return n=new F_({props:{hideTag:e[5]}}),{c(){_t(n.$$.fragment)},m(t,e){wt(n,t,e),r=!0},p:t,i(t){r||(lt(n.$$.fragment,t),r=!0)},o(t){ht(n.$$.fragment,t),r=!1},d(t){Et(n,t)}}}function W_(t){let e,n,r,o,s,a,u,c,l,h,f,d,p,v,m,y,g,b,_,T;a=new Ke({props:{currentRoute:t[0],params:t[3]}});let S=t[1]&&$_(t),O=t[2]&&B_(t);return{c(){e=k("div"),n=k("div"),n.textContent="Contabilidade Inteligente",s=x(),_t(a.$$.fragment),u=x(),c=k("div"),l=k("button"),l.textContent="Ver Naturals",h=x(),f=k("button"),f.textContent="Ver Balanço",d=x(),p=k("button"),p.textContent="Nova Persona",v=x(),m=k("button"),m.textContent="Nova Tag",y=x(),S&&S.c(),g=x(),O&&O.c(),D(n,"class","title svelte-1fddi9b"),D(l,"class","svelte-1fddi9b"),D(f,"class","svelte-1fddi9b"),D(p,"class","svelte-1fddi9b"),D(m,"class","svelte-1fddi9b"),D(c,"class","btn__float svelte-1fddi9b"),D(e,"class","app svelte-1fddi9b")},m(r,i){E(r,e,i),w(e,n),w(e,s),wt(a,e,null),w(e,u),w(e,c),w(c,l),w(c,h),w(c,f),w(c,d),w(c,p),w(c,v),w(c,m),w(e,y),S&&S.m(e,null),w(e,g),O&&O.m(e,null),b=!0,_||(T=[A(l,"click",t[6]),A(f,"click",t[7]),A(p,"click",t[8]),A(m,"click",t[9])],_=!0)},p(t,[n]){const r={};1&n&&(r.currentRoute=t[0]),a.$set(r),t[1]?S?(S.p(t,n),2&n&&lt(S,1)):(S=$_(t),S.c(),lt(S,1),S.m(e,g)):S&&(ut(),ht(S,1,1,()=>{S=null}),ct()),t[2]?O?(O.p(t,n),4&n&&lt(O,1)):(O=B_(t),O.c(),lt(O,1),O.m(e,null)):O&&(ut(),ht(O,1,1,()=>{O=null}),ct())},i(t){b||(Z(()=>{o&&o.end(1),r||(r=dt(n,Ze,{x:200,duration:300})),r.start()}),lt(a.$$.fragment,t),lt(S),lt(O),b=!0)},o(t){r&&r.invalidate(),o=pt(n,Ze,{x:-200,duration:300}),ht(a.$$.fragment,t),ht(S),ht(O),b=!1},d(t){t&&I(e),t&&o&&o.end(),Et(a),S&&S.d(),O&&O.d(),_=!1,i(T)}}}function q_(t,e,n){let{currentRoute:r}=e;let i=!1,o=!1;return t.$set=t=>{"currentRoute"in t&&n(0,r=t.currentRoute)},[r,i,o,{},()=>{n(1,i=!1)},()=>{n(2,o=!1)},()=>Ye("natural-with-all/"),()=>Ye("/"),()=>{n(1,i=!i)},()=>{n(2,o=!o)}]}class z_ extends kt{constructor(t){super(),Tt(this,t,q_,W_,s,{currentRoute:0})}}const H_=[{name:"/",component:class extends kt{constructor(t){super(),Tt(this,t,Dl,Nl,s,{},[-1,-1])}},layout:z_},{name:"drilldown/:id",component:class extends kt{constructor(t){super(),Tt(this,t,m_,d_,s,{})}},layout:z_},{name:"natural-with-all/",component:class extends kt{constructor(t){super(),Tt(this,t,R_,x_,s,{})}},nestedRoutes:[{name:"/:action",component:s_}],layout:z_},{name:"natural/:id",component:s_,nestedRoutes:[{name:"/:action",component:s_}],layout:z_}];function G_(e){let n,r;return n=new Xe({props:{routes:H_}}),{c(){_t(n.$$.fragment)},m(t,e){wt(n,t,e),r=!0},p:t,i(t){r||(lt(n.$$.fragment,t),r=!0)},o(t){ht(n.$$.fragment,t),r=!1},d(t){Et(n,t)}}}return new class extends kt{constructor(t){super(),Tt(this,t,null,G_,s,{})}}({target:document.body,props:{}})}();
//# sourceMappingURL=bundle.js.map
